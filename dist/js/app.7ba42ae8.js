(function(){"use strict";var e={2693:function(e,t,s){var o=s(5130),a=s(6768);function r(e,t,s,o,r,l){const i=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",null,[((0,a.uX)(),(0,a.Wv)((0,a.$y)(l.layoutComponent),null,{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1}))])}var l=s(4232),i=s.p+"img/fitfood_logo.489e1b18.png";const n={class:"flex h-screen"},d={class:"p-4 flex justify-between items-center"},c={class:"flex items-center space-x-2"},u={key:0,src:i,alt:"Logo",class:"w-10 h-10 rounded-full shadow-md"},p={key:1,class:"text-black text-[16px] font-bold"},h={key:2,class:"text-[16px] font-bold"},g={key:0,class:"material-symbols-outlined text-3xl"},m={key:1,class:"material-symbols-outlined text-3xl"},y={class:"flex-1 font-bold"},k={class:"hover:bg-custom-orange-hover"},f={key:0},b={class:"hover:bg-custom-orange-hover"},x={key:0},_={class:"hover:bg-custom-orange-hover"},w={key:0},v={class:"hover:bg-custom-orange-hover"},L={key:0},D={class:"hover:bg-custom-orange-hover"},P={key:0},C={class:"hover:bg-custom-orange-hover"},S={key:0,class:"text-sm"},R={class:"hover:bg-custom-orange-hover"},T={key:0},M={class:"hover:bg-custom-orange-hover"},E={key:0},F={class:"hover:bg-custom-orange-hover"},z={key:0},A={key:0,class:"relative"},O={class:"space-y-2 px-4 font-normal"},N={class:"hover:bg-custom-orange-hover"},X={key:0},V={class:"hover:bg-custom-orange-hover"},Q={key:0},I={class:"hover:bg-custom-orange-hover"},U={key:0},$={class:"hover:bg-custom-orange-hover"},B={key:0},W={key:0,class:"flex items-center justify-between p-4 relative mt-auto"},q={class:"flex items-center space-x-2"},Z=["src"],j={key:1,class:"uppercase"},J={key:0,class:"flex flex-col items-start"},K={class:"text-white ml-2 cursor-default"},H={class:"flex items-center justify-center"},Y={class:"flex-1 p-4 bg-gray-100 relative"},G={class:"bg-white p-4 shadow-md fixed top-0 left-0 right-0 z-10 flex justify-between items-center flex-shrink-0"},ee={class:"flex items-center space-x-3"},te={class:"material-symbols-outlined text-gray-600 text-3xl"},se={class:"text-xl text-gray-600 font-bold"},oe={key:0,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},ae={key:1,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},re={key:2,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},le={key:3,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},ie={key:4,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},ne={key:5,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},de={key:6,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},ce={key:7,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},ue={key:8,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},pe={key:9,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},he={key:10,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},ge={key:11,class:"mt-4 p-4 flex items-left space-x-6 text-m font-bold"},me={class:"mt-4"};function ye(e,t,s,r,i,ye){const ke=(0,a.g2)("router-link"),fe=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("aside",{style:(0,l.Tr)({width:i.isExpanded?"300px":"64px"}),class:"bg-custom-orange text-white flex flex-col transition-all duration-300"},[(0,a.Lk)("div",d,[(0,a.Lk)("div",c,[i.isExpanded?((0,a.uX)(),(0,a.CE)("img",u)):(0,a.Q3)("",!0),i.isExpanded?((0,a.uX)(),(0,a.CE)("h2",p,"ABSOLUTE")):(0,a.Q3)("",!0),i.isExpanded?((0,a.uX)(),(0,a.CE)("h2",h,"FITFOOD")):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>ye.toggleSidebar&&ye.toggleSidebar(...e)),class:"text-white focus:outline-none"},[i.isExpanded?((0,a.uX)(),(0,a.CE)("span",g,"menu_open")):((0,a.uX)(),(0,a.CE)("span",m,"menu"))])]),(0,a.Lk)("nav",y,[(0,a.Lk)("ul",null,[(0,a.Lk)("li",k,[(0,a.bF)(ke,{to:"/master",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[5]||(t[5]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"home",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",f,"หน้าแรก")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",b,[(0,a.bF)(ke,{to:"/customers",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[6]||(t[6]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"groups",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",x,"ข้อมูลลูกค้า")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",_,[(0,a.bF)(ke,{to:"/sale-records",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[7]||(t[7]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"contact_page",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",w,"บันทึกการขาย")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",v,[(0,a.bF)(ke,{to:"/daily-sale",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[8]||(t[8]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"calendar_month",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",L,"ยอดขายประจำวัน")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",D,[(0,a.bF)(ke,{to:"/setup-menu-ph",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[9]||(t[9]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"menu_book",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",P,"Setup Menus")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",C,[(0,a.bF)(ke,{to:"/result-orders",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[10]||(t[10]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"receipt_long",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",S,"รายการอาหารประจำวันของลูกค้า")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",R,[(0,a.bF)(ke,{to:"/kitchen-orders",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[11]||(t[11]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"stockpot",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",T,"Kitchen Orders")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",M,[(0,a.bF)(ke,{to:"/delivery",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[12]||(t[12]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"delivery_truck_speed",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",E,"การจัดส่งอาหารประจำวัน")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",F,[(0,a.bF)(ke,{to:"/remaining-packages",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[13]||(t[13]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"deployed_code_history",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",z,"แพ็คเกจคงเหลือของลูกค้า")):(0,a.Q3)("",!0)])),_:1})]),i.isExpanded?((0,a.uX)(),(0,a.CE)("li",A,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>ye.toggleSubMenu&&ye.toggleSubMenu(...e)),class:"py-2 px-4 flex items-center space-x-2 w-full text-left"},t[14]||(t[14]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"folder",-1),(0,a.Lk)("span",null,"ข้อมูลทั้งหมด",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"expand_more",-1)])),(0,a.bo)((0,a.Lk)("ul",O,[(0,a.Lk)("li",N,[(0,a.bF)(ke,{to:"/packages",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[i.isExpanded?((0,a.uX)(),(0,a.CE)("span",X,"ข้อมูลแพ็คเกจ")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",V,[(0,a.bF)(ke,{to:"/zone-deliveries",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[i.isExpanded?((0,a.uX)(),(0,a.CE)("span",Q,"ข้อมูลโซนการจัดส่ง")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",I,[(0,a.bF)(ke,{to:"/menus",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[i.isExpanded?((0,a.uX)(),(0,a.CE)("span",U,"ข้อมูลเมนู")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",$,[(0,a.bF)(ke,{to:"/users",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[i.isExpanded?((0,a.uX)(),(0,a.CE)("span",B,"ข้อมูลผู้ใช้งาน")):(0,a.Q3)("",!0)])),_:1})])],512),[[o.aG,i.isSubMenuOpen]])])):(0,a.Q3)("",!0)])]),i.isLoggedIn?((0,a.uX)(),(0,a.CE)("div",W,[(0,a.Lk)("div",q,[(0,a.Lk)("div",{class:"relative w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center text-white text-lg font-bold flex-shrink-0 cursor-pointer",onClick:t[2]||(t[2]=(...e)=>ye.goToProfile&&ye.goToProfile(...e))},[i.userProfileImage?((0,a.uX)(),(0,a.CE)("img",{key:0,src:i.userProfileImage,alt:"User Profile",class:"w-full h-full rounded-full object-cover border-2 border-white"},null,8,Z)):((0,a.uX)(),(0,a.CE)("span",j,(0,l.v_)(i.username.charAt(0)),1))]),i.isExpanded?((0,a.uX)(),(0,a.CE)("div",J,[(0,a.Lk)("strong",K,(0,l.v_)(i.username),1),(0,a.Lk)("p",{class:"text-white text-sm ml-2 hover:underline cursor-pointer",onClick:t[3]||(t[3]=(...e)=>ye.goToProfile&&ye.goToProfile(...e))},"View Profile")])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",H,[(0,a.Lk)("div",{class:"px-4 py-3 cursor-pointer hover:text-red-500 flex items-center",onClick:t[4]||(t[4]=(...e)=>ye.logout&&ye.logout(...e))},t[15]||(t[15]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"}," logout ",-1)]))])])):(0,a.Q3)("",!0)],4),(0,a.Lk)("main",Y,[(0,a.Lk)("header",G,[(0,a.Lk)("div",ee,[(0,a.Lk)("span",te,(0,l.v_)(i.pageIcon),1),(0,a.Lk)("h1",se,(0,l.v_)(i.pageTitle),1)])]),"/master"===e.$route.path||"/master-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",oe,[(0,a.bF)(ke,{to:"master",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/master"===e.$route.path}])},{default:(0,a.k6)((()=>t[16]||(t[16]=[(0,a.eW)(" Absolute FitFood ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/master-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/master-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[17]||(t[17]=[(0,a.eW)(" Happy Healthy Box ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/customers"===e.$route.path||"/customers-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",ae,[(0,a.bF)(ke,{to:"customers",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/customers"===e.$route.path}])},{default:(0,a.k6)((()=>t[18]||(t[18]=[(0,a.eW)(" Absolute FitFood ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/customers-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/customers-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[19]||(t[19]=[(0,a.eW)(" Happy Healthy Box ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/sale-records"===e.$route.path||"/sale-records-hhb"===e.$route.path||"/sale-records-additional"===e.$route.path||"/sale-records-additional-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",re,[(0,a.bF)(ke,{to:"sale-records",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records"===e.$route.path||"/sale-records-additional"===e.$route.path}])},{default:(0,a.k6)((()=>t[20]||(t[20]=[(0,a.eW)(" Absolute FitFood ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/sale-records-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/sale-records-hhb"===e.$route.path||"/sale-records-additional-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[21]||(t[21]=[(0,a.eW)(" Happy Healthy Box ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/packages"===e.$route.path||"/programs"===e.$route.path||"/promotion-types"===e.$route.path||"/package-types"===e.$route.path||"/additional-types"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",le,[(0,a.bF)(ke,{to:"packages",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/packages"===e.$route.path}])},{default:(0,a.k6)((()=>t[22]||(t[22]=[(0,a.eW)(" ข้อมูล Package ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/programs",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/programs"===e.$route.path}])},{default:(0,a.k6)((()=>t[23]||(t[23]=[(0,a.eW)(" ข้อมูล Program ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/promotion-types",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/promotion-types"===e.$route.path}])},{default:(0,a.k6)((()=>t[24]||(t[24]=[(0,a.eW)(" ข้อมูล Promotion Types ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/package-types",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/package-types"===e.$route.path}])},{default:(0,a.k6)((()=>t[25]||(t[25]=[(0,a.eW)(" ข้อมูล Package Types ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/additional-types",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/additional-types"===e.$route.path}])},{default:(0,a.k6)((()=>t[26]||(t[26]=[(0,a.eW)(" ข้อมูล Sales Type (Additional Sales) ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/zone-deliveries"===e.$route.path||"/zone-delivery-types"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",ie,[(0,a.bF)(ke,{to:"/zone-deliveries",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/zone-deliveries"===e.$route.path}])},{default:(0,a.k6)((()=>t[27]||(t[27]=[(0,a.eW)(" ข้อมูลโซนการจัดส่ง ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/zone-delivery-types",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/zone-delivery-types"===e.$route.path}])},{default:(0,a.k6)((()=>t[28]||(t[28]=[(0,a.eW)(" ข้อมูลประเภทโซนการจัดส่ง ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/menus"===e.$route.path||"/meal-types"===e.$route.path||"/menu-types"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",ne,[(0,a.bF)(ke,{to:"menus",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/menus"===e.$route.path}])},{default:(0,a.k6)((()=>t[29]||(t[29]=[(0,a.eW)(" ข้อมูลเมนู ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/meal-types",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/meal-types"===e.$route.path}])},{default:(0,a.k6)((()=>t[30]||(t[30]=[(0,a.eW)(" ข้อมูลประเภทเมนู ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/menu-types",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/menu-types"===e.$route.path}])},{default:(0,a.k6)((()=>t[31]||(t[31]=[(0,a.eW)(" ข้อมูลประเภทโปรแกรมเมนู ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/setup-menu-ph"===e.$route.path||"/setup-menu-hhb"===e.$route.path||"/setup-menu-lc"===e.$route.path||"/setup-menu-fl"===e.$route.path||"/setup-menu-bpd"===e.$route.path||"/setup-menu-diabete"===e.$route.path||"/setup-menu-fat-disease"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",de,[(0,a.bF)(ke,{to:"/setup-menu-ph",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-ph"===e.$route.path}])},{default:(0,a.k6)((()=>t[32]||(t[32]=[(0,a.eW)(" Premeium Health ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/setup-menu-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[33]||(t[33]=[(0,a.eW)(" Happy Healthy Box ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/setup-menu-lc",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-lc"===e.$route.path}])},{default:(0,a.k6)((()=>t[34]||(t[34]=[(0,a.eW)(" Low Carb ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/setup-menu-fl",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-fl"===e.$route.path}])},{default:(0,a.k6)((()=>t[35]||(t[35]=[(0,a.eW)(" Fat Loss ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/setup-menu-bpd",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-bpd"===e.$route.path}])},{default:(0,a.k6)((()=>t[36]||(t[36]=[(0,a.eW)(" โรคความดัน ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/setup-menu-diabete",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-diabete"===e.$route.path}])},{default:(0,a.k6)((()=>t[37]||(t[37]=[(0,a.eW)(" โรคเบาหวาน ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/setup-menu-fat-disease",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-fat-disease"===e.$route.path}])},{default:(0,a.k6)((()=>t[38]||(t[38]=[(0,a.eW)(" โรคไขมัน ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/daily-sale"===e.$route.path||"/daily-sale-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",ce,[(0,a.bF)(ke,{to:"daily-sale",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/daily-sale"===e.$route.path}])},{default:(0,a.k6)((()=>t[39]||(t[39]=[(0,a.eW)(" Absolute FitFood ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/daily-sale-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/daily-sale-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[40]||(t[40]=[(0,a.eW)(" Happy Healthy Box ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/result-orders"===e.$route.path||"/result-orders-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",ue,[(0,a.bF)(ke,{to:"result-orders",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/result-orders"===e.$route.path}])},{default:(0,a.k6)((()=>t[41]||(t[41]=[(0,a.eW)(" Absolute FitFood ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/result-orders-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/result-orders-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[42]||(t[42]=[(0,a.eW)(" Happy Healthy Box ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/kitchen-orders"===e.$route.path||"/kitchen-orders-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",pe,[(0,a.bF)(ke,{to:"kitchen-orders",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/kitchen-orders"===e.$route.path}])},{default:(0,a.k6)((()=>t[43]||(t[43]=[(0,a.eW)(" Absolute FitFood ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/kitchen-orders-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/kitchen-orders-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[44]||(t[44]=[(0,a.eW)(" Happy Healthy Box ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/delivery"===e.$route.path||"/delivery-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",he,[(0,a.bF)(ke,{to:"delivery",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/delivery"===e.$route.path}])},{default:(0,a.k6)((()=>t[45]||(t[45]=[(0,a.eW)(" Absolute FitFood ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/delivery-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/delivery-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[46]||(t[46]=[(0,a.eW)(" Happy Healthy Box ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/remaining-packages"===e.$route.path||"/remaining-packages-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",ge,[(0,a.bF)(ke,{to:"remaining-packages",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/remaining-packages"===e.$route.path}])},{default:(0,a.k6)((()=>t[47]||(t[47]=[(0,a.eW)(" Absolute FitFood ")]))),_:1},8,["class"]),(0,a.bF)(ke,{to:"/remaining-packages-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/remaining-packages-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[48]||(t[48]=[(0,a.eW)(" Happy Healthy Box ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),(0,a.Lk)("div",me,[(0,a.bF)(fe)])])])}s(4114);var ke=s(4373);const fe="http://127.0.0.1:3333";ke.A.defaults.withCredentials=!0;var be={async register(e,t,s,o,a){try{const r=await ke.A.post(`${fe}/register`,{firstname:e,lastname:t,username:s,email:o,password:a,role:"customer"});return r.data}catch(r){throw r.response.data}},async login(e,t,s){try{const o=await ke.A.post(`${fe}/login`,{identifier:e,password:t}),a=o.data.token;if(!a)throw new Error("Token is undefined or invalid");return localStorage.setItem("token",a),s.dispatch("fetchUserRole"),ke.A.defaults.headers.common["Authorization"]=`Bearer ${a}`,o.data}catch(o){throw console.error("Login error:",o),o.response?o.response.data:o.message}},async logout(){try{return localStorage.removeItem("token"),delete ke.A.defaults.headers.common["Authorization"],!0}catch(e){throw e.response?e.response.data:e.message}},async getProfile(){try{const e=localStorage.getItem("token");if(!e)throw new Error("No token found");ke.A.defaults.headers.common["Authorization"]=`Bearer ${e}`;const t=await ke.A.get(`${fe}/profile`);return t.data}catch(e){throw console.error("Error fetching profile:",e.response?e.response.data:e.message),e.response?e.response.data:e.message}},async changePassword(e,t){try{const s=await ke.A.put(`${fe}/users/update-password`,{oldPassword:e,newPassword:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return s.data}catch(s){throw console.error("Error changing password:",s.response?s.response.data:s.message),s.response?s.response.data:s.message}}},xe={name:"MainLayout",data(){return{isExpanded:!1,pageTitle:"",pageIcon:"",isSubMenuOpen:!1,isLoggedIn:!1,username:"",userProfileImage:"",isDropdownOpen:!1}},methods:{toggleSidebar(){this.isExpanded=!this.isExpanded},toggleSubMenu(){this.isSubMenuOpen=!this.isSubMenuOpen},setPageIcon(e){switch(e){case"Home":this.pageIcon="home";break;case"Home HHB":this.pageIcon="home",this.pageTitle="Home";break;case"ข้อมูลลูกค้า":this.pageIcon="groups";break;case"ข้อมูลลูกค้าHHB":this.pageIcon="groups",this.pageTitle="ข้อมูลลูกค้า";break;case"บันทึกการขาย":this.pageIcon="contact_page";break;case"บันทึกการขาย Additional":this.pageIcon="contact_page",this.pageTitle="บันทึกการขาย";break;case"บันทึกการขาย HHB":this.pageIcon="contact_page",this.pageTitle="บันทึกการขาย";break;case"บันทึกการขาย Additional HHB":this.pageIcon="contact_page",this.pageTitle="บันทึกการขาย";break;case"ยอดขายประจำวัน":this.pageIcon="calendar_month";break;case"ยอดขายประจำวัน HHB":this.pageIcon="calendar_month",this.pageTitle="ยอดขายประจำวัน";break;case"Setup Menu Premium Health":case"Setup Menu Happy Healthy Box":case"Setup Menu Low Carb":case"Setup Menu Fat Loss":case"Setup Menu โรคความดัน":case"Setup Menu โรคเบาหวาน":case"Setup Menu โรคไขมัน":this.pageIcon="menu_book";break;case"รายการอาหารประจำวันของลูกค้า":this.pageIcon="receipt_long";break;case"รายการอาหารประจำวันของลูกค้า HHB":this.pageIcon="receipt_long",this.pageTitle="รายการอาหารประจำวันของลูกค้า";break;case"Kitchen Orders":this.pageIcon="stockpot";break;case"Kitchen Orders HHB":this.pageIcon="stockpot",this.pageTitle="Kitchen Orders";break;case"การจัดส่งอาหารประจำวัน":this.pageIcon="delivery_truck_speed";break;case"การจัดส่งอาหารประจำวัน HHB":this.pageIcon="delivery_truck_speed",this.pageTitle="การจัดส่งอาหารประจำวัน";break;case"แพ็คเกจคงเหลือของลูกค้า":this.pageIcon="deployed_code_history";break;case"ประวัติการสั่งซื้อ":this.pageIcon="history";break;case"แพ็คเกจคงเหลือของลูกค้า HHB":this.pageIcon="deployed_code_history",this.pageTitle="แพ็คเกจคงเหลือของลูกค้า";break;case"ประวัติการสั่งซื้อ HHB":this.pageIcon="history",this.pageTitle="ประวัติการสั่งซื้อ";break;default:this.pageIcon=""}},checkLoginStatus(){const e=localStorage.getItem("token");e&&(this.isLoggedIn=!0,this.getUserProfile())},async getUserProfile(){try{const e=await be.getProfile();this.username=e.username,this.email=e.email}catch(e){console.log("Error fetching profile:",e)}},logout(){localStorage.removeItem("token"),this.isLoggedIn=!1,this.username="",this.$router.push("/login")},goToProfile(){this.$router.push("/profile")}},watch:{$route(e){e.name&&(this.pageTitle=e.name,this.setPageIcon(e.name))}},created(){this.$route.name&&(this.pageTitle=this.$route.name,this.setPageIcon(this.$route.name)),this.checkLoginStatus()}},_e=s(1241);const we=(0,_e.A)(xe,[["render",ye],["__scopeId","data-v-079b1cea"]]);var ve=we,Le=s.p+"img/logo_fitfood_full.5b371e5e.png";const De={class:"flex justify-between items-center p-4 px-32 bg-white text-white shadow-lg relative"},Pe={key:0,class:"flex items-left space-x-6 text-black font-bold"},Ce={key:1,class:"flex items-center space-x-4"},Se={class:"relative flex items-center space-x-4",ref:"menuDropdown"},Re={class:"text-black"},Te={class:"text-custom-orange"},Me={class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-72 z-50 border"},Ee={class:"list-none p-0 m-0"},Fe={key:2,class:"flex items-center space-x-2"},ze={key:0,class:"flex justify-center space-x-6"},Ae={key:1,class:"flex justify-center space-x-6"};function Oe(e,t,s,r,i,n){const d=(0,a.g2)("router-link"),c=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("header",De,[(0,a.Lk)("div",{class:"flex justify-center items-center cursor-pointer",onClick:t[0]||(t[0]=(...e)=>n.goToHome&&n.goToHome(...e))},t[12]||(t[12]=[(0,a.Lk)("img",{src:Le,alt:"Logo",class:"w-50 h-12"},null,-1)])),["/premium-health","/","/happy-healthy-box","/low-carb","/fat-loss"].includes(e.$route.path)?((0,a.uX)(),(0,a.CE)("div",Pe,[(0,a.bF)(d,{to:"/premium-health",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/premium-health"===e.$route.path||"/"===e.$route.path}])},{default:(0,a.k6)((()=>t[13]||(t[13]=[(0,a.eW)(" Premium Health ")]))),_:1},8,["class"]),(0,a.bF)(d,{to:"/happy-healthy-box",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/happy-healthy-box"===e.$route.path}])},{default:(0,a.k6)((()=>t[14]||(t[14]=[(0,a.eW)(" Happy Healthy Box ")]))),_:1},8,["class"]),(0,a.bF)(d,{to:"/low-carb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/low-carb"===e.$route.path}])},{default:(0,a.k6)((()=>t[15]||(t[15]=[(0,a.eW)(" Low Carb ")]))),_:1},8,["class"]),(0,a.bF)(d,{to:"/fat-loss",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/fat-loss"===e.$route.path}])},{default:(0,a.k6)((()=>t[16]||(t[16]=[(0,a.eW)(" Fat Loss ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),i.isLoggedIn?((0,a.uX)(),(0,a.CE)("div",Ce,[(0,a.Lk)("div",Se,[(0,a.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>n.toggleMenu&&n.toggleMenu(...e)),class:"cursor-pointer flex items-center space-x-2"},[(0,a.Lk)("span",Re,[t[17]||(t[17]=(0,a.eW)("Welcome, ")),(0,a.Lk)("strong",Te,(0,l.v_)(i.username),1)]),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isMenuOpen},"material-symbols-outlined text-black transition-transform duration-300"])}," arrow_drop_down ",2)]),(0,a.bo)((0,a.Lk)("div",Me,[(0,a.Lk)("ul",Ee,[(0,a.Lk)("li",{class:"px-4 py-3 cursor-pointer hover:bg-gray-100 hover:text-custom-orange hover:font-bold border-b flex items-center justify-between",onClick:t[2]||(t[2]=(...e)=>n.goToProfile&&n.goToProfile(...e))},t[18]||(t[18]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," person ",-1),(0,a.Lk)("span",null,"Profile",-1)])),i.isUserRegistered&&i.isUserRegisteredHHB?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("li",{key:0,class:"px-4 py-3 cursor-pointer hover:bg-gray-100 hover:text-custom-orange hover:font-bold border-b flex items-center justify-between",onClick:t[3]||(t[3]=(...e)=>n.goToRegister&&n.goToRegister(...e))},t[19]||(t[19]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," person_add ",-1),(0,a.Lk)("span",null,"Register Customer Profile",-1)]))),(0,a.Lk)("li",{class:"px-4 py-3 cursor-pointer hover:bg-gray-100 hover:text-custom-orange hover:font-bold border-b flex items-center justify-between",onClick:t[4]||(t[4]=(...e)=>n.goToOrderHistory&&n.goToOrderHistory(...e))},t[20]||(t[20]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"history",-1),(0,a.Lk)("span",null,"Orders History",-1)])),"admin"===i.role?((0,a.uX)(),(0,a.CE)("li",{key:1,class:"px-4 py-3 cursor-pointer hover:bg-gray-100 hover:text-custom-orange hover:font-bold border-b flex items-center justify-between",onClick:t[5]||(t[5]=(...e)=>n.goToBackend&&n.goToBackend(...e))},t[21]||(t[21]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," shield_person ",-1),(0,a.Lk)("span",null,"Admin Page",-1)]))):(0,a.Q3)("",!0),(0,a.Lk)("li",{class:"px-4 py-3 cursor-pointer hover:bg-gray-100 hover:text-red-500 hover:font-bold hover:rounded-b-md border-b flex items-center justify-between",onClick:t[6]||(t[6]=(...e)=>n.logout&&n.logout(...e))},t[22]||(t[22]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," logout ",-1),(0,a.Lk)("span",null,"Logout",-1)]))])],512),[[o.aG,i.isMenuOpen]])],512)])):((0,a.uX)(),(0,a.CE)("div",Fe,[(0,a.Lk)("span",{class:"text-black cursor-pointer flex items-center space-x-2 font-bold hover:text-custom-orange-hover",onClick:t[7]||(t[7]=(...e)=>n.goToLogin&&n.goToLogin(...e))},t[23]||(t[23]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," account_circle ",-1),(0,a.Lk)("span",null,"Login",-1)]))]))]),(0,a.Lk)("main",{class:(0,l.C4)(["flex-1 p-4 px-32 relative",{"bg-gradient-to-r from-custom-orange via-orange-500 to-custom-orange-hover text-black":"/register-aff"===e.$route.path||"/register-hhb"===e.$route.path}]),style:{height:"calc(100vh - 80px)"}},["/register-aff"===e.$route.path||"/register-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",ze,[i.isUserRegistered?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,l.C4)(["cursor-pointer hover:text-gray-700",{"border-b-2 border-gray-700 text-gray-700 font-bold":"/register-aff"===e.$route.path}]),onClick:t[8]||(t[8]=t=>e.$router.push("/register-aff"))}," Absolute FitFood ",2)),i.isUserRegisteredHHB?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,l.C4)(["cursor-pointer hover:text-gray-700",{"border-b-2 border-gray-700 text-gray-700 font-bold":"/register-hhb"===e.$route.path}]),onClick:t[9]||(t[9]=t=>e.$router.push("/register-hhb"))}," Happy Healthy Box ",2))])):(0,a.Q3)("",!0),n.isOrderHistoryPath?((0,a.uX)(),(0,a.CE)("div",Ae,[(0,a.Lk)("span",{class:(0,l.C4)(["cursor-pointer hover:text-custom-orange",{"border-b-2 border-custom-orange text-custom-orange font-bold":e.$route.path===`/order-history-user/${n.getCustomerID(e.id)}`}]),onClick:t[10]||(t[10]=t=>e.$router.push(`/order-history-user/${n.getCustomerID(e.id)}`))}," Absolute FitFood ",2),(0,a.Lk)("span",{class:(0,l.C4)(["cursor-pointer hover:text-custom-orange",{"border-b-2 border-custom-orange text-custom-orange font-bold":e.$route.path===`/order-history-hhb-user/${n.getCustomerHHBID(e.id)}`}]),onClick:t[11]||(t[11]=t=>e.$router.push(`/order-history-hhb-user/${n.getCustomerHHBID(e.id)}`))}," Happy Healthy Box ",2)])):(0,a.Q3)("",!0),(0,a.bF)(c)],2)])}s(8992),s(2577);var Ne={data(){return{username:"",role:"",isLoggedIn:!1,isMenuOpen:!1,isUserRegistered:!1,isUserRegisteredHHB:!1,customers:[],customers_hhb:[]}},created(){this.checkLoginStatus(),this.fetchLookupData()},methods:{checkLoginStatus(){const e=localStorage.getItem("token");e?(this.isLoggedIn=!0,this.getUserProfile()):this.isLoggedIn=!1},async getUserProfile(){try{const e=await be.getProfile();this.username=e.username,this.role=e.role,this.id=e.id}catch(e){console.log("Error fetching profile:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/customers-hhb")]);this.customers=e.data,this.customers_hhb=t.data}catch(e){console.error("Error fetching lookup data:",e)}},goToLogin(){this.$router.push("/login")},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},goToHome(){this.$router.push("/premium-health")},goToProfile(){this.$router.push("/profile"),this.isMenuOpen=!1},goToRegister(){this.isUserRegistered?this.$router.push("/register-hhb"):this.$router.push("/register-aff"),this.isMenuOpen=!1},goToOrderHistory(){const e=this.getCustomerID(this.id);this.$router.push(`/order-history-user/${e}`),this.isMenuOpen=!1},goToBackend(){this.$router.push("/master")},logout(){localStorage.removeItem("token"),this.isLoggedIn=!1,this.username="",this.$router.push("/"),window.location.reload()},handleClickOutside(e){this.$refs.menuDropdown&&!this.$refs.menuDropdown.contains(e.target)&&(this.isMenuOpen=!1)},checkIfAdmin(){"admin"===this.role?console.log("User is an admin."):console.log("User is not an admin.")},getCustomerID(e){const t=this.customers.find((t=>t.user_id===e));return t?t.id:"ไม่พบข้อมูล"},getCustomerHHBID(e){const t=this.customers_hhb.find((t=>t.user_id===e));return t?t.id:"ไม่พบข้อมูล"}},mounted(){if(this.isLoggedIn)try{ke.A.get("http://127.0.0.1:3333/check-user-registration").then((e=>{this.isUserRegistered=e.data.isRegistered})),ke.A.get("http://127.0.0.1:3333/check-user-registration-hhb").then((e=>{this.isUserRegisteredHHB=e.data.isRegistered})),this.getUserProfile(),this.fetchLookupData(),document.addEventListener("click",this.handleClickOutside)}catch(e){console.error("Error checking user registration",e)}else console.log("User not logged in, skipping registration check")},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},watch:{$route(){this.checkLoginStatus()}},computed:{userRole(){return this.$store.getters.getUserRole},isOrderHistoryPath(){return this.$route.path===`/order-history-user/${this.getCustomerID(this.id)}`||this.$route.path===`/order-history-hhb-user/${this.getCustomerHHBID(this.id)}`}}};const Xe=(0,_e.A)(Ne,[["render",Oe]]);var Ve=Xe;function Qe(e,t,s,o,r,l){const i=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(i)])}var Ie={name:"BlankLayout"};const Ue=(0,_e.A)(Ie,[["render",Qe],["__scopeId","data-v-28df8f6e"]]);var $e=Ue,Be={computed:{layoutComponent(){return"BlankLayout"===this.$route.meta.layout?$e:"SimpleLayout"===this.$route.meta.layout?Ve:ve},userRole(){return this.$store.getters.getUserRole}},created(){this.$store.dispatch("fetchUserRole")}};const We=(0,_e.A)(Be,[["render",r]]);var qe=We,Ze=s(782);const je=(0,Ze.y$)({state:{role:localStorage.getItem("role")||null},mutations:{setUserRole(e,t){e.role=t,localStorage.setItem("role",t)}},actions:{async fetchUserRole({commit:e}){try{const t=await be.getProfile(),s=t.role||"customer";e("setUserRole",s)}catch(t){console.error("Error fetching user role:",t)}}},getters:{getUserRole(e){return e.role}}});var Je=je,Ke=s(1387);const He={class:"flex items-center justify-center min-h-screen fixed inset-0 bg-gradient-to-r from-custom-orange to-custom-orange-hover"},Ye={class:"flex flex-col items-center"},Ge={class:"bg-white bg-opacity-60 backdrop-blur-md w-full max-w-md p-8 rounded-b-lg shadow-lg border"},et={key:0,class:"mb-4 text-red-500 text-center font-bold"},tt={class:"flex items-center justify-between"},st={class:"flex items-center"},ot={class:"mt-4 text-center text-gray-700"};function at(e,t,s,r,n,d){return(0,a.uX)(),(0,a.CE)("div",He,[(0,a.Lk)("div",Ye,[t[9]||(t[9]=(0,a.Fv)('<div class="w-full max-w-md bg-white px-4 py-3 rounded-t-lg shadow-lg flex justify-center items-center relative"><img src="'+i+'" alt="Logo" class="w-12 h-12"><div class="leading-none ml-2"><p class="text-lg font-bold">ABSOLUTE</p><p class="text-lg font-bold text-custom-orange -mt-3">FITFOOD</p></div></div>',1)),(0,a.Lk)("div",Ge,[t[8]||(t[8]=(0,a.Lk)("h2",{class:"text-2xl font-bold text-center text-gray-700 mb-4"},"Login",-1)),n.error?((0,a.uX)(),(0,a.CE)("p",et,(0,l.v_)(n.error),1)):(0,a.Q3)("",!0),(0,a.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>d.login&&d.login(...e)),["prevent"])),class:"space-y-4"},[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.identifier=e),placeholder:"Email or Username",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.identifier]]),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),placeholder:"Password",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.password]]),(0,a.Lk)("div",tt,[(0,a.Lk)("div",st,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox",id:"rememberMe","onUpdate:modelValue":t[2]||(t[2]=e=>n.rememberMe=e),class:"w-4 h-4 accent-custom-orange focus:ring-0"},null,512),[[o.lH,n.rememberMe]]),t[5]||(t[5]=(0,a.Lk)("label",{for:"rememberMe",class:"ml-2 text-gray-700 text-sm"},"Remember Me",-1))])]),t[6]||(t[6]=(0,a.Lk)("button",{type:"submit",class:"w-full bg-custom-orange text-white py-2 rounded-md hover:bg-custom-orange-hover transition"}," Login ",-1))],32),(0,a.Lk)("p",ot,[t[7]||(t[7]=(0,a.eW)(" Don't have an account? ")),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>d.goToRegister&&d.goToRegister(...e)),class:"text-custom-orange hover:underline font-bold"}," Register ")])])])])}var rt={data(){return{identifier:localStorage.getItem("rememberedIdentifier")||"",password:localStorage.getItem("rememberedPassword")||"",rememberMe:"true"===localStorage.getItem("rememberMe"),error:null}},methods:{async login(){try{await be.login(this.identifier,this.password,this.$store),this.rememberMe?(localStorage.setItem("rememberedIdentifier",this.identifier),localStorage.setItem("rememberedPassword",this.password),localStorage.setItem("rememberMe","true")):(localStorage.removeItem("rememberedIdentifier"),localStorage.removeItem("rememberedPassword"),localStorage.removeItem("rememberMe")),this.$router.push("/")}catch(e){this.error="Login failed"}},goToRegister(){this.$router.push("/register")}}};const lt=(0,_e.A)(rt,[["render",at]]);var it=lt;const nt={class:"flex items-center justify-center min-h-screen fixed inset-0 bg-gradient-to-r from-custom-orange to-custom-orange-hover"},dt={class:"flex flex-col items-center"},ct={class:"bg-white bg-opacity-60 backdrop-blur-md w-full max-w-md p-8 rounded-b-lg shadow-lg border"},ut={key:0,class:"mb-4 text-green-500 text-center font-bold"},pt={key:1,class:"mb-4 text-red-500 text-center font-bold"},ht={class:"flex space-x-4"},gt={class:"text-center text-gray-600 mt-4"};function mt(e,t,s,r,n,d){const c=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",nt,[(0,a.Lk)("div",dt,[t[11]||(t[11]=(0,a.Fv)('<div class="w-full max-w-md bg-white px-4 py-3 rounded-t-lg shadow-lg flex justify-center items-center"><img src="'+i+'" alt="Logo" class="w-12 h-12"><div class="leading-none ml-2"><p class="text-lg font-bold">ABSOLUTE</p><p class="text-lg font-bold text-custom-orange -mt-3">FITFOOD</p></div></div>',1)),(0,a.Lk)("div",ct,[t[10]||(t[10]=(0,a.Lk)("h2",{class:"text-2xl font-bold text-center text-gray-700 mb-4"},"Register",-1)),n.success?((0,a.uX)(),(0,a.CE)("p",ut,(0,l.v_)(n.success),1)):(0,a.Q3)("",!0),!n.success&&n.error?((0,a.uX)(),(0,a.CE)("p",pt,(0,l.v_)(n.error),1)):(0,a.Q3)("",!0),(0,a.Lk)("form",{onSubmit:t[6]||(t[6]=(0,o.D$)(((...e)=>d.register&&d.register(...e)),["prevent"])),class:"space-y-4"},[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),placeholder:"Username",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.username]]),(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),placeholder:"Email",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.email]]),(0,a.Lk)("div",ht,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.firstname=e),placeholder:"First Name",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.firstname]]),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.lastname=e),placeholder:"Last Name",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.lastname]])]),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=e=>n.password=e),placeholder:"Password",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.password]]),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":t[5]||(t[5]=e=>n.confirmPassword=e),placeholder:"Confirm Password",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.confirmPassword]]),t[7]||(t[7]=(0,a.Lk)("button",{type:"submit",class:"w-full bg-custom-orange text-white py-2 rounded-md hover:bg-custom-orange-hover transition"}," Register ",-1))],32),(0,a.Lk)("p",gt,[t[9]||(t[9]=(0,a.eW)(" Already have an account? ")),(0,a.bF)(c,{to:"/login",class:"text-custom-orange hover:underline font-bold"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.eW)("Login")]))),_:1})])])])])}var yt={data(){return{firstname:"",lastname:"",username:"",email:"",password:"",confirmPassword:"",error:null,success:null}},methods:{async register(){if(this.password===this.confirmPassword)try{await be.register(this.firstname,this.lastname,this.username,this.email,this.password),this.success="Registration successful! Please login to continue.",this.firstname="",this.lastname="",this.username="",this.email="",this.password="",this.confirmPassword=""}catch(e){this.error="Email or Username already exists"}else this.error="Passwords do not match!"}}};const kt=(0,_e.A)(yt,[["render",mt]]);var ft=kt;const bt={key:0,class:"text-gray-500"},xt={class:"flex space-x-4"},_t={key:0,class:"w-1/5 bg-white shadow-lg p-4 rounded-md border text-center max-h-[350px] flex flex-col justify-between"},wt={class:"flex flex-col items-center justify-center flex-grow"},vt={key:0,class:"w-16 h-16 rounded-full overflow-hidden mb-4"},Lt=["src"],Dt={key:1,class:"w-16 h-16 rounded-full bg-gray-300 text-white flex items-center justify-center mb-4"},Pt={class:"text-xl font-bold"},Ct={class:"text-lg"},St={class:"text-gray-700 pb-3"},Rt={class:"mt-auto w-full"},Tt={class:"w-4/5 flex flex-col space-y-4"},Mt={key:0,class:"relative bg-white shadow-lg p-8 rounded-md border"},Et={key:0},Ft={key:1,class:"relative bg-white shadow-lg p-8 rounded-md border flex"},zt={key:2,class:"relative bg-white shadow-lg p-8 rounded-md border"},At={key:3,class:"relative bg-white shadow-lg p-8 rounded-md border flex"},Ot={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Nt={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Xt={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Vt={class:"flex space-x-2"},Qt={class:"p-6 space-y-4 overflow-y-auto flex-grow"},It={class:"mb-4"},Ut={class:"mb-4"},$t={class:"flex space-x-4"},Bt={class:"flex space-x-4"},Wt={class:"w-1/2"},qt={class:"w-1/2"},Zt={class:"flex space-x-4"},jt={key:0},Jt={class:"flex space-x-4"},Kt={class:"text-gray-700"},Ht={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Yt={class:"flex space-x-2"},Gt={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},es={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},ts={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},ss={class:"flex space-x-2"},os={class:"p-6 space-y-4 overflow-y-auto flex-grow"},as={class:"mb-4"},rs={class:"mb-4"},ls={class:"flex space-x-4"},is={class:"w-1/2"},ns={class:"w-1/2"},ds={class:"flex space-x-4"},cs={class:"text-gray-700"},us={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},ps={class:"flex space-x-2"},hs={key:3,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50"},gs={class:"bg-white p-6 rounded-md shadow-lg w-96"},ms={class:"mb-4"},ys={class:"mb-4"},ks={class:"mb-4"},fs={key:0,class:"text-red-500 mb-4"},bs={key:1,class:"text-green-500 mb-4"},xs={class:"flex space-x-4"};function _s(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[i.showSuccessToast?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[52]||(t[52]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),i.showFailToast?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[54]||(t[54]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[i.loading?((0,a.uX)(),(0,a.CE)("div",bt,"Loading...")):(0,a.Q3)("",!0),(0,a.Lk)("div",xt,[i.user?((0,a.uX)(),(0,a.CE)("div",_t,[(0,a.Lk)("div",wt,[i.user.profilePicture?((0,a.uX)(),(0,a.CE)("div",vt,[(0,a.Lk)("img",{src:i.user.profilePicture,alt:"Profile Picture",class:"w-full h-full object-cover"},null,8,Lt)])):((0,a.uX)(),(0,a.CE)("div",Dt,[(0,a.Lk)("span",Pt,(0,l.v_)(i.user.username?i.user.username.charAt(0):"N/A"),1)])),(0,a.Lk)("strong",Ct,(0,l.v_)(i.user.username||"N/A"),1),(0,a.Lk)("p",St,(0,l.v_)(i.user.email||"No email provided"),1)]),(0,a.Lk)("div",Rt,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.logout&&n.logout(...e)),class:"w-full border text-red-500 font-bold py-2 rounded-md mt-2 hover:bg-gray-100 transition-colors"}," Logout "),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...t)=>e.openChangePasswordModal&&e.openChangePasswordModal(...t)),class:"w-full border py-2 rounded-md mt-2 hover:bg-gray-100 transition-colors"}," Change Password ")])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Tt,[i.customer_aff?((0,a.uX)(),(0,a.CE)("div",Mt,[(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>n.onEdit(i.customer_aff)),class:"absolute top-4 right-4 bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[55]||(t[55]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)])),t[69]||(t[69]=(0,a.Lk)("strong",{class:"text-xl text-custom-orange mb-2 block"},"Abosolute FitFood Profile",-1)),(0,a.Lk)("p",null,[t[56]||(t[56]=(0,a.Lk)("strong",null,"ชื่อ:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.name),1)]),(0,a.Lk)("p",null,[t[57]||(t[57]=(0,a.Lk)("strong",null,"Email:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.email),1)]),(0,a.Lk)("p",null,[t[58]||(t[58]=(0,a.Lk)("strong",null,"รหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.customer_id),1)]),(0,a.Lk)("p",null,[t[59]||(t[59]=(0,a.Lk)("strong",null,"เพศ:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.gender),1)]),(0,a.Lk)("p",null,[t[60]||(t[60]=(0,a.Lk)("strong",null,"เบอร์โทรศัพท์:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.tel),1)]),(0,a.Lk)("p",null,[t[61]||(t[61]=(0,a.Lk)("strong",null,"Line ID:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.line_id),1)]),(0,a.Lk)("p",null,[t[62]||(t[62]=(0,a.Lk)("strong",null,"แพ้อาหาร:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatFoodAllergies(i.customer_aff.food_allergies))+" ",1),i.customer_aff.food_allergies_detail?((0,a.uX)(),(0,a.CE)("span",Et,(0,l.v_)(i.customer_aff.food_allergies_detail),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("p",null,[t[63]||(t[63]=(0,a.Lk)("strong",null,"วันที่ต้องการรับอาหาร:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.delivery_date),1)]),(0,a.Lk)("p",null,[t[64]||(t[64]=(0,a.Lk)("strong",null,"ผู้รับอาหาร:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.recipient_mon_to_fri),1)]),(0,a.Lk)("p",null,[t[65]||(t[65]=(0,a.Lk)("strong",null,"รายละเอียดอื่นๆ:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.note),1)]),(0,a.Lk)("p",null,[t[66]||(t[66]=(0,a.Lk)("strong",null,"ที่อยู่จัดส่ง 1:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.address_1),1)]),(0,a.Lk)("p",null,[t[67]||(t[67]=(0,a.Lk)("strong",null,"ที่อยู่จัดส่ง 2:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.address_2),1)]),(0,a.Lk)("p",null,[t[68]||(t[68]=(0,a.Lk)("strong",null,"ที่อยู่จัดส่ง 3:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_aff.address_3),1)])])):((0,a.uX)(),(0,a.CE)("div",Ft,[t[70]||(t[70]=(0,a.Lk)("strong",{class:"text-xl text-custom-orange mr-4 block"},"Abosolute FitFood Profile",-1)),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.goToRegisterAFF&&n.goToRegisterAFF(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded hover:bg-custom-orange-hover flex items-center justify-center ml-auto"}," Register Profile ")])),i.customer_hhb?((0,a.uX)(),(0,a.CE)("div",zt,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=e=>n.onEditHHB(i.customer_hhb)),class:"absolute top-4 right-4 bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[71]||(t[71]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)])),t[82]||(t[82]=(0,a.Lk)("strong",{class:"text-xl text-custom-orange mb-2 block"},"Happy Healthy Box Profile",-1)),(0,a.Lk)("p",null,[t[72]||(t[72]=(0,a.Lk)("strong",null,"ชื่อ:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_hhb.name),1)]),(0,a.Lk)("p",null,[t[73]||(t[73]=(0,a.Lk)("strong",null,"Email:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_hhb.email),1)]),(0,a.Lk)("p",null,[t[74]||(t[74]=(0,a.Lk)("strong",null,"เบอร์โทรศัพท์:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_hhb.tel),1)]),(0,a.Lk)("p",null,[t[75]||(t[75]=(0,a.Lk)("strong",null,"Line ID:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_hhb.line_id),1)]),(0,a.Lk)("p",null,[t[76]||(t[76]=(0,a.Lk)("strong",null,"ที่อยู่จัดส่ง 1:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_hhb.address_1),1)]),(0,a.Lk)("p",null,[t[77]||(t[77]=(0,a.Lk)("strong",null,"ที่อยู่จัดส่ง 2:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_hhb.address_2),1)]),(0,a.Lk)("p",null,[t[78]||(t[78]=(0,a.Lk)("strong",null,"ที่อยู่จัดส่ง 3:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_hhb.address_3),1)]),(0,a.Lk)("p",null,[t[79]||(t[79]=(0,a.Lk)("strong",null,"สถานที่ใกล้เคียงหรือจุดสังเกตอื่นๆ:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_hhb.nearby_places),1)]),(0,a.Lk)("p",null,[t[80]||(t[80]=(0,a.Lk)("strong",null,"ผู้รับอาหาร:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_hhb.recipient),1)]),(0,a.Lk)("p",null,[t[81]||(t[81]=(0,a.Lk)("strong",null,"รายละเอียดอื่นๆ:",-1)),(0,a.eW)(" "+(0,l.v_)(i.customer_hhb.note),1)])])):((0,a.uX)(),(0,a.CE)("div",At,[t[83]||(t[83]=(0,a.Lk)("strong",{class:"text-xl text-custom-orange mr-4 block"},"Happy Healthy Box Profile",-1)),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.goToRegisterHHB&&n.goToRegisterHHB(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded hover:bg-custom-orange-hover flex items-center justify-center ml-auto"}," Register Profile ")]))])]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",Ot,[i.showErrorToast?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[85]||(t[85]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[8]||(t[8]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[84]||(t[84]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),(0,a.Lk)("div",Nt,[(0,a.Lk)("div",Xt,[t[86]||(t[86]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขข้อมูลลูกค้า",-1)),(0,a.Lk)("div",Vt,[(0,a.Lk)("span",{onClick:t[9]||(t[9]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Qt,[(0,a.Lk)("div",It,[t[87]||(t[87]=(0,a.Lk)("label",{for:"editCustomerName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.selectedCustomer.name=e),id:"editCustomerName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.name]])]),(0,a.Lk)("div",Ut,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editCustomerEmail",class:"block text-gray-700 font-medium"},"อีเมล",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.selectedCustomer.email=e),id:"editCustomerEmail",type:"email",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.email]])]),(0,a.Lk)("div",null,[t[89]||(t[89]=(0,a.Lk)("label",{for:"customer_id",class:"block font-medium text-gray-700"},"รหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>i.selectedCustomer.customer_id=e),placeholder:"กรอกรหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.customer_id]])]),(0,a.Lk)("div",null,[t[92]||(t[92]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"เพศ",-1)),(0,a.Lk)("div",$t,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[13]||(t[13]=e=>i.selectedCustomer.gender=e),value:"female",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.selectedCustomer.gender]]),t[90]||(t[90]=(0,a.eW)(" ผู้หญิง / Female "))]),(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[14]||(t[14]=e=>i.selectedCustomer.gender=e),value:"male",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.selectedCustomer.gender]]),t[91]||(t[91]=(0,a.eW)(" ผู้ชาย / Male "))])])]),(0,a.Lk)("div",Bt,[(0,a.Lk)("div",Wt,[t[93]||(t[93]=(0,a.Lk)("label",{for:"tel",class:"block font-medium text-gray-700"},"เบอร์โทรศัพท์",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=e=>i.selectedCustomer.tel=e),maxlength:"10",placeholder:"กรอกหมายเลขโทรศัพท์",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.tel]])]),(0,a.Lk)("div",qt,[t[94]||(t[94]=(0,a.Lk)("label",{for:"line_id",class:"block font-medium text-gray-700"},"Line ID (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>i.selectedCustomer.line_id=e),placeholder:"กรอก line id",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.line_id]])])]),(0,a.Lk)("div",null,[t[97]||(t[97]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"คุณแพ้อาหารชนิดใดหรือไม่?",-1)),(0,a.Lk)("div",Zt,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[17]||(t[17]=e=>i.selectedCustomer.food_allergies=e),value:"No",onChange:t[18]||(t[18]=e=>i.selectedCustomer.food_allergies_detail=null)},null,544),[[o.XL,i.selectedCustomer.food_allergies]]),t[95]||(t[95]=(0,a.eW)(" ไม่ / No "))]),(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedCustomer.food_allergies=e),value:"Yes",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.selectedCustomer.food_allergies]]),t[96]||(t[96]=(0,a.eW)(" ใช่ / Yes "))])])]),"Yes"===i.selectedCustomer.food_allergies?((0,a.uX)(),(0,a.CE)("div",jt,[t[98]||(t[98]=(0,a.Lk)("label",{for:"food_allergies_detail",class:"block font-medium text-gray-700"},"โปรดระบุประเภทอาหารที่คุณมีอาการแพ้ในบรรทัดด้านล่าง",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"food_allergies_detail","onUpdate:modelValue":t[20]||(t[20]=e=>i.selectedCustomer.food_allergies_detail=e),placeholder:"Enter details here",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.food_allergies_detail]])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[99]||(t[99]=(0,a.Lk)("label",{for:"delivery_date",class:"block font-medium text-gray-700"},"โปรดระบุวันที่คุณต้องการรับอาหาร",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[21]||(t[21]=e=>i.selectedCustomer.delivery_date=e),placeholder:"กรอกโปรดระบุวันที่คุณต้องการรับอาหาร",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.delivery_date]])]),(0,a.Lk)("div",null,[t[102]||(t[102]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"ผู้รับอาหาร?",-1)),(0,a.Lk)("div",Jt,[(0,a.Lk)("label",Kt,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[22]||(t[22]=e=>i.selectedCustomer.recipient_mon_to_fri=e),value:"ตัวคุณเอง",class:"focus:ring-custom-orange custom-radio"},null,512),[[o.XL,i.selectedCustomer.recipient_mon_to_fri]]),t[100]||(t[100]=(0,a.eW)(" ตัวคุณเอง "))]),t[101]||(t[101]=(0,a.Lk)("label",{class:"text-gray-700"}," มีผู้อื่นรับแทน (โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อในบรรทัดด้านล่าง) ",-1))])]),(0,a.Lk)("div",null,[t[103]||(t[103]=(0,a.Lk)("label",{for:"recipient_mon_to_fri",class:"block font-medium text-gray-700"},"โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"recipient_mon_to_fri","onUpdate:modelValue":t[23]||(t[23]=e=>i.selectedCustomer.recipient_mon_to_fri=e),placeholder:"Enter details here",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.recipient_mon_to_fri]])]),(0,a.Lk)("div",null,[t[104]||(t[104]=(0,a.Lk)("label",{for:"note",class:"block font-medium text-gray-700"},"หากมีรายละเอียดอื่นๆ ที่เราควรทราบ โปรดระบุ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[24]||(t[24]=e=>i.selectedCustomer.note=e),placeholder:"กรอกรายละเอียดอื่นๆ",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.note]])]),(0,a.Lk)("div",null,[t[105]||(t[105]=(0,a.Lk)("label",{for:"address_1",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 1",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address","onUpdate:modelValue":t[25]||(t[25]=e=>i.selectedCustomer.address_1=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.address_1]])]),(0,a.Lk)("div",null,[t[106]||(t[106]=(0,a.Lk)("label",{for:"address_2",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 2 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_2","onUpdate:modelValue":t[26]||(t[26]=e=>i.selectedCustomer.address_2=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.address_2]])]),(0,a.Lk)("div",null,[t[107]||(t[107]=(0,a.Lk)("label",{for:"address_3",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 3 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_3","onUpdate:modelValue":t[27]||(t[27]=e=>i.selectedCustomer.address_3=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.address_3]])])]),(0,a.Lk)("div",Ht,[(0,a.Lk)("div",Yt,[(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[29]||(t[29]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isEditHHBModalOpen?((0,a.uX)(),(0,a.CE)("div",Gt,[i.showErrorToast?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[109]||(t[109]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[30]||(t[30]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[108]||(t[108]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),(0,a.Lk)("div",es,[(0,a.Lk)("div",ts,[t[110]||(t[110]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขข้อมูล",-1)),(0,a.Lk)("div",ss,[(0,a.Lk)("span",{onClick:t[31]||(t[31]=(...e)=>n.closeEditModalHHB&&n.closeEditModalHHB(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",os,[(0,a.Lk)("div",as,[t[111]||(t[111]=(0,a.Lk)("label",{for:"editCustomerName",class:"block text-gray-700 font-medium"},"Name",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[32]||(t[32]=e=>i.selectedCustomerHHB.name=e),id:"editCustomerName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomerHHB.name]])]),(0,a.Lk)("div",rs,[t[112]||(t[112]=(0,a.Lk)("label",{for:"editCustomerEmail",class:"block text-gray-700 font-medium"},"Email",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>i.selectedCustomerHHB.email=e),id:"editCustomerEmail",type:"email",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomerHHB.email]])]),(0,a.Lk)("div",null,[t[113]||(t[113]=(0,a.Lk)("label",{for:"customer_id",class:"block font-medium text-gray-700"},"รหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[34]||(t[34]=e=>i.selectedCustomerHHB.customer_id=e),placeholder:"กรอกรหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomerHHB.customer_id]])]),(0,a.Lk)("div",ls,[(0,a.Lk)("div",is,[t[114]||(t[114]=(0,a.Lk)("label",{for:"tel",class:"block font-medium text-gray-700"},"Phone Number",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[35]||(t[35]=e=>i.selectedCustomerHHB.tel=e),maxlength:"10",placeholder:"กรอกหมายเลขโทรศัพท์",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomerHHB.tel]])]),(0,a.Lk)("div",ns,[t[115]||(t[115]=(0,a.Lk)("label",{for:"line_id",class:"block font-medium text-gray-700"},"Line ID (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[36]||(t[36]=e=>i.selectedCustomerHHB.line_id=e),placeholder:"กรอก line id",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomerHHB.line_id]])])]),(0,a.Lk)("div",null,[t[118]||(t[118]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"ผู้รับอาหาร?",-1)),(0,a.Lk)("div",ds,[(0,a.Lk)("label",cs,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[37]||(t[37]=e=>i.selectedCustomerHHB.recipient=e),value:"ตัวคุณเอง",class:"focus:ring-custom-orange custom-radio"},null,512),[[o.XL,i.selectedCustomerHHB.recipient]]),t[116]||(t[116]=(0,a.eW)(" ตัวคุณเอง "))]),t[117]||(t[117]=(0,a.Lk)("label",{class:"text-gray-700"}," มีผู้อื่นรับแทน (โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อในบรรทัดด้านล่าง) ",-1))])]),(0,a.Lk)("div",null,[t[119]||(t[119]=(0,a.Lk)("label",{for:"recipient",class:"block font-medium text-gray-700"},"โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"recipient","onUpdate:modelValue":t[38]||(t[38]=e=>i.selectedCustomerHHB.recipient=e),placeholder:"Enter details here",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomerHHB.recipient]])]),(0,a.Lk)("div",null,[t[120]||(t[120]=(0,a.Lk)("label",{for:"note",class:"block font-medium text-gray-700"},"โปรดระบุเบอร์โทรติดต่อสำรอง หรือรายละเอียดอื่น ๆ ที่เราควรทราบ (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[39]||(t[39]=e=>i.selectedCustomerHHB.note=e),placeholder:"ระบุเบอร์โทรติดต่อสำรอง หรือรายละเอียดอื่น ๆ ที่เราควรทราบ (ถ้ามี)",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomerHHB.note]])]),(0,a.Lk)("div",null,[t[121]||(t[121]=(0,a.Lk)("label",{for:"address_1",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 1",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedCustomerHHB.address_1=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomerHHB.address_1]])]),(0,a.Lk)("div",null,[t[122]||(t[122]=(0,a.Lk)("label",{for:"address_2",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 2 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_2","onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedCustomerHHB.address_2=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomerHHB.address_2]])]),(0,a.Lk)("div",null,[t[123]||(t[123]=(0,a.Lk)("label",{for:"address_3",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 3 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_3","onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedCustomerHHB.address_3=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomerHHB.address_3]])]),(0,a.Lk)("div",null,[t[124]||(t[124]=(0,a.Lk)("label",{for:"nearby_places",class:"block font-medium text-gray-700"},"สถานที่ใกล้เคียงหรือจุดสังเกตอื่น ๆ ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"nearby_places","onUpdate:modelValue":t[43]||(t[43]=e=>i.selectedCustomerHHB.nearby_places=e),placeholder:"กรอกสถานที่ใกล้เคียงหรือจุดสังเกตอื่น ๆ ",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomerHHB.nearby_places]])])]),(0,a.Lk)("div",us,[(0,a.Lk)("div",ps,[(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.closeEditModalHHB&&n.closeEditModalHHB(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[45]||(t[45]=(...e)=>n.saveChangesHHB&&n.saveChangesHHB(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isModalOpen?((0,a.uX)(),(0,a.CE)("div",hs,[(0,a.Lk)("div",gs,[t[129]||(t[129]=(0,a.Lk)("h3",{class:"text-lg font-semibold mb-4"},"Change Password",-1)),(0,a.Lk)("form",{onSubmit:t[50]||(t[50]=(0,o.D$)(((...t)=>e.changePassword&&e.changePassword(...t)),["prevent"]))},[(0,a.Lk)("div",ms,[t[125]||(t[125]=(0,a.Lk)("label",{for:"oldPassword",class:"block text-sm font-medium text-gray-700"},"Old Password",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[46]||(t[46]=e=>i.oldPassword=e),type:"password",id:"oldPassword",class:"w-full p-2 border border-gray-300 rounded-md",required:""},null,512),[[o.Jo,i.oldPassword]])]),(0,a.Lk)("div",ys,[t[126]||(t[126]=(0,a.Lk)("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700"},"New Password",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[47]||(t[47]=e=>i.newPassword=e),type:"password",id:"newPassword",class:"w-full p-2 border border-gray-300 rounded-md",required:""},null,512),[[o.Jo,i.newPassword]])]),(0,a.Lk)("div",ks,[t[127]||(t[127]=(0,a.Lk)("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700"},"Confirm New Password",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[48]||(t[48]=e=>i.confirmPassword=e),type:"password",id:"confirmPassword",class:"w-full p-2 border border-gray-300 rounded-md",required:""},null,512),[[o.Jo,i.confirmPassword]])]),i.errorMessage?((0,a.uX)(),(0,a.CE)("div",fs,(0,l.v_)(i.errorMessage),1)):(0,a.Q3)("",!0),i.successMessage?((0,a.uX)(),(0,a.CE)("div",bs,(0,l.v_)(i.successMessage),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",xs,[t[128]||(t[128]=(0,a.Lk)("button",{type:"submit",class:"w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600 transition-colors"}," Save ",-1)),(0,a.Lk)("button",{type:"button",onClick:t[49]||(t[49]=(...t)=>e.closeChangePasswordModal&&e.closeChangePasswordModal(...t)),class:"w-full bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition-colors"}," Cancel ")])],32)])])):(0,a.Q3)("",!0)])],64)}var ws={data(){return{customer_aff:"",customer_hhb:"",error:null,loading:!1,user:{},isModalOpen:!1,oldPassword:"",newPassword:"",confirmPassword:"",errorMessage:"",successMessage:"",selectedCustomer:[],selectedCustomerHHB:[],isEditModalOpen:!1,isEditHHBModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},created(){this.fetchCustomerData(),this.fetchCustomerHHBData(),this.fetchProfile()},methods:{async fetchCustomerData(){this.loading=!0;try{const e=await ke.A.get("http://127.0.0.1:3333/customer/profile");this.customer_aff=e.data.customer_aff}catch(e){this.error="Failed to fetch customer data"}finally{this.loading=!1}},async fetchCustomerHHBData(){this.loading=!0;try{const e=await ke.A.get("http://127.0.0.1:3333/customer-hhb/profile");this.customer_hhb=e.data.customer_hhb}catch(e){this.error="Failed to fetch customer data"}finally{this.loading=!1}},async fetchProfile(){try{this.user=await be.getProfile()}catch(e){this.error=e.message||"Failed to fetch profile"}},logout(){localStorage.removeItem("token"),this.isLoggedIn=!1,this.username="",this.$router.push("/")},formatFoodAllergies(e){return"Yes"===e?"ใช่ Yes,":"No"===e?"ไม่ No":e},onEdit(e){this.selectedCustomer={...e},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedCustomer.name||!this.selectedCustomer.email)return void alert("กรุณากรอกข้อมูลให้ครบถ้วน");console.log(this.selectedCustomer.recipient_mon_to_fri);const e=await ke.A.put(`http://127.0.0.1:3333/customers/${this.selectedCustomer.id}`,{email:this.selectedCustomer.email,customer_id:this.selectedCustomer.customer_id,name:this.selectedCustomer.name,gender:this.selectedCustomer.gender,tel:this.selectedCustomer.tel,line_id:this.selectedCustomer.line_id,food_allergies:this.selectedCustomer.food_allergies,food_allergies_detail:this.selectedCustomer.food_allergies_detail,delivery_date:this.selectedCustomer.delivery_date,recipient_mon_to_fri:this.selectedCustomer.recipient_mon_to_fri,note:this.selectedCustomer.note,address_1:this.selectedCustomer.address_1,address_2:this.selectedCustomer.address_2,address_3:this.selectedCustomer.address_3});this.customer_aff.id===this.selectedCustomer.id&&(this.customer_aff=e.data),this.isEditModalOpen=!1,this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){console.error("Error saving changes:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedCustomer={}},onEditHHB(e){this.selectedCustomerHHB={...e},this.isEditHHBModalOpen=!0},async saveChangesHHB(){try{if(!this.selectedCustomerHHB.name||!this.selectedCustomerHHB.email)return void alert("กรุณากรอกข้อมูลให้ครบถ้วน");const e=await ke.A.put(`http://127.0.0.1:3333/customers-hhb/${this.selectedCustomerHHB.id}`,{email:this.selectedCustomerHHB.email,customer_id:this.selectedCustomerHHB.customer_id,name:this.selectedCustomerHHB.name,tel:this.selectedCustomerHHB.tel,line_id:this.selectedCustomerHHB.line_id,nearby_places:this.selectedCustomerHHB.nearby_places,recipient:this.selectedCustomerHHB.recipient,note:this.selectedCustomerHHB.note,address_1:this.selectedCustomerHHB.address_1,address_2:this.selectedCustomerHHB.address_2,address_3:this.selectedCustomerHHB.address_3});this.customer_hhb.id===this.selectedCustomerHHB.id&&(this.customer_hhb=e.data),this.isEditHHBModalOpen=!1,this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){console.error("Error saving changes:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล")}},closeEditModalHHB(){this.isEditHHBModalOpen=!1,this.selectedCustomerHHB={}},goToRegisterHHB(){this.$router.push("/register-hhb")},goToRegisterAFF(){this.$router.push("/register-aff")},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}}};const vs=(0,_e.A)(ws,[["render",_s],["__scopeId","data-v-6e6aa156"]]);var Ls=vs;const Ds={class:"flex items-center justify-center inset-0"},Ps={class:"flex flex-col items-center"},Cs={class:"bg-gray-100 bg-opacity-50 backdrop-blur-md w-full h-auto max-h-[750px] p-8 rounded-lg shadow-lg border flex flex-col mt-4"},Ss={key:0,class:"text-red-500 text-center mb-4 font-bold"},Rs={key:1,class:"text-green-500 text-center mb-4 font-bold"},Ts={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Ms={class:"flex space-x-4"},Es={class:"w-1/2"},Fs={class:"w-1/2"},zs={class:"flex space-x-4 text-gray-700"},As={class:"flex space-x-4"},Os={class:"w-1/2"},Ns={class:"w-1/2"},Xs={class:"flex space-x-4 text-gray-700"},Vs={key:0},Qs={class:"flex space-x-4"},Is={class:"text-gray-700"};function Us(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",Ds,[(0,a.Lk)("div",Ps,[(0,a.Lk)("div",Cs,[t[41]||(t[41]=(0,a.Lk)("h2",{class:"text-2xl font-bold text-center mb-6 text-gray-700"},"ลงทะเบียนข้อมูลลูกค้า",-1)),i.error?((0,a.uX)(),(0,a.CE)("p",Ss,(0,l.v_)(i.error),1)):(0,a.Q3)("",!0),i.success?((0,a.uX)(),(0,a.CE)("p",Rs,(0,l.v_)(i.success),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",Ts,[(0,a.Lk)("div",Ms,[(0,a.Lk)("div",Es,[t[19]||(t[19]=(0,a.Lk)("label",{for:"firstname",class:"block font-medium text-gray-700"},"First Name",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.firstname=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.firstname]])]),(0,a.Lk)("div",Fs,[t[20]||(t[20]=(0,a.Lk)("label",{for:"lastname",class:"block font-medium text-gray-700"},"Last Name",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.lastname=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.lastname]])])]),(0,a.Lk)("div",null,[t[21]||(t[21]=(0,a.Lk)("label",{for:"email",class:"block font-medium text-gray-700"},"Email",-1)),(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>i.email=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.email]])]),(0,a.Lk)("div",null,[t[22]||(t[22]=(0,a.Lk)("label",{for:"customer_id",class:"block font-medium text-gray-700"},"รหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>i.customer_id=e),placeholder:"กรอกรหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.customer_id]])]),(0,a.Lk)("div",null,[t[25]||(t[25]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"Gender",-1)),(0,a.Lk)("div",zs,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=e=>i.gender=e),value:"female",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.gender]]),t[23]||(t[23]=(0,a.eW)(" ผู้หญิง / Female "))]),(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=e=>i.gender=e),value:"male",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.gender]]),t[24]||(t[24]=(0,a.eW)(" ผู้ชาย / Male "))])])]),(0,a.Lk)("div",As,[(0,a.Lk)("div",Os,[t[26]||(t[26]=(0,a.Lk)("label",{for:"tel",class:"block font-medium text-gray-700"},"Phone Number",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>i.tel=e),maxlength:"10",placeholder:"กรอกหมายเลขโทรศัพท์",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.tel]])]),(0,a.Lk)("div",Ns,[t[27]||(t[27]=(0,a.Lk)("label",{for:"line_id",class:"block font-medium text-gray-700"},"Line ID (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>i.line_id=e),placeholder:"กรอก line id",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.line_id]])])]),(0,a.Lk)("div",null,[t[30]||(t[30]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"คุณแพ้อาหารชนิดใดหรือไม่?",-1)),(0,a.Lk)("div",Xs,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=e=>i.food_allergies=e),value:"ไม่ No",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.food_allergies]]),t[28]||(t[28]=(0,a.eW)(" ไม่ / No "))]),(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=e=>i.food_allergies=e),value:"ใช่ Yes, ",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.food_allergies]]),t[29]||(t[29]=(0,a.eW)(" ใช่ / Yes "))])])]),"ใช่ Yes, "===i.food_allergies?((0,a.uX)(),(0,a.CE)("div",Vs,[t[31]||(t[31]=(0,a.Lk)("label",{for:"food_allergies_detail",class:"block font-medium text-gray-700"},"โปรดระบุประเภทอาหารที่คุณมีอาการแพ้ในบรรทัดด้านล่าง",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"food_allergies_detail","onUpdate:modelValue":t[10]||(t[10]=e=>i.food_allergies_detail=e),placeholder:"Enter details here",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.food_allergies_detail]])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[32]||(t[32]=(0,a.Lk)("label",{for:"delivery_date",class:"block font-medium text-gray-700"},"โปรดระบุวันที่คุณต้องการรับอาหาร",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>i.delivery_date=e),placeholder:"กรอกโปรดระบุวันที่คุณต้องการรับอาหาร",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.delivery_date]])]),(0,a.Lk)("div",null,[t[35]||(t[35]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"ผู้รับอาหาร?",-1)),(0,a.Lk)("div",Qs,[(0,a.Lk)("label",Is,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[12]||(t[12]=e=>i.recipient_mon_to_fri=e),value:"ตัวคุณเอง",class:"focus:ring-custom-orange custom-radio"},null,512),[[o.XL,i.recipient_mon_to_fri]]),t[33]||(t[33]=(0,a.eW)(" ตัวคุณเอง "))]),t[34]||(t[34]=(0,a.Lk)("label",{class:"text-gray-700"}," มีผู้อื่นรับแทน (โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อในบรรทัดด้านล่าง) ",-1))])]),(0,a.Lk)("div",null,[t[36]||(t[36]=(0,a.Lk)("label",{for:"recipient_mon_to_fri",class:"block font-medium text-gray-700"},"โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"recipient_mon_to_fri","onUpdate:modelValue":t[13]||(t[13]=e=>i.recipient_mon_to_fri=e),placeholder:"Enter details here",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.recipient_mon_to_fri]])]),(0,a.Lk)("div",null,[t[37]||(t[37]=(0,a.Lk)("label",{for:"note",class:"block font-medium text-gray-700"},"หากมีรายละเอียดอื่นๆ ที่เราควรทราบ โปรดระบุ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[14]||(t[14]=e=>i.note=e),placeholder:"กรอกรายละเอียดอื่นๆ",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.note]])]),(0,a.Lk)("div",null,[t[38]||(t[38]=(0,a.Lk)("label",{for:"address_1",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 1",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address","onUpdate:modelValue":t[15]||(t[15]=e=>i.address_1=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.address_1]])]),(0,a.Lk)("div",null,[t[39]||(t[39]=(0,a.Lk)("label",{for:"address_2",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 2 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_2","onUpdate:modelValue":t[16]||(t[16]=e=>i.address_2=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.address_2]])]),(0,a.Lk)("div",null,[t[40]||(t[40]=(0,a.Lk)("label",{for:"address_3",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 3 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_3","onUpdate:modelValue":t[17]||(t[17]=e=>i.address_3=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.address_3]])])]),(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.addCustomer&&n.addCustomer(...e)),class:"mt-4 px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover w-full"}," ยืนยัน ")])])])}var $s={data(){return{firstname:"",lastname:"",email:"",line_id:"",address_1:"",address_2:"",address_3:"",gender:"",tel:"",food_allergies:"",food_allergies_detail:"",delivery_date:"",recipient_mon_to_fri:"",note:"",customer_id:"",error:null,success:null}},created(){this.fetchUserData()},methods:{async fetchUserData(){try{const e=await ke.A.get("http://127.0.0.1:3333/profile");this.firstname=e.data.firstname,this.lastname=e.data.lastname,this.email=e.data.email}catch(e){this.error=e.response.data.message||"Failed to fetch user data"}},async addCustomer(){try{const e=await ke.A.post("http://127.0.0.1:3333/customer",{address_1:this.address_1,address_2:this.address_2,address_3:this.address_3,gender:this.gender,customer_id:this.customer_id,name:`${this.firstname} ${this.lastname}`,email:this.email,line_id:this.line_id,tel:this.tel,food_allergies:this.food_allergies+this.food_allergies_detail,delivery_date:this.delivery_date,recipient_mon_to_fri:this.recipient_mon_to_fri,note:this.note});this.success=e.data.message,this.address=""}catch(e){this.error=e.response.data.message||"Failed to add address"}}}};const Bs=(0,_e.A)($s,[["render",Us],["__scopeId","data-v-1a9d7a40"]]);var Ws=Bs;const qs={class:"flex items-center justify-center inset-0"},Zs={class:"flex flex-col items-center"},js={class:"bg-gray-100 bg-opacity-50 backdrop-blur-md w-full h-auto max-h-[750px] p-8 rounded-lg shadow-lg border flex flex-col mt-4"},Js={key:0,class:"text-red-500 text-center mb-4"},Ks={key:1,class:"text-green-500 text-center mb-4"},Hs={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Ys={class:"flex space-x-4"},Gs={class:"w-1/2"},eo={class:"w-1/2"},to={class:"flex space-x-4"},so={class:"w-1/2"},oo={class:"w-1/2"},ao={class:"flex space-x-4"},ro={class:"text-gray-700"};function lo(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",qs,[(0,a.Lk)("div",Zs,[(0,a.Lk)("div",js,[t[29]||(t[29]=(0,a.Lk)("h2",{class:"text-2xl font-bold text-center mb-6 text-gray-700"},"ลงทะเบียนข้อมูลลูกค้า",-1)),i.error?((0,a.uX)(),(0,a.CE)("p",Js,(0,l.v_)(i.error),1)):(0,a.Q3)("",!0),i.success?((0,a.uX)(),(0,a.CE)("p",Ks,(0,l.v_)(i.success),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",Hs,[(0,a.Lk)("div",Ys,[(0,a.Lk)("div",Gs,[t[14]||(t[14]=(0,a.Lk)("label",{for:"firstname",class:"block font-medium text-gray-700"},"First Name",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.firstname=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.firstname]])]),(0,a.Lk)("div",eo,[t[15]||(t[15]=(0,a.Lk)("label",{for:"lastname",class:"block font-medium text-gray-700"},"Last Name",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.lastname=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.lastname]])])]),(0,a.Lk)("div",null,[t[16]||(t[16]=(0,a.Lk)("label",{for:"email",class:"block font-medium text-gray-700"},"Email",-1)),(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>i.email=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.email]])]),(0,a.Lk)("div",null,[t[17]||(t[17]=(0,a.Lk)("label",{for:"customer_id",class:"block font-medium text-gray-700"},"รหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>i.customer_id=e),placeholder:"กรอกรหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.customer_id]])]),(0,a.Lk)("div",to,[(0,a.Lk)("div",so,[t[18]||(t[18]=(0,a.Lk)("label",{for:"tel",class:"block font-medium text-gray-700"},"Phone Number",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>i.tel=e),maxlength:"10",placeholder:"กรอกหมายเลขโทรศัพท์",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.tel]])]),(0,a.Lk)("div",oo,[t[19]||(t[19]=(0,a.Lk)("label",{for:"line_id",class:"block font-medium text-gray-700"},"Line ID (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>i.line_id=e),placeholder:"กรอก line id",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.line_id]])])]),(0,a.Lk)("div",null,[t[22]||(t[22]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"ผู้รับอาหาร?",-1)),(0,a.Lk)("div",ao,[(0,a.Lk)("label",ro,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=e=>i.recipient=e),value:"ตัวคุณเอง",class:"focus:ring-custom-orange custom-radio"},null,512),[[o.XL,i.recipient]]),t[20]||(t[20]=(0,a.eW)(" ตัวคุณเอง "))]),t[21]||(t[21]=(0,a.Lk)("label",{class:"text-gray-700"}," มีผู้อื่นรับแทน (โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อในบรรทัดด้านล่าง) ",-1))])]),t[28]||(t[28]=(0,a.Lk)("label",{for:"recipient",class:"block font-medium text-gray-700"},"โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"recipient","onUpdate:modelValue":t[7]||(t[7]=e=>i.recipient=e),placeholder:"Enter details here",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.recipient]]),(0,a.Lk)("div",null,[t[23]||(t[23]=(0,a.Lk)("label",{for:"note",class:"block font-medium text-gray-700"},"โปรดระบุเบอร์โทรติดต่อสำรอง หรือรายละเอียดอื่น ๆ ที่เราควรทราบ (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[8]||(t[8]=e=>i.note=e),placeholder:"ระบุเบอร์โทรติดต่อสำรอง หรือรายละเอียดอื่น ๆ ที่เราควรทราบ (ถ้ามี)",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.note]])]),(0,a.Lk)("div",null,[t[24]||(t[24]=(0,a.Lk)("label",{for:"address_1",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 1",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address","onUpdate:modelValue":t[9]||(t[9]=e=>i.address_1=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.address_1]])]),(0,a.Lk)("div",null,[t[25]||(t[25]=(0,a.Lk)("label",{for:"address_2",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 2 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_2","onUpdate:modelValue":t[10]||(t[10]=e=>i.address_2=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.address_2]])]),(0,a.Lk)("div",null,[t[26]||(t[26]=(0,a.Lk)("label",{for:"address_3",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 3 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_3","onUpdate:modelValue":t[11]||(t[11]=e=>i.address_3=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.address_3]])]),(0,a.Lk)("div",null,[t[27]||(t[27]=(0,a.Lk)("label",{for:"nearby_places",class:"block font-medium text-gray-700"},"สถานที่ใกล้เคียงหรือจุดสังเกตอื่น ๆ ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"nearby_places","onUpdate:modelValue":t[12]||(t[12]=e=>i.nearby_places=e),placeholder:"กรอกสถานที่ใกล้เคียงหรือจุดสังเกตอื่น ๆ ",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.nearby_places]])])]),(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.addCustomer&&n.addCustomer(...e)),class:"mt-4 px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover w-full"}," ยืนยัน ")])])])}var io={data(){return{firstname:"",lastname:"",email:"",line_id:"",address_1:"",address_2:"",address_3:"",nearby_places:"",tel:"",recipient:[],recipient_detail:"",note:"",customer_id:"",error:null,success:null}},created(){this.fetchUserData()},methods:{async fetchUserData(){try{const e=await ke.A.get("http://127.0.0.1:3333/profile");this.firstname=e.data.firstname,this.lastname=e.data.lastname,this.email=e.data.email}catch(e){this.error=e.response.data.message||"Failed to fetch user data"}},async addCustomer(){try{const e=await ke.A.post("http://127.0.0.1:3333/customer-hhb",{address_1:this.address_1,address_2:this.address_2,address_3:this.address_3,nearby_places:this.nearby_places,customer_id:this.customer_id,name:`${this.firstname} ${this.lastname}`,email:this.email,line_id:this.line_id,tel:this.tel,recipient:this.recipient,note:this.note});this.success=e.data.message,this.$router.push("/")}catch(e){this.error=e.response.data.message||"Failed to Register"}}}};const no=(0,_e.A)(io,[["render",lo],["__scopeId","data-v-363f0cc3"]]);var co=no;const uo={class:"flex items-center space-x-3 py-2"},po={class:"mt-4"},ho={class:"flex items-center"},go={class:"text-xl text-custom-orange font-bold ml-2"},mo={key:0,class:"mt-4 text-center text-gray-600"},yo={key:1,class:"mt-4 bg-white rounded-md shadow-lg p-4 border border-gray-300 overflow-y-auto h-[650px]"},ko={class:"flex justify-between items-center"},fo={class:"font-semibold"},bo={class:"text-gray-600"},xo={class:"mt-2 text-gray-500"},_o={class:"flex items-center"},wo={class:"ml-2 text-black"},vo={class:"flex items-center"},Lo={key:2,class:"mt-4 bg-white rounded-md shadow-lg p-4 border border-gray-300 h-[650px] flex justify-center items-center"};function Do(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",uo,[(0,a.Lk)("div",{onClick:t[0]||(t[0]=t=>e.$router.back()),class:"flex items-center space-x-1 cursor-pointer text-custom-orange hover:text-custom-orange-hover"},t[5]||(t[5]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"arrow_back",-1),(0,a.Lk)("span",{class:"text font-bold"},"กลับ",-1)])),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>n.changeDate(-1)),class:"flex items-center"},t[6]||(t[6]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[7]||(t[7]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>n.changeDate(1)),class:"flex items-center"},t[8]||(t[8]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[9]||(t[9]=(0,a.Lk)("strong",{class:"text-gray-700"},"เลือกวันที่:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"singleDatepicker",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),(0,a.Lk)("div",po,[(0,a.Lk)("div",ho,[t[10]||(t[10]=(0,a.Lk)("h1",{class:"text-xl font-bold"},"ประวัติการสั่งซื้อ: ",-1)),(0,a.Lk)("h1",go,(0,l.v_)(n.getCustomerName(i.customerId)),1)]),i.loading?((0,a.uX)(),(0,a.CE)("div",mo,"กำลังโหลด...")):(0,a.Q3)("",!0),i.orders.length>0?((0,a.uX)(),(0,a.CE)("div",yo,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.orders,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.order_date,class:"border-b border-gray-200 py-4"},[(0,a.Lk)("div",ko,[(0,a.Lk)("div",fo,(0,l.v_)(n.getMenuEngName(e.menu_id))+" ("+(0,l.v_)(n.getMenuThaiName(e.menu_id))+")",1),(0,a.Lk)("div",bo,(0,l.v_)(n.formattedDate(e.order_date)),1)]),(0,a.Lk)("div",xo,[(0,a.Lk)("div",_o,[t[11]||(t[11]=(0,a.Lk)("p",null,"จำนวน:",-1)),(0,a.Lk)("strong",wo,(0,l.v_)(e.quantity),1)]),(0,a.Lk)("div",vo,[t[12]||(t[12]=(0,a.Lk)("p",null,"สถานะ: ",-1)),(0,a.Lk)("div",{class:(0,l.C4)([{"text-yellow-500 font-bold":"pending"===e.status,"text-green-500 font-bold":"confirm"===e.status},"ml-2"])},(0,l.v_)(n.getStatusText(e.status)),3)])])])))),128))])):(0,a.Q3)("",!0),0===i.orders.length?((0,a.uX)(),(0,a.CE)("div",Lo,t[13]||(t[13]=[(0,a.Lk)("div",{class:"flex items-center space-x-1 text-gray-500 font-bold text-center"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"history_off"),(0,a.Lk)("span",{class:"text-xl"},"ไม่มีประวัติการสั่งซื้อในวันนี้")],-1)]))):(0,a.Q3)("",!0)])])}s(670),s(8872);var Po=s(2689),Co={data(){return{customerId:this.$route.params.customerId,orders:[],customers:[],menus:[],loading:!1,startDate:"",endDate:"",selectedDate:""}},computed:{formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""},groupedOrders(){const e=this.orders.reduce(((e,t)=>{e[t.order_date]||(e[t.order_date]=[]);const s=e[t.order_date].find((e=>e.menu_id===t.menu_id));return s?s.quantity+=t.quantity:e[t.order_date].push({menu_id:t.menu_id,quantity:t.quantity,menu_name:this.getMenuThaiName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),order_date:t.order_date,status:t.status,menu_type_id:t.menu_type_id}),e}),{});return Object.keys(e).flatMap((t=>e[t]))}},methods:{formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},async fetchOrders(e,t){this.loading=!0;try{const s=await ke.A.get(`http://127.0.0.1:3333/orders/user/${this.customerId}`,{params:{start_date:e,end_date:t}});this.orders=s.data.orders||[]}catch(s){this.orders=[]}finally{this.loading=!1}},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString(),this.endDate=t.toISOString())},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchOrdersData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchOrdersData()},fetchOrdersData(){this.startDate&&this.endDate&&this.fetchOrders(this.startDate,this.endDate)},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/menus")]);this.customers=e.data,this.menus=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id.toString()===e.toString()));return t?t.name:"ไม่พบข้อมูล"},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:"ไม่พบข้อมูล"},getMenuEngName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:"ไม่พบข้อมูล"},getStatusText(e){return"confirm"===e?"ยืนยันการสั่งซื้อแล้ว":"ยังไม่ได้ยืนยันการสั่งซื้อ"}},created(){this.fetchOrders(this.selectedDate),this.setToday(),this.fetchLookupData()},mounted(){this.fetchLookupData(),this.fetchOrders(this.selectedDate),this.setToday(),this.$nextTick((()=>{this.fetchOrdersData(),(0,Po.A)(this.$refs.singleDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.endDate=t,this.fetchOrdersData()}})}))}};const So=(0,_e.A)(Co,[["render",Do]]);var Ro=So;const To={class:"flex items-center space-x-3 py-2"},Mo={class:"mt-4"},Eo={class:"flex items-center"},Fo={class:"text-xl text-custom-orange font-bold ml-2"},zo={key:0,class:"mt-4 text-center text-gray-600"},Ao={key:1,class:"mt-4 bg-white rounded-md shadow-lg p-4 border border-gray-300 overflow-y-auto h-[650px]"},Oo={class:"flex justify-between items-center"},No={class:"font-semibold"},Xo={class:"text-gray-600"},Vo={class:"mt-2 text-gray-500"},Qo={class:"flex items-center"},Io={class:"ml-2 text-black"},Uo={class:"flex items-center"},$o={key:2,class:"mt-4 bg-white rounded-md shadow-lg p-4 border border-gray-300 h-[650px] flex justify-center items-center"};function Bo(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",To,[(0,a.Lk)("div",{onClick:t[0]||(t[0]=t=>e.$router.back()),class:"flex items-center space-x-1 cursor-pointer text-custom-orange hover:text-custom-orange-hover"},t[5]||(t[5]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"arrow_back",-1),(0,a.Lk)("span",{class:"text font-bold"},"กลับ",-1)])),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>n.changeDate(-1)),class:"flex items-center"},t[6]||(t[6]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[7]||(t[7]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>n.changeDate(1)),class:"flex items-center"},t[8]||(t[8]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[9]||(t[9]=(0,a.Lk)("strong",{class:"text-gray-700"},"เลือกวันที่:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"singleDatepicker",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),(0,a.Lk)("div",Mo,[(0,a.Lk)("div",Eo,[t[10]||(t[10]=(0,a.Lk)("h1",{class:"text-xl font-bold"},"ประวัติการสั่งซื้อ: ",-1)),(0,a.Lk)("h1",Fo,(0,l.v_)(n.getCustomerName(i.customerId)),1)]),i.loading?((0,a.uX)(),(0,a.CE)("div",zo,"กำลังโหลด...")):(0,a.Q3)("",!0),i.orders.length>0?((0,a.uX)(),(0,a.CE)("div",Ao,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.orders,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.order_date,class:"border-b border-gray-200 py-4"},[(0,a.Lk)("div",Oo,[(0,a.Lk)("div",No,(0,l.v_)(n.getMenuEngName(e.menu_id))+" ("+(0,l.v_)(n.getMenuThaiName(e.menu_id))+")",1),(0,a.Lk)("div",Xo,(0,l.v_)(n.formattedDate(e.order_date)),1)]),(0,a.Lk)("div",Vo,[(0,a.Lk)("div",Qo,[t[11]||(t[11]=(0,a.Lk)("p",null,"จำนวน:",-1)),(0,a.Lk)("strong",Io,(0,l.v_)(e.quantity),1)]),(0,a.Lk)("div",Uo,[t[12]||(t[12]=(0,a.Lk)("p",null,"สถานะ: ",-1)),(0,a.Lk)("div",{class:(0,l.C4)([{"text-yellow-500 font-bold":"pending"===e.status,"text-green-500 font-bold":"confirm"===e.status},"ml-2"])},(0,l.v_)(n.getStatusText(e.status)),3)])])])))),128))])):(0,a.Q3)("",!0),0===i.orders.length?((0,a.uX)(),(0,a.CE)("div",$o,t[13]||(t[13]=[(0,a.Lk)("div",{class:"flex items-center space-x-1 text-gray-500 font-bold text-center"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"history_off"),(0,a.Lk)("span",{class:"text-xl"},"ไม่มีประวัติการสั่งซื้อในวันนี้")],-1)]))):(0,a.Q3)("",!0)])])}var Wo={data(){return{customerId:this.$route.params.customerId,orders:[],customers:[],menus:[],loading:!1,startDate:"",endDate:"",selectedDate:""}},computed:{formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""},groupedOrders(){const e=this.orders.reduce(((e,t)=>{e[t.order_date]||(e[t.order_date]=[]);const s=e[t.order_date].find((e=>e.menu_id===t.menu_id));return s?s.quantity+=t.quantity:e[t.order_date].push({menu_id:t.menu_id,quantity:t.quantity,menu_name:this.getMenuThaiName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),order_date:t.order_date,status:t.status,menu_type_id:t.menu_type_id}),e}),{});return Object.keys(e).flatMap((t=>e[t]))}},methods:{formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},async fetchOrders(e,t){this.loading=!0;try{const s=await ke.A.get(`http://127.0.0.1:3333/orders-hhb/user/${this.customerId}`,{params:{start_date:e,end_date:t}});this.orders=s.data.orders||[]}catch(s){this.orders=[]}finally{this.loading=!1}},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString(),this.endDate=t.toISOString())},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchOrdersData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchOrdersData()},fetchOrdersData(){this.startDate&&this.endDate&&this.fetchOrders(this.startDate,this.endDate)},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers-hhb"),ke.A.get("http://127.0.0.1:3333/menus")]);this.customers=e.data,this.menus=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id.toString()===e.toString()));return t?t.name:"ไม่พบข้อมูล"},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:"ไม่พบข้อมูล"},getMenuEngName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:"ไม่พบข้อมูล"},getStatusText(e){return"confirm"===e?"ยืนยันการสั่งซื้อแล้ว":"ยังไม่ได้ยืนยันการสั่งซื้อ"}},created(){this.fetchOrders(this.selectedDate),this.setToday(),this.fetchLookupData()},mounted(){this.fetchLookupData(),this.fetchOrders(this.selectedDate),this.setToday(),this.$nextTick((()=>{this.fetchOrdersData(),(0,Po.A)(this.$refs.singleDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.endDate=t,this.fetchOrdersData()}})}))}};const qo=(0,_e.A)(Wo,[["render",Bo]]);var Zo=qo;const jo={class:"flex space-x-2 items-center relative"},Jo={class:"px-4 flex items-center space-x-1 mr-auto"},Ko={class:"text-m text-custom-orange font-bold"},Ho={class:"ml-2"},Yo={class:"sort relative inline-block",ref:"sortDropdown"},Go={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},ea={class:"list-none p-0 m-0"},ta={key:0,class:"material-symbols-outlined text-sm"},sa={key:0,class:"material-symbols-outlined text-sm"},oa={class:"filter relative inline-block",ref:"filterDropdown"},aa={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},ra={class:"p-4 w-[500px] list-none"},la={class:"grid grid-cols-2 gap-4"},ia=["value"],na={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},da={class:"flex space-x-2"},ca={class:"flex w-[250px] relative"},ua={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},pa={class:"bg-custom-orange text-white"},ha={class:"px-4 py-2 align-top pb-5"},ga={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},ma={class:"px-4 py-2 align-top pb-5"},ya={class:"px-4 py-2 align-top font-bold pb-5"},ka=["onClick"],fa={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},ba={class:"bg-white rounded-md w-1/3 max-w-lg"},xa={class:"font-bold"},_a={class:"p-6 space-y-4"},wa={class:"text-gray-700"},va={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},La={class:"px-4 py-2 align-top text-right pb-5"},Da={class:"flex justify-end space-x-2"},Pa=["onClick"],Ca={key:1},Sa={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Ra={class:"bg-white rounded-lg shadow-md w-1/3"},Ta={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Ma={class:"flex justify-end space-x-2 p-4 border-t"},Ea={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},Fa=["disabled"],za={class:"flex items-center space-x-1"},Aa=["onClick"],Oa=["disabled"];function Na(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[31]||(t[31]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[30]||(t[30]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[33]||(t[33]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[32]||(t[32]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",jo,[(0,a.Lk)("div",Jo,[t[34]||(t[34]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"account_circle",-1)),t[35]||(t[35]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนผู้ใช้งานทั้งหมด: ",-1)),(0,a.Lk)("span",Ko,(0,l.v_)(i.users.length)+" ผู้ใช้งาน",1)]),i.selectedUser.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[37]||(t[37]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",Ho,[t[36]||(t[36]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedUser.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedUser.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Yo,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[38]||(t[38]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[39]||(t[39]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto transition-transform duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",Go,[(0,a.Lk)("ul",ea,[(0,a.Lk)("li",{onClick:t[4]||(t[4]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[40]||(t[40]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",ta,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[5]||(t[5]=e=>n.sortData("username")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[41]||(t[41]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"username"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",sa,(0,l.v_)(1===i.sortDirection["username"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[6]||(t[6]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[42]||(t[42]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",oa,[(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[43]||(t[43]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[44]||(t[44]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",aa,[(0,a.Lk)("div",ra,[t[45]||(t[45]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Role",-1)),(0,a.Lk)("div",la,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.uniqueRoles,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>i.selectedUser=e),value:e,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,ia),[[o.lH,i.selectedUser]]),(0,a.Lk)("span",null,(0,l.v_)(n.getRoleText(e)),1)])))),128))])]),(0,a.Lk)("div",na,[(0,a.Lk)("li",{onClick:t[9]||(t[9]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[46]||(t[46]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",da,[(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",ca,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[13]||(t[13]=(0,o.jR)(((...t)=>e.search&&e.search(...t)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[14]||(t[14]=(...t)=>e.clearSearch&&e.clearSearch(...t)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...t)=>e.search&&e.search(...t)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",ua,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",pa,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredUser.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(n.filteredUser,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",ha,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",ga,(0,l.v_)(e.username),1),(0,a.Lk)("td",ma,(0,l.v_)(e.email),1),(0,a.Lk)("td",ya,[(0,a.Lk)("button",{onClick:t=>n.openChangeRoleModal(e),class:(0,l.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none hover:text-gray-200",n.getRoleClass(e.role)])},(0,l.v_)(n.getRoleText(e.role)),11,ka),i.isChangeRoleModalOpen?((0,a.uX)(),(0,a.CE)("div",fa,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[48]||(t[48]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[16]||(t[16]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[47]||(t[47]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",ba,[(0,a.Lk)("div",{class:(0,l.C4)([{"bg-green-500":"admin"===i.selectedUserRole.role,"bg-yellow-500":"customer"===i.selectedUserRole.role},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,a.Lk)("span",xa,(0,l.v_)("customer"===i.selectedUserRole.role?'เปลี่ยน Role เป็น "แอดมิน"':'เปลี่ยน Role เป็น "ผู้ใช้งานทั่วไป"'),1),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.closeChangeRoleModal&&n.closeChangeRoleModal(...e)),class:"text-white hover:text-gray-200"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,a.Lk)("div",_a,[(0,a.Lk)("p",wa,(0,l.v_)("customer"===i.selectedUserRole.role?'คุณต้องการเปลี่ยน Role เป็น "แอดมิน" หรือไม่?':'คุณต้องการเปลี่ยน Role เป็น "ผู้ใช้งานทั่วไป" หรือไม่?'),1)]),(0,a.Lk)("div",va,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.closeChangeRoleModal&&n.closeChangeRoleModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>n.confirmPayment&&n.confirmPayment(...e)),class:(0,l.C4)([{"bg-green-500 hover:bg-green-600":"admin"===i.selectedUserRole.role,"bg-yellow-500 hover:bg-yellow-600":"customer"===i.selectedUserRole.role},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("td",La,[(0,a.Lk)("div",Da,[(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[50]||(t[50]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,Pa)])])])))),128)):(0,a.Q3)("",!0),0===n.filteredUser.length?((0,a.uX)(),(0,a.CE)("tr",Ca,t[51]||(t[51]=[(0,a.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",Sa,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[53]||(t[53]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[52]||(t[52]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Ra,[(0,a.Lk)("div",Ta,[t[54]||(t[54]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[21]||(t[21]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[55]||(t[55]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",Ma,[(0,a.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ea,[(0,a.Lk)("button",{onClick:t[24]||(t[24]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[56]||(t[56]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Fa),(0,a.Lk)("div",za,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[25]||(t[25]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[26]||(t[26]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,Aa)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[27]||(t[27]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[28]||(t[28]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Oa)])],64)}s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698),s(4520),s(1454);var Xa={name:"UserPage",data(){return{headers:["#","Username","Email","Role",""],headerWidths:["10%","20%","40%","15%","15%"],searchQuery:"",isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",users:[],currentPage:1,itemsPerPage:10,isDetailModalOpen:!1,moreOpenDropdownIndex:null,isEditModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,selectedUserRole:[],toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",selectedUser:[],isChangeRoleModalOpen:!1}},computed:{filteredUser(){const e=this.users.filter((e=>{const t=e.username||"",s=t.toLowerCase().includes(this.searchQuery.toLowerCase()),o=0===this.selectedUser.length||this.selectedUser.includes(e.role);return s&&o})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)},totalPages(){const e=this.users.filter((e=>{const t=e.username||"",s=t.toLowerCase().includes(this.searchQuery.toLowerCase()),o=0===this.selectedUser.length||this.selectedUser.includes(e.role);return s&&o}));return Math.ceil(e.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},uniqueRoles(){return[...new Set(this.users.map((e=>e.role)))]}},methods:{async fetchUsers(){try{const e=await ke.A.get("http://127.0.0.1:3333/users");this.users=e.data,this.users.sort(((e,t)=>e.id-t.id))}catch(e){}},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.users.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.users.sort(((e,t)=>e.id-t.id)),this.currentPage=1},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedUser.length>0?this.filteredUser=this.users.filter((e=>this.selectedUser.includes(e.role))):this.filteredUser=this.users,this.isFilterDropdownOpen=!1},clearFilter(){this.selectedUser=[],this.filteredUser=this.users},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/users/${this.itemToDelete}`),this.users=this.users.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchUsers(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openChangeRoleModal(e){this.selectedUserRole=e,this.isChangeRoleModalOpen=!0},closeChangeRoleModal(){this.isChangeRoleModalOpen=!1},async confirmPayment(){try{if(!this.selectedUserRole)return void this.showErrorToastNotification("กรุณาเลือกผู้ใช้ที่ต้องการอัปเดต!");const e="customer"===this.selectedUserRole.role?"admin":"customer",t=await ke.A.put(`http://127.0.0.1:3333/users/${this.selectedUserRole.id}/role`,{role:e});if(200!==t.status)throw new Error("Unexpected response status");this.showSuccessToastNotification(`เปลี่ยน Role เป็น ${e} สำเร็จ!`),this.selectedUserRole.role=e}catch(e){console.error("Error updating user role:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดต role!")}this.closeChangeRoleModal()},getRoleText(e){return"admin"===e?"แอดมิน":"ผู้ใช้งานทั่วไป"},getRoleClass(e){return"admin"===e?"text-white bg-yellow-500":"text-white bg-green-500"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.fetchUsers(),this.sortData("id")},mounted(){this.fetchUsers()}};const Va=(0,_e.A)(Xa,[["render",Na]]);var Qa=Va;const Ia={class:"mt-[-20px]"},Ua={class:"flex space-x-5"},$a={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},Ba={class:"text-center"},Wa={class:"text-3xl font-bold text-custom-orange"},qa={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},Za={class:"text-center"},ja={class:"text-3xl font-bold text-custom-orange"},Ja={class:"text-sm text-gray-600 mt-4"},Ka={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},Ha={class:"text-center"},Ya={class:"text-3xl font-bold text-custom-orange"},Ga={class:"flex space-x-2 items-center relative"},er={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},tr={class:"text-m text-custom-orange font-bold"},sr={class:"ml-2"},or={class:"sort relative inline-block",ref:"sortDropdown"},ar={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-52 z-50 border border-gray-300"},rr={class:"list-none p-0 m-0"},lr={key:0,class:"material-symbols-outlined text-sm"},ir={key:0,class:"material-symbols-outlined text-sm"},nr={key:0,class:"material-symbols-outlined text-sm"},dr={class:"filter relative inline-block",ref:"filterDropdown"},cr={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},ur={class:"p-4 w-[500px] list-none"},pr={class:"grid grid-cols-3 gap-4"},hr=["value"],gr={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},mr={class:"flex space-x-2"},yr={class:"flex w-[250px] relative"},kr={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},fr={class:"bg-custom-orange text-white"},br={class:"px-4 py-2 align-top pb-5"},xr={class:"px-4 py-2 align-top pb-5"},_r={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},wr={class:"px-4 py-2 align-top pb-5"},vr={class:"px-4 py-2 align-top pb-5"},Lr={class:"px-4 py-2 align-top pb-5"},Dr={class:"px-4 py-2 align-top pb-5"},Pr={key:0,class:"text-red-500 font-bold"},Cr={key:1},Sr={class:"px-4 py-2 align-top pb-5"},Rr={class:"px-4 py-2 align-top pb-5"},Tr={key:0,class:"text-red-500 font-bold"},Mr={key:1},Er=["onClick"],Fr={key:0},zr={class:"list-none p-0 m-0"},Ar=["onClick"],Or={key:1},Nr={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},Xr={class:"list-none p-0 m-0"},Vr=["onClick"],Qr={key:2},Ir={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Ur={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},$r={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Br={class:"flex space-x-2"},Wr={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},qr={class:"mr-2 pl-3 pr-3"},Zr={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},jr=["disabled"],Jr={class:"flex items-center space-x-1"},Kr=["onClick"],Hr=["disabled"];function Yr(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[25]||(t[25]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[24]||(t[24]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[27]||(t[27]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[26]||(t[26]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Ia,[(0,a.Lk)("div",Ua,[(0,a.Lk)("div",$a,[t[29]||(t[29]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",Ba,[(0,a.Lk)("p",Wa,(0,l.v_)(n.formatPrice(i.allTotalSales)),1),t[28]||(t[28]=(0,a.Lk)("p",{class:"text-sm text-gray-600 mt-4"},"ยอดขายทั้งหมด",-1))])]),(0,a.Lk)("div",qa,[t[31]||(t[31]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",Za,[(0,a.Lk)("p",ja,(0,l.v_)(n.formatPrice(i.totalSales)),1),(0,a.Lk)("p",Ja,[t[30]||(t[30]=(0,a.eW)("ยอดประจำวันที่ ")),(0,a.Lk)("strong",null,(0,l.v_)(n.formatDate(i.endDate)),1)])])]),(0,a.Lk)("div",Ka,[t[33]||(t[33]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," person ")],-1)),(0,a.Lk)("div",Ha,[(0,a.Lk)("p",Ya,(0,l.v_)(n.formatNumber(i.customers.length)),1),t[32]||(t[32]=(0,a.Lk)("p",{class:"text-sm text-gray-600 mt-4"},"ลูกค้าทั้งหมด (AFF)",-1))])])]),(0,a.Lk)("div",Ga,[(0,a.Lk)("div",er,[t[34]||(t[34]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"groups",-1)),t[35]||(t[35]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนลูกค้าที่ซื้อแพ็คเกจทั้งหมด: ",-1)),(0,a.Lk)("span",tr,(0,l.v_)(n.filteredSaleRecords1standRenew.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[37]||(t[37]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",sr,[t[36]||(t[36]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",or,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[38]||(t[38]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[39]||(t[39]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",ar,[(0,a.Lk)("ul",rr,[(0,a.Lk)("li",{onClick:t[4]||(t[4]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[40]||(t[40]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",lr,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[5]||(t[5]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[41]||(t[41]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",ir,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[6]||(t[6]=e=>n.sortData("paid_date")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[42]||(t[42]=(0,a.Lk)("span",null,"จัดเรียงตามวันที่ชำระ",-1)),"paid_date"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",nr,(0,l.v_)(1===i.sortDirection["paid_date"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[7]||(t[7]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[43]||(t[43]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",dr,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[44]||(t[44]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[45]||(t[45]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",cr,[(0,a.Lk)("div",ur,[t[46]||(t[46]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",pr,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPackageTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>i.selectedPackageType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,hr),[[o.lH,i.selectedPackageType]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",gr,[(0,a.Lk)("li",{onClick:t[10]||(t[10]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[47]||(t[47]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",mr,[(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",yr,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[14]||(t[14]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[15]||(t[15]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",kr,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",fr,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(i.filteredSaleRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",br,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",xr,(0,l.v_)(n.formatDate(e.paid_date)),1),(0,a.Lk)("td",_r,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",wr,(0,l.v_)(n.getPackageName(e.package_id)),1),(0,a.Lk)("td",vr,(0,l.v_)(n.formatDate(e.start_date)),1),(0,a.Lk)("td",Lr,(0,l.v_)(n.formatDate(e.expiry_date)),1),(0,a.Lk)("td",Dr,[e.remaining_days<=0?((0,a.uX)(),(0,a.CE)("span",Pr," หมดอายุ ")):((0,a.uX)(),(0,a.CE)("span",Cr,(0,l.v_)(e.remaining_days)+" วัน ",1))]),(0,a.Lk)("td",Sr,(0,l.v_)(e.total_boxes_show),1),(0,a.Lk)("td",Rr,[e.total_boxes<=0?((0,a.uX)(),(0,a.CE)("span",Tr,(0,l.v_)(e.total_boxes),1)):((0,a.uX)(),(0,a.CE)("span",Mr,(0,l.v_)(e.total_boxes),1))]),(0,a.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(s)},t[48]||(t[48]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,Er),n.filteredSaleRecords1standRenew.length>4?((0,a.uX)(),(0,a.CE)("div",Fr,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)([n.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",zr,[(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,Ar)])],2)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",Or,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",Nr,[(0,a.Lk)("ul",Xr,[(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,Vr)])])):(0,a.Q3)("",!0)]))],512)])))),128)):(0,a.Q3)("",!0),n.filteredSaleRecords1standRenew.length<6&&n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredSaleRecords1standRenew.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[49]||(t[49]=[(0,a.Lk)("td",{colspan:"10",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredSaleRecords1standRenew.length?((0,a.uX)(),(0,a.CE)("tr",Qr,t[50]||(t[50]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",Ir,[(0,a.Lk)("div",Ur,[(0,a.Lk)("div",$r,[t[51]||(t[51]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียด",-1)),(0,a.Lk)("div",Br,[(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Wr,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,t,s)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,l.C4)(["p-2 rounded-md",s%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},[(0,a.Lk)("strong",qr,(0,l.v_)(n.formatDetailLabel(t))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)],2)))),128))],512)])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Zr,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[52]||(t[52]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,jr),(0,a.Lk)("div",Jr,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[19]||(t[19]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[20]||(t[20]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,Kr)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[21]||(t[21]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[22]||(t[22]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[23]||(t[23]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Hr)])])],64)}var Gr={data(){return{headers:["#","วันที่ชำระ","Customer's Name","Package","วันเริ่มแพ็คเกจ","วันหมดอายุแพ็กเกจ","วันคงเหลือของแพ็กเกจ","Total boxes","Total boxes (เหลือ)",""],headerWidths:["5%","8%","15%","22%","8%","10%","12%","8%","10%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:"",total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},currentPage:1,itemsPerPage:10,allDailySales:[],allTotalSales:0,DailySales:[],totalSales:0,startDate:"",endDate:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.filteredSaleRecords1standRenew.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredDetailSaleRecord(){return{paid_date:this.formatDate(this.selectedSaleRecord.paid_date),name:this.selectedSaleRecord.customer?.name||"",package:this.selectedSaleRecord.package?.name||"",total_price:this.formatPrice(this.selectedSaleRecord.total_price),delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",food_allergies:(this.formatFoodAllergies(this.selectedSaleRecord.customer?.food_allergies)||"")+"\n"+(this.selectedSaleRecord.customer?.note||""),start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),total_days:this.selectedSaleRecord.package?.total_days||"",boxes_per_day:this.selectedSaleRecord.package?.boxes_per_day||"",total_boxes_show:this.selectedSaleRecord.total_boxes_show||"",total_boxes:this.selectedSaleRecord.total_boxes||"",credit:this.selectedSaleRecord.credit}},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},filteredSaleRecords1standRenew(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t})).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id),o="paid"===e.payment_status;return t&&s&&o}))},filteredPackageTypes(){return this.packageTypes.filter((e=>!e.name.toLowerCase().includes("additional sales")&&!e.name.toLowerCase().includes("consignment")))},filteredAdditionalTypes(){return this.additionalTypes.filter((e=>e.name.startsWith("AFF")))},filteredPrograms(){return this.programs.filter((e=>!e.name.startsWith("Happy")))},filteredInhouse(){return this.zoneDeliveries.filter((e=>e.name.startsWith("AFF")))},filteredOutsource(){return this.zoneDeliveries.filter((e=>!e.name.startsWith("AFF")))},...(0,Ze.L8)(["saleRecords"])},methods:{...(0,Ze.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.filteredSaleRecords1standRenew.slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.filteredSaleRecords1standRenew=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):"paid_date"===e?(o=new Date(t[e]),a=new Date(s[e])):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},filterEditPrograms(){this.selectedSaleRecord.promotion_type_id&&this.selectedSaleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.selectedSaleRecord.promotion_type_id.id)):this.programs=this.allPrograms},filterEditPackages(){this.selectedSaleRecord.program_id&&this.selectedSaleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.selectedSaleRecord.program_id.id)):this.packages=this.allPackages},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n,d,c,u,p]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/zone-delivery-types"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types"),ke.A.get("http://127.0.0.1:3333/delivery-rounds"),ke.A.get("http://127.0.0.1:3333/receive-foods"),ke.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=r.data,this.zoneDeliveryTypes=l.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ke.A.get("http://127.0.0.1:3333/sale-records");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},async fetchAllDailySales(){try{const e=await ke.A.get("http://127.0.0.1:3333/sales/all-daily",{});this.allDailySales=e.data.data.allDailySales,this.allTotalSales=e.data.data.totalSales}catch(e){console.error("Error fetching sales data in range:",e)}},async fetchDailySales(e,t){try{const s=await ke.A.get("http://127.0.0.1:3333/sales/daily",{params:{startDate:e,endDate:t}});this.dailySales=s.data.data.dailySales,this.totalSales=s.data.data.totalSales}catch(s){console.error("Error fetching sales data in range:",s)}},formatNumber(e){return new Intl.NumberFormat("th-TH",{}).format(e)},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},getTotalBoxes(e){const t=this.packages.find((t=>t.id===e));return t?t.total_boxes:"ไม่พบข้อมูล"},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={paid_date:"วันที่ชำระเงิน",name:"ชื่อ-นามสกุล",package:"แพ็กเกจที่ซื้อ",total_price:"มูลค่าขายรวม",delivery_date:"วันที่ต้องการรับอาหาร",food_allergies:"Allergies /Special Requests",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",total_days:"Total days",boxes_per_day:"Box per Day",total_boxes_show:"Total boxes",total_boxes:"Total boxes (เหลือ)",credit:"Credit"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},formatFoodAllergies(e){return"Yes"===e?"ใช่ Yes,":"No"===e?"ไม่ No":e},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.promotion_type_id":function(){this.filterPrograms()},"selectedSaleRecord.promotion_type_id":function(){this.filterEditPrograms()},"saleRecord.program_id":function(){this.filterPackages()},"selectedSaleRecord.program_id":function(){this.filterEditPackages()},searchQuery(){this.updatePage()},currentPage(){this.updatePage()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.fetchAllDailySales(),this.fetchDailySales(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.fetchAllDailySales(),this.fetchDailySales(),this.updatePage();const e=new Date,t=e.toISOString().split("T")[0];this.endDate=t},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const el=(0,_e.A)(Gr,[["render",Yr]]);var tl=el;const sl={class:"mt-[-20px]"},ol={class:"flex space-x-5"},al={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},rl={class:"text-center"},ll={class:"text-3xl font-bold text-custom-orange"},il={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},nl={class:"text-center"},dl={class:"text-3xl font-bold text-custom-orange"},cl={class:"text-sm text-gray-600 mt-4"},ul={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},pl={class:"text-center"},hl={class:"text-3xl font-bold text-custom-orange"},gl={class:"flex space-x-2 items-center relative"},ml={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},yl={class:"text-m text-custom-orange font-bold"},kl={class:"ml-2"},fl={class:"sort relative inline-block",ref:"sortDropdown"},bl={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-52 z-50 border border-gray-300"},xl={class:"list-none p-0 m-0"},_l={key:0,class:"material-symbols-outlined text-sm"},wl={key:0,class:"material-symbols-outlined text-sm"},vl={key:0,class:"material-symbols-outlined text-sm"},Ll={class:"filter relative inline-block",ref:"filterDropdown"},Dl={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},Pl={class:"p-4 w-[500px] list-none"},Cl={class:"grid grid-cols-3 gap-4"},Sl=["value"],Rl={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Tl={class:"flex space-x-2"},Ml={class:"flex w-[250px] relative"},El={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},Fl={class:"bg-custom-orange text-white"},zl={class:"px-4 py-2 align-top pb-5"},Al={class:"px-4 py-2 align-top pb-5"},Ol={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},Nl={class:"px-4 py-2 align-top pb-5"},Xl={class:"px-4 py-2 align-top pb-5"},Vl={class:"px-4 py-2 align-top pb-5"},Ql={class:"px-4 py-2 align-top pb-5"},Il={key:0,class:"text-red-500 font-bold"},Ul={key:1},$l={class:"px-4 py-2 align-top pb-5"},Bl={class:"px-4 py-2 align-top pb-5"},Wl={key:0,class:"text-red-500 font-bold"},ql={key:1},Zl=["onClick"],jl={key:0},Jl={class:"list-none p-0 m-0"},Kl=["onClick"],Hl={key:1},Yl={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},Gl={class:"list-none p-0 m-0"},ei=["onClick"],ti={key:2},si={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},oi={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},ai={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},ri={class:"flex space-x-2"},li={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},ii={class:"mr-2 pl-3 pr-3"},ni={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},di=["disabled"],ci={class:"flex items-center space-x-1"},ui=["onClick"],pi=["disabled"];function hi(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[25]||(t[25]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[24]||(t[24]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[27]||(t[27]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[26]||(t[26]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",sl,[(0,a.Lk)("div",ol,[(0,a.Lk)("div",al,[t[29]||(t[29]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",rl,[(0,a.Lk)("p",ll,(0,l.v_)(n.formatPrice(i.allTotalSales)),1),t[28]||(t[28]=(0,a.Lk)("p",{class:"text-sm text-gray-600 mt-4"},"ยอดขายทั้งหมด",-1))])]),(0,a.Lk)("div",il,[t[31]||(t[31]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",nl,[(0,a.Lk)("p",dl,(0,l.v_)(n.formatPrice(i.totalSales)),1),(0,a.Lk)("p",cl,[t[30]||(t[30]=(0,a.eW)("ยอดประจำวันที่ ")),(0,a.Lk)("strong",null,(0,l.v_)(n.formatDate(i.endDate)),1)])])]),(0,a.Lk)("div",ul,[t[33]||(t[33]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," person ")],-1)),(0,a.Lk)("div",pl,[(0,a.Lk)("p",hl,(0,l.v_)(n.formatNumber(i.customers.length)),1),t[32]||(t[32]=(0,a.Lk)("p",{class:"text-sm text-gray-600 mt-4"},"ลูกค้าทั้งหมด (AFF)",-1))])])]),(0,a.Lk)("div",gl,[(0,a.Lk)("div",ml,[t[34]||(t[34]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"groups",-1)),t[35]||(t[35]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนลูกค้าที่ซื้อแพ็คเกจทั้งหมด: ",-1)),(0,a.Lk)("span",yl,(0,l.v_)(n.filteredSaleRecords1standRenew.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[37]||(t[37]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",kl,[t[36]||(t[36]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",fl,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[38]||(t[38]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[39]||(t[39]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",bl,[(0,a.Lk)("ul",xl,[(0,a.Lk)("li",{onClick:t[4]||(t[4]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[40]||(t[40]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",_l,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[5]||(t[5]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[41]||(t[41]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",wl,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[6]||(t[6]=e=>n.sortData("paid_date")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[42]||(t[42]=(0,a.Lk)("span",null,"จัดเรียงตามวันที่ชำระ",-1)),"paid_date"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",vl,(0,l.v_)(1===i.sortDirection["paid_date"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[7]||(t[7]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[43]||(t[43]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Ll,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[44]||(t[44]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[45]||(t[45]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",Dl,[(0,a.Lk)("div",Pl,[t[46]||(t[46]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",Cl,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPackageTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>i.selectedPackageType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,Sl),[[o.lH,i.selectedPackageType]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",Rl,[(0,a.Lk)("li",{onClick:t[10]||(t[10]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[47]||(t[47]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",Tl,[(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Ml,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[14]||(t[14]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[15]||(t[15]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",El,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Fl,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(i.filteredSaleRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",zl,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",Al,(0,l.v_)(n.formatDate(e.paid_date)),1),(0,a.Lk)("td",Ol,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",Nl,(0,l.v_)(n.getPackageName(e.package_id)),1),(0,a.Lk)("td",Xl,(0,l.v_)(n.formatDate(e.start_date)),1),(0,a.Lk)("td",Vl,(0,l.v_)(n.formatDate(e.expiry_date)),1),(0,a.Lk)("td",Ql,[e.remaining_days<=0?((0,a.uX)(),(0,a.CE)("span",Il," หมดอายุ ")):((0,a.uX)(),(0,a.CE)("span",Ul,(0,l.v_)(e.remaining_days)+" วัน ",1))]),(0,a.Lk)("td",$l,(0,l.v_)(e.total_boxes_show),1),(0,a.Lk)("td",Bl,[e.total_boxes<=0?((0,a.uX)(),(0,a.CE)("span",Wl,(0,l.v_)(e.total_boxes),1)):((0,a.uX)(),(0,a.CE)("span",ql,(0,l.v_)(e.total_boxes),1))]),(0,a.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(s)},t[48]||(t[48]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,Zl),n.filteredSaleRecords1standRenew.length>4?((0,a.uX)(),(0,a.CE)("div",jl,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)([n.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",Jl,[(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,Kl)])],2)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",Hl,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",Yl,[(0,a.Lk)("ul",Gl,[(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,ei)])])):(0,a.Q3)("",!0)]))],512)])))),128)):(0,a.Q3)("",!0),n.filteredSaleRecords1standRenew.length<6&&n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredSaleRecords1standRenew.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[49]||(t[49]=[(0,a.Lk)("td",{colspan:"10",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredSaleRecords1standRenew.length?((0,a.uX)(),(0,a.CE)("tr",ti,t[50]||(t[50]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",si,[(0,a.Lk)("div",oi,[(0,a.Lk)("div",ai,[t[51]||(t[51]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียด",-1)),(0,a.Lk)("div",ri,[(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",li,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,t,s)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,l.C4)(["p-2 rounded-md",s%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},[(0,a.Lk)("strong",ii,(0,l.v_)(n.formatDetailLabel(t))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)],2)))),128))],512)])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",ni,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[52]||(t[52]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,di),(0,a.Lk)("div",ci,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[19]||(t[19]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[20]||(t[20]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,ui)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[21]||(t[21]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[22]||(t[22]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[23]||(t[23]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,pi)])])],64)}var gi={data(){return{headers:["#","วันที่ชำระ","Customer's Name","Package","วันเริ่มแพ็คเกจ","วันหมดอายุแพ็กเกจ","วันคงเหลือของแพ็กเกจ","Total boxes","Total boxes (เหลือ)",""],headerWidths:["5%","8%","15%","22%","8%","10%","12%","8%","10%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:"",total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},currentPage:1,itemsPerPage:10,allDailySales:[],allTotalSales:0,DailySales:[],totalSales:0,startDate:"",endDate:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.filteredSaleRecords1standRenew.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredDetailSaleRecord(){return{paid_date:this.formatDate(this.selectedSaleRecord.paid_date),name:this.selectedSaleRecord.customer?.name||"",package:this.selectedSaleRecord.package?.name||"",total_price:this.formatPrice(this.selectedSaleRecord.total_price),delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",food_allergies:(this.formatFoodAllergies(this.selectedSaleRecord.customer?.food_allergies)||"")+"\n"+(this.selectedSaleRecord.customer?.note||""),start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),total_days:this.selectedSaleRecord.package?.total_days||"",boxes_per_day:this.selectedSaleRecord.package?.boxes_per_day||"",total_boxes_show:this.selectedSaleRecord.total_boxes_show||"",total_boxes:this.selectedSaleRecord.total_boxes||"",credit:this.selectedSaleRecord.credit}},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},filteredSaleRecords1standRenew(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t})).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id),o="paid"===e.payment_status;return t&&s&&o}))},filteredPackageTypes(){return this.packageTypes.filter((e=>!e.name.toLowerCase().includes("additional sales")&&!e.name.toLowerCase().includes("consignment")))},...(0,Ze.L8)(["saleRecords"])},methods:{...(0,Ze.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.filteredSaleRecords1standRenew.slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.filteredSaleRecords1standRenew=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):"paid_date"===e?(o=new Date(t[e]),a=new Date(s[e])):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},filterEditPrograms(){this.selectedSaleRecord.promotion_type_id&&this.selectedSaleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.selectedSaleRecord.promotion_type_id.id)):this.programs=this.allPrograms},filterEditPackages(){this.selectedSaleRecord.program_id&&this.selectedSaleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.selectedSaleRecord.program_id.id)):this.packages=this.allPackages},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n,d,c,u,p]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers-hhb"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/zone-delivery-types"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types"),ke.A.get("http://127.0.0.1:3333/delivery-rounds"),ke.A.get("http://127.0.0.1:3333/receive-foods"),ke.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=r.data,this.zoneDeliveryTypes=l.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ke.A.get("http://127.0.0.1:3333/sale-records-hhb");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},async fetchAllDailySales(){try{const e=await ke.A.get("http://127.0.0.1:3333/sales-hhb/all-daily",{});this.allDailySales=e.data.data.allDailySales,this.allTotalSales=e.data.data.totalSales}catch(e){console.error("Error fetching sales data in range:",e)}},async fetchDailySales(e,t){try{const s=await ke.A.get("http://127.0.0.1:3333/sales-hhb/daily",{params:{startDate:e,endDate:t}});this.dailySales=s.data.data.dailySales,this.totalSales=s.data.data.totalSales}catch(s){console.error("Error fetching sales data in range:",s)}},formatNumber(e){return new Intl.NumberFormat("th-TH",{}).format(e)},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},getTotalBoxes(e){const t=this.packages.find((t=>t.id===e));return t?t.total_boxes:"ไม่พบข้อมูล"},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={paid_date:"วันที่ชำระเงิน",name:"ชื่อ-นามสกุล",package:"แพ็กเกจที่ซื้อ",total_price:"มูลค่าขายรวม",delivery_date:"วันที่ต้องการรับอาหาร",food_allergies:"Allergies /Special Requests",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",total_days:"Total days",boxes_per_day:"Box per Day",total_boxes_show:"Total boxes",total_boxes:"Total boxes (เหลือ)",credit:"Credit"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},formatFoodAllergies(e){return"Yes"===e?"ใช่ Yes,":"No"===e?"ไม่ No":e},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.promotion_type_id":function(){this.filterPrograms()},"selectedSaleRecord.promotion_type_id":function(){this.filterEditPrograms()},"saleRecord.program_id":function(){this.filterPackages()},"selectedSaleRecord.program_id":function(){this.filterEditPackages()},searchQuery(){this.updatePage()},currentPage(){this.updatePage()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.fetchAllDailySales(),this.fetchDailySales(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.fetchAllDailySales(),this.fetchDailySales(),this.updatePage();const e=new Date,t=e.toISOString().split("T")[0];this.endDate=t},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const mi=(0,_e.A)(gi,[["render",hi]]);var yi=mi;const ki={class:"mt-[-20px]"},fi={class:"flex space-x-2 items-center relative"},bi={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},xi={class:"text-m text-custom-orange font-bold"},_i={class:"ml-2"},wi={class:"add relative inline-block"},vi={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Li={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Di={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Pi={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Ci={key:0},Si={class:"flex-1"},Ri={class:"relative"},Ti={key:1},Mi={key:1,class:"mt-4 p-4 border border-custom-orange rounded-md"},Ei={class:"flex flex-wrap"},Fi={class:"md:w-1/2 lg:w-1/4"},zi={class:"md:w-1/2 lg:w-1/4"},Ai={class:"md:w-1/2 lg:w-1/4"},Oi={class:"md:w-1/2 lg:w-1/4"},Ni={class:"md:w-1/2 lg:w-1/4"},Xi={class:"md:w-1/2 lg:w-1/4"},Vi={class:"md:w-1/2 lg:w-1/4"},Qi={class:"md:w-1/2 lg:w-1/4"},Ii={class:"space-y-4 overflow-y-auto flex-grow mt-4"},Ui={class:"flex flex-wrap gap-4"},$i={class:"flex-1"},Bi={class:"flex-1"},Wi={class:"flex-1"},qi={class:"flex-1"},Zi={class:"flex flex-wrap gap-4"},ji={class:"flex-1"},Ji={class:"flex-1"},Ki={class:"flex-1"},Hi={class:"flex-1"},Yi={class:"flex space-x-4"},Gi={class:"flex-1"},en={class:"relative"},tn={class:"flex-1"},sn={class:"relative"},on={key:2},an={class:"flex-1"},rn={class:"block font-bold text-gray-700"},ln={class:"text-gray-600"},nn={class:"text-gray-600"},dn={class:"text-gray-600"},cn={key:3},un={class:"block font-bold text-gray-700"},pn={class:"text-gray-600"},hn={class:"text-gray-600"},gn={class:"text-gray-600"},mn={key:4,class:"mt-4 p-4 border border-custom-orange rounded-md"},yn={key:0},kn={key:1},fn={key:2},bn={class:"flex-1"},xn={class:"flex space-x-4"},_n={class:"flex-1"},wn={class:"flex-1"},vn={key:5,class:"flex-1"},Ln={class:"block font-bold text-gray-700"},Dn={class:"text-gray-600"},Pn={class:"flex space-x-4"},Cn={class:"flex-1"},Sn={class:"flex-1"},Rn={key:6,class:"flex-1"},Tn={class:"block font-bold text-gray-700"},Mn={class:"text-gray-600"},En={class:"flex space-x-4"},Fn={class:"flex-1"},zn={class:"flex-1"},An={key:7,class:"flex-1"},On={class:"block font-bold text-gray-700"},Nn={class:"text-gray-600"},Xn={class:"flex space-x-4"},Vn={class:"flex-1"},Qn={class:"flex-1"},In={key:8,class:"flex-1"},Un={class:"block font-bold text-gray-700"},$n={class:"text-gray-600"},Bn={key:9,class:"flex-1"},Wn={class:"block font-bold text-gray-700"},qn={class:"text-gray-600"},Zn={class:"text-gray-600"},jn={key:10,class:"flex-1"},Jn={class:"block font-bold text-custom-orange"},Kn={key:0},Hn={class:"text-gray-600"},Yn={key:1},Gn={class:"text-gray-600"},ed={class:"text-gray-600"},td={class:"flex space-x-4"},sd={class:"flex-1"},od={class:"flex-1"},ad={class:"flex space-x-4"},rd={class:"flex-1"},ld={class:"flex-1"},id={class:"mb-4"},nd={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},dd={class:"flex space-x-2"},cd={class:"sort relative inline-block",ref:"sortDropdown"},ud={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},pd={class:"list-none p-0 m-0"},hd={key:0,class:"material-symbols-outlined text-sm"},gd={key:0,class:"material-symbols-outlined text-sm"},md={class:"filter relative inline-block",ref:"filterDropdown"},yd={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},kd={class:"p-4 w-[500px] list-none"},fd={class:"grid grid-cols-3 gap-4"},bd=["value"],xd={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},_d={class:"flex space-x-2"},wd={class:"flex w-[250px] relative"},vd={key:0,class:"p-4 flex items-left space-x-6 text-m font-bold"},Ld={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},Dd={class:"bg-custom-orange text-white"},Pd={class:"px-4 py-2 align-top pb-5"},Cd={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},Sd={class:"px-4 py-2 align-top pb-5 font-bold"},Rd={class:"px-4 py-2 align-top pb-5"},Td={class:"px-4 py-2 align-top pb-5"},Md={class:"px-4 py-2 align-top pb-5"},Ed={key:0,class:"text-red-500 font-bold"},Fd={key:1},zd={class:"px-4 py-2 align-top pb-5"},Ad={class:"px-4 py-2 align-top font-bold pb-5"},Od=["onClick"],Nd={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},Xd={class:"bg-white rounded-md w-1/3 max-w-lg"},Vd={class:"font-bold"},Qd={class:"p-6 space-y-4"},Id={class:"text-gray-700"},Ud={key:0},$d={key:1,class:"mt-4"},Bd={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},Wd=["onClick"],qd={key:0},Zd={class:"list-none p-0 m-0"},jd=["onClick"],Jd=["onClick"],Kd=["onClick"],Hd=["onClick"],Yd={key:1},Gd={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},ec={class:"list-none p-0 m-0"},tc=["onClick"],sc=["onClick"],oc=["onClick"],ac=["onClick"],rc={key:2},lc={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},ic={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},nc={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},dc={class:"flex space-x-2"},cc={class:"p-6",ref:"modalContent"},uc={key:0},pc={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},hc={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},gc={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},mc={class:"flex space-x-2"},yc={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},kc={key:0,class:"flex items-center space-x-4 pl-3 pr-3"},fc={class:"flex-1"},bc={class:"mr-2"},xc={class:"flex-1"},_c={class:"flex-1"},wc={key:1,class:"flex items-center space-x-4 pl-3 pr-3"},vc={class:"flex-1"},Lc={class:"mr-2"},Dc={class:"flex-1"},Pc={class:"flex-1"},Cc={key:2,class:"flex items-center space-x-4 pl-3 pr-3"},Sc={class:"flex-1"},Rc={class:"mr-2"},Tc={class:"flex-1"},Mc={class:"flex-1"},Ec={key:3,class:"flex items-center space-x-4 pl-3 pr-3"},Fc={class:"flex-1"},zc={class:"mr-2"},Ac={class:"flex-1"},Oc={class:"flex-1"},Nc={class:"mr-2 pl-3 pr-3"},Xc={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Vc={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Qc={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Ic={class:"flex space-x-2"},Uc={class:"p-6 space-y-4 overflow-y-auto flex-grow"},$c={key:1,class:"mt-4 p-4 border border-custom-orange rounded-md"},Bc={class:"flex flex-wrap"},Wc={class:"md:w-1/2 lg:w-1/4"},qc={class:"md:w-1/2 lg:w-1/4"},Zc={class:"md:w-1/2 lg:w-1/4"},jc={class:"md:w-1/2 lg:w-1/4"},Jc={class:"md:w-1/2 lg:w-1/4"},Kc={class:"md:w-1/2 lg:w-1/4"},Hc={class:"md:w-1/2 lg:w-1/4"},Yc={class:"md:w-1/2 lg:w-1/4"},Gc={class:"space-y-4 overflow-y-auto flex-grow mt-4"},eu={class:"flex flex-wrap gap-4"},tu={class:"flex-1"},su={class:"flex-1"},ou={class:"flex-1"},au={class:"flex-1"},ru={class:"flex flex-wrap gap-4"},lu={class:"flex-1"},iu={class:"flex-1"},nu={class:"flex-1"},du={class:"flex-1"},cu={class:"flex space-x-4"},uu={class:"flex-1"},pu={class:"relative"},hu={class:"flex-1"},gu={class:"relative"},mu={key:0},yu={class:"flex-1"},ku={class:"block font-bold text-gray-700"},fu={class:"text-gray-600"},bu={class:"text-gray-600"},xu={class:"text-gray-600"},_u={class:"flex space-x-4"},wu={class:"flex-1"},vu={class:"flex-1"},Lu={key:1,class:"flex-1"},Du={class:"block font-bold text-gray-700"},Pu={class:"text-gray-600"},Cu={class:"flex space-x-4"},Su={class:"flex-1"},Ru={class:"flex-1"},Tu={key:2,class:"flex-2"},Mu={class:"block font-bold text-gray-700"},Eu={class:"text-gray-600"},Fu={class:"flex space-x-4"},zu={class:"flex-1"},Au={class:"flex-1"},Ou={key:3,class:"flex-1"},Nu={class:"block font-bold text-gray-700"},Xu={class:"text-gray-600"},Vu={class:"flex space-x-4"},Qu={class:"flex-1"},Iu={class:"flex-1"},Uu={key:4,class:"flex-1"},$u={class:"block font-bold text-gray-700"},Bu={class:"text-gray-600"},Wu={key:5,class:"flex-1"},qu={class:"block font-bold text-gray-700"},Zu={class:"text-gray-600"},ju={class:"text-gray-600"},Ju={key:6,class:"flex-1"},Ku={class:"block font-bold text-custom-orange"},Hu={class:"text-gray-600"},Yu={class:"text-gray-600"},Gu={class:"flex space-x-4"},ep={class:"flex-1"},tp={class:"flex-1"},sp={class:"flex space-x-4"},op={class:"flex-1"},ap={class:"flex-1"},rp={class:"mb-4"},lp={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},ip={class:"flex space-x-2"},np={key:3,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},dp={class:"bg-white rounded-lg shadow-md w-1/3"},cp={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},up={class:"flex justify-end space-x-2 p-4 border-t"},pp={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},hp=["disabled"],gp={class:"flex items-center space-x-1"},mp=["onClick"],yp=["disabled"];function kp(e,t,s,r,i,n){const d=(0,a.g2)("multiselect"),c=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[112]||(t[112]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[111]||(t[111]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[114]||(t[114]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[113]||(t[113]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",ki,[(0,a.Lk)("div",fi,[(0,a.Lk)("div",bi,[t[115]||(t[115]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"contact_page",-1)),t[116]||(t[116]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการบันทึกการขายทั้งหมด: ",-1)),(0,a.Lk)("span",xi,(0,l.v_)(n.filteredSaleRecords1standRenew.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[118]||(t[118]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",_i,[t[117]||(t[117]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",wi,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[119]||(t[119]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",vi,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[121]||(t[121]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[120]||(t[120]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Li,[(0,a.Lk)("div",Di,[t[122]||(t[122]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มบันทึกการขาย",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",Pi,[(0,a.Lk)("div",null,[t[123]||(t[123]=(0,a.Lk)("label",{for:"customer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.customer_id,"onUpdate:modelValue":t[6]||(t[6]=e=>i.saleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[124]||(t[124]=(0,a.Lk)("label",{for:"package_type",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.saleRecord.package_type_id=e),options:i.packageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),i.saleRecord.package_type_id&&"additional sales"===i.saleRecord.package_type_id.name.toLowerCase()||i.saleRecord.package_type_id&&"consignment"===i.saleRecord.package_type_id.name.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",Ci,[(0,a.Lk)("div",null,[t[125]||(t[125]=(0,a.Lk)("label",{for:"additional_type",class:"block font-bold text-gray-700"},"Sales Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.additional_type_id,"onUpdate:modelValue":t[8]||(t[8]=e=>i.saleRecord.additional_type_id=e),options:n.filteredAdditionalTypes,placeholder:"เลือก Sales Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[126]||(t[126]=(0,a.Lk)("label",{for:"add_detail",class:"block text-gray-700 font-bold"},"รายละเอียดการขาย",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"add_detail","onUpdate:modelValue":t[9]||(t[9]=e=>i.saleRecord.add_detail=e),placeholder:"กรอกรายละเอียดการขาย",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.add_detail]])]),(0,a.Lk)("div",Si,[t[128]||(t[128]=(0,a.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,a.Lk)("div",Ri,[t[127]||(t[127]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.saleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.add_price]])])]),(0,a.Lk)("div",null,[t[129]||(t[129]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดเพิ่มเติมที่ต้องได้รับอนุม้ติจาก Director",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[11]||(t[11]=e=>i.saleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.other_promotion_detail]])])])):(0,a.Q3)("",!0),"additional sales"!==i.saleRecord.package_type_id?.name?.toLowerCase()&&"consignment"!==i.saleRecord.package_type_id?.name?.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",Ti,[(0,a.Lk)("div",null,[t[130]||(t[130]=(0,a.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.promotion_type_id,"onUpdate:modelValue":t[12]||(t[12]=e=>i.saleRecord.promotion_type_id=e),options:i.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[131]||(t[131]=(0,a.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.program_id,"onUpdate:modelValue":t[13]||(t[13]=e=>i.saleRecord.program_id=e),options:n.filteredPrograms,placeholder:"เลือก Program","track-by":"id",label:"name",disabled:!i.saleRecord.promotion_type_id||!i.saleRecord.promotion_type_id.id},null,8,["modelValue","options","disabled"])]),(0,a.Lk)("div",null,[t[149]||(t[149]=(0,a.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_id,"onUpdate:modelValue":t[14]||(t[14]=e=>i.saleRecord.package_id=e),options:i.packages,placeholder:"เลือก Package","track-by":"id",label:"displayLabel",disabled:!i.saleRecord.program_id||!i.saleRecord.program_id.id},null,8,["modelValue","options","disabled"]),i.saleRecord.package_id&&i.saleRecord.package_id.id?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[15]||(t[15]=(0,o.D$)((e=>n.togglePackageDetails(i.saleRecord.package_id)),["prevent"])),class:"mt-2 cursor-pointer text-custom-orange text-left hover:underline"},(0,l.v_)(i.isShowingPackageDetails?"ปิดรายละเอียด":"ดูรายละเอียดแพ็คเกจ"),1)):(0,a.Q3)("",!0),i.packageDetails?((0,a.uX)(),(0,a.CE)("div",Mi,[t[148]||(t[148]=(0,a.Lk)("h3",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,a.Lk)("p",null,[t[132]||(t[132]=(0,a.Lk)("strong",null,"Package:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.name),1)]),(0,a.Lk)("p",null,[t[133]||(t[133]=(0,a.Lk)("strong",null,"ราคา:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(i.packageDetails.price)),1)]),(0,a.Lk)("p",null,[t[134]||(t[134]=(0,a.Lk)("strong",null,"Package Details for Purchase Summary:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_detail),1)]),(0,a.Lk)("p",null,[t[135]||(t[135]=(0,a.Lk)("strong",null,"Package Validity:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_validity)+" วัน ",1)]),(0,a.Lk)("p",null,[t[136]||(t[136]=(0,a.Lk)("strong",null,"Total Days:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_days)+" วัน ",1)]),(0,a.Lk)("p",null,[t[137]||(t[137]=(0,a.Lk)("strong",null,"# of Boxes/Day:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.boxes_per_day)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[138]||(t[138]=(0,a.Lk)("strong",null,"Total Boxes:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_boxes)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[139]||(t[139]=(0,a.Lk)("strong",null,"รายละเอียดโปรโมชัน:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.promotion_detail),1)]),(0,a.Lk)("div",Ei,[(0,a.Lk)("div",Fi,[(0,a.Lk)("p",null,[t[140]||(t[140]=(0,a.Lk)("strong",null,"M or A or D:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_mad),1)])]),(0,a.Lk)("div",zi,[(0,a.Lk)("p",null,[t[141]||(t[141]=(0,a.Lk)("strong",null,"Dessert:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dessert),1)])]),(0,a.Lk)("div",Ai,[(0,a.Lk)("p",null,[t[142]||(t[142]=(0,a.Lk)("strong",null,"Brittles:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_brittles),1)])]),(0,a.Lk)("div",Oi,[(0,a.Lk)("p",null,[t[143]||(t[143]=(0,a.Lk)("strong",null,"Energy Balls:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_energy_balls),1)])]),(0,a.Lk)("div",Ni,[(0,a.Lk)("p",null,[t[144]||(t[144]=(0,a.Lk)("strong",null,"Dressing:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dressing),1)])]),(0,a.Lk)("div",Xi,[(0,a.Lk)("p",null,[t[145]||(t[145]=(0,a.Lk)("strong",null,"Yoghurt:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_yoghurt),1)])]),(0,a.Lk)("div",Vi,[(0,a.Lk)("p",null,[t[146]||(t[146]=(0,a.Lk)("strong",null,"Granola:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_granola),1)])]),(0,a.Lk)("div",Qi,[(0,a.Lk)("p",null,[t[147]||(t[147]=(0,a.Lk)("strong",null,"เครดิตที่แถม (บาท):",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_credit),1)])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[t[150]||(t[150]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดโปรโมชันเพิ่มเติม (นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[16]||(t[16]=e=>i.saleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.other_promotion_detail]])]),(0,a.Lk)("div",Ii,[t[159]||(t[159]=(0,a.Lk)("strong",{class:"text-custom-orange text-lg"},"จำนวนที่แถม",-1)),(0,a.Lk)("div",Ui,[(0,a.Lk)("div",$i,[t[151]||(t[151]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[17]||(t[17]=e=>i.saleRecord.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_mad]])]),(0,a.Lk)("div",Bi,[t[152]||(t[152]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[18]||(t[18]=e=>i.saleRecord.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_dessert]])]),(0,a.Lk)("div",Wi,[t[153]||(t[153]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[19]||(t[19]=e=>i.saleRecord.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_brittles]])]),(0,a.Lk)("div",qi,[t[154]||(t[154]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[20]||(t[20]=e=>i.saleRecord.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_energy_balls]])])]),(0,a.Lk)("div",Zi,[(0,a.Lk)("div",ji,[t[155]||(t[155]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[21]||(t[21]=e=>i.saleRecord.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_dressing]])]),(0,a.Lk)("div",Ji,[t[156]||(t[156]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[22]||(t[22]=e=>i.saleRecord.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_yoghurt]])]),(0,a.Lk)("div",Ki,[t[157]||(t[157]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[23]||(t[23]=e=>i.saleRecord.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_granola]])]),(0,a.Lk)("div",Hi,[t[158]||(t[158]=(0,a.Lk)("label",{for:"freeCredit",class:"block font-bold text-gray-700"},"เครดิตที่แถม (บาท)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeCredit","onUpdate:modelValue":t[24]||(t[24]=e=>i.saleRecord.free_credit=e),type:"number",min:"0",step:"1",placeholder:"กรอกเครดิตที่แถม (บาท)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_credit]])])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Yi,[(0,a.Lk)("div",Gi,[t[161]||(t[161]=(0,a.Lk)("label",{for:"discount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",en,[t[160]||(t[160]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>i.saleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.discount]])])]),(0,a.Lk)("div",tn,[t[163]||(t[163]=(0,a.Lk)("label",{for:"extraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",sn,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>i.saleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.saleRecord.extra_charge]]),t[162]||(t[162]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),!n.isConsignmentOrAdditional&&n.computedTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",on,[(0,a.Lk)("div",an,[(0,a.Lk)("label",rn," มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPackagePrice)),1),(0,a.Lk)("p",ln,"ราคาแพ็กเกจ: "+(0,l.v_)(n.formatPrice(i.saleRecord.package_price)),1),(0,a.Lk)("p",nn,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.saleRecord.discount)),1),(0,a.Lk)("p",dn,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),n.isConsignmentOrAdditional&&n.computedTotalAdditionalPrice>0?((0,a.uX)(),(0,a.CE)("div",cn,[(0,a.Lk)("label",un," มูลค่าขาย: "+(0,l.v_)(n.formatPrice(n.computedTotalAdditionalPrice)),1),(0,a.Lk)("p",pn,"มูลค่าขาย: "+(0,l.v_)(n.formatPrice(i.saleRecord.add_price)),1),(0,a.Lk)("p",hn,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.saleRecord.discount)),1),(0,a.Lk)("p",gn,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedExtraChargeAdditionalPrice)),1)])):(0,a.Q3)("",!0),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",mn,[t[167]||(t[167]=(0,a.Lk)("h3",{class:"font-bold"},"ที่อยู่ลูกค้า",-1)),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",yn,[(0,a.Lk)("p",null,[t[164]||(t[164]=(0,a.Lk)("strong",null,"ที่อยู่ 1:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_1),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_2?((0,a.uX)(),(0,a.CE)("div",kn,[(0,a.Lk)("p",null,[t[165]||(t[165]=(0,a.Lk)("strong",null,"ที่อยู่ 2:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_2),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_3?((0,a.uX)(),(0,a.CE)("div",fn,[(0,a.Lk)("p",null,[t[166]||(t[166]=(0,a.Lk)("strong",null,"ที่อยู่ 3:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_3),1)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("div",bn,[t[168]||(t[168]=(0,a.Lk)("label",{for:"receiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.receive_food_id,"onUpdate:modelValue":t[27]||(t[27]=e=>i.saleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",xn,[(0,a.Lk)("div",_n,[t[169]||(t[169]=(0,a.Lk)("label",{for:"zone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone1_id,"onUpdate:modelValue":t[28]||(t[28]=e=>i.saleRecord.zone1_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",wn,[t[170]||(t[170]=(0,a.Lk)("label",{for:"zone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[29]||(t[29]=e=>i.saleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone1_quantity]])])]),n.computedZone1Price>0?((0,a.uX)(),(0,a.CE)("div",vn,[(0,a.Lk)("label",Ln,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,l.v_)(n.formatPrice(n.computedZone1Price)),1),(0,a.Lk)("p",Dn,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Pn,[(0,a.Lk)("div",Cn,[t[171]||(t[171]=(0,a.Lk)("label",{for:"zone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone2_id,"onUpdate:modelValue":t[30]||(t[30]=e=>i.saleRecord.zone2_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Sn,[t[172]||(t[172]=(0,a.Lk)("label",{for:"zone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[31]||(t[31]=e=>i.saleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone2_quantity]])])]),n.computedZone2Price>0?((0,a.uX)(),(0,a.CE)("div",Rn,[(0,a.Lk)("label",Tn,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,l.v_)(n.formatPrice(n.computedZone2Price)),1),(0,a.Lk)("p",Mn,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",En,[(0,a.Lk)("div",Fn,[t[173]||(t[173]=(0,a.Lk)("label",{for:"zone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone3_id,"onUpdate:modelValue":t[32]||(t[32]=e=>i.saleRecord.zone3_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",zn,[t[174]||(t[174]=(0,a.Lk)("label",{for:"zone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>i.saleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone3_quantity]])])]),n.computedZone3Price>0?((0,a.uX)(),(0,a.CE)("div",An,[(0,a.Lk)("label",On,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,l.v_)(n.formatPrice(n.computedZone3Price)),1),(0,a.Lk)("p",Nn,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Xn,[(0,a.Lk)("div",Vn,[t[175]||(t[175]=(0,a.Lk)("label",{for:"zone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone_outsource_id,"onUpdate:modelValue":t[34]||(t[34]=e=>i.saleRecord.zone_outsource_id=e),options:n.filteredOutsource,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Qn,[t[176]||(t[176]=(0,a.Lk)("label",{for:"zone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[35]||(t[35]=e=>i.saleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone_outsource_quantity]])])]),n.computedZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",In,[(0,a.Lk)("label",Un,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedZoneOutsourcePrice)),1),(0,a.Lk)("p",$n,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),n.computedTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",Bn,[(0,a.Lk)("label",Wn,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedTotalDeliveryPrice)),1),(0,a.Lk)("p",qn,"ค่าจัดส่งรวม In-house Riders: "+(0,l.v_)(n.formatPrice(n.computedTotalZonePrice)),1),(0,a.Lk)("p",Zn,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),n.computedTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",jn,[(0,a.Lk)("label",Jn,"มูลค่าขายรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPrice)),1),n.computedTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",Kn,[(0,a.Lk)("p",Hn,"มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPackagePrice)),1)])):(0,a.Q3)("",!0),n.computedTotalAdditionalPrice>0?((0,a.uX)(),(0,a.CE)("div",Yn,[(0,a.Lk)("p",Gn,"มูลค่าขาย: "+(0,l.v_)(n.formatPrice(n.computedTotalAdditionalPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("p",ed,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",td,[(0,a.Lk)("div",sd,[t[177]||(t[177]=(0,a.Lk)("label",{for:"sellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.seller_name_id,"onUpdate:modelValue":t[36]||(t[36]=e=>i.saleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",od,[t[178]||(t[178]=(0,a.Lk)("label",{for:"startDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[37]||(t[37]=e=>i.saleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.start_date]])])]),(0,a.Lk)("div",ad,[(0,a.Lk)("div",rd,[t[179]||(t[179]=(0,a.Lk)("label",{for:"deliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.delivery_round_id,"onUpdate:modelValue":t[38]||(t[38]=e=>i.saleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",ld,[t[180]||(t[180]=(0,a.Lk)("label",{for:"selectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.select_food_id,"onUpdate:modelValue":t[39]||(t[39]=e=>i.saleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",id,[t[181]||(t[181]=(0,a.Lk)("label",{for:"note",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[40]||(t[40]=e=>i.saleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.note]])])]),(0,a.Lk)("div",nd,[(0,a.Lk)("li",{onClick:t[41]||(t[41]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[182]||(t[182]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",dd,[(0,a.Lk)("button",{onClick:t[42]||(t[42]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[43]||(t[43]=(...e)=>n.addSaleRecord&&n.addSaleRecord(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",cd,[(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[183]||(t[183]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[184]||(t[184]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",ud,[(0,a.Lk)("ul",pd,[(0,a.Lk)("li",{onClick:t[45]||(t[45]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[185]||(t[185]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",hd,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[46]||(t[46]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[186]||(t[186]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",gd,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[47]||(t[47]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[187]||(t[187]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",md,[(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[188]||(t[188]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[189]||(t[189]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",yd,[(0,a.Lk)("div",kd,[t[190]||(t[190]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",fd,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPackageTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[49]||(t[49]=e=>i.selectedPackageType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,bd),[[o.lH,i.selectedPackageType]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",xd,[(0,a.Lk)("li",{onClick:t[50]||(t[50]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[191]||(t[191]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",_d,[(0,a.Lk)("button",{onClick:t[51]||(t[51]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[52]||(t[52]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",wd,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[53]||(t[53]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[54]||(t[54]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[55]||(t[55]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[56]||(t[56]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),"/sale-records"===e.$route.path||"/sale-records-additional"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",vd,[(0,a.bF)(c,{to:"sale-records",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records"===e.$route.path}])},{default:(0,a.k6)((()=>t[192]||(t[192]=[(0,a.eW)(" บันทึกการขาย 1st Timer, Package Renewal ")]))),_:1},8,["class"]),(0,a.bF)(c,{to:"sale-records-additional",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records-additional"===e.$route.path}])},{default:(0,a.k6)((()=>t[193]||(t[193]=[(0,a.eW)(" บันทึกการขาย Additional Sales ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),(0,a.Lk)("table",Ld,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Dd,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(i.filteredSaleRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",Pd,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",Cd,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",Sd,(0,l.v_)(n.getPackageTypeName(e.package_type_id)),1),(0,a.Lk)("td",Rd,(0,l.v_)(n.getProgramName(e.program_id)),1),(0,a.Lk)("td",Td,(0,l.v_)(n.getPackageName(e.package_id)),1),(0,a.Lk)("td",Md,[e.remaining_days<0?((0,a.uX)(),(0,a.CE)("span",Ed," หมดอายุ ")):((0,a.uX)(),(0,a.CE)("span",Fd,(0,l.v_)(e.remaining_days)+" วัน ",1))]),(0,a.Lk)("td",zd,(0,l.v_)(n.formatDate(e.expiry_date)),1),(0,a.Lk)("td",Ad,[(0,a.Lk)("button",{onClick:t=>n.openConfirmPaymentModal(e),class:(0,l.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none hover:text-gray-200",n.getPaymentStatusClass(e.payment_status)])},(0,l.v_)(n.getPaymentStatusText(e.payment_status)),11,Od),i.isConfirmPaymentModalOpen?((0,a.uX)(),(0,a.CE)("div",Nd,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[195]||(t[195]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[57]||(t[57]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[194]||(t[194]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Xd,[(0,a.Lk)("div",{class:(0,l.C4)([{"bg-green-500":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500":"paid"===i.selectedSaleRecord.payment_status},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,a.Lk)("span",Vd,(0,l.v_)("paid"===i.selectedSaleRecord.payment_status?"เปลี่ยนสถานะเป็นยังไม่ได้ชำระเงิน":"ยืนยันการชำระเงิน"),1),(0,a.Lk)("button",{onClick:t[58]||(t[58]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"text-white hover:text-gray-200"},t[196]||(t[196]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,a.Lk)("div",Qd,[(0,a.Lk)("p",Id,(0,l.v_)("paid"===i.selectedSaleRecord.payment_status?'คุณต้องการเปลี่ยนสถานะเป็น "ยังไม่ได้ชำระเงิน" หรือไม่?':"กรุณาเลือกวันที่ชำระเงิน:"),1),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",Ud,[(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[59]||(t[59]=e=>i.selectedPaidDate=e),class:"border border-gray-300 rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPaidDate]])])):(0,a.Q3)("",!0),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",$d,[t[197]||(t[197]=(0,a.Lk)("label",{for:"payment_types",class:"block text-gray-700"},"เลือกประเภทการชำระเงิน:",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.payment_type_id,"onUpdate:modelValue":t[60]||(t[60]=e=>i.selectedSaleRecord.payment_type_id=e),options:i.paymentTypes,label:"name","track-by":"id",placeholder:"เลือกประเภทการชำระเงิน"},null,8,["modelValue","options"])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Bd,[(0,a.Lk)("button",{onClick:t[61]||(t[61]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[62]||(t[62]=(...e)=>n.confirmPayment&&n.confirmPayment(...e)),class:(0,l.C4)([{"bg-green-500 hover:bg-green-600":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500 hover:bg-red-600":"paid"===i.selectedSaleRecord.payment_status},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(s)},t[198]||(t[198]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,Wd),n.filteredSaleRecords1standRenew.length>4?((0,a.uX)(),(0,a.CE)("div",qd,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)([n.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",Zd,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,jd),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,Jd),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,Kd),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,Hd)])],2)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",Yd,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",Gd,[(0,a.Lk)("ul",ec,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,tc),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,sc),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,oc),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,ac)])])):(0,a.Q3)("",!0)]))],512)])))),128)):(0,a.Q3)("",!0),n.filteredSaleRecords1standRenew.length<6&&n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredSaleRecords1standRenew.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[199]||(t[199]=[(0,a.Lk)("td",{colspan:"9",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredSaleRecords1standRenew.length?((0,a.uX)(),(0,a.CE)("tr",rc,t[200]||(t[200]=[(0,a.Lk)("td",{colspan:"9",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isResultModalOpen?((0,a.uX)(),(0,a.CE)("div",lc,[(0,a.Lk)("div",ic,[(0,a.Lk)("div",nc,[t[201]||(t[201]=(0,a.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,a.Lk)("div",dc,[(0,a.Lk)("span",{onClick:t[63]||(t[63]=(...e)=>n.copyResultModalContent&&n.copyResultModalContent(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},(0,l.v_)(i.isCopied?"check_circle":"content_copy"),1),(0,a.Lk)("span",{onClick:t[64]||(t[64]=(...e)=>n.closeResultModal&&n.closeResultModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",cc,[t[202]||(t[202]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 ขออนุญาตสรุปยอดนะคะ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredResultSaleRecord,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-2"},[(0,a.Lk)("p",null,["name"===t?((0,a.uX)(),(0,a.CE)("strong",uc,[(0,a.eW)((0,l.v_)(n.formatResultLabel(t))+" ",1),(0,a.Lk)("span",null,(0,l.v_)(e),1)])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Lk)("strong",null,(0,l.v_)(n.formatResultLabel(t)),1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))])])))),128)),t[203]||(t[203]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1))],512)])])):(0,a.Q3)("",!0),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",pc,[(0,a.Lk)("div",hc,[(0,a.Lk)("div",gc,[t[204]||(t[204]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,a.Lk)("div",mc,[(0,a.Lk)("span",{onClick:t[65]||(t[65]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",yc,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,s,o)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,l.C4)(["p-2 rounded-md",o%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},["zone1_id"===s?((0,a.uX)(),(0,a.CE)("div",kc,[(0,a.Lk)("div",fc,[(0,a.Lk)("strong",bc,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",xc,[t[205]||(t[205]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone1_quantity),1)]),(0,a.Lk)("div",_c,[t[206]||(t[206]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id))),1)])])):"zone2_id"===s?((0,a.uX)(),(0,a.CE)("div",wc,[(0,a.Lk)("div",vc,[(0,a.Lk)("strong",Lc,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Dc,[t[207]||(t[207]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone2_quantity),1)]),(0,a.Lk)("div",Pc,[t[208]||(t[208]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id))),1)])])):"zone3_id"===s?((0,a.uX)(),(0,a.CE)("div",Cc,[(0,a.Lk)("div",Sc,[(0,a.Lk)("strong",Rc,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Tc,[t[209]||(t[209]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone3_quantity),1)]),(0,a.Lk)("div",Mc,[t[210]||(t[210]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id))),1)])])):"zone_outsource_id"===s?((0,a.uX)(),(0,a.CE)("div",Ec,[(0,a.Lk)("div",Fc,[(0,a.Lk)("strong",zc,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Ac,[t[211]||(t[211]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone_outsource_quantity),1)]),(0,a.Lk)("div",Oc,[t[212]||(t[212]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id))),1)])])):((0,a.uX)(),(0,a.CE)(a.FK,{key:4},[(0,a.Lk)("strong",Nc,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))],2)))),128))],512)])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",Xc,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[214]||(t[214]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[66]||(t[66]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[213]||(t[213]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Vc,[(0,a.Lk)("div",Qc,[t[215]||(t[215]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขบันทึกการขาย",-1)),(0,a.Lk)("div",Ic,[(0,a.Lk)("span",{onClick:t[67]||(t[67]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Uc,[(0,a.Lk)("div",null,[t[216]||(t[216]=(0,a.Lk)("label",{for:"editCustomer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.customer_id,"onUpdate:modelValue":t[68]||(t[68]=e=>i.selectedSaleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[217]||(t[217]=(0,a.Lk)("label",{for:"editPackageType",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_type_id,"onUpdate:modelValue":t[69]||(t[69]=e=>i.selectedSaleRecord.package_type_id=e),options:n.filteredPackageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[218]||(t[218]=(0,a.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.promotion_type_id,"onUpdate:modelValue":t[70]||(t[70]=e=>i.selectedSaleRecord.promotion_type_id=e),options:i.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[219]||(t[219]=(0,a.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.program_id,"onUpdate:modelValue":t[71]||(t[71]=e=>i.selectedSaleRecord.program_id=e),options:n.filteredPrograms,placeholder:"เลือก Program","track-by":"id",label:"name",disabled:!i.selectedSaleRecord.promotion_type_id||!i.selectedSaleRecord.promotion_type_id.id},null,8,["modelValue","options","disabled"])]),(0,a.Lk)("div",null,[t[237]||(t[237]=(0,a.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_id,"onUpdate:modelValue":t[72]||(t[72]=e=>i.selectedSaleRecord.package_id=e),options:i.packages,placeholder:"เลือก Package","track-by":"id",label:"displayLabel",disabled:!i.selectedSaleRecord.program_id||!i.selectedSaleRecord.program_id.id},null,8,["modelValue","options","disabled"]),i.selectedSaleRecord.package_id&&i.selectedSaleRecord.package_id.id?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[73]||(t[73]=(0,o.D$)((e=>n.togglePackageDetails(i.selectedSaleRecord.package_id)),["prevent"])),class:"mt-2 cursor-pointer text-custom-orange text-left hover:underline"},(0,l.v_)(i.isShowingPackageDetails?"ปิดรายละเอียด":"ดูรายละเอียดแพ็คเกจ"),1)):(0,a.Q3)("",!0),i.packageDetails?((0,a.uX)(),(0,a.CE)("div",$c,[t[236]||(t[236]=(0,a.Lk)("h3",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,a.Lk)("p",null,[t[220]||(t[220]=(0,a.Lk)("strong",null,"Package:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.name),1)]),(0,a.Lk)("p",null,[t[221]||(t[221]=(0,a.Lk)("strong",null,"ราคา:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(i.packageDetails.price)),1)]),(0,a.Lk)("p",null,[t[222]||(t[222]=(0,a.Lk)("strong",null,"Package Details for Purchase Summary:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_detail),1)]),(0,a.Lk)("p",null,[t[223]||(t[223]=(0,a.Lk)("strong",null,"Package Validity:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_validity)+" วัน ",1)]),(0,a.Lk)("p",null,[t[224]||(t[224]=(0,a.Lk)("strong",null,"Total Days:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_days)+" วัน ",1)]),(0,a.Lk)("p",null,[t[225]||(t[225]=(0,a.Lk)("strong",null,"# of Boxes/Day:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.boxes_per_day)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[226]||(t[226]=(0,a.Lk)("strong",null,"Total Boxes:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_boxes)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[227]||(t[227]=(0,a.Lk)("strong",null,"รายละเอียดโปรโมชัน:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.promotion_detail),1)]),(0,a.Lk)("div",Bc,[(0,a.Lk)("div",Wc,[(0,a.Lk)("p",null,[t[228]||(t[228]=(0,a.Lk)("strong",null,"M or A or D:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_mad),1)])]),(0,a.Lk)("div",qc,[(0,a.Lk)("p",null,[t[229]||(t[229]=(0,a.Lk)("strong",null,"Dessert:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dessert),1)])]),(0,a.Lk)("div",Zc,[(0,a.Lk)("p",null,[t[230]||(t[230]=(0,a.Lk)("strong",null,"Brittles:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_brittles),1)])]),(0,a.Lk)("div",jc,[(0,a.Lk)("p",null,[t[231]||(t[231]=(0,a.Lk)("strong",null,"Energy Balls:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_energy_balls),1)])]),(0,a.Lk)("div",Jc,[(0,a.Lk)("p",null,[t[232]||(t[232]=(0,a.Lk)("strong",null,"Dressing:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dressing),1)])]),(0,a.Lk)("div",Kc,[(0,a.Lk)("p",null,[t[233]||(t[233]=(0,a.Lk)("strong",null,"Yoghurt:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_yoghurt),1)])]),(0,a.Lk)("div",Hc,[(0,a.Lk)("p",null,[t[234]||(t[234]=(0,a.Lk)("strong",null,"Granola:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_granola),1)])]),(0,a.Lk)("div",Yc,[(0,a.Lk)("p",null,[t[235]||(t[235]=(0,a.Lk)("strong",null,"เครดิตที่แถม (บาท):",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_credit),1)])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[t[238]||(t[238]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดโปรโมชันเพิ่มเติม (นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[74]||(t[74]=e=>i.selectedSaleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.other_promotion_detail]])]),(0,a.Lk)("div",Gc,[t[247]||(t[247]=(0,a.Lk)("strong",{class:"text-custom-orange text-lg"},"จำนวนที่แถม",-1)),(0,a.Lk)("div",eu,[(0,a.Lk)("div",tu,[t[239]||(t[239]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[75]||(t[75]=e=>i.selectedSaleRecord.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_mad]])]),(0,a.Lk)("div",su,[t[240]||(t[240]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[76]||(t[76]=e=>i.selectedSaleRecord.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dessert]])]),(0,a.Lk)("div",ou,[t[241]||(t[241]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[77]||(t[77]=e=>i.selectedSaleRecord.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_brittles]])]),(0,a.Lk)("div",au,[t[242]||(t[242]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[78]||(t[78]=e=>i.selectedSaleRecord.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_energy_balls]])])]),(0,a.Lk)("div",ru,[(0,a.Lk)("div",lu,[t[243]||(t[243]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[79]||(t[79]=e=>i.selectedSaleRecord.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dressing]])]),(0,a.Lk)("div",iu,[t[244]||(t[244]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[80]||(t[80]=e=>i.selectedSaleRecord.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_yoghurt]])]),(0,a.Lk)("div",nu,[t[245]||(t[245]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[81]||(t[81]=e=>i.selectedSaleRecord.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_granola]])]),(0,a.Lk)("div",du,[t[246]||(t[246]=(0,a.Lk)("label",{for:"freeCredit",class:"block font-bold text-gray-700"},"เครดิตที่แถม (บาท)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeCredit","onUpdate:modelValue":t[82]||(t[82]=e=>i.selectedSaleRecord.free_credit=e),type:"number",min:"0",step:"1",placeholder:"กรอกเครดิตที่แถม (บาท)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_credit]])])])]),(0,a.Lk)("div",cu,[(0,a.Lk)("div",uu,[t[249]||(t[249]=(0,a.Lk)("label",{for:"editDiscount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",pu,[t[248]||(t[248]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[83]||(t[83]=e=>i.selectedSaleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.discount]])])]),(0,a.Lk)("div",hu,[t[251]||(t[251]=(0,a.Lk)("label",{for:"editExtraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",gu,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[84]||(t[84]=e=>i.selectedSaleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.selectedSaleRecord.extra_charge]]),t[250]||(t[250]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),n.computedEditTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",mu,[(0,a.Lk)("div",yu,[(0,a.Lk)("label",ku," มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPackagePrice)),1),(0,a.Lk)("p",fu,"ราคาแพ็กเกจ: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.package_price)),1),(0,a.Lk)("p",bu,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.discount)),1),(0,a.Lk)("p",xu,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedEditExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[252]||(t[252]=(0,a.Lk)("label",{for:"editReceiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.receive_food_id,"onUpdate:modelValue":t[85]||(t[85]=e=>i.selectedSaleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",_u,[(0,a.Lk)("div",wu,[t[253]||(t[253]=(0,a.Lk)("label",{for:"editZone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone1_id,"onUpdate:modelValue":t[86]||(t[86]=e=>i.selectedSaleRecord.zone1_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",vu,[t[254]||(t[254]=(0,a.Lk)("label",{for:"editZone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[87]||(t[87]=e=>i.selectedSaleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone1_quantity]])])]),n.computedEditZone1Price>0?((0,a.uX)(),(0,a.CE)("div",Lu,[(0,a.Lk)("label",Du,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,l.v_)(n.formatPrice(n.computedEditZone1Price)),1),(0,a.Lk)("p",Pu,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Cu,[(0,a.Lk)("div",Su,[t[255]||(t[255]=(0,a.Lk)("label",{for:"editZone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone2_id,"onUpdate:modelValue":t[88]||(t[88]=e=>i.selectedSaleRecord.zone2_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Ru,[t[256]||(t[256]=(0,a.Lk)("label",{for:"editZone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[89]||(t[89]=e=>i.selectedSaleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone2_quantity]])])]),n.computedEditZone2Price>0?((0,a.uX)(),(0,a.CE)("div",Tu,[(0,a.Lk)("label",Mu,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,l.v_)(n.formatPrice(n.computedEditZone2Price)),1),(0,a.Lk)("p",Eu,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Fu,[(0,a.Lk)("div",zu,[t[257]||(t[257]=(0,a.Lk)("label",{for:"editZone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone3_id,"onUpdate:modelValue":t[90]||(t[90]=e=>i.selectedSaleRecord.zone3_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Au,[t[258]||(t[258]=(0,a.Lk)("label",{for:"editZone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[91]||(t[91]=e=>i.selectedSaleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone3_quantity]])])]),n.computedEditZone3Price>0?((0,a.uX)(),(0,a.CE)("div",Ou,[(0,a.Lk)("label",Nu,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,l.v_)(n.formatPrice(n.computedEditZone3Price)),1),(0,a.Lk)("p",Xu,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Vu,[(0,a.Lk)("div",Qu,[t[259]||(t[259]=(0,a.Lk)("label",{for:"editZone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone_outsource_id,"onUpdate:modelValue":t[92]||(t[92]=e=>i.selectedSaleRecord.zone_outsource_id=e),options:n.filteredOutsource,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Iu,[t[260]||(t[260]=(0,a.Lk)("label",{for:"editZone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[93]||(t[93]=e=>i.selectedSaleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone_outsource_quantity]])])]),n.computedEditZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",Uu,[(0,a.Lk)("label",$u,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedEditZoneOutsourcePrice)),1),(0,a.Lk)("p",Bu,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),n.computedEditTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",Wu,[(0,a.Lk)("label",qu,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedEditTotalDeliveryPrice)),1),(0,a.Lk)("p",Zu,"ค่าจัดส่งรวม In-house Riders: "+(0,l.v_)(n.formatPrice(n.computedEditTotalZonePrice)),1),(0,a.Lk)("p",ju,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedEditZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),n.computedEditTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",Ju,[(0,a.Lk)("label",Ku,"มูลค่าขายรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPrice)),1),(0,a.Lk)("div",null,[(0,a.Lk)("p",Hu,"มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPackagePrice)),1)]),(0,a.Lk)("p",Yu,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedEditTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Gu,[(0,a.Lk)("div",ep,[t[261]||(t[261]=(0,a.Lk)("label",{for:"editSellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.seller_name_id,"onUpdate:modelValue":t[94]||(t[94]=e=>i.selectedSaleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",tp,[t[262]||(t[262]=(0,a.Lk)("label",{for:"editStartDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[95]||(t[95]=e=>i.selectedSaleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.start_date]])])]),(0,a.Lk)("div",sp,[(0,a.Lk)("div",op,[t[263]||(t[263]=(0,a.Lk)("label",{for:"editDeliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.delivery_round_id,"onUpdate:modelValue":t[96]||(t[96]=e=>i.selectedSaleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",ap,[t[264]||(t[264]=(0,a.Lk)("label",{for:"editSelectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.select_food_id,"onUpdate:modelValue":t[97]||(t[97]=e=>i.selectedSaleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",rp,[t[265]||(t[265]=(0,a.Lk)("label",{for:"editNote",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[98]||(t[98]=e=>i.selectedSaleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.note]])])]),(0,a.Lk)("div",lp,[(0,a.Lk)("div",ip,[(0,a.Lk)("button",{onClick:t[99]||(t[99]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[100]||(t[100]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",np,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[267]||(t[267]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[101]||(t[101]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[266]||(t[266]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",dp,[(0,a.Lk)("div",cp,[t[268]||(t[268]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[102]||(t[102]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[269]||(t[269]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",up,[(0,a.Lk)("button",{onClick:t[103]||(t[103]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[104]||(t[104]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",pp,[(0,a.Lk)("button",{onClick:t[105]||(t[105]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[270]||(t[270]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,hp),(0,a.Lk)("div",gp,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[106]||(t[106]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[107]||(t[107]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,mp)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[108]||(t[108]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[109]||(t[109]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[110]||(t[110]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[271]||(t[271]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,yp)])])],64)}var fp=s(8074),bp={components:{Multiselect:fp.Ay},data(){return{headers:["#","Customer's Name","Package Type","Program","Package","วันคงเหลือของแพ็กเกจ","วันหมดอายุแพ็กเกจ","สถานะการชำระเงิน",""],headerWidths:["5%","15%","10%","12%","13%","15%","13%","12%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],isAddModalOpen:!1,saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:"",total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.filteredSaleRecords1standRenew.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{name:this.selectedSaleRecord.customer.name,package:this.selectedSaleRecord.package.package_detail,promotion_detail:this.selectedSaleRecord.package.promotion_detail,receive_food:this.totalReceiveFood,start_date:this.formatDate(this.selectedSaleRecord.start_date),sellect_by:this.getSelectFood(this.selectedSaleRecord.select_food_id),delivery_date:this.selectedSaleRecord.customer.delivery_date,delivery:this.getDeliveryRoundName(this.selectedSaleRecord.delivery_round_id),package_price:this.formatPrice(this.selectedSaleRecord.package.price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),note:this.selectedSaleRecord.note}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{seller_name_id:this.getSellerName(this.selectedSaleRecord.seller_name_id),name:this.selectedSaleRecord.customer?.name||"",package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),promotion_type:this.getPromotionTypeName(this.selectedSaleRecord.promotion_type_id)||"",program:this.getProgramName(this.selectedSaleRecord.program_id),package:this.selectedSaleRecord.package?.name||"",package_price:this.formatPrice(this.selectedSaleRecord.package?.price),promotion_detail:this.selectedSaleRecord.package?.promotion_detail||"",other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||"",free_mad:this.selectedSaleRecord.free_mad,free_dessert:this.selectedSaleRecord.free_dessert,free_brittles:this.selectedSaleRecord.free_brittles,free_energy_balls:this.selectedSaleRecord.free_energy_balls,free_dressing:this.selectedSaleRecord.free_dressing,free_yoghurt:this.selectedSaleRecord.free_yoghurt,free_granola:this.selectedSaleRecord.free_granola,free_credit:this.selectedSaleRecord.free_credit,discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPercent(this.selectedSaleRecord.extra_charge),extra_charge_price:this.formatPrice(this.selectedSaleRecord.extra_charge_price),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),receive_food_id:this.getReceiveFoodName(this.selectedSaleRecord.receive_food_id),zone1_id:this.getZoneName(this.selectedSaleRecord.zone1_id),total_zone1_price:this.formatPrice(this.selectedSaleRecord.total_zone1_price),zone2_id:this.getZoneName(this.selectedSaleRecord.zone2_id),total_zone2_price:this.formatPrice(this.selectedSaleRecord.total_zone2_price),zone3_id:this.getZoneName(this.selectedSaleRecord.zone3_id),total_zone3_price:this.formatPrice(this.selectedSaleRecord.total_zone3_price),zone_outsource_id:this.getZoneName(this.selectedSaleRecord.zone_outsource_id),total_zone_outsource_price:this.formatPrice(this.selectedSaleRecord.total_zone_outsource_price),total_delivery_zone_price:this.formatPrice(this.selectedSaleRecord.total_delivery_zone_price),total_delivery_price:this.formatPrice(this.selectedSaleRecord.total_delivery_price),total_price:this.formatPrice(this.selectedSaleRecord.total_price),payment_status:this.getPaymentStatusText(this.selectedSaleRecord.payment_status),paid_date:this.formatDate(this.selectedSaleRecord.paid_date),payment_type_id:this.getPaymentTypeName(this.selectedSaleRecord.payment_type_id),start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),receive_date:this.formatDate(this.selectedSaleRecord.start_date),note:this.selectedSaleRecord.note||"",package_detail:this.selectedSaleRecord.package?.package_detail||"",mad:this.selectedSaleRecord.mad,dessert:this.selectedSaleRecord.dessert,brittles:this.selectedSaleRecord.brittles,energy_balls:this.selectedSaleRecord.energy_balls,dressing:this.selectedSaleRecord.dressing,yoghurt:this.selectedSaleRecord.yoghurt,granola:this.selectedSaleRecord.granola,credit:this.selectedSaleRecord.credit,delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",select_food_id:this.getSelectFood(this.selectedSaleRecord.select_food_id)}:{name:"",expiry_date:""}},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},totalReceiveFood(){let e=[];this.selectedSaleRecord.mad>0&&e.push(`${this.selectedSaleRecord.mad} x Main Dish`),this.selectedSaleRecord.dessert>0&&e.push(`${this.selectedSaleRecord.dessert} x Dessert`),this.selectedSaleRecord.brittles>0&&e.push(`${this.selectedSaleRecord.brittles} x Brittles`),this.selectedSaleRecord.energy_balls>0&&e.push(`${this.selectedSaleRecord.energy_balls} x Energy Balls`),this.selectedSaleRecord.dressing>0&&e.push(`${this.selectedSaleRecord.dressing} x Dressing`),this.selectedSaleRecord.yoghurt>0&&e.push(`${this.selectedSaleRecord.yoghurt} x Yoghurt`),this.selectedSaleRecord.granola>0&&e.push(`${this.selectedSaleRecord.granola} x Granola`);let t=e.length>0?e.join(" + "):"";return t},totalDeliveryPrice(){let e=[];null!==this.selectedSaleRecord.zone1_id&&this.selectedSaleRecord.zone1_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone1_id)} x ${this.selectedSaleRecord.zone1_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone2_id&&this.selectedSaleRecord.zone2_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone2_id)} x ${this.selectedSaleRecord.zone2_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone3_id&&this.selectedSaleRecord.zone3_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone3_id)} x ${this.selectedSaleRecord.zone3_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone_outsource_id&&this.selectedSaleRecord.zone_outsource_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone_outsource_id)} x ${this.selectedSaleRecord.zone_outsource_quantity} ครั้ง`);let t=e.length>0?`(${e.join(" + ")})`:"";return this.selectedSaleRecord.total_delivery_price>0?`${this.formatPrice(this.selectedSaleRecord.total_delivery_price)} ${t}`:""},filteredSaleRecords1standRenew(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t})).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}))},filteredPackageTypes(){return this.packageTypes.filter((e=>!e.name.toLowerCase().includes("additional sales")&&!e.name.toLowerCase().includes("consignment")))},isConsignmentOrAdditional(){const e=this.saleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedExtraChargePackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalPackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargePackagePrice;return e+s-t},computedExtraChargeAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargeAdditionalPrice;return e+s-t},computedZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));return e&&this.saleRecord.zone1_quantity?e.price*this.saleRecord.zone1_quantity:0},computedZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));return e&&this.saleRecord.zone2_quantity?e.price*this.saleRecord.zone2_quantity:0},computedZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));return e&&this.saleRecord.zone3_quantity?e.price*this.saleRecord.zone3_quantity:0},computedTotalZonePrice(){return this.computedZone1Price+this.computedZone2Price+this.computedZone3Price},computedZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));return e&&this.saleRecord.zone_outsource_quantity?e.price*this.saleRecord.zone_outsource_quantity:0},computedTotalDeliveryPrice(){return this.computedTotalZonePrice+this.computedZoneOutsourcePrice},computedTotalPrice(){return this.computedTotalPackagePrice+this.computedTotalAdditionalPrice+this.computedTotalDeliveryPrice},isEditConsignmentOrAdditional(){const e=this.selectedSaleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedEditExtraChargePackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.extra_charge)||0;return e*t/100},computedEditTotalPackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.discount)||0,s=this.computedEditExtraChargePackagePrice;return e+s-t},computedEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));return e&&this.selectedSaleRecord.zone1_quantity?e.price*this.selectedSaleRecord.zone1_quantity:0},computedEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));return e&&this.selectedSaleRecord.zone2_quantity?e.price*this.selectedSaleRecord.zone2_quantity:0},computedEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));return e&&this.selectedSaleRecord.zone3_quantity?e.price*this.selectedSaleRecord.zone3_quantity:0},computedEditTotalZonePrice(){return this.computedEditZone1Price+this.computedEditZone2Price+this.computedEditZone3Price},computedEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));return e&&this.selectedSaleRecord.zone_outsource_quantity?e.price*this.selectedSaleRecord.zone_outsource_quantity:0},computedEditTotalDeliveryPrice(){return this.computedEditTotalZonePrice+this.computedEditZoneOutsourcePrice},computedEditTotalPrice(){return this.computedEditTotalPackagePrice+this.computedEditTotalDeliveryPrice},filteredAdditionalTypes(){return this.additionalTypes.filter((e=>e.name.startsWith("AFF")))},filteredPrograms(){return this.programs.filter((e=>!e.name.startsWith("Happy")))},filteredInhouse(){return this.zoneDeliveries.filter((e=>e.name.startsWith("AFF")))},filteredOutsource(){return this.zoneDeliveries.filter((e=>!e.name.startsWith("AFF")))},...(0,Ze.L8)(["saleRecords"])},methods:{...(0,Ze.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.filteredSaleRecords1standRenew.slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.filteredSaleRecords1standRenew=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},filterEditPrograms(){this.selectedSaleRecord.promotion_type_id&&this.selectedSaleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.selectedSaleRecord.promotion_type_id.id)):this.programs=this.allPrograms},filterEditPackages(){this.selectedSaleRecord.program_id&&this.selectedSaleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.selectedSaleRecord.program_id.id)):this.packages=this.allPackages},openAddModal(){this.isAddModalOpen=!0},async addSaleRecord(){if(this.saleRecord.customer_id)try{const e=await ke.A.post("http://127.0.0.1:3333/sale-records",{customer_id:this.saleRecord.customer_id?.id||null,promotion_type_id:this.saleRecord.promotion_type_id?.id||null,program_id:this.saleRecord.program_id?.id||null,package_id:this.saleRecord.package_id?.id||null,package_type_id:this.saleRecord.package_type_id?.id||null,seller_name_id:this.saleRecord.seller_name_id?.id||null,discount:this.saleRecord.discount||0,extra_charge:this.saleRecord.extra_charge||0,payment_status:this.saleRecord.payment_status||"unpaid",paid_date:this.saleRecord.paid_date||null,payment_type_id:this.saleRecord.payment_type_id?.id||null,start_date:this.saleRecord.start_date||null,zone1_id:this.saleRecord.zone1_id?.id||null,zone1_quantity:this.saleRecord.zone1_quantity||0,zone2_id:this.saleRecord.zone2_id?.id||null,zone2_quantity:this.saleRecord.zone2_quantity||0,zone3_id:this.saleRecord.zone3_id?.id||null,zone3_quantity:this.saleRecord.zone3_quantity||0,zone_outsource_id:this.saleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.saleRecord.zone_outsource_quantity||0,additional_type_id:this.saleRecord.additional_type_id?.id||null,add_detail:this.saleRecord.add_detail||null,add_price:this.saleRecord.add_price||0,delivery_round_id:this.saleRecord.delivery_round_id?.id||null,select_food_id:this.saleRecord.select_food_id?.id||null,receive_food_id:this.saleRecord.receive_food_id?.id||null,note:this.saleRecord.note||null,free_mad:this.saleRecord.free_mad||0,free_dessert:this.saleRecord.free_dessert||0,free_brittles:this.saleRecord.free_brittles||0,free_energy_balls:this.saleRecord.free_energy_balls||0,free_dressing:this.saleRecord.free_dressing||0,free_yoghurt:this.saleRecord.free_yoghurt||0,free_granola:this.saleRecord.free_granola||0,free_credit:this.saleRecord.free_credit||0,other_promotion_detail:this.saleRecord.other_promotion_detail||null});this.saleRecords.push(e.data),this.closeAddModal(),this.filterPrograms(),this.filterPackages(),await this.fetchSaleRecords(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){console.error("Error adding sale record:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการเพิ่มข้อมูล!"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},clearForm(){this.saleRecord={customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},this.packageDetails=null,this.isShowingPackageDetails=!1,this.customerAddress=null,this.filterPrograms(),this.filterPackages()},openEditModal(e){const t=e=>{if(!e)return null;const t=new Date(e);return t.toLocaleDateString("en-CA")};this.selectedSaleRecord={...e,start_date:t(e.start_date),customer_id:this.customers.find((t=>t.id===e.customer_id))||null,package_type_id:this.packageTypes.find((t=>t.id===e.package_type_id))||null,promotion_type_id:this.promotionTypes.find((t=>t.id===e.promotion_type_id))||null,program_id:this.programs.find((t=>t.id===e.program_id))||null,package_id:this.packages.find((t=>t.id===e.package_id))||null,receive_food_id:this.receiveFoods.find((t=>t.id===e.receive_food_id))||null,zone1_id:this.zoneDeliveries.find((t=>t.id===e.zone1_id))||null,zone2_id:this.zoneDeliveries.find((t=>t.id===e.zone2_id))||null,zone3_id:this.zoneDeliveries.find((t=>t.id===e.zone3_id))||null,zone_outsource_id:this.zoneDeliveries.find((t=>t.id===e.zone_outsource_id))||null,seller_name_id:this.sellerNames.find((t=>t.id===e.seller_name_id))||null,delivery_round_id:this.deliveryRounds.find((t=>t.id===e.delivery_round_id))||null,select_food_id:this.selectFoods.find((t=>t.id===e.select_food_id))||null,paid_date:t(e.paid_date),payment_type_id:this.paymentTypes.find((t=>t.id===e.payment_type_id))||null},this.moreOpenDropdownIndex=null,this.isEditModalOpen=!0},async saveChanges(){if(this.selectedSaleRecord.customer_id)try{const e=await ke.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}`,{customer_id:this.selectedSaleRecord.customer_id?.id||null,promotion_type_id:this.selectedSaleRecord.promotion_type_id?.id||null,program_id:this.selectedSaleRecord.program_id?.id||null,package_id:this.selectedSaleRecord.package_id?.id||null,package_type_id:this.selectedSaleRecord.package_type_id?.id||null,seller_name_id:this.selectedSaleRecord.seller_name_id?.id||null,discount:this.selectedSaleRecord.discount||0,extra_charge:this.selectedSaleRecord.extra_charge||0,start_date:this.selectedSaleRecord.start_date||null,zone1_id:this.selectedSaleRecord.zone1_id?.id||null,zone1_quantity:this.selectedSaleRecord.zone1_quantity||0,zone2_id:this.selectedSaleRecord.zone2_id?.id||null,zone2_quantity:this.selectedSaleRecord.zone2_quantity||0,zone3_id:this.selectedSaleRecord.zone3_id?.id||null,zone3_quantity:this.selectedSaleRecord.zone3_quantity||0,zone_outsource_id:this.selectedSaleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.selectedSaleRecord.zone_outsource_quantity||0,additional_type_id:this.selectedSaleRecord.additional_type_id?.id||null,add_detail:this.selectedSaleRecord.add_detail||null,add_price:this.selectedSaleRecord.add_price||0,delivery_round_id:this.selectedSaleRecord.delivery_round_id?.id||null,select_food_id:this.selectedSaleRecord.select_food_id?.id||null,receive_food_id:this.selectedSaleRecord.receive_food_id?.id||null,note:this.selectedSaleRecord.note||null,free_mad:this.selectedSaleRecord.free_mad||0,free_dessert:this.selectedSaleRecord.free_dessert||0,free_brittles:this.selectedSaleRecord.free_brittles||0,free_energy_balls:this.selectedSaleRecord.free_energy_balls||0,free_dressing:this.selectedSaleRecord.free_dressing||0,free_yoghurt:this.selectedSaleRecord.free_yoghurt||0,free_granola:this.selectedSaleRecord.free_granola||0,free_credit:this.selectedSaleRecord.free_credit||0,other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||null}),t=this.saleRecords.findIndex((e=>e.id===this.selectedSaleRecord.id));-1!==t&&(this.saleRecords[t]=e.data),this.filterEditPrograms(),this.filterEditPackages(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.closeEditModal(),await this.fetchSaleRecords()}catch(e){console.error("Error saving changes:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeEditModal(){this.isEditModalOpen=!1,this.packageDetails=null,this.isShowingPackageDetails=!1,this.selectedSaleRecord={}},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n,d,c,u,p]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/zone-delivery-types"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types"),ke.A.get("http://127.0.0.1:3333/delivery-rounds"),ke.A.get("http://127.0.0.1:3333/receive-foods"),ke.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=r.data,this.zoneDeliveryTypes=l.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ke.A.get("http://127.0.0.1:3333/sale-records");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0,this.moreOpenDropdownIndex=null},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/sale-records/${this.itemToDelete}`),this.saleRecords=this.saleRecords.filter((e=>e.id!==this.itemToDelete)),this.showFailToastNotification("ลบข้อมูลสำเร็จ!"),this.closeDeleteModal(),this.updatePage()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={seller_name_id:"ผู้ขาย",name:"ชื่อ-สกุลลูกค้า",package_type:"Package Type",promotion_type:"Promotion Type",program:"Program",package:"แพ็กเกจที่ซื้อ ",package_price:"ราคาแพ็กเกจ",promotion_detail:"รายละเอียดโปรโมชัน",other_promotion_detail:"รายละเอียดโปรโมชันเพิ่มเติม(นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",free_mad:"จำนวนกล่องที่แถม M or A or D",free_dessert:"จำนวนกล่องที่แถม Dessert",free_brittles:"จำนวนกล่องที่แถม Brittles",free_energy_balls:"จำนวนกล่องที่แถม Energy Balls",free_dressing:"จำนวนกล่องที่แถม Dressing",free_yoghurt:"จำนวนกล่องที่แถม Yoghurt",free_granola:"จำนวนกล่องที่แถม Granola",free_credit:"เครดิตที่แถม (บาท)",discount:"ส่วนลดเพิ่มเติมจากโปรฯ ประจำเดือน (ถ้ามี)",extra_charge:"Extra Charge (%)",extra_charge_price:"มูลค่า Extra Charge",total_package_price:"มูลค่าแพ็กเกจรวม",receive_food_id:"วิธีการรับอาหาร",zone1_id:"In-house Riders (ที่อยู่ 1)",total_zone1_price:"ค่าจัดส่งรวม (ที่อยู่ 1)",zone2_id:"In-house Riders (ที่อยู่ 2)",total_zone2_price:"ค่าจัดส่งรวม (ที่อยู่ 2)",zone3_id:"In-house Riders (ที่อยู่ 3)",total_zone3_price:"ค่าจัดส่งรวม (ที่อยู่ 3)",zone_outsource_id:"Outsource Riders",total_zone_outsource_price:"ค่าจัดส่งรวม Outsource",total_delivery_zone_price:"ค่าจัดส่งรวม In-house Riders",total_delivery_price:"รวมค่าจัดส่งทั้งหมด",total_price:"มูลค่าขายรวม",payment_status:"สถานะการชำระเงิน",paid_date:"วันที่ชำระเงิน",payment_type_id:"วิธีการชำระเงิน",receive_date:"วันเริ่มรับอาหารวันแรก",sellect_by:"เลือกอาหารโดย",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",note:"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",package_detail:"ข้อมูลแพ็กเกจ(สำหรับสรุปให้ลูกค้า)",mad:"M or A or D",dessert:"Dessert",brittles:"Brittles",energy_balls:"Energy Balls",dressing:"Dressing",yoghurt:"Yoghurt",granola:"Granola",credit:"Cash Credit ที่ได้รับ",delivery_date:"วันที่ต้องการรับอาหาร",select_food_id:"วิธีการเลือกอาหาร"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},onViewResultSaleRecord(e){this.selectedSaleRecord=e,this.isResultModalOpen=!0,this.moreOpenDropdownIndex=null},closeResultModal(){this.isResultModalOpen=!1},formatResultLabel(e){const t={name:"🏷 คุณ",package:"▶️ แพ็คเกจ",promotion_detail:"🔥",receive_food:"▶️ อาหารที่ได้รับ",start_date:"▶️ วันรับอาหารวันแรก",sellect_by:"▶️ เลือกอาหารโดย",delivery_date:"▶️ วันที่รับอาหาร",delivery:"▶️ จัดส่ง",package_price:"▶️ ราคาแพ็คเกจ",extra_charge:"▶️ Extra Chrage",discount:"▶️ ส่วนลด",total_delivery_price:"▶️ ค่าจัดส่ง",total_price:"▶️ ยอดชำระ",expiry_date:"▶️ วันหมดอายุแพ็คเกจ",note:"▶️ หมายเหตุ:"};return t[e]||e},copyResultModalContent(){let e=this.$refs.modalContent.innerText;if(e=e.replace(/\n\s*\n/g,"\n"),navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)})).catch((e=>{console.error("ไม่สามารถคัดลอกข้อความ:",e)}));else{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)}catch(t){console.error("ไม่สามารถคัดลอกข้อความ:",t)}finally{document.body.removeChild(s)}}},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},calculateTotalPrice(){if(!this.saleRecord.package_id)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.saleRecord.package_id.id));if(!e)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.saleRecord.extra_charge)||0,o=parseFloat(this.saleRecord.discount)||0,a=t*s/100;this.saleRecord.extra_charge_price=a,this.saleRecord.package_price=t,this.saleRecord.total_package_price=t+a-o},calculateZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));e&&this.saleRecord.zone1_quantity&&(this.computedZone1Price=e.price*this.saleRecord.zone1_quantity)},calculateZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));e&&this.saleRecord.zone2_quantity&&(this.computedZone2Price=e.price*this.saleRecord.zone2_quantity)},calculateZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));e&&this.saleRecord.zone3_quantity&&(this.computedZone3Price=e.price*this.saleRecord.zone3_quantity)},calculateZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));e&&this.saleRecord.zone_outsource_quantity&&(this.computedZoneOutsourcePrice=e.price*this.saleRecord.zone_outsource_quantity)},calculateEditTotalPrice(){if(!this.selectedSaleRecord.package_id)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.selectedSaleRecord.package_id?.id));if(!e)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.selectedSaleRecord.extra_charge)||0,o=parseFloat(this.selectedSaleRecord.discount)||0,a=t*s/100;this.selectedSaleRecord.extra_charge_price=a,this.selectedSaleRecord.package_price=t,this.selectedSaleRecord.total_package_price=t+a-o},calculateEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));e&&this.selectedSaleRecord.zone1_quantity&&(this.computedEditZone1Price=e.price*this.selectedSaleRecord.zone1_quantity)},calculateEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));e&&this.selectedSaleRecord.zone2_quantity&&(this.computedEditZone2Price=e.price*this.selectedSaleRecord.zone2_quantity)},calculateEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));e&&this.selectedSaleRecord.zone3_quantity&&(this.computedEditZone3Price=e.price*this.selectedSaleRecord.zone3_quantity)},calculateEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));e&&this.selectedSaleRecord.zone_outsource_quantity&&(this.computedEditZoneOutsourcePrice=e.price*this.selectedSaleRecord.zone_outsource_quantity)},clearNotAdditionalForm(){this.saleRecord.add_detail=null,this.saleRecord.additional_type_id=null,this.saleRecord.add_price=0},clearAdditionalForm(){this.saleRecord.promotion_type_id=null,this.saleRecord.program_id=null,this.saleRecord.package_id=null},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},openConfirmPaymentModal(e){this.selectedSaleRecord=e,this.selectedPaidDate=e.paid_date||"",this.isConfirmPaymentModalOpen=!0,this.moreOpenDropdownIndex=null},closeConfirmPaymentModal(){this.isConfirmPaymentModalOpen=!1,this.selectedPaidDate=""},async confirmPayment(){try{const e="paid"===this.selectedSaleRecord.payment_status?"unpaid":"paid",t="paid"===e?this.selectedPaidDate:null,s="paid"===e?this.selectedSaleRecord.payment_type_id?.id:null;if("paid"===e&&(!this.selectedPaidDate||!s))return void this.showErrorToastNotification("กรุณาเลือกข้อมูลให้ครบ!");const o={payment_status:e,paid_date:t,payment_type_id:s},a=await ke.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}/payment-status`,o);if(await this.fetchSaleRecords(),200!==a.status)throw new Error("Unexpected response status");{const e=a.data.data,t=this.saleRecords.findIndex((t=>t.id===e.id));-1!==t&&(this.saleRecords[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error updating payment status:",e),console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmPaymentModal()},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.promotion_type_id":function(){this.filterPrograms()},"selectedSaleRecord.promotion_type_id":function(){this.filterEditPrograms()},"saleRecord.program_id":function(){this.filterPackages()},"selectedSaleRecord.program_id":function(){this.filterEditPackages()},"saleRecord.package_id"(){this.calculateTotalPrice()},"saleRecord.discount"(){this.calculateTotalPrice()},"saleRecord.extra_charge"(){this.calculateTotalPrice()},"saleRecord.zone1_id"(){this.calculateZone1Price()},"saleRecord.zone1_quantity"(){this.calculateZone1Price()},"saleRecord.zone2_id"(){this.calculateZone2Price()},"saleRecord.zone2_quantity"(){this.calculateZone2Price()},"saleRecord.zone3_id"(){this.calculateZone3Price()},"saleRecord.zone3_quantity"(){this.calculateZone3Price()},"saleRecord.zone_outsource_id"(){this.calculateZoneOutsourcePrice()},"saleRecord.zone_outsource_quantity"(){this.calculateZoneOutsourcePrice()},"saleRecord.package_type_id":"checkPackageType","selectedSaleRecord.package_id"(){this.calculateEditTotalPrice()},"selectedSaleRecord.discount"(){this.calculateEditTotalPrice()},"selectedSaleRecord.extra_charge"(){this.calculateEditTotalPrice()},"selectedSaleRecord.zone1_id"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone1_quantity"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone2_id"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone2_quantity"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone3_id"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone3_quantity"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone_outsource_id"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.zone_outsource_quantity"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.package_type_id":"checkEditPackageType",searchQuery(){this.updatePage()},currentPage(){this.updatePage()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const xp=(0,_e.A)(bp,[["render",kp]]);var _p=xp;const wp={class:"mt-[-20px]"},vp={class:"flex space-x-2 items-center relative"},Lp={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Dp={class:"text-m text-custom-orange font-bold"},Pp={class:"ml-2"},Cp={class:"add relative inline-block"},Sp={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Rp={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Tp={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Mp={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Ep={key:0},Fp={class:"flex-1"},zp={class:"relative"},Ap={key:1},Op={key:1,class:"mt-4 p-4 border border-custom-orange rounded-md"},Np={class:"flex flex-wrap"},Xp={class:"md:w-1/2 lg:w-1/4"},Vp={class:"md:w-1/2 lg:w-1/4"},Qp={class:"md:w-1/2 lg:w-1/4"},Ip={class:"md:w-1/2 lg:w-1/4"},Up={class:"md:w-1/2 lg:w-1/4"},$p={class:"md:w-1/2 lg:w-1/4"},Bp={class:"md:w-1/2 lg:w-1/4"},Wp={class:"md:w-1/2 lg:w-1/4"},qp={class:"space-y-4 overflow-y-auto flex-grow mt-4"},Zp={class:"flex flex-wrap gap-4"},jp={class:"flex-1"},Jp={class:"flex-1"},Kp={class:"flex-1"},Hp={class:"flex-1"},Yp={class:"flex flex-wrap gap-4"},Gp={class:"flex-1"},eh={class:"flex-1"},th={class:"flex-1"},sh={class:"flex-1"},oh={class:"flex space-x-4"},ah={class:"flex-1"},rh={class:"relative"},lh={class:"flex-1"},ih={class:"relative"},nh={key:2},dh={class:"flex-1"},ch={class:"block font-bold text-gray-700"},uh={class:"text-gray-600"},ph={class:"text-gray-600"},hh={class:"text-gray-600"},gh={key:3},mh={class:"block font-bold text-gray-700"},yh={class:"text-gray-600"},kh={class:"text-gray-600"},fh={class:"text-gray-600"},bh={key:4,class:"mt-4 p-4 border border-custom-orange rounded-md"},xh={key:0},_h={key:1},wh={key:2},vh={class:"flex-1"},Lh={class:"flex space-x-4"},Dh={class:"flex-1"},Ph={class:"flex-1"},Ch={key:5,class:"flex-1"},Sh={class:"block font-bold text-gray-700"},Rh={class:"text-gray-600"},Th={class:"flex space-x-4"},Mh={class:"flex-1"},Eh={class:"flex-1"},Fh={key:6,class:"flex-1"},zh={class:"block font-bold text-gray-700"},Ah={class:"text-gray-600"},Oh={class:"flex space-x-4"},Nh={class:"flex-1"},Xh={class:"flex-1"},Vh={key:7,class:"flex-1"},Qh={class:"block font-bold text-gray-700"},Ih={class:"text-gray-600"},Uh={class:"flex space-x-4"},$h={class:"flex-1"},Bh={class:"flex-1"},Wh={key:8,class:"flex-1"},qh={class:"block font-bold text-gray-700"},Zh={class:"text-gray-600"},jh={key:9,class:"flex-1"},Jh={class:"block font-bold text-gray-700"},Kh={class:"text-gray-600"},Hh={class:"text-gray-600"},Yh={key:10,class:"flex-1"},Gh={class:"block font-bold text-custom-orange"},eg={key:0},tg={class:"text-gray-600"},sg={key:1},og={class:"text-gray-600"},ag={class:"text-gray-600"},rg={class:"flex space-x-4"},lg={class:"flex-1"},ig={class:"flex-1"},ng={class:"flex space-x-4"},dg={class:"flex-1"},cg={class:"flex-1"},ug={class:"mb-4"},pg={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},hg={class:"flex space-x-2"},gg={class:"sort relative inline-block",ref:"sortDropdown"},mg={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},yg={class:"list-none p-0 m-0"},kg={key:0,class:"material-symbols-outlined text-sm"},fg={key:0,class:"material-symbols-outlined text-sm"},bg={class:"filter relative inline-block",ref:"filterDropdown"},xg={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},_g={class:"p-4 w-[500px] list-none"},wg={class:"grid grid-cols-2 gap-4"},vg=["value"],Lg={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Dg={class:"flex space-x-2"},Pg={class:"flex w-[250px] relative"},Cg={key:0,class:"p-4 flex items-left space-x-6 text-m font-bold"},Sg={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},Rg={class:"bg-custom-orange text-white"},Tg={class:"px-4 py-2 align-top pb-5"},Mg={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},Eg={class:"px-4 py-2 align-top pb-5 font-bold"},Fg={class:"px-4 py-2 align-top pb-5"},zg={class:"px-4 py-2 align-top pb-5"},Ag={class:"px-4 py-2 align-top pb-5"},Og={class:"px-4 py-2 align-top font-bold pb-5"},Ng=["onClick"],Xg={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},Vg={class:"bg-white rounded-md w-1/3 max-w-lg"},Qg={class:"font-bold"},Ig={class:"p-6 space-y-4"},Ug={class:"text-gray-700"},$g={key:0},Bg={key:1,class:"mt-4"},Wg={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},qg=["onClick"],Zg={key:0},jg={class:"list-none p-0 m-0"},Jg=["onClick"],Kg=["onClick"],Hg=["onClick"],Yg=["onClick"],Gg={key:1},em={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},tm={class:"list-none p-0 m-0"},sm=["onClick"],om=["onClick"],am=["onClick"],rm=["onClick"],lm={key:2},im={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},nm={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},dm={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},cm={class:"flex space-x-2"},um={class:"p-6",ref:"modalContent"},pm={key:0},hm={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},gm={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},mm={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},ym={class:"flex space-x-2"},km={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},fm={key:0,class:"flex items-center space-x-4 pl-3 pr-3"},bm={class:"flex-1"},xm={class:"mr-2"},_m={class:"flex-1"},wm={class:"flex-1"},vm={key:1,class:"flex items-center space-x-4 pl-3 pr-3"},Lm={class:"flex-1"},Dm={class:"mr-2"},Pm={class:"flex-1"},Cm={class:"flex-1"},Sm={key:2,class:"flex items-center space-x-4 pl-3 pr-3"},Rm={class:"flex-1"},Tm={class:"mr-2"},Mm={class:"flex-1"},Em={class:"flex-1"},Fm={key:3,class:"flex items-center space-x-4 pl-3 pr-3"},zm={class:"flex-1"},Am={class:"mr-2"},Om={class:"flex-1"},Nm={class:"flex-1"},Xm={class:"mr-2 pl-3 pr-3"},Vm={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Qm={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Im={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Um={class:"flex space-x-2"},$m={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Bm={key:0},Wm={class:"flex-1"},qm={class:"relative"},Zm={class:"space-y-4 overflow-y-auto flex-grow mt-4"},jm={class:"flex flex-wrap gap-4"},Jm={class:"flex-1"},Km={class:"flex-1"},Hm={class:"flex-1"},Ym={class:"flex-1"},Gm={class:"flex flex-wrap gap-4"},ey={class:"flex-1"},ty={class:"flex-1"},sy={class:"flex-1"},oy={class:"flex space-x-4"},ay={class:"flex-1"},ry={class:"relative"},ly={class:"flex-1"},iy={class:"relative"},ny={key:1},dy={class:"flex-1"},cy={class:"block font-bold text-gray-700"},uy={class:"text-gray-600"},py={class:"text-gray-600"},hy={class:"text-gray-600"},gy={class:"flex space-x-4"},my={class:"flex-1"},yy={class:"flex-1"},ky={key:2,class:"flex-1"},fy={class:"block font-bold text-gray-700"},by={class:"text-gray-600"},xy={class:"flex space-x-4"},_y={class:"flex-1"},wy={class:"flex-1"},vy={key:3,class:"flex-2"},Ly={class:"block font-bold text-gray-700"},Dy={class:"text-gray-600"},Py={class:"flex space-x-4"},Cy={class:"flex-1"},Sy={class:"flex-1"},Ry={key:4,class:"flex-1"},Ty={class:"block font-bold text-gray-700"},My={class:"text-gray-600"},Ey={class:"flex space-x-4"},Fy={class:"flex-1"},zy={class:"flex-1"},Ay={key:5,class:"flex-1"},Oy={class:"block font-bold text-gray-700"},Ny={class:"text-gray-600"},Xy={key:6,class:"flex-1"},Vy={class:"block font-bold text-gray-700"},Qy={class:"text-gray-600"},Iy={class:"text-gray-600"},Uy={key:7,class:"flex-1"},$y={class:"block font-bold text-custom-orange"},By={class:"text-gray-600"},Wy={class:"text-gray-600"},qy={class:"flex space-x-4"},Zy={class:"flex-1"},jy={class:"flex-1"},Jy={class:"flex space-x-4"},Ky={class:"flex-1"},Hy={class:"flex-1"},Yy={class:"mb-4"},Gy={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},ek={class:"flex space-x-2"},tk={key:3,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},sk={class:"bg-white rounded-lg shadow-md w-1/3"},ok={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},ak={class:"flex justify-end space-x-2 p-4 border-t"},rk={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},lk=["disabled"],ik={class:"flex items-center space-x-1"},nk=["onClick"],dk=["disabled"];function ck(e,t,s,r,i,n){const d=(0,a.g2)("multiselect"),c=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[109]||(t[109]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[108]||(t[108]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[111]||(t[111]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[110]||(t[110]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",wp,[(0,a.Lk)("div",vp,[(0,a.Lk)("div",Lp,[t[112]||(t[112]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"contact_page",-1)),t[113]||(t[113]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการบันทึกการขายทั้งหมด: ",-1)),(0,a.Lk)("span",Dp,(0,l.v_)(n.additionalSalesRecords.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[115]||(t[115]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",Pp,[t[114]||(t[114]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Cp,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[116]||(t[116]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",Sp,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[118]||(t[118]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[117]||(t[117]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Rp,[(0,a.Lk)("div",Tp,[t[119]||(t[119]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มบันทึกการขาย",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",Mp,[(0,a.Lk)("div",null,[t[120]||(t[120]=(0,a.Lk)("label",{for:"customer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.customer_id,"onUpdate:modelValue":t[6]||(t[6]=e=>i.saleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[121]||(t[121]=(0,a.Lk)("label",{for:"package_type",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.saleRecord.package_type_id=e),options:i.packageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),i.saleRecord.package_type_id&&"additional sales"===i.saleRecord.package_type_id.name.toLowerCase()||i.saleRecord.package_type_id&&"consignment"===i.saleRecord.package_type_id.name.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",Ep,[(0,a.Lk)("div",null,[t[122]||(t[122]=(0,a.Lk)("label",{for:"additional_type",class:"block font-bold text-gray-700"},"Sales Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.additional_type_id,"onUpdate:modelValue":t[8]||(t[8]=e=>i.saleRecord.additional_type_id=e),options:n.filteredAdditionalTypes,placeholder:"เลือก Sales Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[123]||(t[123]=(0,a.Lk)("label",{for:"add_detail",class:"block text-gray-700 font-bold"},"รายละเอียดการขาย",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"add_detail","onUpdate:modelValue":t[9]||(t[9]=e=>i.saleRecord.add_detail=e),placeholder:"กรอกรายละเอียดการขาย",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.add_detail]])]),(0,a.Lk)("div",Fp,[t[125]||(t[125]=(0,a.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,a.Lk)("div",zp,[t[124]||(t[124]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.saleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.add_price]])])]),(0,a.Lk)("div",null,[t[126]||(t[126]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดเพิ่มเติมที่ต้องได้รับอนุม้ติจาก Director",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[11]||(t[11]=e=>i.saleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.other_promotion_detail]])])])):(0,a.Q3)("",!0),"additional sales"!==i.saleRecord.package_type_id?.name?.toLowerCase()&&"consignment"!==i.saleRecord.package_type_id?.name?.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",Ap,[(0,a.Lk)("div",null,[t[127]||(t[127]=(0,a.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.promotion_type_id,"onUpdate:modelValue":t[12]||(t[12]=e=>i.saleRecord.promotion_type_id=e),options:i.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[128]||(t[128]=(0,a.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.program_id,"onUpdate:modelValue":t[13]||(t[13]=e=>i.saleRecord.program_id=e),options:n.filteredPrograms,placeholder:"เลือก Program","track-by":"id",label:"name",disabled:!i.saleRecord.promotion_type_id||!i.saleRecord.promotion_type_id.id},null,8,["modelValue","options","disabled"])]),(0,a.Lk)("div",null,[t[146]||(t[146]=(0,a.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_id,"onUpdate:modelValue":t[14]||(t[14]=e=>i.saleRecord.package_id=e),options:i.packages,placeholder:"เลือก Package","track-by":"id",label:"displayLabel",disabled:!i.saleRecord.program_id||!i.saleRecord.program_id.id},null,8,["modelValue","options","disabled"]),i.saleRecord.package_id&&i.saleRecord.package_id.id?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[15]||(t[15]=(0,o.D$)((e=>n.togglePackageDetails(i.saleRecord.package_id)),["prevent"])),class:"mt-2 cursor-pointer text-custom-orange text-left hover:underline"},(0,l.v_)(i.isShowingPackageDetails?"ปิดรายละเอียด":"ดูรายละเอียดแพ็คเกจ"),1)):(0,a.Q3)("",!0),i.packageDetails?((0,a.uX)(),(0,a.CE)("div",Op,[t[145]||(t[145]=(0,a.Lk)("h3",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,a.Lk)("p",null,[t[129]||(t[129]=(0,a.Lk)("strong",null,"Package:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.name),1)]),(0,a.Lk)("p",null,[t[130]||(t[130]=(0,a.Lk)("strong",null,"ราคา:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(i.packageDetails.price)),1)]),(0,a.Lk)("p",null,[t[131]||(t[131]=(0,a.Lk)("strong",null,"Package Details for Purchase Summary:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_detail),1)]),(0,a.Lk)("p",null,[t[132]||(t[132]=(0,a.Lk)("strong",null,"Package Validity:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_validity)+" วัน ",1)]),(0,a.Lk)("p",null,[t[133]||(t[133]=(0,a.Lk)("strong",null,"Total Days:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_days)+" วัน ",1)]),(0,a.Lk)("p",null,[t[134]||(t[134]=(0,a.Lk)("strong",null,"# of Boxes/Day:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.boxes_per_day)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[135]||(t[135]=(0,a.Lk)("strong",null,"Total Boxes:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_boxes)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[136]||(t[136]=(0,a.Lk)("strong",null,"รายละเอียดโปรโมชัน:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.promotion_detail),1)]),(0,a.Lk)("div",Np,[(0,a.Lk)("div",Xp,[(0,a.Lk)("p",null,[t[137]||(t[137]=(0,a.Lk)("strong",null,"M or A or D:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_mad),1)])]),(0,a.Lk)("div",Vp,[(0,a.Lk)("p",null,[t[138]||(t[138]=(0,a.Lk)("strong",null,"Dessert:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dessert),1)])]),(0,a.Lk)("div",Qp,[(0,a.Lk)("p",null,[t[139]||(t[139]=(0,a.Lk)("strong",null,"Brittles:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_brittles),1)])]),(0,a.Lk)("div",Ip,[(0,a.Lk)("p",null,[t[140]||(t[140]=(0,a.Lk)("strong",null,"Energy Balls:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_energy_balls),1)])]),(0,a.Lk)("div",Up,[(0,a.Lk)("p",null,[t[141]||(t[141]=(0,a.Lk)("strong",null,"Dressing:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dressing),1)])]),(0,a.Lk)("div",$p,[(0,a.Lk)("p",null,[t[142]||(t[142]=(0,a.Lk)("strong",null,"Yoghurt:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_yoghurt),1)])]),(0,a.Lk)("div",Bp,[(0,a.Lk)("p",null,[t[143]||(t[143]=(0,a.Lk)("strong",null,"Granola:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_granola),1)])]),(0,a.Lk)("div",Wp,[(0,a.Lk)("p",null,[t[144]||(t[144]=(0,a.Lk)("strong",null,"เครดิตที่แถม (บาท):",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_credit),1)])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[t[147]||(t[147]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดโปรโมชันเพิ่มเติม (นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[16]||(t[16]=e=>i.saleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.other_promotion_detail]])]),(0,a.Lk)("div",qp,[t[156]||(t[156]=(0,a.Lk)("strong",{class:"text-custom-orange text-lg"},"จำนวนที่แถม",-1)),(0,a.Lk)("div",Zp,[(0,a.Lk)("div",jp,[t[148]||(t[148]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[17]||(t[17]=e=>i.saleRecord.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_mad]])]),(0,a.Lk)("div",Jp,[t[149]||(t[149]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[18]||(t[18]=e=>i.saleRecord.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_dessert]])]),(0,a.Lk)("div",Kp,[t[150]||(t[150]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[19]||(t[19]=e=>i.saleRecord.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_brittles]])]),(0,a.Lk)("div",Hp,[t[151]||(t[151]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[20]||(t[20]=e=>i.saleRecord.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_energy_balls]])])]),(0,a.Lk)("div",Yp,[(0,a.Lk)("div",Gp,[t[152]||(t[152]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[21]||(t[21]=e=>i.saleRecord.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_dressing]])]),(0,a.Lk)("div",eh,[t[153]||(t[153]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[22]||(t[22]=e=>i.saleRecord.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_yoghurt]])]),(0,a.Lk)("div",th,[t[154]||(t[154]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[23]||(t[23]=e=>i.saleRecord.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_granola]])]),(0,a.Lk)("div",sh,[t[155]||(t[155]=(0,a.Lk)("label",{for:"freeCredit",class:"block font-bold text-gray-700"},"เครดิตที่แถม (บาท)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeCredit","onUpdate:modelValue":t[24]||(t[24]=e=>i.saleRecord.free_credit=e),type:"number",min:"0",step:"1",placeholder:"กรอกเครดิตที่แถม (บาท)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_credit]])])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",oh,[(0,a.Lk)("div",ah,[t[158]||(t[158]=(0,a.Lk)("label",{for:"discount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",rh,[t[157]||(t[157]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>i.saleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.discount]])])]),(0,a.Lk)("div",lh,[t[160]||(t[160]=(0,a.Lk)("label",{for:"extraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",ih,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>i.saleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.saleRecord.extra_charge]]),t[159]||(t[159]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),!n.isConsignmentOrAdditional&&n.computedTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",nh,[(0,a.Lk)("div",dh,[(0,a.Lk)("label",ch," มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPackagePrice)),1),(0,a.Lk)("p",uh,"ราคาแพ็กเกจ: "+(0,l.v_)(n.formatPrice(i.saleRecord.package_price)),1),(0,a.Lk)("p",ph,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.saleRecord.discount)),1),(0,a.Lk)("p",hh,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),n.isConsignmentOrAdditional&&n.computedTotalAdditionalPrice>0?((0,a.uX)(),(0,a.CE)("div",gh,[(0,a.Lk)("label",mh," มูลค่าขาย: "+(0,l.v_)(n.formatPrice(n.computedTotalAdditionalPrice)),1),(0,a.Lk)("p",yh,"มูลค่าขาย: "+(0,l.v_)(n.formatPrice(i.saleRecord.add_price)),1),(0,a.Lk)("p",kh,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.saleRecord.discount)),1),(0,a.Lk)("p",fh,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedExtraChargeAdditionalPrice)),1)])):(0,a.Q3)("",!0),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",bh,[t[164]||(t[164]=(0,a.Lk)("h3",{class:"font-bold"},"ที่อยู่ลูกค้า",-1)),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",xh,[(0,a.Lk)("p",null,[t[161]||(t[161]=(0,a.Lk)("strong",null,"ที่อยู่ 1:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_1),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_2?((0,a.uX)(),(0,a.CE)("div",_h,[(0,a.Lk)("p",null,[t[162]||(t[162]=(0,a.Lk)("strong",null,"ที่อยู่ 2:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_2),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_3?((0,a.uX)(),(0,a.CE)("div",wh,[(0,a.Lk)("p",null,[t[163]||(t[163]=(0,a.Lk)("strong",null,"ที่อยู่ 3:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_3),1)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("div",vh,[t[165]||(t[165]=(0,a.Lk)("label",{for:"receiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.receive_food_id,"onUpdate:modelValue":t[27]||(t[27]=e=>i.saleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Lh,[(0,a.Lk)("div",Dh,[t[166]||(t[166]=(0,a.Lk)("label",{for:"zone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone1_id,"onUpdate:modelValue":t[28]||(t[28]=e=>i.saleRecord.zone1_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Ph,[t[167]||(t[167]=(0,a.Lk)("label",{for:"zone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[29]||(t[29]=e=>i.saleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone1_quantity]])])]),n.computedZone1Price>0?((0,a.uX)(),(0,a.CE)("div",Ch,[(0,a.Lk)("label",Sh,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,l.v_)(n.formatPrice(n.computedZone1Price)),1),(0,a.Lk)("p",Rh,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Th,[(0,a.Lk)("div",Mh,[t[168]||(t[168]=(0,a.Lk)("label",{for:"zone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone2_id,"onUpdate:modelValue":t[30]||(t[30]=e=>i.saleRecord.zone2_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Eh,[t[169]||(t[169]=(0,a.Lk)("label",{for:"zone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[31]||(t[31]=e=>i.saleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone2_quantity]])])]),n.computedZone2Price>0?((0,a.uX)(),(0,a.CE)("div",Fh,[(0,a.Lk)("label",zh,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,l.v_)(n.formatPrice(n.computedZone2Price)),1),(0,a.Lk)("p",Ah,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Oh,[(0,a.Lk)("div",Nh,[t[170]||(t[170]=(0,a.Lk)("label",{for:"zone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone3_id,"onUpdate:modelValue":t[32]||(t[32]=e=>i.saleRecord.zone3_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Xh,[t[171]||(t[171]=(0,a.Lk)("label",{for:"zone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>i.saleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone3_quantity]])])]),n.computedZone3Price>0?((0,a.uX)(),(0,a.CE)("div",Vh,[(0,a.Lk)("label",Qh,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,l.v_)(n.formatPrice(n.computedZone3Price)),1),(0,a.Lk)("p",Ih,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Uh,[(0,a.Lk)("div",$h,[t[172]||(t[172]=(0,a.Lk)("label",{for:"zone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone_outsource_id,"onUpdate:modelValue":t[34]||(t[34]=e=>i.saleRecord.zone_outsource_id=e),options:n.filteredOutsource,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Bh,[t[173]||(t[173]=(0,a.Lk)("label",{for:"zone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[35]||(t[35]=e=>i.saleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone_outsource_quantity]])])]),n.computedZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",Wh,[(0,a.Lk)("label",qh,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedZoneOutsourcePrice)),1),(0,a.Lk)("p",Zh,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),n.computedTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",jh,[(0,a.Lk)("label",Jh,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedTotalDeliveryPrice)),1),(0,a.Lk)("p",Kh,"ค่าจัดส่งรวม In-house Riders: "+(0,l.v_)(n.formatPrice(n.computedTotalZonePrice)),1),(0,a.Lk)("p",Hh,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),n.computedTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",Yh,[(0,a.Lk)("label",Gh,"มูลค่าขายรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPrice)),1),n.computedTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",eg,[(0,a.Lk)("p",tg,"มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPackagePrice)),1)])):(0,a.Q3)("",!0),n.computedTotalAdditionalPrice>0?((0,a.uX)(),(0,a.CE)("div",sg,[(0,a.Lk)("p",og,"มูลค่าขาย: "+(0,l.v_)(n.formatPrice(n.computedTotalAdditionalPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("p",ag,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",rg,[(0,a.Lk)("div",lg,[t[174]||(t[174]=(0,a.Lk)("label",{for:"sellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.seller_name_id,"onUpdate:modelValue":t[36]||(t[36]=e=>i.saleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",ig,[t[175]||(t[175]=(0,a.Lk)("label",{for:"startDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[37]||(t[37]=e=>i.saleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.start_date]])])]),(0,a.Lk)("div",ng,[(0,a.Lk)("div",dg,[t[176]||(t[176]=(0,a.Lk)("label",{for:"deliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.delivery_round_id,"onUpdate:modelValue":t[38]||(t[38]=e=>i.saleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",cg,[t[177]||(t[177]=(0,a.Lk)("label",{for:"selectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.select_food_id,"onUpdate:modelValue":t[39]||(t[39]=e=>i.saleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",ug,[t[178]||(t[178]=(0,a.Lk)("label",{for:"note",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[40]||(t[40]=e=>i.saleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.note]])])]),(0,a.Lk)("div",pg,[(0,a.Lk)("li",{onClick:t[41]||(t[41]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[179]||(t[179]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",hg,[(0,a.Lk)("button",{onClick:t[42]||(t[42]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[43]||(t[43]=(...e)=>n.addSaleRecord&&n.addSaleRecord(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",gg,[(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[180]||(t[180]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[181]||(t[181]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",mg,[(0,a.Lk)("ul",yg,[(0,a.Lk)("li",{onClick:t[45]||(t[45]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[182]||(t[182]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",kg,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[46]||(t[46]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[183]||(t[183]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",fg,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[47]||(t[47]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[184]||(t[184]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",bg,[(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[185]||(t[185]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[186]||(t[186]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",xg,[(0,a.Lk)("div",_g,[t[187]||(t[187]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",wg,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPackageTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[49]||(t[49]=e=>i.selectedPackageType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,vg),[[o.lH,i.selectedPackageType]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",Lg,[(0,a.Lk)("li",{onClick:t[50]||(t[50]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[188]||(t[188]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",Dg,[(0,a.Lk)("button",{onClick:t[51]||(t[51]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[52]||(t[52]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Pg,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[53]||(t[53]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[54]||(t[54]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[55]||(t[55]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[56]||(t[56]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),"/sale-records"===e.$route.path||"/sale-records-additional"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",Cg,[(0,a.bF)(c,{to:"sale-records",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records"===e.$route.path}])},{default:(0,a.k6)((()=>t[189]||(t[189]=[(0,a.eW)(" บันทึกการขาย 1stTimer, PackageRenewal ")]))),_:1},8,["class"]),(0,a.bF)(c,{to:"sale-records-additional",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records-additional"===e.$route.path}])},{default:(0,a.k6)((()=>t[190]||(t[190]=[(0,a.eW)(" บันทึกการขาย AdditionalSales ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),(0,a.Lk)("table",Sg,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Rg,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.additionalSalesRecords.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(n.additionalSalesRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",Tg,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",Mg,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",Eg,(0,l.v_)(n.getPackageTypeName(e.package_type_id)),1),(0,a.Lk)("td",Fg,(0,l.v_)(n.getSaleTypeName(e.additional_type_id)),1),(0,a.Lk)("td",zg,(0,l.v_)(e.add_detail),1),(0,a.Lk)("td",Ag,(0,l.v_)(n.formatPrice(e.total_price)),1),(0,a.Lk)("td",Og,[(0,a.Lk)("button",{onClick:t=>n.openConfirmPaymentModal(e),class:(0,l.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none hover:text-gray-200",n.getPaymentStatusClass(e.payment_status)])},(0,l.v_)(n.getPaymentStatusText(e.payment_status)),11,Ng),i.isConfirmPaymentModalOpen?((0,a.uX)(),(0,a.CE)("div",Xg,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[192]||(t[192]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[57]||(t[57]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[191]||(t[191]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Vg,[(0,a.Lk)("div",{class:(0,l.C4)([{"bg-green-500":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500":"paid"===i.selectedSaleRecord.payment_status},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,a.Lk)("span",Qg,(0,l.v_)("paid"===i.selectedSaleRecord.payment_status?"เปลี่ยนสถานะเป็นยังไม่ได้ชำระเงิน":"ยืนยันการชำระเงิน"),1),(0,a.Lk)("button",{onClick:t[58]||(t[58]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"text-white hover:text-gray-200"},t[193]||(t[193]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,a.Lk)("div",Ig,[(0,a.Lk)("p",Ug,(0,l.v_)("paid"===i.selectedSaleRecord.payment_status?'คุณต้องการเปลี่ยนสถานะเป็น "ยังไม่ได้ชำระเงิน" หรือไม่?':"กรุณาเลือกวันที่ชำระเงิน:"),1),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",$g,[(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[59]||(t[59]=e=>i.selectedPaidDate=e),class:"border border-gray-300 rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPaidDate]])])):(0,a.Q3)("",!0),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",Bg,[t[194]||(t[194]=(0,a.Lk)("label",{for:"payment_types",class:"block text-gray-700"},"เลือกประเภทการชำระเงิน:",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.payment_type_id,"onUpdate:modelValue":t[60]||(t[60]=e=>i.selectedSaleRecord.payment_type_id=e),options:i.paymentTypes,label:"name","track-by":"id",placeholder:"เลือกประเภทการชำระเงิน"},null,8,["modelValue","options"])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Wg,[(0,a.Lk)("button",{onClick:t[61]||(t[61]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[62]||(t[62]=(...e)=>n.confirmPayment&&n.confirmPayment(...e)),class:(0,l.C4)([{"bg-green-500 hover:bg-green-600":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500 hover:bg-red-600":"paid"===i.selectedSaleRecord.payment_status},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(s)},t[195]||(t[195]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,qg),n.additionalSalesRecords.length>4?((0,a.uX)(),(0,a.CE)("div",Zg,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)([n.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",jg,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,Jg),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,Kg),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,Hg),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,Yg)])],2)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",Gg,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",em,[(0,a.Lk)("ul",tm,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,sm),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,om),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,am),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,rm)])])):(0,a.Q3)("",!0)]))],512)])))),128)):(0,a.Q3)("",!0),n.additionalSalesRecords.length<6&&n.additionalSalesRecords.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.additionalSalesRecords.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[196]||(t[196]=[(0,a.Lk)("td",{colspan:"8",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.additionalSalesRecords.length?((0,a.uX)(),(0,a.CE)("tr",lm,t[197]||(t[197]=[(0,a.Lk)("td",{colspan:"9",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isResultModalOpen?((0,a.uX)(),(0,a.CE)("div",im,[(0,a.Lk)("div",nm,[(0,a.Lk)("div",dm,[t[198]||(t[198]=(0,a.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,a.Lk)("div",cm,[(0,a.Lk)("span",{onClick:t[63]||(t[63]=(...e)=>n.copyResultModalContent&&n.copyResultModalContent(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},(0,l.v_)(i.isCopied?"check_circle":"content_copy"),1),(0,a.Lk)("span",{onClick:t[64]||(t[64]=(...e)=>n.closeResultModal&&n.closeResultModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",um,[t[199]||(t[199]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 ขออนุญาตสรุปยอดนะคะ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredResultSaleRecord,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-2"},[(0,a.Lk)("p",null,["name"===t?((0,a.uX)(),(0,a.CE)("strong",pm,[(0,a.eW)((0,l.v_)(n.formatResultLabel(t)),1),(0,a.Lk)("span",null,(0,l.v_)(e),1)])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Lk)("strong",null,(0,l.v_)(n.formatResultLabel(t)),1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))])])))),128)),t[200]||(t[200]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1))],512)])])):(0,a.Q3)("",!0),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",hm,[(0,a.Lk)("div",gm,[(0,a.Lk)("div",mm,[t[201]||(t[201]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,a.Lk)("div",ym,[(0,a.Lk)("span",{onClick:t[65]||(t[65]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",km,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,s,o)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,l.C4)(["p-2 rounded-md",o%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},["zone1_id"===s?((0,a.uX)(),(0,a.CE)("div",fm,[(0,a.Lk)("div",bm,[(0,a.Lk)("strong",xm,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",_m,[t[202]||(t[202]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone1_quantity),1)]),(0,a.Lk)("div",wm,[t[203]||(t[203]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id))),1)])])):"zone2_id"===s?((0,a.uX)(),(0,a.CE)("div",vm,[(0,a.Lk)("div",Lm,[(0,a.Lk)("strong",Dm,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Pm,[t[204]||(t[204]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone2_quantity),1)]),(0,a.Lk)("div",Cm,[t[205]||(t[205]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id))),1)])])):"zone3_id"===s?((0,a.uX)(),(0,a.CE)("div",Sm,[(0,a.Lk)("div",Rm,[(0,a.Lk)("strong",Tm,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Mm,[t[206]||(t[206]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone3_quantity),1)]),(0,a.Lk)("div",Em,[t[207]||(t[207]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id))),1)])])):"zone_outsource_id"===s?((0,a.uX)(),(0,a.CE)("div",Fm,[(0,a.Lk)("div",zm,[(0,a.Lk)("strong",Am,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Om,[t[208]||(t[208]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone_outsource_quantity),1)]),(0,a.Lk)("div",Nm,[t[209]||(t[209]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id))),1)])])):((0,a.uX)(),(0,a.CE)(a.FK,{key:4},[(0,a.Lk)("strong",Xm,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))],2)))),128))],512)])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",Vm,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[211]||(t[211]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[66]||(t[66]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[210]||(t[210]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Qm,[(0,a.Lk)("div",Im,[t[212]||(t[212]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขบันทึกการขาย",-1)),(0,a.Lk)("div",Um,[(0,a.Lk)("span",{onClick:t[67]||(t[67]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",$m,[(0,a.Lk)("div",null,[t[213]||(t[213]=(0,a.Lk)("label",{for:"editCustomer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.customer_id,"onUpdate:modelValue":t[68]||(t[68]=e=>i.selectedSaleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[214]||(t[214]=(0,a.Lk)("label",{for:"editPackageType",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_type_id,"onUpdate:modelValue":t[69]||(t[69]=e=>i.selectedSaleRecord.package_type_id=e),options:n.filteredPackageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),i.selectedSaleRecord.package_type_id&&"additional sales"===i.selectedSaleRecord.package_type_id.name.toLowerCase()||i.selectedSaleRecord.package_type_id&&"consignment"===i.selectedSaleRecord.package_type_id.name.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",Bm,[(0,a.Lk)("div",null,[t[215]||(t[215]=(0,a.Lk)("label",{for:"additional_type",class:"block font-bold text-gray-700"},"Sales Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.additional_type_id,"onUpdate:modelValue":t[70]||(t[70]=e=>i.selectedSaleRecord.additional_type_id=e),options:n.filteredAdditionalTypes,placeholder:"เลือก Sales Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[216]||(t[216]=(0,a.Lk)("label",{for:"add_detail",class:"block text-gray-700 font-bold"},"รายละเอียดการขาย",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"add_detail","onUpdate:modelValue":t[71]||(t[71]=e=>i.selectedSaleRecord.add_detail=e),placeholder:"กรอกรายละเอียดการขาย",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.add_detail]])]),(0,a.Lk)("div",Wm,[t[218]||(t[218]=(0,a.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,a.Lk)("div",qm,[t[217]||(t[217]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[72]||(t[72]=e=>i.selectedSaleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.add_price]])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Zm,[t[226]||(t[226]=(0,a.Lk)("strong",{class:"text-custom-orange text-lg"},"จำนวนที่แถม",-1)),(0,a.Lk)("div",jm,[(0,a.Lk)("div",Jm,[t[219]||(t[219]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[73]||(t[73]=e=>i.selectedSaleRecord.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_mad]])]),(0,a.Lk)("div",Km,[t[220]||(t[220]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[74]||(t[74]=e=>i.selectedSaleRecord.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dessert]])]),(0,a.Lk)("div",Hm,[t[221]||(t[221]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[75]||(t[75]=e=>i.selectedSaleRecord.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_brittles]])]),(0,a.Lk)("div",Ym,[t[222]||(t[222]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[76]||(t[76]=e=>i.selectedSaleRecord.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_energy_balls]])])]),(0,a.Lk)("div",Gm,[(0,a.Lk)("div",ey,[t[223]||(t[223]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[77]||(t[77]=e=>i.selectedSaleRecord.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dressing]])]),(0,a.Lk)("div",ty,[t[224]||(t[224]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[78]||(t[78]=e=>i.selectedSaleRecord.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_yoghurt]])]),(0,a.Lk)("div",sy,[t[225]||(t[225]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[79]||(t[79]=e=>i.selectedSaleRecord.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_granola]])])])]),(0,a.Lk)("div",oy,[(0,a.Lk)("div",ay,[t[228]||(t[228]=(0,a.Lk)("label",{for:"editDiscount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",ry,[t[227]||(t[227]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[80]||(t[80]=e=>i.selectedSaleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.discount]])])]),(0,a.Lk)("div",ly,[t[230]||(t[230]=(0,a.Lk)("label",{for:"editExtraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",iy,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[81]||(t[81]=e=>i.selectedSaleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.selectedSaleRecord.extra_charge]]),t[229]||(t[229]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),n.computedEditTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",ny,[(0,a.Lk)("div",dy,[(0,a.Lk)("label",cy," มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPackagePrice)),1),(0,a.Lk)("p",uy,"ราคาแพ็กเกจ: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.package_price)),1),(0,a.Lk)("p",py,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.discount)),1),(0,a.Lk)("p",hy,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedEditExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[231]||(t[231]=(0,a.Lk)("label",{for:"editReceiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.receive_food_id,"onUpdate:modelValue":t[82]||(t[82]=e=>i.selectedSaleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",gy,[(0,a.Lk)("div",my,[t[232]||(t[232]=(0,a.Lk)("label",{for:"editZone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone1_id,"onUpdate:modelValue":t[83]||(t[83]=e=>i.selectedSaleRecord.zone1_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",yy,[t[233]||(t[233]=(0,a.Lk)("label",{for:"editZone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[84]||(t[84]=e=>i.selectedSaleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone1_quantity]])])]),n.computedEditZone1Price>0?((0,a.uX)(),(0,a.CE)("div",ky,[(0,a.Lk)("label",fy,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,l.v_)(n.formatPrice(n.computedEditZone1Price)),1),(0,a.Lk)("p",by,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",xy,[(0,a.Lk)("div",_y,[t[234]||(t[234]=(0,a.Lk)("label",{for:"editZone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone2_id,"onUpdate:modelValue":t[85]||(t[85]=e=>i.selectedSaleRecord.zone2_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",wy,[t[235]||(t[235]=(0,a.Lk)("label",{for:"editZone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[86]||(t[86]=e=>i.selectedSaleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone2_quantity]])])]),n.computedEditZone2Price>0?((0,a.uX)(),(0,a.CE)("div",vy,[(0,a.Lk)("label",Ly,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,l.v_)(n.formatPrice(n.computedEditZone2Price)),1),(0,a.Lk)("p",Dy,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Py,[(0,a.Lk)("div",Cy,[t[236]||(t[236]=(0,a.Lk)("label",{for:"editZone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone3_id,"onUpdate:modelValue":t[87]||(t[87]=e=>i.selectedSaleRecord.zone3_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Sy,[t[237]||(t[237]=(0,a.Lk)("label",{for:"editZone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[88]||(t[88]=e=>i.selectedSaleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone3_quantity]])])]),n.computedEditZone3Price>0?((0,a.uX)(),(0,a.CE)("div",Ry,[(0,a.Lk)("label",Ty,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,l.v_)(n.formatPrice(n.computedEditZone3Price)),1),(0,a.Lk)("p",My,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Ey,[(0,a.Lk)("div",Fy,[t[238]||(t[238]=(0,a.Lk)("label",{for:"editZone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone_outsource_id,"onUpdate:modelValue":t[89]||(t[89]=e=>i.selectedSaleRecord.zone_outsource_id=e),options:n.filteredOutsource,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",zy,[t[239]||(t[239]=(0,a.Lk)("label",{for:"editZone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[90]||(t[90]=e=>i.selectedSaleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone_outsource_quantity]])])]),n.computedEditZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",Ay,[(0,a.Lk)("label",Oy,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedEditZoneOutsourcePrice)),1),(0,a.Lk)("p",Ny,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),n.computedEditTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",Xy,[(0,a.Lk)("label",Vy,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedEditTotalDeliveryPrice)),1),(0,a.Lk)("p",Qy,"ค่าจัดส่งรวม In-house Riders: "+(0,l.v_)(n.formatPrice(n.computedEditTotalZonePrice)),1),(0,a.Lk)("p",Iy,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedEditZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),n.computedEditTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",Uy,[(0,a.Lk)("label",$y,"มูลค่าขายรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPrice)),1),(0,a.Lk)("div",null,[(0,a.Lk)("p",By,"มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPackagePrice)),1)]),(0,a.Lk)("p",Wy,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedEditTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",qy,[(0,a.Lk)("div",Zy,[t[240]||(t[240]=(0,a.Lk)("label",{for:"editSellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.seller_name_id,"onUpdate:modelValue":t[91]||(t[91]=e=>i.selectedSaleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",jy,[t[241]||(t[241]=(0,a.Lk)("label",{for:"editStartDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[92]||(t[92]=e=>i.selectedSaleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.start_date]])])]),(0,a.Lk)("div",Jy,[(0,a.Lk)("div",Ky,[t[242]||(t[242]=(0,a.Lk)("label",{for:"editDeliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.delivery_round_id,"onUpdate:modelValue":t[93]||(t[93]=e=>i.selectedSaleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Hy,[t[243]||(t[243]=(0,a.Lk)("label",{for:"editSelectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.select_food_id,"onUpdate:modelValue":t[94]||(t[94]=e=>i.selectedSaleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",Yy,[t[244]||(t[244]=(0,a.Lk)("label",{for:"editNote",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[95]||(t[95]=e=>i.selectedSaleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.note]])])]),(0,a.Lk)("div",Gy,[(0,a.Lk)("div",ek,[(0,a.Lk)("button",{onClick:t[96]||(t[96]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[97]||(t[97]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",tk,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[246]||(t[246]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[98]||(t[98]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[245]||(t[245]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",sk,[(0,a.Lk)("div",ok,[t[247]||(t[247]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[99]||(t[99]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[248]||(t[248]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",ak,[(0,a.Lk)("button",{onClick:t[100]||(t[100]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[101]||(t[101]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",rk,[(0,a.Lk)("button",{onClick:t[102]||(t[102]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[249]||(t[249]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,lk),(0,a.Lk)("div",ik,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[103]||(t[103]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[104]||(t[104]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,nk)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[105]||(t[105]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[106]||(t[106]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[107]||(t[107]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[250]||(t[250]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,dk)])])],64)}var uk={components:{Multiselect:fp.Ay},data(){return{headers:["#","Customer's Name","Sales Type","ประเภทรายการ","รายละเอียดการขาย","มูลค่าขายรวม","สถานะการชำระเงิน",""],headerWidths:["5%","15%","15%","15%","25%","10%","15%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],isAddModalOpen:!1,saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:"",total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.additionalSalesRecords.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{name:this.selectedSaleRecord.customer.name,add_detail:this.selectedSaleRecord.add_detail,sellect_by:this.getSelectFood(this.selectedSaleRecord.select_food_id),delivery_date:this.selectedSaleRecord.customer.delivery_date,delivery:this.getDeliveryRoundName(this.selectedSaleRecord.delivery_round_id),add_price:this.formatPrice(this.selectedSaleRecord.add_price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),note:this.selectedSaleRecord.note}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return{seller_name_id:this.getSellerName(this.selectedSaleRecord.seller_name_id),name:this.selectedSaleRecord.customer?.name||"",additional_type_id:this.getSaleTypeName(this.selectedSaleRecord.additional_type_id),package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),add_detail:this.selectedSaleRecord.add_detail,other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||"",discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPercent(this.selectedSaleRecord.extra_charge),extra_charge_price:this.formatPrice(this.selectedSaleRecord.extra_charge_price),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),receive_food_id:this.getReceiveFoodName(this.selectedSaleRecord.receive_food_id),zone1_id:this.getZoneName(this.selectedSaleRecord.zone1_id),total_zone1_price:this.formatPrice(this.selectedSaleRecord.total_zone1_price),zone2_id:this.getZoneName(this.selectedSaleRecord.zone2_id),total_zone2_price:this.formatPrice(this.selectedSaleRecord.total_zone2_price),zone3_id:this.getZoneName(this.selectedSaleRecord.zone3_id),total_zone3_price:this.formatPrice(this.selectedSaleRecord.total_zone3_price),zone_outsource_id:this.getZoneName(this.selectedSaleRecord.zone_outsource_id),total_zone_outsource_price:this.formatPrice(this.selectedSaleRecord.total_zone_outsource_price),total_delivery_zone_price:this.formatPrice(this.selectedSaleRecord.total_delivery_zone_price),total_delivery_price:this.formatPrice(this.selectedSaleRecord.total_delivery_price),total_price:this.formatPrice(this.selectedSaleRecord.total_price),payment_status:this.getPaymentStatusText(this.selectedSaleRecord.payment_status),paid_date:this.formatDate(this.selectedSaleRecord.paid_date),payment_type_id:this.getPaymentTypeName(this.selectedSaleRecord.payment_type_id),note:this.selectedSaleRecord.note||"",delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",select_food_id:this.getSelectFood(this.selectedSaleRecord.select_food_id)}},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},totalReceiveFood(){let e=[];this.selectedSaleRecord.package.free_mad>0&&e.push(`${this.selectedSaleRecord.package.free_mad} x Main Dish`),this.selectedSaleRecord.package.free_dessert>0&&e.push(`${this.selectedSaleRecord.package.free_dessert} x Dessert`),this.selectedSaleRecord.package.free_brittles>0&&e.push(`${this.selectedSaleRecord.package.free_brittles} x Brittles`),this.selectedSaleRecord.package.free_energy_balls>0&&e.push(`${this.selectedSaleRecord.package.free_energy_balls} x Energy Balls`),this.selectedSaleRecord.package.free_dressing>0&&e.push(`${this.selectedSaleRecord.package.free_dressing} x Dressing`),this.selectedSaleRecord.package.free_yoghurt>0&&e.push(`${this.selectedSaleRecord.package.free_yoghurt} x Yoghurt`),this.selectedSaleRecord.package.free_granola>0&&e.push(`${this.selectedSaleRecord.package.free_granola} x Granola`);let t=e.length>0?e.join(" + "):"";return t},totalDeliveryPrice(){let e=[];null!==this.selectedSaleRecord.zone1_id&&this.selectedSaleRecord.zone1_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone1_id)} x ${this.selectedSaleRecord.zone1_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone2_id&&this.selectedSaleRecord.zone2_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone2_id)} x ${this.selectedSaleRecord.zone2_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone3_id&&this.selectedSaleRecord.zone3_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone3_id)} x ${this.selectedSaleRecord.zone3_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone_outsource_id&&this.selectedSaleRecord.zone_outsource_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone_outsource_id)} x ${this.selectedSaleRecord.zone_outsource_quantity} ครั้ง`);let t=e.length>0?`(${e.join(" + ")})`:"";return this.selectedSaleRecord.total_delivery_price>0?`${this.formatPrice(this.selectedSaleRecord.total_delivery_price)} ${t}`:""},additionalSalesRecords(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"===t||"consignment"===t})).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}))},filteredPackageTypes(){return this.packageTypes.filter((e=>e.name.toLowerCase().includes("additional sales")||e.name.toLowerCase().includes("consignment")))},isConsignmentOrAdditional(){const e=this.saleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedExtraChargePackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalPackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargePackagePrice;return e+s-t},computedExtraChargeAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargeAdditionalPrice;return e+s-t},computedZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));return e&&this.saleRecord.zone1_quantity?e.price*this.saleRecord.zone1_quantity:0},computedZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));return e&&this.saleRecord.zone2_quantity?e.price*this.saleRecord.zone2_quantity:0},computedZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));return e&&this.saleRecord.zone3_quantity?e.price*this.saleRecord.zone3_quantity:0},computedTotalZonePrice(){return this.computedZone1Price+this.computedZone2Price+this.computedZone3Price},computedZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));return e&&this.saleRecord.zone_outsource_quantity?e.price*this.saleRecord.zone_outsource_quantity:0},computedTotalDeliveryPrice(){return this.computedTotalZonePrice+this.computedZoneOutsourcePrice},computedTotalPrice(){return this.computedTotalPackagePrice+this.computedTotalAdditionalPrice+this.computedTotalDeliveryPrice},isEditConsignmentOrAdditional(){const e=this.selectedSaleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedEditExtraChargePackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.extra_charge)||0;return e*t/100},computedEditTotalPackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.discount)||0,s=this.computedEditExtraChargePackagePrice;return e+s-t},computedEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));return e&&this.selectedSaleRecord.zone1_quantity?e.price*this.selectedSaleRecord.zone1_quantity:0},computedEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));return e&&this.selectedSaleRecord.zone2_quantity?e.price*this.selectedSaleRecord.zone2_quantity:0},computedEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));return e&&this.selectedSaleRecord.zone3_quantity?e.price*this.selectedSaleRecord.zone3_quantity:0},computedEditTotalZonePrice(){return this.computedEditZone1Price+this.computedEditZone2Price+this.computedEditZone3Price},computedEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));return e&&this.selectedSaleRecord.zone_outsource_quantity?e.price*this.selectedSaleRecord.zone_outsource_quantity:0},computedEditTotalDeliveryPrice(){return this.computedEditTotalZonePrice+this.computedEditZoneOutsourcePrice},computedEditTotalPrice(){return this.computedEditTotalPackagePrice+this.computedEditTotalDeliveryPrice},filteredAdditionalTypes(){return this.additionalTypes.filter((e=>e.name.startsWith("AFF")))},filteredPrograms(){return this.programs.filter((e=>!e.name.startsWith("Happy")))},filteredInhouse(){return this.zoneDeliveries.filter((e=>e.name.startsWith("AFF")))},filteredOutsource(){return this.zoneDeliveries.filter((e=>!e.name.startsWith("AFF")))},...(0,Ze.L8)(["saleRecords"])},methods:{...(0,Ze.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.additionalSalesRecords.slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.additionalSalesRecords=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},openAddModal(){this.isAddModalOpen=!0},async addSaleRecord(){if(this.saleRecord.customer_id)try{const e=await ke.A.post("http://127.0.0.1:3333/sale-records",{customer_id:this.saleRecord.customer_id?.id||null,promotion_type_id:this.saleRecord.promotion_type_id?.id||null,program_id:this.saleRecord.program_id?.id||null,package_id:this.saleRecord.package_id?.id||null,package_type_id:this.saleRecord.package_type_id?.id||null,seller_name_id:this.saleRecord.seller_name_id?.id||null,discount:this.saleRecord.discount||0,extra_charge:this.saleRecord.extra_charge||0,payment_status:this.saleRecord.payment_status||"unpaid",paid_date:this.saleRecord.paid_date||null,payment_type_id:this.saleRecord.payment_type_id?.id||null,start_date:this.saleRecord.start_date||null,zone1_id:this.saleRecord.zone1_id?.id||null,zone1_quantity:this.saleRecord.zone1_quantity||0,zone2_id:this.saleRecord.zone2_id?.id||null,zone2_quantity:this.saleRecord.zone2_quantity||0,zone3_id:this.saleRecord.zone3_id?.id||null,zone3_quantity:this.saleRecord.zone3_quantity||0,zone_outsource_id:this.saleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.saleRecord.zone_outsource_quantity||0,additional_type_id:this.saleRecord.additional_type_id?.id||null,add_detail:this.saleRecord.add_detail||null,add_price:this.saleRecord.add_price||0,delivery_round_id:this.saleRecord.delivery_round_id?.id||null,select_food_id:this.saleRecord.select_food_id?.id||null,receive_food_id:this.saleRecord.receive_food_id?.id||null,note:this.saleRecord.note||null,free_mad:this.saleRecord.free_mad||0,free_dessert:this.saleRecord.free_dessert||0,free_brittles:this.saleRecord.free_brittles||0,free_energy_balls:this.saleRecord.free_energy_balls||0,free_dressing:this.saleRecord.free_dressing||0,free_yoghurt:this.saleRecord.free_yoghurt||0,free_granola:this.saleRecord.free_granola||0,free_credit:this.saleRecord.free_credit||0,other_promotion_detail:this.saleRecord.other_promotion_detail||null});this.saleRecords.push(e.data),this.closeAddModal(),this.filterPrograms(),this.filterPackages(),await this.fetchSaleRecords(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){console.error("Error adding sale record:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการเพิ่มข้อมูล!"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},clearForm(){this.saleRecord={customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},this.packageDetails=null,this.isShowingPackageDetails=!1,this.customerAddress=null,this.filterPrograms(),this.filterPackages()},openEditModal(e){const t=e=>{if(!e)return null;const t=new Date(e);return t.toLocaleDateString("en-CA")};this.selectedSaleRecord={...e,start_date:t(e.start_date),customer_id:this.customers.find((t=>t.id===e.customer_id))||null,package_type_id:this.packageTypes.find((t=>t.id===e.package_type_id))||null,promotion_type_id:this.promotionTypes.find((t=>t.id===e.promotion_type_id))||null,program_id:this.programs.find((t=>t.id===e.program_id))||null,package_id:this.packages.find((t=>t.id===e.package_id))||null,receive_food_id:this.receiveFoods.find((t=>t.id===e.receive_food_id))||null,zone1_id:this.zoneDeliveries.find((t=>t.id===e.zone1_id))||null,zone2_id:this.zoneDeliveries.find((t=>t.id===e.zone2_id))||null,zone3_id:this.zoneDeliveries.find((t=>t.id===e.zone3_id))||null,zone_outsource_id:this.zoneDeliveries.find((t=>t.id===e.zone_outsource_id))||null,seller_name_id:this.sellerNames.find((t=>t.id===e.seller_name_id))||null,delivery_round_id:this.deliveryRounds.find((t=>t.id===e.delivery_round_id))||null,select_food_id:this.selectFoods.find((t=>t.id===e.select_food_id))||null,paid_date:t(e.paid_date),payment_type_id:this.paymentTypes.find((t=>t.id===e.payment_type_id))||null,additional_type_id:this.additionalTypes.find((t=>t.id===e.additional_type_id))||null},this.moreOpenDropdownIndex=null,this.isEditModalOpen=!0},async saveChanges(){if(this.selectedSaleRecord.customer_id)try{const e=await ke.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}`,{customer_id:this.selectedSaleRecord.customer_id?.id||null,promotion_type_id:this.selectedSaleRecord.promotion_type_id?.id||null,program_id:this.selectedSaleRecord.program_id?.id||null,package_id:this.selectedSaleRecord.package_id?.id||null,package_type_id:this.selectedSaleRecord.package_type_id?.id||null,seller_name_id:this.selectedSaleRecord.seller_name_id?.id||null,discount:this.selectedSaleRecord.discount||0,extra_charge:this.selectedSaleRecord.extra_charge||0,start_date:this.selectedSaleRecord.start_date||null,zone1_id:this.selectedSaleRecord.zone1_id?.id||null,zone1_quantity:this.selectedSaleRecord.zone1_quantity||0,zone2_id:this.selectedSaleRecord.zone2_id?.id||null,zone2_quantity:this.selectedSaleRecord.zone2_quantity||0,zone3_id:this.selectedSaleRecord.zone3_id?.id||null,zone3_quantity:this.selectedSaleRecord.zone3_quantity||0,zone_outsource_id:this.selectedSaleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.selectedSaleRecord.zone_outsource_quantity||0,additional_type_id:this.selectedSaleRecord.additional_type_id?.id||null,add_detail:this.selectedSaleRecord.add_detail||null,add_price:this.selectedSaleRecord.add_price||0,delivery_round_id:this.selectedSaleRecord.delivery_round_id?.id||null,select_food_id:this.selectedSaleRecord.select_food_id?.id||null,receive_food_id:this.selectedSaleRecord.receive_food_id?.id||null,note:this.selectedSaleRecord.note||null,free_mad:this.selectedSaleRecord.free_mad||0,free_dessert:this.selectedSaleRecord.free_dessert||0,free_brittles:this.selectedSaleRecord.free_brittles||0,free_energy_balls:this.selectedSaleRecord.free_energy_balls||0,free_dressing:this.selectedSaleRecord.free_dressing||0,free_yoghurt:this.selectedSaleRecord.free_yoghurt||0,free_granola:this.selectedSaleRecord.free_granola||0,free_credit:this.selectedSaleRecord.free_credit||0,other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||null}),t=this.saleRecords.findIndex((e=>e.id===this.selectedSaleRecord.id));-1!==t&&(this.saleRecords[t]=e.data),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.closeEditModal(),await this.fetchSaleRecords()}catch(e){console.error("Error saving changes:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeEditModal(){this.isEditModalOpen=!1,this.selectedSaleRecord={}},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n,d,c,u,p]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/zone-delivery-types"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types"),ke.A.get("http://127.0.0.1:3333/delivery-rounds"),ke.A.get("http://127.0.0.1:3333/receive-foods"),ke.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=r.data,this.zoneDeliveryTypes=l.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ke.A.get("http://127.0.0.1:3333/sale-records");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:null},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},getSaleTypeName(e){const t=this.additionalTypes.find((t=>t.id===e));return t?t.name:""},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0,this.moreOpenDropdownIndex=null},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/sale-records/${this.itemToDelete}`),this.saleRecords=this.saleRecords.filter((e=>e.id!==this.itemToDelete)),this.showFailToastNotification("ลบข้อมูลสำเร็จ!"),this.closeDeleteModal(),this.updatePage()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={seller_name_id:"ผู้ขาย",name:"ชื่อ-สกุลลูกค้า",additional_type_id:"ประเภทรายการ",package_type:"Sales Type",add_detail:"รายละเอียดการขาย",other_promotion_detail:"รายละเอียดเพิ่มเติมที่ต้องได้รับอนุม้ติจาก Director",discount:"ส่วนลดเพิ่มเติมจากโปรฯ ประจำเดือน (ถ้ามี)",extra_charge:"Extra Charge (%)",extra_charge_price:"มูลค่า Extra Charge",total_package_price:"มูลค่าขาย",receive_food_id:"วิธีการรับอาหาร",zone1_id:"In-house Riders (ที่อยู่ 1)",total_zone1_price:"ค่าจัดส่งรวม (ที่อยู่ 1)",zone2_id:"In-house Riders (ที่อยู่ 2)",total_zone2_price:"ค่าจัดส่งรวม (ที่อยู่ 2)",zone3_id:"In-house Riders (ที่อยู่ 3)",total_zone3_price:"ค่าจัดส่งรวม (ที่อยู่ 3)",zone_outsource_id:"Outsource Riders",total_zone_outsource_price:"ค่าจัดส่งรวม Outsource",total_delivery_zone_price:"ค่าจัดส่งรวม In-house Riders",total_delivery_price:"รวมค่าจัดส่งทั้งหมด",total_price:"มูลค่าขายรวม",payment_status:"สถานะการชำระเงิน",paid_date:"วันที่ชำระเงิน",payment_type_id:"วิธีการชำระเงิน",sellect_by:"เลือกอาหารโดย",note:"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",delivery_date:"วันที่ต้องการรับอาหาร",select_food_id:"วิธีการเลือกอาหาร"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},onViewResultSaleRecord(e){this.selectedSaleRecord=e,this.isResultModalOpen=!0,this.moreOpenDropdownIndex=null},closeResultModal(){this.isResultModalOpen=!1},formatResultLabel(e){const t={name:"🏷 คุณ",add_detail:"▶️ Additional",sellect_by:"▶️ เลือกอาหารโดย",delivery_date:"▶️ วันที่รับอาหาร",delivery:"▶️ จัดส่ง",add_price:"▶️ ราคา Additional",extra_charge:"▶️ Extra Chrage",discount:"▶️ ส่วนลด",total_delivery_price:"▶️ ค่าจัดส่ง",total_price:"▶️ ยอดชำระ",note:"▶️ หมายเหตุ:"};return t[e]||e},copyResultModalContent(){let e=this.$refs.modalContent.innerText;if(e=e.replace(/\n\s*\n/g,"\n"),navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)})).catch((e=>{console.error("ไม่สามารถคัดลอกข้อความ:",e)}));else{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)}catch(t){console.error("ไม่สามารถคัดลอกข้อความ:",t)}finally{document.body.removeChild(s)}}},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},calculateTotalPrice(){if(!this.saleRecord.package_id)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.saleRecord.package_id.id));if(!e)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.saleRecord.extra_charge)||0,o=parseFloat(this.saleRecord.discount)||0,a=t*s/100;this.saleRecord.extra_charge_price=a,this.saleRecord.package_price=t,this.saleRecord.total_package_price=t+a-o},calculateZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));e&&this.saleRecord.zone1_quantity&&(this.computedZone1Price=e.price*this.saleRecord.zone1_quantity)},calculateZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));e&&this.saleRecord.zone2_quantity&&(this.computedZone2Price=e.price*this.saleRecord.zone2_quantity)},calculateZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));e&&this.saleRecord.zone3_quantity&&(this.computedZone3Price=e.price*this.saleRecord.zone3_quantity)},calculateZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));e&&this.saleRecord.zone_outsource_quantity&&(this.computedZoneOutsourcePrice=e.price*this.saleRecord.zone_outsource_quantity)},calculateEditTotalPrice(){if(!this.selectedSaleRecord.package_id)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.selectedSaleRecord.package_id?.id));if(!e)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.selectedSaleRecord.extra_charge)||0,o=parseFloat(this.selectedSaleRecord.discount)||0,a=t*s/100;this.selectedSaleRecord.extra_charge_price=a,this.selectedSaleRecord.package_price=t,this.selectedSaleRecord.total_package_price=t+a-o},calculateEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));e&&this.selectedSaleRecord.zone1_quantity&&(this.computedEditZone1Price=e.price*this.selectedSaleRecord.zone1_quantity)},calculateEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));e&&this.selectedSaleRecord.zone2_quantity&&(this.computedEditZone2Price=e.price*this.selectedSaleRecord.zone2_quantity)},calculateEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));e&&this.selectedSaleRecord.zone3_quantity&&(this.computedEditZone3Price=e.price*this.selectedSaleRecord.zone3_quantity)},calculateEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));e&&this.selectedSaleRecord.zone_outsource_quantity&&(this.computedEditZoneOutsourcePrice=e.price*this.selectedSaleRecord.zone_outsource_quantity)},clearNotAdditionalForm(){this.saleRecord.add_detail=null,this.saleRecord.additional_type_id=null,this.saleRecord.add_price=0},clearAdditionalForm(){this.saleRecord.promotion_type_id=null,this.saleRecord.program_id=null,this.saleRecord.package_id=null},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},openConfirmPaymentModal(e){this.selectedSaleRecord=e,this.selectedPaidDate=e.paid_date||"",this.isConfirmPaymentModalOpen=!0,this.moreOpenDropdownIndex=null},closeConfirmPaymentModal(){this.isConfirmPaymentModalOpen=!1,this.selectedPaidDate=""},async confirmPayment(){try{const e="paid"===this.selectedSaleRecord.payment_status?"unpaid":"paid",t="paid"===e?this.selectedPaidDate:null,s="paid"===e?this.selectedSaleRecord.payment_type_id?.id:null;if("paid"===e&&(!this.selectedPaidDate||!s))return void this.showErrorToastNotification("กรุณาเลือกข้อมูลให้ครบ!");const o={payment_status:e,paid_date:t,payment_type_id:s},a=await ke.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}/payment-status`,o);if(await this.fetchSaleRecords(),200!==a.status)throw new Error("Unexpected response status");{const e=a.data.data,t=this.saleRecords.findIndex((t=>t.id===e.id));-1!==t&&(this.saleRecords[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error updating payment status:",e),console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmPaymentModal()},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.promotion_type_id":function(){this.filterPrograms()},"saleRecord.program_id":function(){this.filterPackages()},"saleRecord.package_id"(){this.calculateTotalPrice()},"saleRecord.discount"(){this.calculateTotalPrice()},"saleRecord.extra_charge"(){this.calculateTotalPrice()},"saleRecord.zone1_id"(){this.calculateZone1Price()},"saleRecord.zone1_quantity"(){this.calculateZone1Price()},"saleRecord.zone2_id"(){this.calculateZone2Price()},"saleRecord.zone2_quantity"(){this.calculateZone2Price()},"saleRecord.zone3_id"(){this.calculateZone3Price()},"saleRecord.zone3_quantity"(){this.calculateZone3Price()},"saleRecord.zone_outsource_id"(){this.calculateZoneOutsourcePrice()},"saleRecord.zone_outsource_quantity"(){this.calculateZoneOutsourcePrice()},"saleRecord.package_type_id":"checkPackageType","selectedSaleRecord.package_id"(){this.calculateEditTotalPrice()},"selectedSaleRecord.discount"(){this.calculateEditTotalPrice()},"selectedSaleRecord.extra_charge"(){this.calculateEditTotalPrice()},"selectedSaleRecord.zone1_id"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone1_quantity"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone2_id"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone2_quantity"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone3_id"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone3_quantity"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone_outsource_id"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.zone_outsource_quantity"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.package_type_id":"checkEditPackageType",searchQuery(){this.updatePage()},currentPage(){this.updatePage()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const pk=(0,_e.A)(uk,[["render",ck]]);var hk=pk;const gk={class:"mt-[-20px]"},mk={class:"flex space-x-2 items-center relative"},yk={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},kk={class:"text-m text-custom-orange font-bold"},fk={class:"ml-2"},bk={class:"add relative inline-block"},xk={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},_k={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},wk={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},vk={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Lk={key:0},Dk={class:"flex-1"},Pk={class:"relative"},Ck={key:1},Sk={key:1,class:"mt-4 p-4 border border-custom-orange rounded-md"},Rk={class:"flex flex-wrap"},Tk={class:"md:w-1/2 lg:w-1/4"},Mk={class:"md:w-1/2 lg:w-1/4"},Ek={class:"md:w-1/2 lg:w-1/4"},Fk={class:"md:w-1/2 lg:w-1/4"},zk={class:"md:w-1/2 lg:w-1/4"},Ak={class:"md:w-1/2 lg:w-1/4"},Ok={class:"md:w-1/2 lg:w-1/4"},Nk={class:"md:w-1/2 lg:w-1/4"},Xk={class:"space-y-4 overflow-y-auto flex-grow mt-4"},Vk={class:"flex flex-wrap gap-4"},Qk={class:"flex-1"},Ik={class:"flex-1"},Uk={class:"flex-1"},$k={class:"flex-1"},Bk={class:"flex flex-wrap gap-4"},Wk={class:"flex-1"},qk={class:"flex-1"},Zk={class:"flex-1"},jk={class:"flex-1"},Jk={class:"flex space-x-4"},Kk={class:"flex-1"},Hk={class:"relative"},Yk={class:"flex-1"},Gk={class:"relative"},ef={key:2},tf={class:"flex-1"},sf={class:"block font-bold text-gray-700"},of={class:"text-gray-600"},af={class:"text-gray-600"},rf={class:"text-gray-600"},lf={key:3},nf={class:"block font-bold text-gray-700"},df={class:"text-gray-600"},cf={class:"text-gray-600"},uf={class:"text-gray-600"},pf={key:4,class:"mt-4 p-4 border border-custom-orange rounded-md"},hf={key:0},gf={key:1},mf={key:2},yf={class:"flex-1"},kf={class:"flex space-x-4"},ff={class:"flex-1"},bf={class:"flex-1"},xf={key:5,class:"flex-1"},_f={class:"block font-bold text-gray-700"},wf={class:"text-gray-600"},vf={class:"flex space-x-4"},Lf={class:"flex-1"},Df={class:"flex-1"},Pf={key:6,class:"flex-1"},Cf={class:"block font-bold text-gray-700"},Sf={class:"text-gray-600"},Rf={class:"flex space-x-4"},Tf={class:"flex-1"},Mf={class:"flex-1"},Ef={key:7,class:"flex-1"},Ff={class:"block font-bold text-gray-700"},zf={class:"text-gray-600"},Af={class:"flex space-x-4"},Of={class:"flex-1"},Nf={class:"flex-1"},Xf={key:8,class:"flex-1"},Vf={class:"block font-bold text-gray-700"},Qf={class:"text-gray-600"},If={key:9,class:"flex-1"},Uf={class:"block font-bold text-gray-700"},$f={class:"text-gray-600"},Bf={class:"text-gray-600"},Wf={key:10,class:"flex-1"},qf={class:"block font-bold text-custom-orange"},Zf={key:0},jf={class:"text-gray-600"},Jf={key:1},Kf={class:"text-gray-600"},Hf={class:"text-gray-600"},Yf={class:"flex space-x-4"},Gf={class:"flex-1"},eb={class:"flex-1"},tb={class:"flex space-x-4"},sb={class:"flex-1"},ob={class:"flex-1"},ab={class:"mb-4"},rb={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},lb={class:"flex space-x-2"},ib={class:"sort relative inline-block",ref:"sortDropdown"},nb={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},db={class:"list-none p-0 m-0"},cb={key:0,class:"material-symbols-outlined text-sm"},ub={key:0,class:"material-symbols-outlined text-sm"},pb={class:"filter relative inline-block",ref:"filterDropdown"},hb={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},gb={class:"p-4 w-[500px] list-none"},mb={class:"grid grid-cols-3 gap-4"},yb=["value"],kb={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},fb={class:"flex space-x-2"},bb={class:"flex w-[250px] relative"},xb={key:0,class:"p-4 flex items-left space-x-6 text-m font-bold"},_b={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},wb={class:"bg-custom-orange text-white"},vb={class:"px-4 py-2 align-top pb-5"},Lb={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},Db={class:"px-4 py-2 align-top pb-5 font-bold"},Pb={class:"px-4 py-2 align-top pb-5"},Cb={class:"px-4 py-2 align-top pb-5"},Sb={class:"px-4 py-2 align-top pb-5"},Rb={key:0,class:"text-red-500 font-bold"},Tb={key:1},Mb={class:"px-4 py-2 align-top pb-5"},Eb={class:"px-4 py-2 align-top font-bold pb-5"},Fb=["onClick"],zb={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},Ab={class:"bg-white rounded-md w-1/3 max-w-lg"},Ob={class:"font-bold"},Nb={class:"p-6 space-y-4"},Xb={class:"text-gray-700"},Vb={key:0},Qb={key:1,class:"mt-4"},Ib={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},Ub=["onClick"],$b={key:0},Bb={class:"list-none p-0 m-0"},Wb=["onClick"],qb=["onClick"],Zb=["onClick"],jb=["onClick"],Jb={key:1},Kb={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},Hb={class:"list-none p-0 m-0"},Yb=["onClick"],Gb=["onClick"],ex=["onClick"],tx=["onClick"],sx={key:2},ox={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},ax={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},rx={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},lx={class:"flex space-x-2"},ix={class:"p-6",ref:"modalContent"},nx={key:0},dx={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},cx={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},ux={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},px={class:"flex space-x-2"},hx={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},gx={key:0,class:"flex items-center space-x-4 pl-3 pr-3"},mx={class:"flex-1"},yx={class:"mr-2"},kx={class:"flex-1"},fx={class:"flex-1"},bx={key:1,class:"flex items-center space-x-4 pl-3 pr-3"},xx={class:"flex-1"},_x={class:"mr-2"},wx={class:"flex-1"},vx={class:"flex-1"},Lx={key:2,class:"flex items-center space-x-4 pl-3 pr-3"},Dx={class:"flex-1"},Px={class:"mr-2"},Cx={class:"flex-1"},Sx={class:"flex-1"},Rx={key:3,class:"flex items-center space-x-4 pl-3 pr-3"},Tx={class:"flex-1"},Mx={class:"mr-2"},Ex={class:"flex-1"},Fx={class:"flex-1"},zx={class:"mr-2 pl-3 pr-3"},Ax={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Ox={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Nx={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Xx={class:"flex space-x-2"},Vx={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Qx={key:1,class:"mt-4 p-4 border border-custom-orange rounded-md"},Ix={class:"flex flex-wrap"},Ux={class:"md:w-1/2 lg:w-1/4"},$x={class:"md:w-1/2 lg:w-1/4"},Bx={class:"md:w-1/2 lg:w-1/4"},Wx={class:"md:w-1/2 lg:w-1/4"},qx={class:"md:w-1/2 lg:w-1/4"},Zx={class:"md:w-1/2 lg:w-1/4"},jx={class:"md:w-1/2 lg:w-1/4"},Jx={class:"md:w-1/2 lg:w-1/4"},Kx={class:"space-y-4 overflow-y-auto flex-grow mt-4"},Hx={class:"flex flex-wrap gap-4"},Yx={class:"flex-1"},Gx={class:"flex-1"},e_={class:"flex-1"},t_={class:"flex-1"},s_={class:"flex flex-wrap gap-4"},o_={class:"flex-1"},a_={class:"flex-1"},r_={class:"flex-1"},l_={class:"flex-1"},i_={class:"flex space-x-4"},n_={class:"flex-1"},d_={class:"relative"},c_={class:"flex-1"},u_={class:"relative"},p_={key:0},h_={class:"flex-1"},g_={class:"block font-bold text-gray-700"},m_={class:"text-gray-600"},y_={class:"text-gray-600"},k_={class:"text-gray-600"},f_={class:"flex space-x-4"},b_={class:"flex-1"},x_={class:"flex-1"},__={key:1,class:"flex-1"},w_={class:"block font-bold text-gray-700"},v_={class:"text-gray-600"},L_={class:"flex space-x-4"},D_={class:"flex-1"},P_={class:"flex-1"},C_={key:2,class:"flex-2"},S_={class:"block font-bold text-gray-700"},R_={class:"text-gray-600"},T_={class:"flex space-x-4"},M_={class:"flex-1"},E_={class:"flex-1"},F_={key:3,class:"flex-1"},z_={class:"block font-bold text-gray-700"},A_={class:"text-gray-600"},O_={class:"flex space-x-4"},N_={class:"flex-1"},X_={class:"flex-1"},V_={key:4,class:"flex-1"},Q_={class:"block font-bold text-gray-700"},I_={class:"text-gray-600"},U_={key:5,class:"flex-1"},$_={class:"block font-bold text-gray-700"},B_={class:"text-gray-600"},W_={class:"text-gray-600"},q_={key:6,class:"flex-1"},Z_={class:"block font-bold text-custom-orange"},j_={class:"text-gray-600"},J_={class:"text-gray-600"},K_={class:"flex space-x-4"},H_={class:"flex-1"},Y_={class:"flex-1"},G_={class:"flex space-x-4"},ew={class:"flex-1"},tw={class:"flex-1"},sw={class:"mb-4"},ow={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},aw={class:"flex space-x-2"},rw={key:3,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},lw={class:"bg-white rounded-lg shadow-md w-1/3"},iw={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},nw={class:"flex justify-end space-x-2 p-4 border-t"},dw={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},cw=["disabled"],uw={class:"flex items-center space-x-1"},pw=["onClick"],hw=["disabled"];function gw(e,t,s,r,i,n){const d=(0,a.g2)("multiselect"),c=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[112]||(t[112]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[111]||(t[111]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[114]||(t[114]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[113]||(t[113]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",gk,[(0,a.Lk)("div",mk,[(0,a.Lk)("div",yk,[t[115]||(t[115]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"contact_page",-1)),t[116]||(t[116]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการบันทึกการขายทั้งหมด: ",-1)),(0,a.Lk)("span",kk,(0,l.v_)(n.filteredSaleRecords1standRenew.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[118]||(t[118]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",fk,[t[117]||(t[117]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",bk,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[119]||(t[119]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",xk,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[121]||(t[121]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[120]||(t[120]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",_k,[(0,a.Lk)("div",wk,[t[122]||(t[122]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มบันทึกการขาย",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",vk,[(0,a.Lk)("div",null,[t[123]||(t[123]=(0,a.Lk)("label",{for:"customer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.customer_id,"onUpdate:modelValue":t[6]||(t[6]=e=>i.saleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[124]||(t[124]=(0,a.Lk)("label",{for:"package_type",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.saleRecord.package_type_id=e),options:i.packageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),i.saleRecord.package_type_id&&"additional sales"===i.saleRecord.package_type_id.name.toLowerCase()||i.saleRecord.package_type_id&&"consignment"===i.saleRecord.package_type_id.name.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",Lk,[(0,a.Lk)("div",null,[t[125]||(t[125]=(0,a.Lk)("label",{for:"additional_type",class:"block font-bold text-gray-700"},"Sales Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.additional_type_id,"onUpdate:modelValue":t[8]||(t[8]=e=>i.saleRecord.additional_type_id=e),options:n.filteredAdditionalTypes,placeholder:"เลือก Sales Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[126]||(t[126]=(0,a.Lk)("label",{for:"add_detail",class:"block text-gray-700 font-bold"},"รายละเอียดการขาย",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"add_detail","onUpdate:modelValue":t[9]||(t[9]=e=>i.saleRecord.add_detail=e),placeholder:"กรอกรายละเอียดการขาย",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.add_detail]])]),(0,a.Lk)("div",Dk,[t[128]||(t[128]=(0,a.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,a.Lk)("div",Pk,[t[127]||(t[127]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.saleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.add_price]])])]),(0,a.Lk)("div",null,[t[129]||(t[129]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดเพิ่มเติมที่ต้องได้รับอนุม้ติจาก Director",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[11]||(t[11]=e=>i.saleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.other_promotion_detail]])])])):(0,a.Q3)("",!0),"additional sales"!==i.saleRecord.package_type_id?.name?.toLowerCase()&&"consignment"!==i.saleRecord.package_type_id?.name?.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",Ck,[(0,a.Lk)("div",null,[t[130]||(t[130]=(0,a.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.promotion_type_id,"onUpdate:modelValue":t[12]||(t[12]=e=>i.saleRecord.promotion_type_id=e),options:i.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[131]||(t[131]=(0,a.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.program_id,"onUpdate:modelValue":t[13]||(t[13]=e=>i.saleRecord.program_id=e),options:n.filteredPrograms,placeholder:"เลือก Program","track-by":"id",label:"name",disabled:!i.saleRecord.promotion_type_id||!i.saleRecord.promotion_type_id.id},null,8,["modelValue","options","disabled"])]),(0,a.Lk)("div",null,[t[149]||(t[149]=(0,a.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_id,"onUpdate:modelValue":t[14]||(t[14]=e=>i.saleRecord.package_id=e),options:i.packages,placeholder:"เลือก Package","track-by":"id",label:"displayLabel",disabled:!i.saleRecord.program_id||!i.saleRecord.program_id.id},null,8,["modelValue","options","disabled"]),i.saleRecord.package_id&&i.saleRecord.package_id.id?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[15]||(t[15]=(0,o.D$)((e=>n.togglePackageDetails(i.saleRecord.package_id)),["prevent"])),class:"mt-2 cursor-pointer text-custom-orange text-left hover:underline"},(0,l.v_)(i.isShowingPackageDetails?"ปิดรายละเอียด":"ดูรายละเอียดแพ็คเกจ"),1)):(0,a.Q3)("",!0),i.packageDetails?((0,a.uX)(),(0,a.CE)("div",Sk,[t[148]||(t[148]=(0,a.Lk)("h3",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,a.Lk)("p",null,[t[132]||(t[132]=(0,a.Lk)("strong",null,"Package:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.name),1)]),(0,a.Lk)("p",null,[t[133]||(t[133]=(0,a.Lk)("strong",null,"ราคา:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(i.packageDetails.price)),1)]),(0,a.Lk)("p",null,[t[134]||(t[134]=(0,a.Lk)("strong",null,"Package Details for Purchase Summary:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_detail),1)]),(0,a.Lk)("p",null,[t[135]||(t[135]=(0,a.Lk)("strong",null,"Package Validity:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_validity)+" วัน ",1)]),(0,a.Lk)("p",null,[t[136]||(t[136]=(0,a.Lk)("strong",null,"Total Days:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_days)+" วัน ",1)]),(0,a.Lk)("p",null,[t[137]||(t[137]=(0,a.Lk)("strong",null,"# of Boxes/Day:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.boxes_per_day)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[138]||(t[138]=(0,a.Lk)("strong",null,"Total Boxes:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_boxes)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[139]||(t[139]=(0,a.Lk)("strong",null,"รายละเอียดโปรโมชัน:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.promotion_detail),1)]),(0,a.Lk)("div",Rk,[(0,a.Lk)("div",Tk,[(0,a.Lk)("p",null,[t[140]||(t[140]=(0,a.Lk)("strong",null,"M or A or D:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_mad),1)])]),(0,a.Lk)("div",Mk,[(0,a.Lk)("p",null,[t[141]||(t[141]=(0,a.Lk)("strong",null,"Dessert:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dessert),1)])]),(0,a.Lk)("div",Ek,[(0,a.Lk)("p",null,[t[142]||(t[142]=(0,a.Lk)("strong",null,"Brittles:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_brittles),1)])]),(0,a.Lk)("div",Fk,[(0,a.Lk)("p",null,[t[143]||(t[143]=(0,a.Lk)("strong",null,"Energy Balls:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_energy_balls),1)])]),(0,a.Lk)("div",zk,[(0,a.Lk)("p",null,[t[144]||(t[144]=(0,a.Lk)("strong",null,"Dressing:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dressing),1)])]),(0,a.Lk)("div",Ak,[(0,a.Lk)("p",null,[t[145]||(t[145]=(0,a.Lk)("strong",null,"Yoghurt:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_yoghurt),1)])]),(0,a.Lk)("div",Ok,[(0,a.Lk)("p",null,[t[146]||(t[146]=(0,a.Lk)("strong",null,"Granola:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_granola),1)])]),(0,a.Lk)("div",Nk,[(0,a.Lk)("p",null,[t[147]||(t[147]=(0,a.Lk)("strong",null,"เครดิตที่แถม (บาท):",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_credit),1)])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[t[150]||(t[150]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดโปรโมชันเพิ่มเติม (นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[16]||(t[16]=e=>i.saleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.other_promotion_detail]])]),(0,a.Lk)("div",Xk,[t[159]||(t[159]=(0,a.Lk)("strong",{class:"text-custom-orange text-lg"},"จำนวนที่แถม",-1)),(0,a.Lk)("div",Vk,[(0,a.Lk)("div",Qk,[t[151]||(t[151]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[17]||(t[17]=e=>i.saleRecord.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_mad]])]),(0,a.Lk)("div",Ik,[t[152]||(t[152]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[18]||(t[18]=e=>i.saleRecord.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_dessert]])]),(0,a.Lk)("div",Uk,[t[153]||(t[153]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[19]||(t[19]=e=>i.saleRecord.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_brittles]])]),(0,a.Lk)("div",$k,[t[154]||(t[154]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[20]||(t[20]=e=>i.saleRecord.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_energy_balls]])])]),(0,a.Lk)("div",Bk,[(0,a.Lk)("div",Wk,[t[155]||(t[155]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[21]||(t[21]=e=>i.saleRecord.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_dressing]])]),(0,a.Lk)("div",qk,[t[156]||(t[156]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[22]||(t[22]=e=>i.saleRecord.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_yoghurt]])]),(0,a.Lk)("div",Zk,[t[157]||(t[157]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[23]||(t[23]=e=>i.saleRecord.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_granola]])]),(0,a.Lk)("div",jk,[t[158]||(t[158]=(0,a.Lk)("label",{for:"freeCredit",class:"block font-bold text-gray-700"},"เครดิตที่แถม (บาท)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeCredit","onUpdate:modelValue":t[24]||(t[24]=e=>i.saleRecord.free_credit=e),type:"number",min:"0",step:"1",placeholder:"กรอกเครดิตที่แถม (บาท)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_credit]])])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Jk,[(0,a.Lk)("div",Kk,[t[161]||(t[161]=(0,a.Lk)("label",{for:"discount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",Hk,[t[160]||(t[160]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>i.saleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.discount]])])]),(0,a.Lk)("div",Yk,[t[163]||(t[163]=(0,a.Lk)("label",{for:"extraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",Gk,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>i.saleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.saleRecord.extra_charge]]),t[162]||(t[162]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),!n.isConsignmentOrAdditional&&n.computedTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",ef,[(0,a.Lk)("div",tf,[(0,a.Lk)("label",sf," มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPackagePrice)),1),(0,a.Lk)("p",of,"ราคาแพ็กเกจ: "+(0,l.v_)(n.formatPrice(i.saleRecord.package_price)),1),(0,a.Lk)("p",af,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.saleRecord.discount)),1),(0,a.Lk)("p",rf,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),n.isConsignmentOrAdditional&&n.computedTotalAdditionalPrice>0?((0,a.uX)(),(0,a.CE)("div",lf,[(0,a.Lk)("label",nf," มูลค่าขาย: "+(0,l.v_)(n.formatPrice(n.computedTotalAdditionalPrice)),1),(0,a.Lk)("p",df,"มูลค่าขาย: "+(0,l.v_)(n.formatPrice(i.saleRecord.add_price)),1),(0,a.Lk)("p",cf,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.saleRecord.discount)),1),(0,a.Lk)("p",uf,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedExtraChargeAdditionalPrice)),1)])):(0,a.Q3)("",!0),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",pf,[t[167]||(t[167]=(0,a.Lk)("h3",{class:"font-bold"},"ที่อยู่ลูกค้า",-1)),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",hf,[(0,a.Lk)("p",null,[t[164]||(t[164]=(0,a.Lk)("strong",null,"ที่อยู่ 1:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_1),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_2?((0,a.uX)(),(0,a.CE)("div",gf,[(0,a.Lk)("p",null,[t[165]||(t[165]=(0,a.Lk)("strong",null,"ที่อยู่ 2:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_2),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_3?((0,a.uX)(),(0,a.CE)("div",mf,[(0,a.Lk)("p",null,[t[166]||(t[166]=(0,a.Lk)("strong",null,"ที่อยู่ 3:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_3),1)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("div",yf,[t[168]||(t[168]=(0,a.Lk)("label",{for:"receiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.receive_food_id,"onUpdate:modelValue":t[27]||(t[27]=e=>i.saleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",kf,[(0,a.Lk)("div",ff,[t[169]||(t[169]=(0,a.Lk)("label",{for:"zone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone1_id,"onUpdate:modelValue":t[28]||(t[28]=e=>i.saleRecord.zone1_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",bf,[t[170]||(t[170]=(0,a.Lk)("label",{for:"zone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[29]||(t[29]=e=>i.saleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone1_quantity]])])]),n.computedZone1Price>0?((0,a.uX)(),(0,a.CE)("div",xf,[(0,a.Lk)("label",_f,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,l.v_)(n.formatPrice(n.computedZone1Price)),1),(0,a.Lk)("p",wf,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",vf,[(0,a.Lk)("div",Lf,[t[171]||(t[171]=(0,a.Lk)("label",{for:"zone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone2_id,"onUpdate:modelValue":t[30]||(t[30]=e=>i.saleRecord.zone2_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Df,[t[172]||(t[172]=(0,a.Lk)("label",{for:"zone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[31]||(t[31]=e=>i.saleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone2_quantity]])])]),n.computedZone2Price>0?((0,a.uX)(),(0,a.CE)("div",Pf,[(0,a.Lk)("label",Cf,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,l.v_)(n.formatPrice(n.computedZone2Price)),1),(0,a.Lk)("p",Sf,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Rf,[(0,a.Lk)("div",Tf,[t[173]||(t[173]=(0,a.Lk)("label",{for:"zone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone3_id,"onUpdate:modelValue":t[32]||(t[32]=e=>i.saleRecord.zone3_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Mf,[t[174]||(t[174]=(0,a.Lk)("label",{for:"zone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>i.saleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone3_quantity]])])]),n.computedZone3Price>0?((0,a.uX)(),(0,a.CE)("div",Ef,[(0,a.Lk)("label",Ff,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,l.v_)(n.formatPrice(n.computedZone3Price)),1),(0,a.Lk)("p",zf,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Af,[(0,a.Lk)("div",Of,[t[175]||(t[175]=(0,a.Lk)("label",{for:"zone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone_outsource_id,"onUpdate:modelValue":t[34]||(t[34]=e=>i.saleRecord.zone_outsource_id=e),options:n.filteredOutsource,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Nf,[t[176]||(t[176]=(0,a.Lk)("label",{for:"zone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[35]||(t[35]=e=>i.saleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone_outsource_quantity]])])]),n.computedZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",Xf,[(0,a.Lk)("label",Vf,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedZoneOutsourcePrice)),1),(0,a.Lk)("p",Qf,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),n.computedTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",If,[(0,a.Lk)("label",Uf,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedTotalDeliveryPrice)),1),(0,a.Lk)("p",$f,"ค่าจัดส่งรวม In-house Riders: "+(0,l.v_)(n.formatPrice(n.computedTotalZonePrice)),1),(0,a.Lk)("p",Bf,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),n.computedTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",Wf,[(0,a.Lk)("label",qf,"มูลค่าขายรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPrice)),1),n.computedTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",Zf,[(0,a.Lk)("p",jf,"มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPackagePrice)),1)])):(0,a.Q3)("",!0),n.computedTotalAdditionalPrice>0?((0,a.uX)(),(0,a.CE)("div",Jf,[(0,a.Lk)("p",Kf,"มูลค่าขาย: "+(0,l.v_)(n.formatPrice(n.computedTotalAdditionalPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("p",Hf,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Yf,[(0,a.Lk)("div",Gf,[t[177]||(t[177]=(0,a.Lk)("label",{for:"sellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.seller_name_id,"onUpdate:modelValue":t[36]||(t[36]=e=>i.saleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",eb,[t[178]||(t[178]=(0,a.Lk)("label",{for:"startDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[37]||(t[37]=e=>i.saleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.start_date]])])]),(0,a.Lk)("div",tb,[(0,a.Lk)("div",sb,[t[179]||(t[179]=(0,a.Lk)("label",{for:"deliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.delivery_round_id,"onUpdate:modelValue":t[38]||(t[38]=e=>i.saleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",ob,[t[180]||(t[180]=(0,a.Lk)("label",{for:"selectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.select_food_id,"onUpdate:modelValue":t[39]||(t[39]=e=>i.saleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",ab,[t[181]||(t[181]=(0,a.Lk)("label",{for:"note",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[40]||(t[40]=e=>i.saleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.note]])])]),(0,a.Lk)("div",rb,[(0,a.Lk)("li",{onClick:t[41]||(t[41]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[182]||(t[182]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",lb,[(0,a.Lk)("button",{onClick:t[42]||(t[42]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[43]||(t[43]=(...e)=>n.addSaleRecord&&n.addSaleRecord(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",ib,[(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[183]||(t[183]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[184]||(t[184]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",nb,[(0,a.Lk)("ul",db,[(0,a.Lk)("li",{onClick:t[45]||(t[45]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[185]||(t[185]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",cb,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[46]||(t[46]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[186]||(t[186]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",ub,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[47]||(t[47]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[187]||(t[187]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",pb,[(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[188]||(t[188]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[189]||(t[189]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",hb,[(0,a.Lk)("div",gb,[t[190]||(t[190]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",mb,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPackageTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[49]||(t[49]=e=>i.selectedPackageType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,yb),[[o.lH,i.selectedPackageType]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",kb,[(0,a.Lk)("li",{onClick:t[50]||(t[50]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[191]||(t[191]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",fb,[(0,a.Lk)("button",{onClick:t[51]||(t[51]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[52]||(t[52]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",bb,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[53]||(t[53]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[54]||(t[54]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[55]||(t[55]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[56]||(t[56]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),"/sale-records-hhb"===e.$route.path||"/sale-records-additional-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",xb,[(0,a.bF)(c,{to:"sale-records-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[192]||(t[192]=[(0,a.eW)(" บันทึกการขาย 1st Timer, Package Renewal ")]))),_:1},8,["class"]),(0,a.bF)(c,{to:"sale-records-additional-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records-additional-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[193]||(t[193]=[(0,a.eW)(" บันทึกการขาย Additional Sales ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),(0,a.Lk)("table",_b,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",wb,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(i.filteredSaleRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",vb,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",Lb,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",Db,(0,l.v_)(n.getPackageTypeName(e.package_type_id)),1),(0,a.Lk)("td",Pb,(0,l.v_)(n.getProgramName(e.program_id)),1),(0,a.Lk)("td",Cb,(0,l.v_)(n.getPackageName(e.package_id)),1),(0,a.Lk)("td",Sb,[e.remaining_days<0?((0,a.uX)(),(0,a.CE)("span",Rb," หมดอายุ ")):((0,a.uX)(),(0,a.CE)("span",Tb,(0,l.v_)(e.remaining_days)+" วัน ",1))]),(0,a.Lk)("td",Mb,(0,l.v_)(n.formatDate(e.expiry_date)),1),(0,a.Lk)("td",Eb,[(0,a.Lk)("button",{onClick:t=>n.openConfirmPaymentModal(e),class:(0,l.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none hover:text-gray-200",n.getPaymentStatusClass(e.payment_status)])},(0,l.v_)(n.getPaymentStatusText(e.payment_status)),11,Fb),i.isConfirmPaymentModalOpen?((0,a.uX)(),(0,a.CE)("div",zb,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[195]||(t[195]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[57]||(t[57]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[194]||(t[194]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Ab,[(0,a.Lk)("div",{class:(0,l.C4)([{"bg-green-500":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500":"paid"===i.selectedSaleRecord.payment_status},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,a.Lk)("span",Ob,(0,l.v_)("paid"===i.selectedSaleRecord.payment_status?"เปลี่ยนสถานะเป็นยังไม่ได้ชำระเงิน":"ยืนยันการชำระเงิน"),1),(0,a.Lk)("button",{onClick:t[58]||(t[58]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"text-white hover:text-gray-200"},t[196]||(t[196]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,a.Lk)("div",Nb,[(0,a.Lk)("p",Xb,(0,l.v_)("paid"===i.selectedSaleRecord.payment_status?'คุณต้องการเปลี่ยนสถานะเป็น "ยังไม่ได้ชำระเงิน" หรือไม่?':"กรุณาเลือกวันที่ชำระเงิน:"),1),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",Vb,[(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[59]||(t[59]=e=>i.selectedPaidDate=e),class:"border border-gray-300 rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPaidDate]])])):(0,a.Q3)("",!0),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",Qb,[t[197]||(t[197]=(0,a.Lk)("label",{for:"payment_types",class:"block text-gray-700"},"เลือกประเภทการชำระเงิน:",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.payment_type_id,"onUpdate:modelValue":t[60]||(t[60]=e=>i.selectedSaleRecord.payment_type_id=e),options:i.paymentTypes,label:"name","track-by":"id",placeholder:"เลือกประเภทการชำระเงิน"},null,8,["modelValue","options"])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ib,[(0,a.Lk)("button",{onClick:t[61]||(t[61]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[62]||(t[62]=(...e)=>n.confirmPayment&&n.confirmPayment(...e)),class:(0,l.C4)([{"bg-green-500 hover:bg-green-600":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500 hover:bg-red-600":"paid"===i.selectedSaleRecord.payment_status},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(s)},t[198]||(t[198]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,Ub),n.filteredSaleRecords1standRenew.length>4?((0,a.uX)(),(0,a.CE)("div",$b,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)([n.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",Bb,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,Wb),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,qb),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,Zb),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,jb)])],2)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",Jb,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",Kb,[(0,a.Lk)("ul",Hb,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,Yb),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,Gb),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,ex),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,tx)])])):(0,a.Q3)("",!0)]))],512)])))),128)):(0,a.Q3)("",!0),n.filteredSaleRecords1standRenew.length<6&&n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredSaleRecords1standRenew.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[199]||(t[199]=[(0,a.Lk)("td",{colspan:"9",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredSaleRecords1standRenew.length?((0,a.uX)(),(0,a.CE)("tr",sx,t[200]||(t[200]=[(0,a.Lk)("td",{colspan:"9",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isResultModalOpen?((0,a.uX)(),(0,a.CE)("div",ox,[(0,a.Lk)("div",ax,[(0,a.Lk)("div",rx,[t[201]||(t[201]=(0,a.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,a.Lk)("div",lx,[(0,a.Lk)("span",{onClick:t[63]||(t[63]=(...e)=>n.copyResultModalContent&&n.copyResultModalContent(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},(0,l.v_)(i.isCopied?"check_circle":"content_copy"),1),(0,a.Lk)("span",{onClick:t[64]||(t[64]=(...e)=>n.closeResultModal&&n.closeResultModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",ix,[t[202]||(t[202]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 ขออนุญาตสรุปยอดนะคะ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredResultSaleRecord,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-2"},[(0,a.Lk)("p",null,["name"===t?((0,a.uX)(),(0,a.CE)("strong",nx,[(0,a.eW)((0,l.v_)(n.formatResultLabel(t))+" ",1),(0,a.Lk)("span",null,(0,l.v_)(e),1)])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Lk)("strong",null,(0,l.v_)(n.formatResultLabel(t)),1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))])])))),128)),t[203]||(t[203]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1)),t[204]||(t[204]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 เมนูปลากะพงและแซลมอน ชำระเพิ่ม 50 บาท/กล่อง | เมนูเป็ด ชำระเพิ่ม 30 บาท/กล่อง ")],-1))],512)])])):(0,a.Q3)("",!0),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",dx,[(0,a.Lk)("div",cx,[(0,a.Lk)("div",ux,[t[205]||(t[205]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,a.Lk)("div",px,[(0,a.Lk)("span",{onClick:t[65]||(t[65]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",hx,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,s,o)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,l.C4)(["p-2 rounded-md",o%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},["zone1_id"===s?((0,a.uX)(),(0,a.CE)("div",gx,[(0,a.Lk)("div",mx,[(0,a.Lk)("strong",yx,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",kx,[t[206]||(t[206]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone1_quantity),1)]),(0,a.Lk)("div",fx,[t[207]||(t[207]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id))),1)])])):"zone2_id"===s?((0,a.uX)(),(0,a.CE)("div",bx,[(0,a.Lk)("div",xx,[(0,a.Lk)("strong",_x,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",wx,[t[208]||(t[208]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone2_quantity),1)]),(0,a.Lk)("div",vx,[t[209]||(t[209]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id))),1)])])):"zone3_id"===s?((0,a.uX)(),(0,a.CE)("div",Lx,[(0,a.Lk)("div",Dx,[(0,a.Lk)("strong",Px,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Cx,[t[210]||(t[210]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone3_quantity),1)]),(0,a.Lk)("div",Sx,[t[211]||(t[211]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id))),1)])])):"zone_outsource_id"===s?((0,a.uX)(),(0,a.CE)("div",Rx,[(0,a.Lk)("div",Tx,[(0,a.Lk)("strong",Mx,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Ex,[t[212]||(t[212]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone_outsource_quantity),1)]),(0,a.Lk)("div",Fx,[t[213]||(t[213]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id))),1)])])):((0,a.uX)(),(0,a.CE)(a.FK,{key:4},[(0,a.Lk)("strong",zx,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))],2)))),128))],512)])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",Ax,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[215]||(t[215]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[66]||(t[66]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[214]||(t[214]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Ox,[(0,a.Lk)("div",Nx,[t[216]||(t[216]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขบันทึกการขาย",-1)),(0,a.Lk)("div",Xx,[(0,a.Lk)("span",{onClick:t[67]||(t[67]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Vx,[(0,a.Lk)("div",null,[t[217]||(t[217]=(0,a.Lk)("label",{for:"editCustomer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.customer_id,"onUpdate:modelValue":t[68]||(t[68]=e=>i.selectedSaleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[218]||(t[218]=(0,a.Lk)("label",{for:"editPackageType",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_type_id,"onUpdate:modelValue":t[69]||(t[69]=e=>i.selectedSaleRecord.package_type_id=e),options:n.filteredPackageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[219]||(t[219]=(0,a.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.promotion_type_id,"onUpdate:modelValue":t[70]||(t[70]=e=>i.selectedSaleRecord.promotion_type_id=e),options:i.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[220]||(t[220]=(0,a.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.program_id,"onUpdate:modelValue":t[71]||(t[71]=e=>i.selectedSaleRecord.program_id=e),options:n.filteredPrograms,placeholder:"เลือก Program","track-by":"id",label:"name",disabled:!i.selectedSaleRecord.promotion_type_id||!i.selectedSaleRecord.promotion_type_id.id},null,8,["modelValue","options","disabled"])]),(0,a.Lk)("div",null,[t[238]||(t[238]=(0,a.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_id,"onUpdate:modelValue":t[72]||(t[72]=e=>i.selectedSaleRecord.package_id=e),options:i.packages,placeholder:"เลือก Package","track-by":"id",label:"displayLabel",disabled:!i.selectedSaleRecord.program_id||!i.selectedSaleRecord.program_id.id},null,8,["modelValue","options","disabled"]),i.selectedSaleRecord.package_id&&i.selectedSaleRecord.package_id.id?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[73]||(t[73]=(0,o.D$)((e=>n.togglePackageDetails(i.selectedSaleRecord.package_id)),["prevent"])),class:"mt-2 cursor-pointer text-custom-orange text-left hover:underline"},(0,l.v_)(i.isShowingPackageDetails?"ปิดรายละเอียด":"ดูรายละเอียดแพ็คเกจ"),1)):(0,a.Q3)("",!0),i.packageDetails?((0,a.uX)(),(0,a.CE)("div",Qx,[t[237]||(t[237]=(0,a.Lk)("h3",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,a.Lk)("p",null,[t[221]||(t[221]=(0,a.Lk)("strong",null,"Package:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.name),1)]),(0,a.Lk)("p",null,[t[222]||(t[222]=(0,a.Lk)("strong",null,"ราคา:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(i.packageDetails.price)),1)]),(0,a.Lk)("p",null,[t[223]||(t[223]=(0,a.Lk)("strong",null,"Package Details for Purchase Summary:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_detail),1)]),(0,a.Lk)("p",null,[t[224]||(t[224]=(0,a.Lk)("strong",null,"Package Validity:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_validity)+" วัน ",1)]),(0,a.Lk)("p",null,[t[225]||(t[225]=(0,a.Lk)("strong",null,"Total Days:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_days)+" วัน ",1)]),(0,a.Lk)("p",null,[t[226]||(t[226]=(0,a.Lk)("strong",null,"# of Boxes/Day:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.boxes_per_day)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[227]||(t[227]=(0,a.Lk)("strong",null,"Total Boxes:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_boxes)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[228]||(t[228]=(0,a.Lk)("strong",null,"รายละเอียดโปรโมชัน:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.promotion_detail),1)]),(0,a.Lk)("div",Ix,[(0,a.Lk)("div",Ux,[(0,a.Lk)("p",null,[t[229]||(t[229]=(0,a.Lk)("strong",null,"M or A or D:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_mad),1)])]),(0,a.Lk)("div",$x,[(0,a.Lk)("p",null,[t[230]||(t[230]=(0,a.Lk)("strong",null,"Dessert:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dessert),1)])]),(0,a.Lk)("div",Bx,[(0,a.Lk)("p",null,[t[231]||(t[231]=(0,a.Lk)("strong",null,"Brittles:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_brittles),1)])]),(0,a.Lk)("div",Wx,[(0,a.Lk)("p",null,[t[232]||(t[232]=(0,a.Lk)("strong",null,"Energy Balls:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_energy_balls),1)])]),(0,a.Lk)("div",qx,[(0,a.Lk)("p",null,[t[233]||(t[233]=(0,a.Lk)("strong",null,"Dressing:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dressing),1)])]),(0,a.Lk)("div",Zx,[(0,a.Lk)("p",null,[t[234]||(t[234]=(0,a.Lk)("strong",null,"Yoghurt:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_yoghurt),1)])]),(0,a.Lk)("div",jx,[(0,a.Lk)("p",null,[t[235]||(t[235]=(0,a.Lk)("strong",null,"Granola:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_granola),1)])]),(0,a.Lk)("div",Jx,[(0,a.Lk)("p",null,[t[236]||(t[236]=(0,a.Lk)("strong",null,"เครดิตที่แถม (บาท):",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_credit),1)])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[t[239]||(t[239]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดโปรโมชันเพิ่มเติม (นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[74]||(t[74]=e=>i.selectedSaleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.other_promotion_detail]])]),(0,a.Lk)("div",Kx,[t[248]||(t[248]=(0,a.Lk)("strong",{class:"text-custom-orange text-lg"},"จำนวนที่แถม",-1)),(0,a.Lk)("div",Hx,[(0,a.Lk)("div",Yx,[t[240]||(t[240]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[75]||(t[75]=e=>i.selectedSaleRecord.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_mad]])]),(0,a.Lk)("div",Gx,[t[241]||(t[241]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[76]||(t[76]=e=>i.selectedSaleRecord.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dessert]])]),(0,a.Lk)("div",e_,[t[242]||(t[242]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[77]||(t[77]=e=>i.selectedSaleRecord.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_brittles]])]),(0,a.Lk)("div",t_,[t[243]||(t[243]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[78]||(t[78]=e=>i.selectedSaleRecord.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_energy_balls]])])]),(0,a.Lk)("div",s_,[(0,a.Lk)("div",o_,[t[244]||(t[244]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[79]||(t[79]=e=>i.selectedSaleRecord.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dressing]])]),(0,a.Lk)("div",a_,[t[245]||(t[245]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[80]||(t[80]=e=>i.selectedSaleRecord.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_yoghurt]])]),(0,a.Lk)("div",r_,[t[246]||(t[246]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[81]||(t[81]=e=>i.selectedSaleRecord.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_granola]])]),(0,a.Lk)("div",l_,[t[247]||(t[247]=(0,a.Lk)("label",{for:"freeCredit",class:"block font-bold text-gray-700"},"เครดิตที่แถม (บาท)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeCredit","onUpdate:modelValue":t[82]||(t[82]=e=>i.selectedSaleRecord.free_credit=e),type:"number",min:"0",step:"1",placeholder:"กรอกเครดิตที่แถม (บาท)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_credit]])])])]),(0,a.Lk)("div",i_,[(0,a.Lk)("div",n_,[t[250]||(t[250]=(0,a.Lk)("label",{for:"editDiscount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",d_,[t[249]||(t[249]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[83]||(t[83]=e=>i.selectedSaleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.discount]])])]),(0,a.Lk)("div",c_,[t[252]||(t[252]=(0,a.Lk)("label",{for:"editExtraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",u_,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[84]||(t[84]=e=>i.selectedSaleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.selectedSaleRecord.extra_charge]]),t[251]||(t[251]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),n.computedEditTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",p_,[(0,a.Lk)("div",h_,[(0,a.Lk)("label",g_," มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPackagePrice)),1),(0,a.Lk)("p",m_,"ราคาแพ็กเกจ: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.package_price)),1),(0,a.Lk)("p",y_,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.discount)),1),(0,a.Lk)("p",k_,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedEditExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[253]||(t[253]=(0,a.Lk)("label",{for:"editReceiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.receive_food_id,"onUpdate:modelValue":t[85]||(t[85]=e=>i.selectedSaleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",f_,[(0,a.Lk)("div",b_,[t[254]||(t[254]=(0,a.Lk)("label",{for:"editZone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone1_id,"onUpdate:modelValue":t[86]||(t[86]=e=>i.selectedSaleRecord.zone1_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",x_,[t[255]||(t[255]=(0,a.Lk)("label",{for:"editZone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[87]||(t[87]=e=>i.selectedSaleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone1_quantity]])])]),n.computedEditZone1Price>0?((0,a.uX)(),(0,a.CE)("div",__,[(0,a.Lk)("label",w_,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,l.v_)(n.formatPrice(n.computedEditZone1Price)),1),(0,a.Lk)("p",v_,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",L_,[(0,a.Lk)("div",D_,[t[256]||(t[256]=(0,a.Lk)("label",{for:"editZone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone2_id,"onUpdate:modelValue":t[88]||(t[88]=e=>i.selectedSaleRecord.zone2_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",P_,[t[257]||(t[257]=(0,a.Lk)("label",{for:"editZone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[89]||(t[89]=e=>i.selectedSaleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone2_quantity]])])]),n.computedEditZone2Price>0?((0,a.uX)(),(0,a.CE)("div",C_,[(0,a.Lk)("label",S_,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,l.v_)(n.formatPrice(n.computedEditZone2Price)),1),(0,a.Lk)("p",R_,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",T_,[(0,a.Lk)("div",M_,[t[258]||(t[258]=(0,a.Lk)("label",{for:"editZone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone3_id,"onUpdate:modelValue":t[90]||(t[90]=e=>i.selectedSaleRecord.zone3_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",E_,[t[259]||(t[259]=(0,a.Lk)("label",{for:"editZone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[91]||(t[91]=e=>i.selectedSaleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone3_quantity]])])]),n.computedEditZone3Price>0?((0,a.uX)(),(0,a.CE)("div",F_,[(0,a.Lk)("label",z_,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,l.v_)(n.formatPrice(n.computedEditZone3Price)),1),(0,a.Lk)("p",A_,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",O_,[(0,a.Lk)("div",N_,[t[260]||(t[260]=(0,a.Lk)("label",{for:"editZone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone_outsource_id,"onUpdate:modelValue":t[92]||(t[92]=e=>i.selectedSaleRecord.zone_outsource_id=e),options:n.filteredOutsource,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",X_,[t[261]||(t[261]=(0,a.Lk)("label",{for:"editZone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[93]||(t[93]=e=>i.selectedSaleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone_outsource_quantity]])])]),n.computedEditZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",V_,[(0,a.Lk)("label",Q_,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedEditZoneOutsourcePrice)),1),(0,a.Lk)("p",I_,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),n.computedEditTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",U_,[(0,a.Lk)("label",$_,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedEditTotalDeliveryPrice)),1),(0,a.Lk)("p",B_,"ค่าจัดส่งรวม In-house Riders: "+(0,l.v_)(n.formatPrice(n.computedEditTotalZonePrice)),1),(0,a.Lk)("p",W_,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedEditZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),n.computedEditTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",q_,[(0,a.Lk)("label",Z_,"มูลค่าขายรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPrice)),1),(0,a.Lk)("div",null,[(0,a.Lk)("p",j_,"มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPackagePrice)),1)]),(0,a.Lk)("p",J_,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedEditTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",K_,[(0,a.Lk)("div",H_,[t[262]||(t[262]=(0,a.Lk)("label",{for:"editSellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.seller_name_id,"onUpdate:modelValue":t[94]||(t[94]=e=>i.selectedSaleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Y_,[t[263]||(t[263]=(0,a.Lk)("label",{for:"editStartDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[95]||(t[95]=e=>i.selectedSaleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.start_date]])])]),(0,a.Lk)("div",G_,[(0,a.Lk)("div",ew,[t[264]||(t[264]=(0,a.Lk)("label",{for:"editDeliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.delivery_round_id,"onUpdate:modelValue":t[96]||(t[96]=e=>i.selectedSaleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",tw,[t[265]||(t[265]=(0,a.Lk)("label",{for:"editSelectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.select_food_id,"onUpdate:modelValue":t[97]||(t[97]=e=>i.selectedSaleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",sw,[t[266]||(t[266]=(0,a.Lk)("label",{for:"editNote",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[98]||(t[98]=e=>i.selectedSaleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.note]])])]),(0,a.Lk)("div",ow,[(0,a.Lk)("div",aw,[(0,a.Lk)("button",{onClick:t[99]||(t[99]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[100]||(t[100]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",rw,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[268]||(t[268]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[101]||(t[101]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[267]||(t[267]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",lw,[(0,a.Lk)("div",iw,[t[269]||(t[269]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[102]||(t[102]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[270]||(t[270]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",nw,[(0,a.Lk)("button",{onClick:t[103]||(t[103]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[104]||(t[104]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",dw,[(0,a.Lk)("button",{onClick:t[105]||(t[105]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[271]||(t[271]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,cw),(0,a.Lk)("div",uw,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[106]||(t[106]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[107]||(t[107]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,pw)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[108]||(t[108]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[109]||(t[109]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[110]||(t[110]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[272]||(t[272]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,hw)])])],64)}var mw={components:{Multiselect:fp.Ay},data(){return{headers:["#","Customer's Name","Package Type","Program","Package","วันคงเหลือของแพ็กเกจ","วันหมดอายุแพ็กเกจ","สถานะการชำระเงิน",""],headerWidths:["5%","15%","10%","12%","13%","15%","13%","12%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],isAddModalOpen:!1,saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:"",total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.filteredSaleRecords1standRenew.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer_id?{name:this.getCustomerName(this.selectedSaleRecord.customer_id),package:this.selectedSaleRecord.package.package_detail,promotion_detail:this.selectedSaleRecord.package.promotion_detail,receive_food:this.totalReceiveFood,start_date:this.formatDate(this.selectedSaleRecord.start_date),sellect_by:this.getSelectFood(this.selectedSaleRecord.select_food_id),delivery:this.getDeliveryRoundName(this.selectedSaleRecord.delivery_round_id),package_price:this.formatPrice(this.selectedSaleRecord.package.price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),note:this.selectedSaleRecord.note}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer_id?{seller_name_id:this.getSellerName(this.selectedSaleRecord.seller_name_id),name:this.getCustomerName(this.selectedSaleRecord.customer_id)||"",package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),promotion_type:this.getPromotionTypeName(this.selectedSaleRecord.promotion_type_id)||"",program:this.getProgramName(this.selectedSaleRecord.program_id),package:this.selectedSaleRecord.package?.name||"",package_price:this.formatPrice(this.selectedSaleRecord.package?.price),promotion_detail:this.selectedSaleRecord.package?.promotion_detail||"",other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||"",free_mad:this.selectedSaleRecord.free_mad,free_dessert:this.selectedSaleRecord.free_dessert,free_brittles:this.selectedSaleRecord.free_brittles,free_energy_balls:this.selectedSaleRecord.free_energy_balls,free_dressing:this.selectedSaleRecord.free_dressing,free_yoghurt:this.selectedSaleRecord.free_yoghurt,free_granola:this.selectedSaleRecord.free_granola,free_credit:this.selectedSaleRecord.free_credit,discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPercent(this.selectedSaleRecord.extra_charge),extra_charge_price:this.formatPrice(this.selectedSaleRecord.extra_charge_price),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),receive_food_id:this.getReceiveFoodName(this.selectedSaleRecord.receive_food_id),zone1_id:this.getZoneName(this.selectedSaleRecord.zone1_id),total_zone1_price:this.formatPrice(this.selectedSaleRecord.total_zone1_price),zone2_id:this.getZoneName(this.selectedSaleRecord.zone2_id),total_zone2_price:this.formatPrice(this.selectedSaleRecord.total_zone2_price),zone3_id:this.getZoneName(this.selectedSaleRecord.zone3_id),total_zone3_price:this.formatPrice(this.selectedSaleRecord.total_zone3_price),zone_outsource_id:this.getZoneName(this.selectedSaleRecord.zone_outsource_id),total_zone_outsource_price:this.formatPrice(this.selectedSaleRecord.total_zone_outsource_price),total_delivery_zone_price:this.formatPrice(this.selectedSaleRecord.total_delivery_zone_price),total_delivery_price:this.formatPrice(this.selectedSaleRecord.total_delivery_price),total_price:this.formatPrice(this.selectedSaleRecord.total_price),payment_status:this.getPaymentStatusText(this.selectedSaleRecord.payment_status),paid_date:this.formatDate(this.selectedSaleRecord.paid_date),payment_type_id:this.getPaymentTypeName(this.selectedSaleRecord.payment_type_id),start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),receive_date:this.formatDate(this.selectedSaleRecord.start_date),note:this.selectedSaleRecord.note||"",package_detail:this.selectedSaleRecord.package?.package_detail||"",mad:this.selectedSaleRecord.mad,dessert:this.selectedSaleRecord.dessert,brittles:this.selectedSaleRecord.brittles,energy_balls:this.selectedSaleRecord.energy_balls,dressing:this.selectedSaleRecord.dressing,yoghurt:this.selectedSaleRecord.yoghurt,granola:this.selectedSaleRecord.granola,credit:this.selectedSaleRecord.credit,delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",select_food_id:this.getSelectFood(this.selectedSaleRecord.select_food_id)}:{name:"",expiry_date:""}},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},totalReceiveFood(){let e=[];this.selectedSaleRecord.mad>0&&e.push(`${this.selectedSaleRecord.mad} x Main Dish`),this.selectedSaleRecord.dessert>0&&e.push(`${this.selectedSaleRecord.dessert} x Dessert`),this.selectedSaleRecord.brittles>0&&e.push(`${this.selectedSaleRecord.brittles} x Brittles`),this.selectedSaleRecord.energy_balls>0&&e.push(`${this.selectedSaleRecord.energy_balls} x Energy Balls`),this.selectedSaleRecord.dressing>0&&e.push(`${this.selectedSaleRecord.dressing} x Dressing`),this.selectedSaleRecord.yoghurt>0&&e.push(`${this.selectedSaleRecord.yoghurt} x Yoghurt`),this.selectedSaleRecord.granola>0&&e.push(`${this.selectedSaleRecord.granola} x Granola`);let t=e.length>0?e.join(" + "):"";return t},totalDeliveryPrice(){let e=[];null!==this.selectedSaleRecord.zone1_id&&this.selectedSaleRecord.zone1_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone1_id)} x ${this.selectedSaleRecord.zone1_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone2_id&&this.selectedSaleRecord.zone2_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone2_id)} x ${this.selectedSaleRecord.zone2_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone3_id&&this.selectedSaleRecord.zone3_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone3_id)} x ${this.selectedSaleRecord.zone3_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone_outsource_id&&this.selectedSaleRecord.zone_outsource_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone_outsource_id)} x ${this.selectedSaleRecord.zone_outsource_quantity} ครั้ง`);let t=e.length>0?`(${e.join(" + ")})`:"";return this.selectedSaleRecord.total_delivery_price>0?`${this.formatPrice(this.selectedSaleRecord.total_delivery_price)} ${t}`:""},filteredSaleRecords1standRenew(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t})).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}))},filteredPackageTypes(){return this.packageTypes.filter((e=>!e.name.toLowerCase().includes("additional sales")&&!e.name.toLowerCase().includes("consignment")))},isConsignmentOrAdditional(){const e=this.saleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedExtraChargePackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalPackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargePackagePrice;return e+s-t},computedExtraChargeAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargeAdditionalPrice;return e+s-t},computedZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));return e&&this.saleRecord.zone1_quantity?e.price*this.saleRecord.zone1_quantity:0},computedZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));return e&&this.saleRecord.zone2_quantity?e.price*this.saleRecord.zone2_quantity:0},computedZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));return e&&this.saleRecord.zone3_quantity?e.price*this.saleRecord.zone3_quantity:0},computedTotalZonePrice(){return this.computedZone1Price+this.computedZone2Price+this.computedZone3Price},computedZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));return e&&this.saleRecord.zone_outsource_quantity?e.price*this.saleRecord.zone_outsource_quantity:0},computedTotalDeliveryPrice(){return this.computedTotalZonePrice+this.computedZoneOutsourcePrice},computedTotalPrice(){return this.computedTotalPackagePrice+this.computedTotalAdditionalPrice+this.computedTotalDeliveryPrice},isEditConsignmentOrAdditional(){const e=this.selectedSaleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedEditExtraChargePackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.extra_charge)||0;return e*t/100},computedEditTotalPackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.discount)||0,s=this.computedEditExtraChargePackagePrice;return e+s-t},computedEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));return e&&this.selectedSaleRecord.zone1_quantity?e.price*this.selectedSaleRecord.zone1_quantity:0},computedEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));return e&&this.selectedSaleRecord.zone2_quantity?e.price*this.selectedSaleRecord.zone2_quantity:0},computedEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));return e&&this.selectedSaleRecord.zone3_quantity?e.price*this.selectedSaleRecord.zone3_quantity:0},computedEditTotalZonePrice(){return this.computedEditZone1Price+this.computedEditZone2Price+this.computedEditZone3Price},computedEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));return e&&this.selectedSaleRecord.zone_outsource_quantity?e.price*this.selectedSaleRecord.zone_outsource_quantity:0},computedEditTotalDeliveryPrice(){return this.computedEditTotalZonePrice+this.computedEditZoneOutsourcePrice},computedEditTotalPrice(){return this.computedEditTotalPackagePrice+this.computedEditTotalDeliveryPrice},filteredAdditionalTypes(){return this.additionalTypes.filter((e=>!e.name.startsWith("AFF")))},filteredPrograms(){return this.programs.filter((e=>e.name.startsWith("Happy")))},filteredInhouse(){return this.zoneDeliveries.filter((e=>e.name.startsWith("AFF")))},filteredOutsource(){return this.zoneDeliveries.filter((e=>!e.name.startsWith("AFF")))},...(0,Ze.L8)(["saleRecords"])},methods:{...(0,Ze.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.filteredSaleRecords1standRenew.slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.filteredSaleRecords1standRenew=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},filterEditPrograms(){this.selectedSaleRecord.promotion_type_id&&this.selectedSaleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.selectedSaleRecord.promotion_type_id.id)):this.programs=this.allPrograms},filterEditPackages(){this.selectedSaleRecord.program_id&&this.selectedSaleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.selectedSaleRecord.program_id.id)):this.packages=this.allPackages},openAddModal(){this.isAddModalOpen=!0},async addSaleRecord(){if(this.saleRecord.customer_id)try{const e=await ke.A.post("http://127.0.0.1:3333/sale-records-hhb",{customer_id:this.saleRecord.customer_id?.id||null,promotion_type_id:this.saleRecord.promotion_type_id?.id||null,program_id:this.saleRecord.program_id?.id||null,package_id:this.saleRecord.package_id?.id||null,package_type_id:this.saleRecord.package_type_id?.id||null,seller_name_id:this.saleRecord.seller_name_id?.id||null,discount:this.saleRecord.discount||0,extra_charge:this.saleRecord.extra_charge||0,payment_status:this.saleRecord.payment_status||"unpaid",paid_date:this.saleRecord.paid_date||null,payment_type_id:this.saleRecord.payment_type_id?.id||null,start_date:this.saleRecord.start_date||null,zone1_id:this.saleRecord.zone1_id?.id||null,zone1_quantity:this.saleRecord.zone1_quantity||0,zone2_id:this.saleRecord.zone2_id?.id||null,zone2_quantity:this.saleRecord.zone2_quantity||0,zone3_id:this.saleRecord.zone3_id?.id||null,zone3_quantity:this.saleRecord.zone3_quantity||0,zone_outsource_id:this.saleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.saleRecord.zone_outsource_quantity||0,additional_type_id:this.saleRecord.additional_type_id?.id||null,add_detail:this.saleRecord.add_detail||null,add_price:this.saleRecord.add_price||0,delivery_round_id:this.saleRecord.delivery_round_id?.id||null,select_food_id:this.saleRecord.select_food_id?.id||null,receive_food_id:this.saleRecord.receive_food_id?.id||null,note:this.saleRecord.note||null,free_mad:this.saleRecord.free_mad||0,free_dessert:this.saleRecord.free_dessert||0,free_brittles:this.saleRecord.free_brittles||0,free_energy_balls:this.saleRecord.free_energy_balls||0,free_dressing:this.saleRecord.free_dressing||0,free_yoghurt:this.saleRecord.free_yoghurt||0,free_granola:this.saleRecord.free_granola||0,free_credit:this.saleRecord.free_credit||0,other_promotion_detail:this.saleRecord.other_promotion_detail||null});this.saleRecords.push(e.data),this.closeAddModal(),this.filterPrograms(),this.filterPackages(),await this.fetchSaleRecords(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){console.error("Error adding sale record:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการเพิ่มข้อมูล!"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},clearForm(){this.saleRecord={customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},this.packageDetails=null,this.isShowingPackageDetails=!1,this.customerAddress=null,this.filterPrograms(),this.filterPackages()},openEditModal(e){const t=e=>{if(!e)return null;const t=new Date(e);return t.toLocaleDateString("en-CA")};this.selectedSaleRecord={...e,start_date:t(e.start_date),customer_id:this.customers.find((t=>t.id===e.customer_id))||null,package_type_id:this.packageTypes.find((t=>t.id===e.package_type_id))||null,promotion_type_id:this.promotionTypes.find((t=>t.id===e.promotion_type_id))||null,program_id:this.programs.find((t=>t.id===e.program_id))||null,package_id:this.packages.find((t=>t.id===e.package_id))||null,receive_food_id:this.receiveFoods.find((t=>t.id===e.receive_food_id))||null,zone1_id:this.zoneDeliveries.find((t=>t.id===e.zone1_id))||null,zone2_id:this.zoneDeliveries.find((t=>t.id===e.zone2_id))||null,zone3_id:this.zoneDeliveries.find((t=>t.id===e.zone3_id))||null,zone_outsource_id:this.zoneDeliveries.find((t=>t.id===e.zone_outsource_id))||null,seller_name_id:this.sellerNames.find((t=>t.id===e.seller_name_id))||null,delivery_round_id:this.deliveryRounds.find((t=>t.id===e.delivery_round_id))||null,select_food_id:this.selectFoods.find((t=>t.id===e.select_food_id))||null,paid_date:t(e.paid_date),payment_type_id:this.paymentTypes.find((t=>t.id===e.payment_type_id))||null},this.moreOpenDropdownIndex=null,this.isEditModalOpen=!0},async saveChanges(){if(this.selectedSaleRecord.customer_id)try{const e=await ke.A.put(`http://127.0.0.1:3333/sale-records-hhb/${this.selectedSaleRecord.id}`,{customer_id:this.selectedSaleRecord.customer_id?.id||null,promotion_type_id:this.selectedSaleRecord.promotion_type_id?.id||null,program_id:this.selectedSaleRecord.program_id?.id||null,package_id:this.selectedSaleRecord.package_id?.id||null,package_type_id:this.selectedSaleRecord.package_type_id?.id||null,seller_name_id:this.selectedSaleRecord.seller_name_id?.id||null,discount:this.selectedSaleRecord.discount||0,extra_charge:this.selectedSaleRecord.extra_charge||0,start_date:this.selectedSaleRecord.start_date||null,zone1_id:this.selectedSaleRecord.zone1_id?.id||null,zone1_quantity:this.selectedSaleRecord.zone1_quantity||0,zone2_id:this.selectedSaleRecord.zone2_id?.id||null,zone2_quantity:this.selectedSaleRecord.zone2_quantity||0,zone3_id:this.selectedSaleRecord.zone3_id?.id||null,zone3_quantity:this.selectedSaleRecord.zone3_quantity||0,zone_outsource_id:this.selectedSaleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.selectedSaleRecord.zone_outsource_quantity||0,additional_type_id:this.selectedSaleRecord.additional_type_id?.id||null,add_detail:this.selectedSaleRecord.add_detail||null,add_price:this.selectedSaleRecord.add_price||0,delivery_round_id:this.selectedSaleRecord.delivery_round_id?.id||null,select_food_id:this.selectedSaleRecord.select_food_id?.id||null,receive_food_id:this.selectedSaleRecord.receive_food_id?.id||null,note:this.selectedSaleRecord.note||null,free_mad:this.selectedSaleRecord.free_mad||0,free_dessert:this.selectedSaleRecord.free_dessert||0,free_brittles:this.selectedSaleRecord.free_brittles||0,free_energy_balls:this.selectedSaleRecord.free_energy_balls||0,free_dressing:this.selectedSaleRecord.free_dressing||0,free_yoghurt:this.selectedSaleRecord.free_yoghurt||0,free_granola:this.selectedSaleRecord.free_granola||0,free_credit:this.selectedSaleRecord.free_credit||0,other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||null}),t=this.saleRecords.findIndex((e=>e.id===this.selectedSaleRecord.id));-1!==t&&(this.saleRecords[t]=e.data),this.filterEditPrograms(),this.filterEditPackages(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.closeEditModal(),await this.fetchSaleRecords()}catch(e){console.error("Error saving changes:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeEditModal(){this.isEditModalOpen=!1,this.packageDetails=null,this.isShowingPackageDetails=!1,this.selectedSaleRecord={}},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n,d,c,u,p]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers-hhb"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/zone-delivery-types"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types"),ke.A.get("http://127.0.0.1:3333/delivery-rounds"),ke.A.get("http://127.0.0.1:3333/receive-foods"),ke.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=r.data,this.zoneDeliveryTypes=l.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ke.A.get("http://127.0.0.1:3333/sale-records-hhb");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0,this.moreOpenDropdownIndex=null},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/sale-records-hhb/${this.itemToDelete}`),this.saleRecords=this.saleRecords.filter((e=>e.id!==this.itemToDelete)),this.showFailToastNotification("ลบข้อมูลสำเร็จ!"),this.closeDeleteModal(),this.updatePage()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={seller_name_id:"ผู้ขาย",name:"ชื่อ-สกุลลูกค้า",package_type:"Package Type",promotion_type:"Promotion Type",program:"Program",package:"แพ็กเกจที่ซื้อ ",package_price:"ราคาแพ็กเกจ",promotion_detail:"รายละเอียดโปรโมชัน",other_promotion_detail:"รายละเอียดโปรโมชันเพิ่มเติม(นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",free_mad:"จำนวนกล่องที่แถม M or A or D",free_dessert:"จำนวนกล่องที่แถม Dessert",free_brittles:"จำนวนกล่องที่แถม Brittles",free_energy_balls:"จำนวนกล่องที่แถม Energy Balls",free_dressing:"จำนวนกล่องที่แถม Dressing",free_yoghurt:"จำนวนกล่องที่แถม Yoghurt",free_granola:"จำนวนกล่องที่แถม Granola",free_credit:"เครดิตที่แถม (บาท)",discount:"ส่วนลดเพิ่มเติมจากโปรฯ ประจำเดือน (ถ้ามี)",extra_charge:"Extra Charge (%)",extra_charge_price:"มูลค่า Extra Charge",total_package_price:"มูลค่าแพ็กเกจรวม",receive_food_id:"วิธีการรับอาหาร",zone1_id:"In-house Riders (ที่อยู่ 1)",total_zone1_price:"ค่าจัดส่งรวม (ที่อยู่ 1)",zone2_id:"In-house Riders (ที่อยู่ 2)",total_zone2_price:"ค่าจัดส่งรวม (ที่อยู่ 2)",zone3_id:"In-house Riders (ที่อยู่ 3)",total_zone3_price:"ค่าจัดส่งรวม (ที่อยู่ 3)",zone_outsource_id:"Outsource Riders",total_zone_outsource_price:"ค่าจัดส่งรวม Outsource",total_delivery_zone_price:"ค่าจัดส่งรวม In-house Riders",total_delivery_price:"รวมค่าจัดส่งทั้งหมด",total_price:"มูลค่าขายรวม",payment_status:"สถานะการชำระเงิน",paid_date:"วันที่ชำระเงิน",payment_type_id:"วิธีการชำระเงิน",receive_date:"วันเริ่มรับอาหารวันแรก",sellect_by:"เลือกอาหารโดย",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",note:"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",package_detail:"ข้อมูลแพ็กเกจ(สำหรับสรุปให้ลูกค้า)",mad:"M or A or D",dessert:"Dessert",brittles:"Brittles",energy_balls:"Energy Balls",dressing:"Dressing",yoghurt:"Yoghurt",granola:"Granola",credit:"Cash Credit ที่ได้รับ",delivery_date:"วันที่ต้องการรับอาหาร",select_food_id:"วิธีการเลือกอาหาร"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},onViewResultSaleRecord(e){this.selectedSaleRecord=e,this.isResultModalOpen=!0,this.moreOpenDropdownIndex=null},closeResultModal(){this.isResultModalOpen=!1},formatResultLabel(e){const t={name:"🏷 คุณ",package:"▶️ แพ็คเกจ",promotion_detail:"🔥",receive_food:"▶️ อาหารที่ได้รับ",start_date:"▶️ วันรับอาหารวันแรก",sellect_by:"▶️ เลือกอาหารโดย",delivery_date:"▶️ วันที่รับอาหาร",delivery:"▶️ จัดส่ง",package_price:"▶️ ราคาแพ็คเกจ",extra_charge:"▶️ Extra Chrage",discount:"▶️ ส่วนลด",total_delivery_price:"▶️ ค่าจัดส่ง",total_price:"▶️ ยอดชำระ",expiry_date:"▶️ วันหมดอายุแพ็คเกจ",note:"▶️ หมายเหตุ:"};return t[e]||e},copyResultModalContent(){let e=this.$refs.modalContent.innerText;if(e=e.replace(/\n\s*\n/g,"\n"),navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)})).catch((e=>{console.error("ไม่สามารถคัดลอกข้อความ:",e)}));else{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)}catch(t){console.error("ไม่สามารถคัดลอกข้อความ:",t)}finally{document.body.removeChild(s)}}},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},calculateTotalPrice(){if(!this.saleRecord.package_id)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.saleRecord.package_id.id));if(!e)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.saleRecord.extra_charge)||0,o=parseFloat(this.saleRecord.discount)||0,a=t*s/100;this.saleRecord.extra_charge_price=a,this.saleRecord.package_price=t,this.saleRecord.total_package_price=t+a-o},calculateZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));e&&this.saleRecord.zone1_quantity&&(this.computedZone1Price=e.price*this.saleRecord.zone1_quantity)},calculateZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));e&&this.saleRecord.zone2_quantity&&(this.computedZone2Price=e.price*this.saleRecord.zone2_quantity)},calculateZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));e&&this.saleRecord.zone3_quantity&&(this.computedZone3Price=e.price*this.saleRecord.zone3_quantity)},calculateZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));e&&this.saleRecord.zone_outsource_quantity&&(this.computedZoneOutsourcePrice=e.price*this.saleRecord.zone_outsource_quantity)},calculateEditTotalPrice(){if(!this.selectedSaleRecord.package_id)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.selectedSaleRecord.package_id?.id));if(!e)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.selectedSaleRecord.extra_charge)||0,o=parseFloat(this.selectedSaleRecord.discount)||0,a=t*s/100;this.selectedSaleRecord.extra_charge_price=a,this.selectedSaleRecord.package_price=t,this.selectedSaleRecord.total_package_price=t+a-o},calculateEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));e&&this.selectedSaleRecord.zone1_quantity&&(this.computedEditZone1Price=e.price*this.selectedSaleRecord.zone1_quantity)},calculateEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));e&&this.selectedSaleRecord.zone2_quantity&&(this.computedEditZone2Price=e.price*this.selectedSaleRecord.zone2_quantity)},calculateEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));e&&this.selectedSaleRecord.zone3_quantity&&(this.computedEditZone3Price=e.price*this.selectedSaleRecord.zone3_quantity)},calculateEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));e&&this.selectedSaleRecord.zone_outsource_quantity&&(this.computedEditZoneOutsourcePrice=e.price*this.selectedSaleRecord.zone_outsource_quantity)},clearNotAdditionalForm(){this.saleRecord.add_detail=null,this.saleRecord.additional_type_id=null,this.saleRecord.add_price=0},clearAdditionalForm(){this.saleRecord.promotion_type_id=null,this.saleRecord.program_id=null,this.saleRecord.package_id=null},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},openConfirmPaymentModal(e){this.selectedSaleRecord=e,this.selectedPaidDate=e.paid_date||"",this.isConfirmPaymentModalOpen=!0,this.moreOpenDropdownIndex=null},closeConfirmPaymentModal(){this.isConfirmPaymentModalOpen=!1,this.selectedPaidDate=""},async confirmPayment(){try{const e="paid"===this.selectedSaleRecord.payment_status?"unpaid":"paid",t="paid"===e?this.selectedPaidDate:null,s="paid"===e?this.selectedSaleRecord.payment_type_id?.id:null;if("paid"===e&&(!this.selectedPaidDate||!s))return void this.showErrorToastNotification("กรุณาเลือกข้อมูลให้ครบ!");const o={payment_status:e,paid_date:t,payment_type_id:s},a=await ke.A.put(`http://127.0.0.1:3333/sale-records-hhb/${this.selectedSaleRecord.id}/payment-status`,o);if(await this.fetchSaleRecords(),200!==a.status)throw new Error("Unexpected response status");{const e=a.data.data,t=this.saleRecords.findIndex((t=>t.id===e.id));-1!==t&&(this.saleRecords[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error updating payment status:",e),console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmPaymentModal()},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.promotion_type_id":function(){this.filterPrograms()},"selectedSaleRecord.promotion_type_id":function(){this.filterEditPrograms()},"saleRecord.program_id":function(){this.filterPackages()},"selectedSaleRecord.program_id":function(){this.filterEditPackages()},"saleRecord.package_id"(){this.calculateTotalPrice()},"saleRecord.discount"(){this.calculateTotalPrice()},"saleRecord.extra_charge"(){this.calculateTotalPrice()},"saleRecord.zone1_id"(){this.calculateZone1Price()},"saleRecord.zone1_quantity"(){this.calculateZone1Price()},"saleRecord.zone2_id"(){this.calculateZone2Price()},"saleRecord.zone2_quantity"(){this.calculateZone2Price()},"saleRecord.zone3_id"(){this.calculateZone3Price()},"saleRecord.zone3_quantity"(){this.calculateZone3Price()},"saleRecord.zone_outsource_id"(){this.calculateZoneOutsourcePrice()},"saleRecord.zone_outsource_quantity"(){this.calculateZoneOutsourcePrice()},"saleRecord.package_type_id":"checkPackageType","selectedSaleRecord.package_id"(){this.calculateEditTotalPrice()},"selectedSaleRecord.discount"(){this.calculateEditTotalPrice()},"selectedSaleRecord.extra_charge"(){this.calculateEditTotalPrice()},"selectedSaleRecord.zone1_id"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone1_quantity"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone2_id"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone2_quantity"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone3_id"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone3_quantity"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone_outsource_id"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.zone_outsource_quantity"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.package_type_id":"checkEditPackageType",searchQuery(){this.updatePage()},currentPage(){this.updatePage()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const yw=(0,_e.A)(mw,[["render",gw]]);var kw=yw;const fw={class:"mt-[-20px]"},bw={class:"flex space-x-2 items-center relative"},xw={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},_w={class:"text-m text-custom-orange font-bold"},ww={class:"ml-2"},vw={class:"add relative inline-block"},Lw={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Dw={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Pw={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Cw={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Sw={key:0},Rw={class:"flex-1"},Tw={class:"relative"},Mw={key:1},Ew={key:1,class:"mt-4 p-4 border border-custom-orange rounded-md"},Fw={class:"flex flex-wrap"},zw={class:"md:w-1/2 lg:w-1/4"},Aw={class:"md:w-1/2 lg:w-1/4"},Ow={class:"md:w-1/2 lg:w-1/4"},Nw={class:"md:w-1/2 lg:w-1/4"},Xw={class:"md:w-1/2 lg:w-1/4"},Vw={class:"md:w-1/2 lg:w-1/4"},Qw={class:"md:w-1/2 lg:w-1/4"},Iw={class:"md:w-1/2 lg:w-1/4"},Uw={class:"space-y-4 overflow-y-auto flex-grow mt-4"},$w={class:"flex flex-wrap gap-4"},Bw={class:"flex-1"},Ww={class:"flex-1"},qw={class:"flex-1"},Zw={class:"flex-1"},jw={class:"flex flex-wrap gap-4"},Jw={class:"flex-1"},Kw={class:"flex-1"},Hw={class:"flex-1"},Yw={class:"flex-1"},Gw={class:"flex space-x-4"},ev={class:"flex-1"},tv={class:"relative"},sv={class:"flex-1"},ov={class:"relative"},av={key:2},rv={class:"flex-1"},lv={class:"block font-bold text-gray-700"},iv={class:"text-gray-600"},nv={class:"text-gray-600"},dv={class:"text-gray-600"},cv={key:3},uv={class:"block font-bold text-gray-700"},pv={class:"text-gray-600"},hv={class:"text-gray-600"},gv={class:"text-gray-600"},mv={key:4,class:"mt-4 p-4 border border-custom-orange rounded-md"},yv={key:0},kv={key:1},fv={key:2},bv={class:"flex-1"},xv={class:"flex space-x-4"},_v={class:"flex-1"},wv={class:"flex-1"},vv={key:5,class:"flex-1"},Lv={class:"block font-bold text-gray-700"},Dv={class:"text-gray-600"},Pv={class:"flex space-x-4"},Cv={class:"flex-1"},Sv={class:"flex-1"},Rv={key:6,class:"flex-1"},Tv={class:"block font-bold text-gray-700"},Mv={class:"text-gray-600"},Ev={class:"flex space-x-4"},Fv={class:"flex-1"},zv={class:"flex-1"},Av={key:7,class:"flex-1"},Ov={class:"block font-bold text-gray-700"},Nv={class:"text-gray-600"},Xv={class:"flex space-x-4"},Vv={class:"flex-1"},Qv={class:"flex-1"},Iv={key:8,class:"flex-1"},Uv={class:"block font-bold text-gray-700"},$v={class:"text-gray-600"},Bv={key:9,class:"flex-1"},Wv={class:"block font-bold text-gray-700"},qv={class:"text-gray-600"},Zv={class:"text-gray-600"},jv={key:10,class:"flex-1"},Jv={class:"block font-bold text-custom-orange"},Kv={key:0},Hv={class:"text-gray-600"},Yv={key:1},Gv={class:"text-gray-600"},eL={class:"text-gray-600"},tL={class:"flex space-x-4"},sL={class:"flex-1"},oL={class:"flex-1"},aL={class:"flex space-x-4"},rL={class:"flex-1"},lL={class:"flex-1"},iL={class:"mb-4"},nL={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},dL={class:"flex space-x-2"},cL={class:"sort relative inline-block",ref:"sortDropdown"},uL={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},pL={class:"list-none p-0 m-0"},hL={key:0,class:"material-symbols-outlined text-sm"},gL={key:0,class:"material-symbols-outlined text-sm"},mL={class:"filter relative inline-block",ref:"filterDropdown"},yL={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},kL={class:"p-4 w-[500px] list-none"},fL={class:"grid grid-cols-2 gap-4"},bL=["value"],xL={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},_L={class:"flex space-x-2"},wL={class:"flex w-[250px] relative"},vL={key:0,class:"p-4 flex items-left space-x-6 text-m font-bold"},LL={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},DL={class:"bg-custom-orange text-white"},PL={class:"px-4 py-2 align-top pb-5"},CL={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},SL={class:"px-4 py-2 align-top pb-5 font-bold"},RL={class:"px-4 py-2 align-top pb-5"},TL={class:"px-4 py-2 align-top pb-5"},ML={class:"px-4 py-2 align-top pb-5"},EL={class:"px-4 py-2 align-top font-bold pb-5"},FL=["onClick"],zL={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},AL={class:"bg-white rounded-md w-1/3 max-w-lg"},OL={class:"font-bold"},NL={class:"p-6 space-y-4"},XL={class:"text-gray-700"},VL={key:0},QL={key:1,class:"mt-4"},IL={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},UL=["onClick"],$L={key:0},BL={class:"list-none p-0 m-0"},WL=["onClick"],qL=["onClick"],ZL=["onClick"],jL=["onClick"],JL={key:1},KL={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},HL={class:"list-none p-0 m-0"},YL=["onClick"],GL=["onClick"],eD=["onClick"],tD=["onClick"],sD={key:2},oD={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},aD={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},rD={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},lD={class:"flex space-x-2"},iD={class:"p-6",ref:"modalContent"},nD={key:0},dD={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},cD={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},uD={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},pD={class:"flex space-x-2"},hD={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},gD={key:0,class:"flex items-center space-x-4 pl-3 pr-3"},mD={class:"flex-1"},yD={class:"mr-2"},kD={class:"flex-1"},fD={class:"flex-1"},bD={key:1,class:"flex items-center space-x-4 pl-3 pr-3"},xD={class:"flex-1"},_D={class:"mr-2"},wD={class:"flex-1"},vD={class:"flex-1"},LD={key:2,class:"flex items-center space-x-4 pl-3 pr-3"},DD={class:"flex-1"},PD={class:"mr-2"},CD={class:"flex-1"},SD={class:"flex-1"},RD={key:3,class:"flex items-center space-x-4 pl-3 pr-3"},TD={class:"flex-1"},MD={class:"mr-2"},ED={class:"flex-1"},FD={class:"flex-1"},zD={class:"mr-2 pl-3 pr-3"},AD={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},OD={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},ND={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},XD={class:"flex space-x-2"},VD={class:"p-6 space-y-4 overflow-y-auto flex-grow"},QD={key:0},ID={class:"flex-1"},UD={class:"relative"},$D={class:"space-y-4 overflow-y-auto flex-grow mt-4"},BD={class:"flex flex-wrap gap-4"},WD={class:"flex-1"},qD={class:"flex-1"},ZD={class:"flex-1"},jD={class:"flex-1"},JD={class:"flex flex-wrap gap-4"},KD={class:"flex-1"},HD={class:"flex-1"},YD={class:"flex-1"},GD={class:"flex space-x-4"},eP={class:"flex-1"},tP={class:"relative"},sP={class:"flex-1"},oP={class:"relative"},aP={key:1},rP={class:"flex-1"},lP={class:"block font-bold text-gray-700"},iP={class:"text-gray-600"},nP={class:"text-gray-600"},dP={class:"text-gray-600"},cP={class:"flex space-x-4"},uP={class:"flex-1"},pP={class:"flex-1"},hP={key:2,class:"flex-1"},gP={class:"block font-bold text-gray-700"},mP={class:"text-gray-600"},yP={class:"flex space-x-4"},kP={class:"flex-1"},fP={class:"flex-1"},bP={key:3,class:"flex-2"},xP={class:"block font-bold text-gray-700"},_P={class:"text-gray-600"},wP={class:"flex space-x-4"},vP={class:"flex-1"},LP={class:"flex-1"},DP={key:4,class:"flex-1"},PP={class:"block font-bold text-gray-700"},CP={class:"text-gray-600"},SP={class:"flex space-x-4"},RP={class:"flex-1"},TP={class:"flex-1"},MP={key:5,class:"flex-1"},EP={class:"block font-bold text-gray-700"},FP={class:"text-gray-600"},zP={key:6,class:"flex-1"},AP={class:"block font-bold text-gray-700"},OP={class:"text-gray-600"},NP={class:"text-gray-600"},XP={key:7,class:"flex-1"},VP={class:"block font-bold text-custom-orange"},QP={class:"text-gray-600"},IP={class:"text-gray-600"},UP={class:"flex space-x-4"},$P={class:"flex-1"},BP={class:"flex-1"},WP={class:"flex space-x-4"},qP={class:"flex-1"},ZP={class:"flex-1"},jP={class:"mb-4"},JP={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},KP={class:"flex space-x-2"},HP={key:3,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},YP={class:"bg-white rounded-lg shadow-md w-1/3"},GP={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},eC={class:"flex justify-end space-x-2 p-4 border-t"},tC={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},sC=["disabled"],oC={class:"flex items-center space-x-1"},aC=["onClick"],rC=["disabled"];function lC(e,t,s,r,i,n){const d=(0,a.g2)("multiselect"),c=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[109]||(t[109]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[108]||(t[108]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[111]||(t[111]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[110]||(t[110]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",fw,[(0,a.Lk)("div",bw,[(0,a.Lk)("div",xw,[t[112]||(t[112]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"contact_page",-1)),t[113]||(t[113]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการบันทึกการขายทั้งหมด: ",-1)),(0,a.Lk)("span",_w,(0,l.v_)(n.additionalSalesRecords.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[115]||(t[115]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",ww,[t[114]||(t[114]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",vw,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[116]||(t[116]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",Lw,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[118]||(t[118]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[117]||(t[117]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Dw,[(0,a.Lk)("div",Pw,[t[119]||(t[119]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มบันทึกการขาย",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",Cw,[(0,a.Lk)("div",null,[t[120]||(t[120]=(0,a.Lk)("label",{for:"customer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.customer_id,"onUpdate:modelValue":t[6]||(t[6]=e=>i.saleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[121]||(t[121]=(0,a.Lk)("label",{for:"package_type",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.saleRecord.package_type_id=e),options:i.packageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),i.saleRecord.package_type_id&&"additional sales"===i.saleRecord.package_type_id.name.toLowerCase()||i.saleRecord.package_type_id&&"consignment"===i.saleRecord.package_type_id.name.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",Sw,[(0,a.Lk)("div",null,[t[122]||(t[122]=(0,a.Lk)("label",{for:"additional_type",class:"block font-bold text-gray-700"},"Sales Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.additional_type_id,"onUpdate:modelValue":t[8]||(t[8]=e=>i.saleRecord.additional_type_id=e),options:n.filteredAdditionalTypes,placeholder:"เลือก Sales Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[123]||(t[123]=(0,a.Lk)("label",{for:"add_detail",class:"block text-gray-700 font-bold"},"รายละเอียดการขาย",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"add_detail","onUpdate:modelValue":t[9]||(t[9]=e=>i.saleRecord.add_detail=e),placeholder:"กรอกรายละเอียดการขาย",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.add_detail]])]),(0,a.Lk)("div",Rw,[t[125]||(t[125]=(0,a.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,a.Lk)("div",Tw,[t[124]||(t[124]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.saleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.add_price]])])]),(0,a.Lk)("div",null,[t[126]||(t[126]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดเพิ่มเติมที่ต้องได้รับอนุม้ติจาก Director",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[11]||(t[11]=e=>i.saleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.other_promotion_detail]])])])):(0,a.Q3)("",!0),"additional sales"!==i.saleRecord.package_type_id?.name?.toLowerCase()&&"consignment"!==i.saleRecord.package_type_id?.name?.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",Mw,[(0,a.Lk)("div",null,[t[127]||(t[127]=(0,a.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.promotion_type_id,"onUpdate:modelValue":t[12]||(t[12]=e=>i.saleRecord.promotion_type_id=e),options:i.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[128]||(t[128]=(0,a.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.program_id,"onUpdate:modelValue":t[13]||(t[13]=e=>i.saleRecord.program_id=e),options:n.filteredPrograms,placeholder:"เลือก Program","track-by":"id",label:"name",disabled:!i.saleRecord.promotion_type_id||!i.saleRecord.promotion_type_id.id},null,8,["modelValue","options","disabled"])]),(0,a.Lk)("div",null,[t[146]||(t[146]=(0,a.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_id,"onUpdate:modelValue":t[14]||(t[14]=e=>i.saleRecord.package_id=e),options:i.packages,placeholder:"เลือก Package","track-by":"id",label:"displayLabel",disabled:!i.saleRecord.program_id||!i.saleRecord.program_id.id},null,8,["modelValue","options","disabled"]),i.saleRecord.package_id&&i.saleRecord.package_id.id?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[15]||(t[15]=(0,o.D$)((e=>n.togglePackageDetails(i.saleRecord.package_id)),["prevent"])),class:"mt-2 cursor-pointer text-custom-orange text-left hover:underline"},(0,l.v_)(i.isShowingPackageDetails?"ปิดรายละเอียด":"ดูรายละเอียดแพ็คเกจ"),1)):(0,a.Q3)("",!0),i.packageDetails?((0,a.uX)(),(0,a.CE)("div",Ew,[t[145]||(t[145]=(0,a.Lk)("h3",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,a.Lk)("p",null,[t[129]||(t[129]=(0,a.Lk)("strong",null,"Package:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.name),1)]),(0,a.Lk)("p",null,[t[130]||(t[130]=(0,a.Lk)("strong",null,"ราคา:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(i.packageDetails.price)),1)]),(0,a.Lk)("p",null,[t[131]||(t[131]=(0,a.Lk)("strong",null,"Package Details for Purchase Summary:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_detail),1)]),(0,a.Lk)("p",null,[t[132]||(t[132]=(0,a.Lk)("strong",null,"Package Validity:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_validity)+" วัน ",1)]),(0,a.Lk)("p",null,[t[133]||(t[133]=(0,a.Lk)("strong",null,"Total Days:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_days)+" วัน ",1)]),(0,a.Lk)("p",null,[t[134]||(t[134]=(0,a.Lk)("strong",null,"# of Boxes/Day:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.boxes_per_day)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[135]||(t[135]=(0,a.Lk)("strong",null,"Total Boxes:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_boxes)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[136]||(t[136]=(0,a.Lk)("strong",null,"รายละเอียดโปรโมชัน:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.promotion_detail),1)]),(0,a.Lk)("div",Fw,[(0,a.Lk)("div",zw,[(0,a.Lk)("p",null,[t[137]||(t[137]=(0,a.Lk)("strong",null,"M or A or D:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_mad),1)])]),(0,a.Lk)("div",Aw,[(0,a.Lk)("p",null,[t[138]||(t[138]=(0,a.Lk)("strong",null,"Dessert:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dessert),1)])]),(0,a.Lk)("div",Ow,[(0,a.Lk)("p",null,[t[139]||(t[139]=(0,a.Lk)("strong",null,"Brittles:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_brittles),1)])]),(0,a.Lk)("div",Nw,[(0,a.Lk)("p",null,[t[140]||(t[140]=(0,a.Lk)("strong",null,"Energy Balls:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_energy_balls),1)])]),(0,a.Lk)("div",Xw,[(0,a.Lk)("p",null,[t[141]||(t[141]=(0,a.Lk)("strong",null,"Dressing:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dressing),1)])]),(0,a.Lk)("div",Vw,[(0,a.Lk)("p",null,[t[142]||(t[142]=(0,a.Lk)("strong",null,"Yoghurt:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_yoghurt),1)])]),(0,a.Lk)("div",Qw,[(0,a.Lk)("p",null,[t[143]||(t[143]=(0,a.Lk)("strong",null,"Granola:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_granola),1)])]),(0,a.Lk)("div",Iw,[(0,a.Lk)("p",null,[t[144]||(t[144]=(0,a.Lk)("strong",null,"เครดิตที่แถม (บาท):",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_credit),1)])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[t[147]||(t[147]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดโปรโมชันเพิ่มเติม (นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[16]||(t[16]=e=>i.saleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.other_promotion_detail]])]),(0,a.Lk)("div",Uw,[t[156]||(t[156]=(0,a.Lk)("strong",{class:"text-custom-orange text-lg"},"จำนวนที่แถม",-1)),(0,a.Lk)("div",$w,[(0,a.Lk)("div",Bw,[t[148]||(t[148]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[17]||(t[17]=e=>i.saleRecord.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_mad]])]),(0,a.Lk)("div",Ww,[t[149]||(t[149]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[18]||(t[18]=e=>i.saleRecord.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_dessert]])]),(0,a.Lk)("div",qw,[t[150]||(t[150]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[19]||(t[19]=e=>i.saleRecord.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_brittles]])]),(0,a.Lk)("div",Zw,[t[151]||(t[151]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[20]||(t[20]=e=>i.saleRecord.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_energy_balls]])])]),(0,a.Lk)("div",jw,[(0,a.Lk)("div",Jw,[t[152]||(t[152]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[21]||(t[21]=e=>i.saleRecord.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_dressing]])]),(0,a.Lk)("div",Kw,[t[153]||(t[153]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[22]||(t[22]=e=>i.saleRecord.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_yoghurt]])]),(0,a.Lk)("div",Hw,[t[154]||(t[154]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[23]||(t[23]=e=>i.saleRecord.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_granola]])]),(0,a.Lk)("div",Yw,[t[155]||(t[155]=(0,a.Lk)("label",{for:"freeCredit",class:"block font-bold text-gray-700"},"เครดิตที่แถม (บาท)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeCredit","onUpdate:modelValue":t[24]||(t[24]=e=>i.saleRecord.free_credit=e),type:"number",min:"0",step:"1",placeholder:"กรอกเครดิตที่แถม (บาท)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.free_credit]])])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Gw,[(0,a.Lk)("div",ev,[t[158]||(t[158]=(0,a.Lk)("label",{for:"discount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",tv,[t[157]||(t[157]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>i.saleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.discount]])])]),(0,a.Lk)("div",sv,[t[160]||(t[160]=(0,a.Lk)("label",{for:"extraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",ov,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>i.saleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.saleRecord.extra_charge]]),t[159]||(t[159]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),!n.isConsignmentOrAdditional&&n.computedTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",av,[(0,a.Lk)("div",rv,[(0,a.Lk)("label",lv," มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPackagePrice)),1),(0,a.Lk)("p",iv,"ราคาแพ็กเกจ: "+(0,l.v_)(n.formatPrice(i.saleRecord.package_price)),1),(0,a.Lk)("p",nv,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.saleRecord.discount)),1),(0,a.Lk)("p",dv,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),n.isConsignmentOrAdditional&&n.computedTotalAdditionalPrice>0?((0,a.uX)(),(0,a.CE)("div",cv,[(0,a.Lk)("label",uv," มูลค่าขาย: "+(0,l.v_)(n.formatPrice(n.computedTotalAdditionalPrice)),1),(0,a.Lk)("p",pv,"มูลค่าขาย: "+(0,l.v_)(n.formatPrice(i.saleRecord.add_price)),1),(0,a.Lk)("p",hv,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.saleRecord.discount)),1),(0,a.Lk)("p",gv,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedExtraChargeAdditionalPrice)),1)])):(0,a.Q3)("",!0),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",mv,[t[164]||(t[164]=(0,a.Lk)("h3",{class:"font-bold"},"ที่อยู่ลูกค้า",-1)),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",yv,[(0,a.Lk)("p",null,[t[161]||(t[161]=(0,a.Lk)("strong",null,"ที่อยู่ 1:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_1),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_2?((0,a.uX)(),(0,a.CE)("div",kv,[(0,a.Lk)("p",null,[t[162]||(t[162]=(0,a.Lk)("strong",null,"ที่อยู่ 2:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_2),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_3?((0,a.uX)(),(0,a.CE)("div",fv,[(0,a.Lk)("p",null,[t[163]||(t[163]=(0,a.Lk)("strong",null,"ที่อยู่ 3:",-1)),(0,a.eW)(" "+(0,l.v_)(i.saleRecord.address_3),1)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("div",bv,[t[165]||(t[165]=(0,a.Lk)("label",{for:"receiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.receive_food_id,"onUpdate:modelValue":t[27]||(t[27]=e=>i.saleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",xv,[(0,a.Lk)("div",_v,[t[166]||(t[166]=(0,a.Lk)("label",{for:"zone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone1_id,"onUpdate:modelValue":t[28]||(t[28]=e=>i.saleRecord.zone1_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",wv,[t[167]||(t[167]=(0,a.Lk)("label",{for:"zone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[29]||(t[29]=e=>i.saleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone1_quantity]])])]),n.computedZone1Price>0?((0,a.uX)(),(0,a.CE)("div",vv,[(0,a.Lk)("label",Lv,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,l.v_)(n.formatPrice(n.computedZone1Price)),1),(0,a.Lk)("p",Dv,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Pv,[(0,a.Lk)("div",Cv,[t[168]||(t[168]=(0,a.Lk)("label",{for:"zone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone2_id,"onUpdate:modelValue":t[30]||(t[30]=e=>i.saleRecord.zone2_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Sv,[t[169]||(t[169]=(0,a.Lk)("label",{for:"zone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[31]||(t[31]=e=>i.saleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone2_quantity]])])]),n.computedZone2Price>0?((0,a.uX)(),(0,a.CE)("div",Rv,[(0,a.Lk)("label",Tv,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,l.v_)(n.formatPrice(n.computedZone2Price)),1),(0,a.Lk)("p",Mv,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Ev,[(0,a.Lk)("div",Fv,[t[170]||(t[170]=(0,a.Lk)("label",{for:"zone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone3_id,"onUpdate:modelValue":t[32]||(t[32]=e=>i.saleRecord.zone3_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",zv,[t[171]||(t[171]=(0,a.Lk)("label",{for:"zone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>i.saleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone3_quantity]])])]),n.computedZone3Price>0?((0,a.uX)(),(0,a.CE)("div",Av,[(0,a.Lk)("label",Ov,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,l.v_)(n.formatPrice(n.computedZone3Price)),1),(0,a.Lk)("p",Nv,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Xv,[(0,a.Lk)("div",Vv,[t[172]||(t[172]=(0,a.Lk)("label",{for:"zone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone_outsource_id,"onUpdate:modelValue":t[34]||(t[34]=e=>i.saleRecord.zone_outsource_id=e),options:n.filteredOutsource,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Qv,[t[173]||(t[173]=(0,a.Lk)("label",{for:"zone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[35]||(t[35]=e=>i.saleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone_outsource_quantity]])])]),n.computedZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",Iv,[(0,a.Lk)("label",Uv,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedZoneOutsourcePrice)),1),(0,a.Lk)("p",$v,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),n.computedTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",Bv,[(0,a.Lk)("label",Wv,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedTotalDeliveryPrice)),1),(0,a.Lk)("p",qv,"ค่าจัดส่งรวม In-house Riders: "+(0,l.v_)(n.formatPrice(n.computedTotalZonePrice)),1),(0,a.Lk)("p",Zv,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),n.computedTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",jv,[(0,a.Lk)("label",Jv,"มูลค่าขายรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPrice)),1),n.computedTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",Kv,[(0,a.Lk)("p",Hv,"มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedTotalPackagePrice)),1)])):(0,a.Q3)("",!0),n.computedTotalAdditionalPrice>0?((0,a.uX)(),(0,a.CE)("div",Yv,[(0,a.Lk)("p",Gv,"มูลค่าขาย: "+(0,l.v_)(n.formatPrice(n.computedTotalAdditionalPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("p",eL,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",tL,[(0,a.Lk)("div",sL,[t[174]||(t[174]=(0,a.Lk)("label",{for:"sellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.seller_name_id,"onUpdate:modelValue":t[36]||(t[36]=e=>i.saleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",oL,[t[175]||(t[175]=(0,a.Lk)("label",{for:"startDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[37]||(t[37]=e=>i.saleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.start_date]])])]),(0,a.Lk)("div",aL,[(0,a.Lk)("div",rL,[t[176]||(t[176]=(0,a.Lk)("label",{for:"deliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.delivery_round_id,"onUpdate:modelValue":t[38]||(t[38]=e=>i.saleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",lL,[t[177]||(t[177]=(0,a.Lk)("label",{for:"selectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.select_food_id,"onUpdate:modelValue":t[39]||(t[39]=e=>i.saleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",iL,[t[178]||(t[178]=(0,a.Lk)("label",{for:"note",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[40]||(t[40]=e=>i.saleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.note]])])]),(0,a.Lk)("div",nL,[(0,a.Lk)("li",{onClick:t[41]||(t[41]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[179]||(t[179]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",dL,[(0,a.Lk)("button",{onClick:t[42]||(t[42]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[43]||(t[43]=(...e)=>n.addSaleRecord&&n.addSaleRecord(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",cL,[(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[180]||(t[180]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[181]||(t[181]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",uL,[(0,a.Lk)("ul",pL,[(0,a.Lk)("li",{onClick:t[45]||(t[45]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[182]||(t[182]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",hL,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[46]||(t[46]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[183]||(t[183]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",gL,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[47]||(t[47]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[184]||(t[184]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",mL,[(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[185]||(t[185]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[186]||(t[186]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",yL,[(0,a.Lk)("div",kL,[t[187]||(t[187]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",fL,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPackageTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[49]||(t[49]=e=>i.selectedPackageType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,bL),[[o.lH,i.selectedPackageType]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",xL,[(0,a.Lk)("li",{onClick:t[50]||(t[50]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[188]||(t[188]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",_L,[(0,a.Lk)("button",{onClick:t[51]||(t[51]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[52]||(t[52]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",wL,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[53]||(t[53]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[54]||(t[54]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[55]||(t[55]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[56]||(t[56]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),"/sale-records-hhb"===e.$route.path||"/sale-records-additional-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",vL,[(0,a.bF)(c,{to:"sale-records-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[189]||(t[189]=[(0,a.eW)(" บันทึกการขาย 1stTimer, PackageRenewal ")]))),_:1},8,["class"]),(0,a.bF)(c,{to:"sale-records-additional-hhb",class:(0,l.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records-additional-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[190]||(t[190]=[(0,a.eW)(" บันทึกการขาย AdditionalSales ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),(0,a.Lk)("table",LL,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",DL,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.additionalSalesRecords.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(n.additionalSalesRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",PL,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",CL,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",SL,(0,l.v_)(n.getPackageTypeName(e.package_type_id)),1),(0,a.Lk)("td",RL,(0,l.v_)(n.getSaleTypeName(e.additional_type_id)),1),(0,a.Lk)("td",TL,(0,l.v_)(e.add_detail),1),(0,a.Lk)("td",ML,(0,l.v_)(n.formatPrice(e.total_price)),1),(0,a.Lk)("td",EL,[(0,a.Lk)("button",{onClick:t=>n.openConfirmPaymentModal(e),class:(0,l.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none hover:text-gray-200",n.getPaymentStatusClass(e.payment_status)])},(0,l.v_)(n.getPaymentStatusText(e.payment_status)),11,FL),i.isConfirmPaymentModalOpen?((0,a.uX)(),(0,a.CE)("div",zL,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[192]||(t[192]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[57]||(t[57]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[191]||(t[191]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",AL,[(0,a.Lk)("div",{class:(0,l.C4)([{"bg-green-500":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500":"paid"===i.selectedSaleRecord.payment_status},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,a.Lk)("span",OL,(0,l.v_)("paid"===i.selectedSaleRecord.payment_status?"เปลี่ยนสถานะเป็นยังไม่ได้ชำระเงิน":"ยืนยันการชำระเงิน"),1),(0,a.Lk)("button",{onClick:t[58]||(t[58]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"text-white hover:text-gray-200"},t[193]||(t[193]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,a.Lk)("div",NL,[(0,a.Lk)("p",XL,(0,l.v_)("paid"===i.selectedSaleRecord.payment_status?'คุณต้องการเปลี่ยนสถานะเป็น "ยังไม่ได้ชำระเงิน" หรือไม่?':"กรุณาเลือกวันที่ชำระเงิน:"),1),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",VL,[(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[59]||(t[59]=e=>i.selectedPaidDate=e),class:"border border-gray-300 rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPaidDate]])])):(0,a.Q3)("",!0),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",QL,[t[194]||(t[194]=(0,a.Lk)("label",{for:"payment_types",class:"block text-gray-700"},"เลือกประเภทการชำระเงิน:",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.payment_type_id,"onUpdate:modelValue":t[60]||(t[60]=e=>i.selectedSaleRecord.payment_type_id=e),options:i.paymentTypes,label:"name","track-by":"id",placeholder:"เลือกประเภทการชำระเงิน"},null,8,["modelValue","options"])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",IL,[(0,a.Lk)("button",{onClick:t[61]||(t[61]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[62]||(t[62]=(...e)=>n.confirmPayment&&n.confirmPayment(...e)),class:(0,l.C4)([{"bg-green-500 hover:bg-green-600":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500 hover:bg-red-600":"paid"===i.selectedSaleRecord.payment_status},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(s)},t[195]||(t[195]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,UL),n.additionalSalesRecords.length>4?((0,a.uX)(),(0,a.CE)("div",$L,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)([n.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",BL,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,WL),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,qL),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,ZL),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,jL)])],2)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",JL,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",KL,[(0,a.Lk)("ul",HL,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,YL),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,GL),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,eD),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,tD)])])):(0,a.Q3)("",!0)]))],512)])))),128)):(0,a.Q3)("",!0),n.additionalSalesRecords.length<6&&n.additionalSalesRecords.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.additionalSalesRecords.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[196]||(t[196]=[(0,a.Lk)("td",{colspan:"8",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.additionalSalesRecords.length?((0,a.uX)(),(0,a.CE)("tr",sD,t[197]||(t[197]=[(0,a.Lk)("td",{colspan:"9",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isResultModalOpen?((0,a.uX)(),(0,a.CE)("div",oD,[(0,a.Lk)("div",aD,[(0,a.Lk)("div",rD,[t[198]||(t[198]=(0,a.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,a.Lk)("div",lD,[(0,a.Lk)("span",{onClick:t[63]||(t[63]=(...e)=>n.copyResultModalContent&&n.copyResultModalContent(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},(0,l.v_)(i.isCopied?"check_circle":"content_copy"),1),(0,a.Lk)("span",{onClick:t[64]||(t[64]=(...e)=>n.closeResultModal&&n.closeResultModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",iD,[t[199]||(t[199]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 ขออนุญาตสรุปยอดนะคะ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredResultSaleRecord,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-2"},[(0,a.Lk)("p",null,["name"===t?((0,a.uX)(),(0,a.CE)("strong",nD,[(0,a.eW)((0,l.v_)(n.formatResultLabel(t)),1),(0,a.Lk)("span",null,(0,l.v_)(e),1)])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Lk)("strong",null,(0,l.v_)(n.formatResultLabel(t)),1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))])])))),128)),t[200]||(t[200]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1))],512)])])):(0,a.Q3)("",!0),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",dD,[(0,a.Lk)("div",cD,[(0,a.Lk)("div",uD,[t[201]||(t[201]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,a.Lk)("div",pD,[(0,a.Lk)("span",{onClick:t[65]||(t[65]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",hD,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,s,o)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,l.C4)(["p-2 rounded-md",o%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},["zone1_id"===s?((0,a.uX)(),(0,a.CE)("div",gD,[(0,a.Lk)("div",mD,[(0,a.Lk)("strong",yD,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",kD,[t[202]||(t[202]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone1_quantity),1)]),(0,a.Lk)("div",fD,[t[203]||(t[203]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id))),1)])])):"zone2_id"===s?((0,a.uX)(),(0,a.CE)("div",bD,[(0,a.Lk)("div",xD,[(0,a.Lk)("strong",_D,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",wD,[t[204]||(t[204]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone2_quantity),1)]),(0,a.Lk)("div",vD,[t[205]||(t[205]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id))),1)])])):"zone3_id"===s?((0,a.uX)(),(0,a.CE)("div",LD,[(0,a.Lk)("div",DD,[(0,a.Lk)("strong",PD,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",CD,[t[206]||(t[206]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone3_quantity),1)]),(0,a.Lk)("div",SD,[t[207]||(t[207]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id))),1)])])):"zone_outsource_id"===s?((0,a.uX)(),(0,a.CE)("div",RD,[(0,a.Lk)("div",TD,[(0,a.Lk)("strong",MD,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",ED,[t[208]||(t[208]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone_outsource_quantity),1)]),(0,a.Lk)("div",FD,[t[209]||(t[209]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id))),1)])])):((0,a.uX)(),(0,a.CE)(a.FK,{key:4},[(0,a.Lk)("strong",zD,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))],2)))),128))],512)])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",AD,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[211]||(t[211]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[66]||(t[66]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[210]||(t[210]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",OD,[(0,a.Lk)("div",ND,[t[212]||(t[212]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขบันทึกการขาย",-1)),(0,a.Lk)("div",XD,[(0,a.Lk)("span",{onClick:t[67]||(t[67]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",VD,[(0,a.Lk)("div",null,[t[213]||(t[213]=(0,a.Lk)("label",{for:"editCustomer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.customer_id,"onUpdate:modelValue":t[68]||(t[68]=e=>i.selectedSaleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[214]||(t[214]=(0,a.Lk)("label",{for:"editPackageType",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_type_id,"onUpdate:modelValue":t[69]||(t[69]=e=>i.selectedSaleRecord.package_type_id=e),options:n.filteredPackageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),i.selectedSaleRecord.package_type_id&&"additional sales"===i.selectedSaleRecord.package_type_id.name.toLowerCase()||i.selectedSaleRecord.package_type_id&&"consignment"===i.selectedSaleRecord.package_type_id.name.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",QD,[(0,a.Lk)("div",null,[t[215]||(t[215]=(0,a.Lk)("label",{for:"additional_type",class:"block font-bold text-gray-700"},"Sales Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.additional_type_id,"onUpdate:modelValue":t[70]||(t[70]=e=>i.selectedSaleRecord.additional_type_id=e),options:n.filteredAdditionalTypes,placeholder:"เลือก Sales Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[216]||(t[216]=(0,a.Lk)("label",{for:"add_detail",class:"block text-gray-700 font-bold"},"รายละเอียดการขาย",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"add_detail","onUpdate:modelValue":t[71]||(t[71]=e=>i.selectedSaleRecord.add_detail=e),placeholder:"กรอกรายละเอียดการขาย",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.add_detail]])]),(0,a.Lk)("div",ID,[t[218]||(t[218]=(0,a.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,a.Lk)("div",UD,[t[217]||(t[217]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[72]||(t[72]=e=>i.selectedSaleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.add_price]])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",$D,[t[226]||(t[226]=(0,a.Lk)("strong",{class:"text-custom-orange text-lg"},"จำนวนที่แถม",-1)),(0,a.Lk)("div",BD,[(0,a.Lk)("div",WD,[t[219]||(t[219]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[73]||(t[73]=e=>i.selectedSaleRecord.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_mad]])]),(0,a.Lk)("div",qD,[t[220]||(t[220]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[74]||(t[74]=e=>i.selectedSaleRecord.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dessert]])]),(0,a.Lk)("div",ZD,[t[221]||(t[221]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[75]||(t[75]=e=>i.selectedSaleRecord.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_brittles]])]),(0,a.Lk)("div",jD,[t[222]||(t[222]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[76]||(t[76]=e=>i.selectedSaleRecord.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_energy_balls]])])]),(0,a.Lk)("div",JD,[(0,a.Lk)("div",KD,[t[223]||(t[223]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[77]||(t[77]=e=>i.selectedSaleRecord.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dressing]])]),(0,a.Lk)("div",HD,[t[224]||(t[224]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[78]||(t[78]=e=>i.selectedSaleRecord.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_yoghurt]])]),(0,a.Lk)("div",YD,[t[225]||(t[225]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[79]||(t[79]=e=>i.selectedSaleRecord.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_granola]])])])]),(0,a.Lk)("div",GD,[(0,a.Lk)("div",eP,[t[228]||(t[228]=(0,a.Lk)("label",{for:"editDiscount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",tP,[t[227]||(t[227]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[80]||(t[80]=e=>i.selectedSaleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.discount]])])]),(0,a.Lk)("div",sP,[t[230]||(t[230]=(0,a.Lk)("label",{for:"editExtraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",oP,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[81]||(t[81]=e=>i.selectedSaleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.selectedSaleRecord.extra_charge]]),t[229]||(t[229]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),n.computedEditTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",aP,[(0,a.Lk)("div",rP,[(0,a.Lk)("label",lP," มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPackagePrice)),1),(0,a.Lk)("p",iP,"ราคาแพ็กเกจ: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.package_price)),1),(0,a.Lk)("p",nP,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.discount)),1),(0,a.Lk)("p",dP,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(n.computedEditExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[231]||(t[231]=(0,a.Lk)("label",{for:"editReceiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.receive_food_id,"onUpdate:modelValue":t[82]||(t[82]=e=>i.selectedSaleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",cP,[(0,a.Lk)("div",uP,[t[232]||(t[232]=(0,a.Lk)("label",{for:"editZone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone1_id,"onUpdate:modelValue":t[83]||(t[83]=e=>i.selectedSaleRecord.zone1_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",pP,[t[233]||(t[233]=(0,a.Lk)("label",{for:"editZone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[84]||(t[84]=e=>i.selectedSaleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone1_quantity]])])]),n.computedEditZone1Price>0?((0,a.uX)(),(0,a.CE)("div",hP,[(0,a.Lk)("label",gP,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,l.v_)(n.formatPrice(n.computedEditZone1Price)),1),(0,a.Lk)("p",mP,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",yP,[(0,a.Lk)("div",kP,[t[234]||(t[234]=(0,a.Lk)("label",{for:"editZone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone2_id,"onUpdate:modelValue":t[85]||(t[85]=e=>i.selectedSaleRecord.zone2_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",fP,[t[235]||(t[235]=(0,a.Lk)("label",{for:"editZone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[86]||(t[86]=e=>i.selectedSaleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone2_quantity]])])]),n.computedEditZone2Price>0?((0,a.uX)(),(0,a.CE)("div",bP,[(0,a.Lk)("label",xP,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,l.v_)(n.formatPrice(n.computedEditZone2Price)),1),(0,a.Lk)("p",_P,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",wP,[(0,a.Lk)("div",vP,[t[236]||(t[236]=(0,a.Lk)("label",{for:"editZone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone3_id,"onUpdate:modelValue":t[87]||(t[87]=e=>i.selectedSaleRecord.zone3_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",LP,[t[237]||(t[237]=(0,a.Lk)("label",{for:"editZone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[88]||(t[88]=e=>i.selectedSaleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone3_quantity]])])]),n.computedEditZone3Price>0?((0,a.uX)(),(0,a.CE)("div",DP,[(0,a.Lk)("label",PP,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,l.v_)(n.formatPrice(n.computedEditZone3Price)),1),(0,a.Lk)("p",CP,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",SP,[(0,a.Lk)("div",RP,[t[238]||(t[238]=(0,a.Lk)("label",{for:"editZone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone_outsource_id,"onUpdate:modelValue":t[89]||(t[89]=e=>i.selectedSaleRecord.zone_outsource_id=e),options:n.filteredOutsource,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",TP,[t[239]||(t[239]=(0,a.Lk)("label",{for:"editZone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[90]||(t[90]=e=>i.selectedSaleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone_outsource_quantity]])])]),n.computedEditZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",MP,[(0,a.Lk)("label",EP,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedEditZoneOutsourcePrice)),1),(0,a.Lk)("p",FP,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),n.computedEditTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",zP,[(0,a.Lk)("label",AP,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedEditTotalDeliveryPrice)),1),(0,a.Lk)("p",OP,"ค่าจัดส่งรวม In-house Riders: "+(0,l.v_)(n.formatPrice(n.computedEditTotalZonePrice)),1),(0,a.Lk)("p",NP,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(n.computedEditZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),n.computedEditTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",XP,[(0,a.Lk)("label",VP,"มูลค่าขายรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPrice)),1),(0,a.Lk)("div",null,[(0,a.Lk)("p",QP,"มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(n.computedEditTotalPackagePrice)),1)]),(0,a.Lk)("p",IP,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(n.computedEditTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",UP,[(0,a.Lk)("div",$P,[t[240]||(t[240]=(0,a.Lk)("label",{for:"editSellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.seller_name_id,"onUpdate:modelValue":t[91]||(t[91]=e=>i.selectedSaleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",BP,[t[241]||(t[241]=(0,a.Lk)("label",{for:"editStartDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[92]||(t[92]=e=>i.selectedSaleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.start_date]])])]),(0,a.Lk)("div",WP,[(0,a.Lk)("div",qP,[t[242]||(t[242]=(0,a.Lk)("label",{for:"editDeliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.delivery_round_id,"onUpdate:modelValue":t[93]||(t[93]=e=>i.selectedSaleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",ZP,[t[243]||(t[243]=(0,a.Lk)("label",{for:"editSelectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.select_food_id,"onUpdate:modelValue":t[94]||(t[94]=e=>i.selectedSaleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",jP,[t[244]||(t[244]=(0,a.Lk)("label",{for:"editNote",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[95]||(t[95]=e=>i.selectedSaleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.note]])])]),(0,a.Lk)("div",JP,[(0,a.Lk)("div",KP,[(0,a.Lk)("button",{onClick:t[96]||(t[96]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[97]||(t[97]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",HP,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[246]||(t[246]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[98]||(t[98]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[245]||(t[245]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",YP,[(0,a.Lk)("div",GP,[t[247]||(t[247]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[99]||(t[99]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[248]||(t[248]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",eC,[(0,a.Lk)("button",{onClick:t[100]||(t[100]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[101]||(t[101]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",tC,[(0,a.Lk)("button",{onClick:t[102]||(t[102]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[249]||(t[249]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,sC),(0,a.Lk)("div",oC,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[103]||(t[103]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[104]||(t[104]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,aC)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[105]||(t[105]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[106]||(t[106]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[107]||(t[107]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[250]||(t[250]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,rC)])])],64)}var iC={components:{Multiselect:fp.Ay},data(){return{headers:["#","Customer's Name","Sales Type","ประเภทรายการ","รายละเอียดการขาย","มูลค่าขายรวม","สถานะการชำระเงิน",""],headerWidths:["5%","15%","15%","15%","25%","10%","15%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],isAddModalOpen:!1,saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:"",total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.additionalSalesRecords.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return{name:this.getCustomerName(this.selectedSaleRecord.customer_id),add_detail:this.selectedSaleRecord.add_detail,sellect_by:this.getSelectFood(this.selectedSaleRecord.select_food_id),delivery:this.getDeliveryRoundName(this.selectedSaleRecord.delivery_round_id),add_price:this.formatPrice(this.selectedSaleRecord.add_price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),note:this.selectedSaleRecord.note}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer_id?{seller_name_id:this.getSellerName(this.selectedSaleRecord.seller_name_id),name:this.getCustomerName(this.selectedSaleRecord.customer_id)||"",additional_type_id:this.getSaleTypeName(this.selectedSaleRecord.additional_type_id),package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),add_detail:this.selectedSaleRecord.add_detail,other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||"",discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPercent(this.selectedSaleRecord.extra_charge),extra_charge_price:this.formatPrice(this.selectedSaleRecord.extra_charge_price),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),receive_food_id:this.getReceiveFoodName(this.selectedSaleRecord.receive_food_id),zone1_id:this.getZoneName(this.selectedSaleRecord.zone1_id),total_zone1_price:this.formatPrice(this.selectedSaleRecord.total_zone1_price),zone2_id:this.getZoneName(this.selectedSaleRecord.zone2_id),total_zone2_price:this.formatPrice(this.selectedSaleRecord.total_zone2_price),zone3_id:this.getZoneName(this.selectedSaleRecord.zone3_id),total_zone3_price:this.formatPrice(this.selectedSaleRecord.total_zone3_price),zone_outsource_id:this.getZoneName(this.selectedSaleRecord.zone_outsource_id),total_zone_outsource_price:this.formatPrice(this.selectedSaleRecord.total_zone_outsource_price),total_delivery_zone_price:this.formatPrice(this.selectedSaleRecord.total_delivery_zone_price),total_delivery_price:this.formatPrice(this.selectedSaleRecord.total_delivery_price),total_price:this.formatPrice(this.selectedSaleRecord.total_price),payment_status:this.getPaymentStatusText(this.selectedSaleRecord.payment_status),paid_date:this.formatDate(this.selectedSaleRecord.paid_date),payment_type_id:this.getPaymentTypeName(this.selectedSaleRecord.payment_type_id),note:this.selectedSaleRecord.note||"",delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",select_food_id:this.getSelectFood(this.selectedSaleRecord.select_food_id)}:{name:"",expiry_date:""}},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},totalReceiveFood(){let e=[];this.selectedSaleRecord.package.free_mad>0&&e.push(`${this.selectedSaleRecord.package.free_mad} x Main Dish`),this.selectedSaleRecord.package.free_dessert>0&&e.push(`${this.selectedSaleRecord.package.free_dessert} x Dessert`),this.selectedSaleRecord.package.free_brittles>0&&e.push(`${this.selectedSaleRecord.package.free_brittles} x Brittles`),this.selectedSaleRecord.package.free_energy_balls>0&&e.push(`${this.selectedSaleRecord.package.free_energy_balls} x Energy Balls`),this.selectedSaleRecord.package.free_dressing>0&&e.push(`${this.selectedSaleRecord.package.free_dressing} x Dressing`),this.selectedSaleRecord.package.free_yoghurt>0&&e.push(`${this.selectedSaleRecord.package.free_yoghurt} x Yoghurt`),this.selectedSaleRecord.package.free_granola>0&&e.push(`${this.selectedSaleRecord.package.free_granola} x Granola`);let t=e.length>0?e.join(" + "):"";return t},totalDeliveryPrice(){let e=[];null!==this.selectedSaleRecord.zone1_id&&this.selectedSaleRecord.zone1_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone1_id)} x ${this.selectedSaleRecord.zone1_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone2_id&&this.selectedSaleRecord.zone2_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone2_id)} x ${this.selectedSaleRecord.zone2_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone3_id&&this.selectedSaleRecord.zone3_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone3_id)} x ${this.selectedSaleRecord.zone3_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone_outsource_id&&this.selectedSaleRecord.zone_outsource_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone_outsource_id)} x ${this.selectedSaleRecord.zone_outsource_quantity} ครั้ง`);let t=e.length>0?`(${e.join(" + ")})`:"";return this.selectedSaleRecord.total_delivery_price>0?`${this.formatPrice(this.selectedSaleRecord.total_delivery_price)} ${t}`:""},additionalSalesRecords(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"===t||"consignment"===t})).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}))},filteredPackageTypes(){return this.packageTypes.filter((e=>e.name.toLowerCase().includes("additional sales")||e.name.toLowerCase().includes("consignment")))},isConsignmentOrAdditional(){const e=this.saleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedExtraChargePackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalPackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargePackagePrice;return e+s-t},computedExtraChargeAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargeAdditionalPrice;return e+s-t},computedZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));return e&&this.saleRecord.zone1_quantity?e.price*this.saleRecord.zone1_quantity:0},computedZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));return e&&this.saleRecord.zone2_quantity?e.price*this.saleRecord.zone2_quantity:0},computedZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));return e&&this.saleRecord.zone3_quantity?e.price*this.saleRecord.zone3_quantity:0},computedTotalZonePrice(){return this.computedZone1Price+this.computedZone2Price+this.computedZone3Price},computedZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));return e&&this.saleRecord.zone_outsource_quantity?e.price*this.saleRecord.zone_outsource_quantity:0},computedTotalDeliveryPrice(){return this.computedTotalZonePrice+this.computedZoneOutsourcePrice},computedTotalPrice(){return this.computedTotalPackagePrice+this.computedTotalAdditionalPrice+this.computedTotalDeliveryPrice},isEditConsignmentOrAdditional(){const e=this.selectedSaleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedEditExtraChargePackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.extra_charge)||0;return e*t/100},computedEditTotalPackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.discount)||0,s=this.computedEditExtraChargePackagePrice;return e+s-t},computedEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));return e&&this.selectedSaleRecord.zone1_quantity?e.price*this.selectedSaleRecord.zone1_quantity:0},computedEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));return e&&this.selectedSaleRecord.zone2_quantity?e.price*this.selectedSaleRecord.zone2_quantity:0},computedEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));return e&&this.selectedSaleRecord.zone3_quantity?e.price*this.selectedSaleRecord.zone3_quantity:0},computedEditTotalZonePrice(){return this.computedEditZone1Price+this.computedEditZone2Price+this.computedEditZone3Price},computedEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));return e&&this.selectedSaleRecord.zone_outsource_quantity?e.price*this.selectedSaleRecord.zone_outsource_quantity:0},computedEditTotalDeliveryPrice(){return this.computedEditTotalZonePrice+this.computedEditZoneOutsourcePrice},computedEditTotalPrice(){return this.computedEditTotalPackagePrice+this.computedEditTotalDeliveryPrice},filteredAdditionalTypes(){return this.additionalTypes.filter((e=>!e.name.startsWith("AFF")))},filteredPrograms(){return this.programs.filter((e=>e.name.startsWith("Happy")))},filteredInhouse(){return this.zoneDeliveries.filter((e=>e.name.startsWith("AFF")))},filteredOutsource(){return this.zoneDeliveries.filter((e=>!e.name.startsWith("AFF")))},...(0,Ze.L8)(["saleRecords"])},methods:{...(0,Ze.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.additionalSalesRecords.slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.additionalSalesRecords=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},openAddModal(){this.isAddModalOpen=!0},async addSaleRecord(){if(this.saleRecord.customer_id)try{const e=await ke.A.post("http://127.0.0.1:3333/sale-records-hhb",{customer_id:this.saleRecord.customer_id?.id||null,promotion_type_id:this.saleRecord.promotion_type_id?.id||null,program_id:this.saleRecord.program_id?.id||null,package_id:this.saleRecord.package_id?.id||null,package_type_id:this.saleRecord.package_type_id?.id||null,seller_name_id:this.saleRecord.seller_name_id?.id||null,discount:this.saleRecord.discount||0,extra_charge:this.saleRecord.extra_charge||0,payment_status:this.saleRecord.payment_status||"unpaid",paid_date:this.saleRecord.paid_date||null,payment_type_id:this.saleRecord.payment_type_id?.id||null,start_date:this.saleRecord.start_date||null,zone1_id:this.saleRecord.zone1_id?.id||null,zone1_quantity:this.saleRecord.zone1_quantity||0,zone2_id:this.saleRecord.zone2_id?.id||null,zone2_quantity:this.saleRecord.zone2_quantity||0,zone3_id:this.saleRecord.zone3_id?.id||null,zone3_quantity:this.saleRecord.zone3_quantity||0,zone_outsource_id:this.saleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.saleRecord.zone_outsource_quantity||0,additional_type_id:this.saleRecord.additional_type_id?.id||null,add_detail:this.saleRecord.add_detail||null,add_price:this.saleRecord.add_price||0,delivery_round_id:this.saleRecord.delivery_round_id?.id||null,select_food_id:this.saleRecord.select_food_id?.id||null,receive_food_id:this.saleRecord.receive_food_id?.id||null,note:this.saleRecord.note||null,free_mad:this.saleRecord.free_mad||0,free_dessert:this.saleRecord.free_dessert||0,free_brittles:this.saleRecord.free_brittles||0,free_energy_balls:this.saleRecord.free_energy_balls||0,free_dressing:this.saleRecord.free_dressing||0,free_yoghurt:this.saleRecord.free_yoghurt||0,free_granola:this.saleRecord.free_granola||0,free_credit:this.saleRecord.free_credit||0,other_promotion_detail:this.saleRecord.other_promotion_detail||null});this.saleRecords.push(e.data),this.closeAddModal(),this.filterPrograms(),this.filterPackages(),await this.fetchSaleRecords(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){console.error("Error adding sale record:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการเพิ่มข้อมูล!"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},clearForm(){this.saleRecord={customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},this.packageDetails=null,this.isShowingPackageDetails=!1,this.customerAddress=null,this.filterPrograms(),this.filterPackages()},openEditModal(e){const t=e=>{if(!e)return null;const t=new Date(e);return t.toLocaleDateString("en-CA")};this.selectedSaleRecord={...e,start_date:t(e.start_date),customer_id:this.customers.find((t=>t.id===e.customer_id))||null,package_type_id:this.packageTypes.find((t=>t.id===e.package_type_id))||null,promotion_type_id:this.promotionTypes.find((t=>t.id===e.promotion_type_id))||null,program_id:this.programs.find((t=>t.id===e.program_id))||null,package_id:this.packages.find((t=>t.id===e.package_id))||null,receive_food_id:this.receiveFoods.find((t=>t.id===e.receive_food_id))||null,zone1_id:this.zoneDeliveries.find((t=>t.id===e.zone1_id))||null,zone2_id:this.zoneDeliveries.find((t=>t.id===e.zone2_id))||null,zone3_id:this.zoneDeliveries.find((t=>t.id===e.zone3_id))||null,zone_outsource_id:this.zoneDeliveries.find((t=>t.id===e.zone_outsource_id))||null,seller_name_id:this.sellerNames.find((t=>t.id===e.seller_name_id))||null,delivery_round_id:this.deliveryRounds.find((t=>t.id===e.delivery_round_id))||null,select_food_id:this.selectFoods.find((t=>t.id===e.select_food_id))||null,paid_date:t(e.paid_date),payment_type_id:this.paymentTypes.find((t=>t.id===e.payment_type_id))||null,additional_type_id:this.additionalTypes.find((t=>t.id===e.additional_type_id))||null},this.moreOpenDropdownIndex=null,this.isEditModalOpen=!0},async saveChanges(){if(this.selectedSaleRecord.customer_id)try{const e=await ke.A.put(`http://127.0.0.1:3333/sale-records-hhb/${this.selectedSaleRecord.id}`,{customer_id:this.selectedSaleRecord.customer_id?.id||null,promotion_type_id:this.selectedSaleRecord.promotion_type_id?.id||null,program_id:this.selectedSaleRecord.program_id?.id||null,package_id:this.selectedSaleRecord.package_id?.id||null,package_type_id:this.selectedSaleRecord.package_type_id?.id||null,seller_name_id:this.selectedSaleRecord.seller_name_id?.id||null,discount:this.selectedSaleRecord.discount||0,extra_charge:this.selectedSaleRecord.extra_charge||0,start_date:this.selectedSaleRecord.start_date||null,zone1_id:this.selectedSaleRecord.zone1_id?.id||null,zone1_quantity:this.selectedSaleRecord.zone1_quantity||0,zone2_id:this.selectedSaleRecord.zone2_id?.id||null,zone2_quantity:this.selectedSaleRecord.zone2_quantity||0,zone3_id:this.selectedSaleRecord.zone3_id?.id||null,zone3_quantity:this.selectedSaleRecord.zone3_quantity||0,zone_outsource_id:this.selectedSaleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.selectedSaleRecord.zone_outsource_quantity||0,additional_type_id:this.selectedSaleRecord.additional_type_id?.id||null,add_detail:this.selectedSaleRecord.add_detail||null,add_price:this.selectedSaleRecord.add_price||0,delivery_round_id:this.selectedSaleRecord.delivery_round_id?.id||null,select_food_id:this.selectedSaleRecord.select_food_id?.id||null,receive_food_id:this.selectedSaleRecord.receive_food_id?.id||null,note:this.selectedSaleRecord.note||null,free_mad:this.selectedSaleRecord.free_mad||0,free_dessert:this.selectedSaleRecord.free_dessert||0,free_brittles:this.selectedSaleRecord.free_brittles||0,free_energy_balls:this.selectedSaleRecord.free_energy_balls||0,free_dressing:this.selectedSaleRecord.free_dressing||0,free_yoghurt:this.selectedSaleRecord.free_yoghurt||0,free_granola:this.selectedSaleRecord.free_granola||0,free_credit:this.selectedSaleRecord.free_credit||0,other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||null}),t=this.saleRecords.findIndex((e=>e.id===this.selectedSaleRecord.id));-1!==t&&(this.saleRecords[t]=e.data),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.closeEditModal(),await this.fetchSaleRecords()}catch(e){console.error("Error saving changes:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeEditModal(){this.isEditModalOpen=!1,this.selectedSaleRecord={}},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n,d,c,u,p]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers-hhb"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/zone-delivery-types"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types"),ke.A.get("http://127.0.0.1:3333/delivery-rounds"),ke.A.get("http://127.0.0.1:3333/receive-foods"),ke.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=r.data,this.zoneDeliveryTypes=l.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ke.A.get("http://127.0.0.1:3333/sale-records-hhb");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:null},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},getSaleTypeName(e){const t=this.additionalTypes.find((t=>t.id===e));return t?t.name:""},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0,this.moreOpenDropdownIndex=null},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/sale-records-hhb/${this.itemToDelete}`),this.saleRecords=this.saleRecords.filter((e=>e.id!==this.itemToDelete)),this.showFailToastNotification("ลบข้อมูลสำเร็จ!"),this.closeDeleteModal(),this.updatePage()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={seller_name_id:"ผู้ขาย",name:"ชื่อ-สกุลลูกค้า",additional_type_id:"ประเภทรายการ",package_type:"Sales Type",add_detail:"รายละเอียดการขาย",other_promotion_detail:"รายละเอียดเพิ่มเติมที่ต้องได้รับอนุม้ติจาก Director",discount:"ส่วนลดเพิ่มเติมจากโปรฯ ประจำเดือน (ถ้ามี)",extra_charge:"Extra Charge (%)",extra_charge_price:"มูลค่า Extra Charge",total_package_price:"มูลค่าขาย",receive_food_id:"วิธีการรับอาหาร",zone1_id:"In-house Riders (ที่อยู่ 1)",total_zone1_price:"ค่าจัดส่งรวม (ที่อยู่ 1)",zone2_id:"In-house Riders (ที่อยู่ 2)",total_zone2_price:"ค่าจัดส่งรวม (ที่อยู่ 2)",zone3_id:"In-house Riders (ที่อยู่ 3)",total_zone3_price:"ค่าจัดส่งรวม (ที่อยู่ 3)",zone_outsource_id:"Outsource Riders",total_zone_outsource_price:"ค่าจัดส่งรวม Outsource",total_delivery_zone_price:"ค่าจัดส่งรวม In-house Riders",total_delivery_price:"รวมค่าจัดส่งทั้งหมด",total_price:"มูลค่าขายรวม",payment_status:"สถานะการชำระเงิน",paid_date:"วันที่ชำระเงิน",payment_type_id:"วิธีการชำระเงิน",sellect_by:"เลือกอาหารโดย",note:"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",delivery_date:"วันที่ต้องการรับอาหาร",select_food_id:"วิธีการเลือกอาหาร"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},onViewResultSaleRecord(e){this.selectedSaleRecord=e,this.isResultModalOpen=!0,this.moreOpenDropdownIndex=null},closeResultModal(){this.isResultModalOpen=!1},formatResultLabel(e){const t={name:"🏷 คุณ",add_detail:"▶️ Additional",sellect_by:"▶️ เลือกอาหารโดย",delivery_date:"▶️ วันที่รับอาหาร",delivery:"▶️ จัดส่ง",add_price:"▶️ ราคา Additional",extra_charge:"▶️ Extra Chrage",discount:"▶️ ส่วนลด",total_delivery_price:"▶️ ค่าจัดส่ง",total_price:"▶️ ยอดชำระ",note:"▶️ หมายเหตุ:"};return t[e]||e},copyResultModalContent(){let e=this.$refs.modalContent.innerText;if(e=e.replace(/\n\s*\n/g,"\n"),navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)})).catch((e=>{console.error("ไม่สามารถคัดลอกข้อความ:",e)}));else{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)}catch(t){console.error("ไม่สามารถคัดลอกข้อความ:",t)}finally{document.body.removeChild(s)}}},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},calculateTotalPrice(){if(!this.saleRecord.package_id)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.saleRecord.package_id.id));if(!e)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.saleRecord.extra_charge)||0,o=parseFloat(this.saleRecord.discount)||0,a=t*s/100;this.saleRecord.extra_charge_price=a,this.saleRecord.package_price=t,this.saleRecord.total_package_price=t+a-o},calculateZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));e&&this.saleRecord.zone1_quantity&&(this.computedZone1Price=e.price*this.saleRecord.zone1_quantity)},calculateZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));e&&this.saleRecord.zone2_quantity&&(this.computedZone2Price=e.price*this.saleRecord.zone2_quantity)},calculateZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));e&&this.saleRecord.zone3_quantity&&(this.computedZone3Price=e.price*this.saleRecord.zone3_quantity)},calculateZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));e&&this.saleRecord.zone_outsource_quantity&&(this.computedZoneOutsourcePrice=e.price*this.saleRecord.zone_outsource_quantity)},calculateEditTotalPrice(){if(!this.selectedSaleRecord.package_id)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.selectedSaleRecord.package_id?.id));if(!e)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.selectedSaleRecord.extra_charge)||0,o=parseFloat(this.selectedSaleRecord.discount)||0,a=t*s/100;this.selectedSaleRecord.extra_charge_price=a,this.selectedSaleRecord.package_price=t,this.selectedSaleRecord.total_package_price=t+a-o},calculateEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));e&&this.selectedSaleRecord.zone1_quantity&&(this.computedEditZone1Price=e.price*this.selectedSaleRecord.zone1_quantity)},calculateEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));e&&this.selectedSaleRecord.zone2_quantity&&(this.computedEditZone2Price=e.price*this.selectedSaleRecord.zone2_quantity)},calculateEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));e&&this.selectedSaleRecord.zone3_quantity&&(this.computedEditZone3Price=e.price*this.selectedSaleRecord.zone3_quantity)},calculateEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));e&&this.selectedSaleRecord.zone_outsource_quantity&&(this.computedEditZoneOutsourcePrice=e.price*this.selectedSaleRecord.zone_outsource_quantity)},clearNotAdditionalForm(){this.saleRecord.add_detail=null,this.saleRecord.additional_type_id=null,this.saleRecord.add_price=0},clearAdditionalForm(){this.saleRecord.promotion_type_id=null,this.saleRecord.program_id=null,this.saleRecord.package_id=null},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},openConfirmPaymentModal(e){this.selectedSaleRecord=e,this.selectedPaidDate=e.paid_date||"",this.isConfirmPaymentModalOpen=!0,this.moreOpenDropdownIndex=null},closeConfirmPaymentModal(){this.isConfirmPaymentModalOpen=!1,this.selectedPaidDate=""},async confirmPayment(){try{const e="paid"===this.selectedSaleRecord.payment_status?"unpaid":"paid",t="paid"===e?this.selectedPaidDate:null,s="paid"===e?this.selectedSaleRecord.payment_type_id?.id:null;if("paid"===e&&(!this.selectedPaidDate||!s))return void this.showErrorToastNotification("กรุณาเลือกข้อมูลให้ครบ!");const o={payment_status:e,paid_date:t,payment_type_id:s},a=await ke.A.put(`http://127.0.0.1:3333/sale-records-hhb/${this.selectedSaleRecord.id}/payment-status`,o);if(await this.fetchSaleRecords(),200!==a.status)throw new Error("Unexpected response status");{const e=a.data.data,t=this.saleRecords.findIndex((t=>t.id===e.id));-1!==t&&(this.saleRecords[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error updating payment status:",e),console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmPaymentModal()},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.promotion_type_id":function(){this.filterPrograms()},"saleRecord.program_id":function(){this.filterPackages()},"saleRecord.package_id"(){this.calculateTotalPrice()},"saleRecord.discount"(){this.calculateTotalPrice()},"saleRecord.extra_charge"(){this.calculateTotalPrice()},"saleRecord.zone1_id"(){this.calculateZone1Price()},"saleRecord.zone1_quantity"(){this.calculateZone1Price()},"saleRecord.zone2_id"(){this.calculateZone2Price()},"saleRecord.zone2_quantity"(){this.calculateZone2Price()},"saleRecord.zone3_id"(){this.calculateZone3Price()},"saleRecord.zone3_quantity"(){this.calculateZone3Price()},"saleRecord.zone_outsource_id"(){this.calculateZoneOutsourcePrice()},"saleRecord.zone_outsource_quantity"(){this.calculateZoneOutsourcePrice()},"saleRecord.package_type_id":"checkPackageType","selectedSaleRecord.package_id"(){this.calculateEditTotalPrice()},"selectedSaleRecord.discount"(){this.calculateEditTotalPrice()},"selectedSaleRecord.extra_charge"(){this.calculateEditTotalPrice()},"selectedSaleRecord.zone1_id"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone1_quantity"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone2_id"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone2_quantity"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone3_id"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone3_quantity"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone_outsource_id"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.zone_outsource_quantity"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.package_type_id":"checkEditPackageType",searchQuery(){this.updatePage()},currentPage(){this.updatePage()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const nC=(0,_e.A)(iC,[["render",lC]]);var dC=nC;const cC={class:"mt-[-20px]"},uC={class:"flex items-center space-x-3 py-2"},pC={class:"flex space-x-5"},hC={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},gC={class:"text-center"},mC={class:"text-3xl font-bold text-custom-orange"},yC={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},kC={class:"text-center"},fC={class:"text-3xl font-bold text-custom-orange"},bC={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},xC={class:"text-center"},_C={class:"text-3xl font-bold text-custom-orange"},wC={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},vC={class:"text-center"},LC={class:"text-3xl font-bold text-custom-orange"},DC={class:"flex justify-end items-center space-x-2 relative"},PC={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},CC={class:"text-m text-custom-orange font-bold"},SC={class:"flex space-x-4"},RC={class:"w-full min-w-1/2 table-auto rounded-2xl overflow-hidden mt-4"},TC={key:0},MC={key:0,class:"px-4 py-2 align-top font-bold"},EC={key:1,class:"px-4 py-2 align-top"},FC={class:"px-4 py-2 align-top pb-5"},zC={class:"px-4 py-2 align-top"},AC={class:"px-4 py-2 align-top"},OC={class:"bg-purple-100",style:{height:"50px"}},NC={colspan:"4",class:"px-4 py-2 text-right"},XC={class:"w-full min-w-1/2 table-auto rounded-2xl overflow-hidden mt-4"},VC={class:"px-4 py-2 align-top font-bold pb-5"},QC={class:"px-4 py-2 align-top"},IC={class:"px-4 py-2 align-top"},UC={key:0},$C={class:"min-w-full table-auto rounded-2xl overflow-hidden mt-4"},BC={key:0},WC={key:0,class:"px-4 py-2 align-top font-bold pb-5"},qC={key:1,class:"px-4 py-2 align-top"},ZC={class:"px-4 py-2 align-top pb-5"},jC={class:"px-4 py-2 align-top"},JC={class:"px-4 py-2 align-top"},KC={key:0,class:"bg-pink-100"},HC={colspan:"4",class:"px-4 py-2 text-right"},YC={class:"min-w-full table-auto rounded-2xl overflow-hidden mt-4"},GC={class:"bg-custom-orange text-white"},eS=["onClick"],tS={key:0,class:"ml-2 items-center"},sS={class:"material-symbols-outlined text-sm"},oS={class:"px-4 py-2 align-top pb-5"},aS={class:"px-4 py-2 align-top font-bold text-custom-orange"},rS={class:"px-4 py-2 align-top"},lS={class:"px-4 py-2 align-top"},iS={class:"px-4 py-2 align-top"},nS={class:"px-4 py-2 align-top"},dS={class:"px-4 py-2 align-top"},cS={class:"px-4 py-2 align-top"},uS={class:"px-4 py-2 align-top"},pS={class:"px-4 py-2 align-top text-right list-none"},hS=["onClick"],gS={key:0},mS={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},yS={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},kS={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},fS={class:"flex space-x-2"},bS={class:"pb-2 pt-2"},xS={class:"pl-3 pr-3"},_S={class:"mr-2"};function wS(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",cC,[(0,a.Lk)("div",uC,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>n.changeDate(-1)),class:"flex items-center"},t[8]||(t[8]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[9]||(t[9]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>n.changeDate(1)),class:"flex items-center"},t[10]||(t[10]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[11]||(t[11]=(0,a.Lk)("strong",{class:"text-gray-700"},"Start Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"startDatepicker",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.formattedStartDate=e),onInput:t[4]||(t[4]=(...e)=>n.onStartDateChange&&n.onStartDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่เริ่มต้น"},null,544),[[o.Jo,n.formattedStartDate]]),t[12]||(t[12]=(0,a.Lk)("strong",{class:"text-gray-700"},"End Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"endDatepicker",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.formattedEndDate=e),onInput:t[6]||(t[6]=(...e)=>n.onEndDateChange&&n.onEndDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่สิ้นสุด"},null,544),[[o.Jo,n.formattedEndDate]])]),(0,a.Lk)("div",pC,[(0,a.Lk)("div",hC,[t[14]||(t[14]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",gC,[(0,a.Lk)("p",mC,(0,l.v_)(n.formatPrice(i.totalSales)),1),t[13]||(t[13]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายทั้งหมด",-1))])]),(0,a.Lk)("div",yC,[t[16]||(t[16]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",kC,[(0,a.Lk)("p",fC,(0,l.v_)(n.formatPrice(i.totalSalesBeforeVAT)),1),t[15]||(t[15]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายทั้งหมดก่อน VAT",-1))])]),(0,a.Lk)("div",bC,[t[18]||(t[18]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," package_2 ")],-1)),(0,a.Lk)("div",xC,[(0,a.Lk)("p",_C,(0,l.v_)(n.formatPrice(i.totalPackageBeforeVAT)),1),t[17]||(t[17]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายสินค้าก่อน VAT",-1))])]),(0,a.Lk)("div",wC,[t[20]||(t[20]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," local_shipping ")],-1)),(0,a.Lk)("div",vC,[(0,a.Lk)("p",LC,(0,l.v_)(n.formatPrice(i.totalDeliveryBeforeVAT)),1),t[19]||(t[19]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายค่าส่งก่อน VAT",-1))])])]),(0,a.Lk)("div",DC,[(0,a.Lk)("div",PC,[t[21]||(t[21]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"calendar_month",-1)),t[22]||(t[22]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการยอดขายประจำวันทั้งหมด: ",-1)),(0,a.Lk)("span",CC,(0,l.v_)(i.dailySales.length)+" รายการ",1)])]),(0,a.Lk)("div",SC,[(0,a.Lk)("table",RC,[t[27]||(t[27]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-purple-500 text-white"},[(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ผู้ขาย"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"Package Type"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,a.Lk)("tbody",null,[0===n.filteredSalesBySellerAddit.length?((0,a.uX)(),(0,a.CE)("tr",TC,t[23]||(t[23]=[(0,a.Lk)("td",{colspan:"4",class:"bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขาย ",-1)]))):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredSalesBySellerAddit,((e,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.sales,((t,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[0===s?((0,a.uX)(),(0,a.CE)("td",MC,(0,l.v_)(n.getSellerName(e.sellerId)),1)):((0,a.uX)(),(0,a.CE)("td",EC)),(0,a.Lk)("td",FC,(0,l.v_)(n.getPackageTypeName(t.package_type_id)),1),(0,a.Lk)("td",zC,(0,l.v_)(n.formatPrice(t.total_sales)),1),(0,a.Lk)("td",AC,(0,l.v_)(n.formatPrice(t.pre_vat)),1)])))),128)),(0,a.Lk)("tr",OC,[(0,a.Lk)("td",NC,[t[24]||(t[24]=(0,a.Lk)("span",{class:"font-bold mr-2"},"ยอดขายรวมทั้งหมด:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(e.totalSales))+" ",1),t[25]||(t[25]=(0,a.Lk)("span",{class:"ml-4"},"|",-1)),t[26]||(t[26]=(0,a.Lk)("span",{class:"font-bold ml-4 mr-2"},"ยอดขายรวมทั้งหมดก่อน VAT:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(e.totalPreVat)),1)])])],64)))),128))])]),(0,a.Lk)("table",XC,[t[29]||(t[29]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-green-500 text-white"},[(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"วิธีการชำระเงิน"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.salesByPaymentType,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",VC,(0,l.v_)(n.getPaymentTypeName(e.payment_type_id)),1),(0,a.Lk)("td",QC,(0,l.v_)(n.formatPrice(e.total_sales)),1),(0,a.Lk)("td",IC,(0,l.v_)(n.formatPrice(e.pre_vat)),1)])))),128)),0===i.salesByPaymentType.length?((0,a.uX)(),(0,a.CE)("tr",UC,t[28]||(t[28]=[(0,a.Lk)("td",{colspan:"3",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขายตามประเภทการชำระเงิน ",-1)]))):(0,a.Q3)("",!0)])])]),(0,a.Lk)("table",$C,[t[33]||(t[33]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-pink-500 text-white"},[(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ผู้ขาย"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"Package Type"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,a.Lk)("tbody",null,[0===n.filteredSalesBySeller.length?((0,a.uX)(),(0,a.CE)("tr",BC,t[30]||(t[30]=[(0,a.Lk)("td",{colspan:"4",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขาย ",-1)]))):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredSalesBySeller,((e,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.sales,((t,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"border-b border-b-gray-200 bg-white relative"},[0===s?((0,a.uX)(),(0,a.CE)("td",WC,(0,l.v_)(n.getSellerName(e.sellerId)),1)):((0,a.uX)(),(0,a.CE)("td",qC)),(0,a.Lk)("td",ZC,(0,l.v_)(n.getPackageTypeName(t.package_type_id)),1),(0,a.Lk)("td",jC,(0,l.v_)(n.formatPrice(t.total_sales)),1),(0,a.Lk)("td",JC,(0,l.v_)(n.formatPrice(t.pre_vat)),1)])))),128)),e.sales.length>0?((0,a.uX)(),(0,a.CE)("tr",KC,[(0,a.Lk)("td",HC,[t[31]||(t[31]=(0,a.Lk)("span",{class:"font-bold mr-2"},"ยอดขายรวมทั้งหมด:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(e.totalSales))+" ",1),t[32]||(t[32]=(0,a.Lk)("span",{class:"font-bold ml-14 mr-2"},"ยอดขายรวมทั้งหมดก่อน VAT:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(e.totalPreVat)),1)])])):(0,a.Q3)("",!0)],64)))),128))])]),(0,a.Lk)("table",YC,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",GC,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)([["px-4 py-2 text-left font-bold"],"items-center hover:text-gray-200"]),style:(0,l.Tr)({width:i.headerWidths[t],cursor:"pointer"}),onClick:t=>n.sortColumn(e)},[(0,a.Lk)("span",null,(0,l.v_)(e),1),"Transaction Date"===e?((0,a.uX)(),(0,a.CE)("span",tS,[(0,a.Lk)("span",sS,(0,l.v_)(i.sortIcon),1)])):(0,a.Q3)("",!0)],12,eS)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredDailySales,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",oS,(0,l.v_)(n.formatDate(e.paid_date)),1),(0,a.Lk)("td",aS,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",rS,(0,l.v_)(n.getPackageTypeName(e.package_type_id)),1),(0,a.Lk)("td",lS,(0,l.v_)(n.getPromotionTypeName(e.promotion_type_id)),1),(0,a.Lk)("td",iS,(0,l.v_)(n.getPackageName(e.package_id)||n.getAdditionalTypeName(e.additional_type_id)),1),(0,a.Lk)("td",nS,(0,l.v_)(n.getPromotionDetail(e.package_id)||e.add_detail),1),(0,a.Lk)("td",dS,(0,l.v_)(n.formatPrice(e.total_price)),1),(0,a.Lk)("td",cS,(0,l.v_)(n.getPaymentTypeName(e.payment_type_id)),1),(0,a.Lk)("td",uS,(0,l.v_)(n.getSellerName(e.seller_name_id)),1),(0,a.Lk)("td",pS,[(0,a.Lk)("li",{onClick:t=>n.onViewDetails(e),class:"px-2 py-1 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[34]||(t[34]=[(0,a.Lk)("span",null,"รายละเอียด",-1)]),8,hS)])])))),128)),0===i.filteredDailySales.length?((0,a.uX)(),(0,a.CE)("tr",gS,t[35]||(t[35]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูล",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",mS,[(0,a.Lk)("div",yS,[(0,a.Lk)("div",kS,[t[36]||(t[36]=(0,a.Lk)("span",{class:"font-bold"},[(0,a.Lk)("h2",null,"รายละเอียดยอดขายประจำวัน")],-1)),(0,a.Lk)("div",fS,[(0,a.Lk)("span",{onClick:t[7]||(t[7]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",bS,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetail,((e,t,s)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,l.C4)([s%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none","p-2 rounded-md"])},[(0,a.Lk)("p",xS,[(0,a.Lk)("strong",_S,(0,l.v_)(n.formatLabel(t))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)])],2)))),128))])])])):(0,a.Q3)("",!0)])])}var vS={data(){return{headers:["Transaction Date","Customer's Name","Package Type","Sales Category","Package/Purchase Details","Details","ยอดขายรวม","วิธีการชำระเงิน","Sales Rep"," "],headerWidths:["10%","12%","10%","10%","13%","12%","8%","10%","7%","8%"],sortDirection:"asc",sortIcon:"arrow_downward",filteredDailySales:[],selectedDate:"",dailySales:[],totalSales:0,totalSalesBeforeVAT:0,totalPackageBeforeVAT:0,totalDeliveryBeforeVAT:0,salesByPaymentType:[],customers:[],packages:[],promotion_types:[],seller_names:[],payment_types:[],package_types:[],selectedPackageTypeId:"",additional_types:[],isPaymentTableVisible:!1,selectedSeller:"",salesBySellerAndPackageType:[],sellers:[],groupedsalesBySellerAndPackageType:null,startDate:"",endDate:"",isDetailModalOpen:!1,selectedDailySaleDetail:{}}},computed:{totalSalesSum(){return this.groupedsalesBySellerAndPackageType?Object.values(this.groupedsalesBySellerAndPackageType).flat().reduce(((e,t)=>{const s=parseFloat(t.total_sales)||0;return e+s}),0):0},totalPreVatSum(){return this.groupedsalesBySellerAndPackageType?Object.values(this.groupedsalesBySellerAndPackageType).flat().reduce(((e,t)=>{const s=parseFloat(t.pre_vat)||0;return e+s}),0):0},filteredSalesBySellerAddit(){return Object.keys(this.salesBySellerAndPackageType).map((e=>{const t=this.salesBySellerAndPackageType[e].sales.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"===t||"consignment"===t}));return{sellerId:e,sales:t,totalSales:t.reduce(((e,t)=>e+parseFloat(t.total_sales)),0),totalPreVat:t.reduce(((e,t)=>e+parseFloat(t.pre_vat)),0)}})).filter((e=>e.sales.length>0))},filteredSalesBySeller(){return Object.keys(this.salesBySellerAndPackageType).map((e=>{const t=this.salesBySellerAndPackageType[e].sales.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t}));return{sellerId:e,sales:t,totalSales:t.reduce(((e,t)=>e+parseFloat(t.total_sales)),0),totalPreVat:t.reduce(((e,t)=>e+parseFloat(t.pre_vat)),0)}})).filter((e=>e.sales.length>0))},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""},filteredDetail(){return{paid_date:this.formatDate(this.selectedDailySaleDetail.paid_date),customer_id:this.getCustomerName(this.selectedDailySaleDetail.customer_id),package_type_id:this.getPackageTypeName(this.selectedDailySaleDetail.package_type_id),package_id:this.getPackageName(this.selectedDailySaleDetail.package_id)||this.getAdditionalTypeName(this.selectedDailySaleDetail.additional_type_id),promotion_type_id:this.getPromotionTypeName(this.selectedDailySaleDetail.promotion_type_id),package_price:this.formatPrice(this.getPackagePrice(this.selectedDailySaleDetail.package_id)),package_detail:this.getPromotionDetail(this.selectedDailySaleDetail.package_id)||this.selectedDailySaleDetail.add_detail,discount:this.formatPrice(this.selectedDailySaleDetail.discount),extra_charge:this.formatPercent(this.selectedDailySaleDetail.extra_charge),extra_charge_price:this.formatPrice(this.selectedDailySaleDetail.extra_charge_price),total_package_price:this.formatPrice(this.selectedDailySaleDetail.total_package_price),total_delivery_price:this.formatPrice(this.selectedDailySaleDetail.total_delivery_price),total_price:this.formatPrice(this.selectedDailySaleDetail.total_price),payment_type_id:this.getPaymentTypeName(this.selectedDailySaleDetail.payment_type_id),seller_name_id:this.getSellerName(this.selectedDailySaleDetail.seller_name_id)}}},methods:{formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},togglePaymentTableVisibility(){this.isPaymentTableVisible=!this.isPaymentTableVisible},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString())},onEndDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.endDate=t.toISOString())},sortColumn(e){"Transaction Date"===e&&(this.sortDirection="asc"===this.sortDirection?"desc":"asc",this.sortIcon="asc"===this.sortDirection?"arrow_downward":"arrow_upward",this.filteredDailySales.sort(((e,t)=>{const s=new Date(e.paid_date),o=new Date(t.paid_date);return"asc"===this.sortDirection?s-o:o-s})))},async fetchDailySales(e,t){try{const s=await ke.A.get("http://127.0.0.1:3333/sales/daily",{params:{startDate:e,endDate:t}});this.dailySales=s.data.data.dailySales,this.filteredDailySales=this.dailySales,this.totalSales=s.data.data.totalSales,this.totalSalesBeforeVAT=s.data.data.totalSalesBeforeVAT,this.totalPackageBeforeVAT=s.data.data.totalPackageBeforeVAT,this.totalDeliveryBeforeVAT=s.data.data.totalDeliveryBeforeVAT,this.salesByPaymentType=s.data.data.salesByPaymentType,this.salesBySellerAndPackageType=s.data.data.salesBySellerAndPackageType,this.sellers=this.seller_names.map((e=>({id:e.id,name:e.name}))),this.filteredDailySales=this.dailySales.sort(((e,t)=>{const s=new Date(e.paid_date),o=new Date(t.paid_date);return s-o})),this.filterSalesBySeller()}catch(s){console.error("Error fetching sales data in range:",s)}},selectSeller(e){this.selectedSeller=e,this.filterSalesBySeller()},filterSalesBySeller(){let e=this.salesBySellerAndPackageType;this.selectedSeller&&this.selectedSeller.id&&(e=this.salesBySellerAndPackageType.filter((e=>e.seller_name_id===this.selectedSeller.id))),this.groupedsalesBySellerAndPackageType=this.groupBySeller(e)},groupBySeller(e){return e.reduce(((e,t)=>(e[t.seller_name_id]||(e[t.seller_name_id]=[]),e[t.seller_name_id].push(t),e)),{})},clearSelectedSeller(){this.selectedSeller=null},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types")]);this.customers=e.data,this.promotion_types=t.data,this.allPrograms=s.data||[],this.packages=o.data,this.package_types=a.data,this.zoneDeliveries=r.data,this.seller_names=l.data,this.payment_types=i.data.data,this.additional_types=n.data,await this.fetchDailySales()}catch(e){console.error("Error fetching lookup data:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:null},getPackageName(e){const t=this.packages.find((t=>t.id===e));return t?t.name:null},getPromotionTypeName(e){const t=this.promotion_types.find((t=>t.id===e));return t?t.name:null},getPaymentTypeName(e){const t=this.payment_types.find((t=>t.id===e));return t?t.name:null},getSellerName(e){const t=this.seller_names.find((t=>t.id===parseInt(e)));return t?t.name:null},getPackageTypeName(e){const t=this.package_types.find((t=>t.id===e));return t?t.name:null},getPromotionDetail(e){const t=this.packages.find((t=>t.id===e));return t?t.promotion_detail:null},getPackagePrice(e){const t=this.packages.find((t=>t.id===e));return t?t.price:"-"},getAdditionalTypeName(e){const t=this.additional_types.find((t=>t.id===e));return t?t.name:null},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchSalesData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchSalesData()},fetchSalesData(){this.startDate&&this.endDate&&this.fetchDailySales(this.startDate,this.endDate)},onViewDetails(e){this.selectedDailySaleDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedDailySaleDetail={}},formatLabel(e){const t={paid_date:"Transaction Date",customer_id:"Customer's Name",package_type_id:"Package Type",package_id:"Package/Purchase Details",promotion_type_id:"Sales Category",package_price:"Package Price",package_detail:"Details",discount:"Additional Discount",extra_charge:"% Extra Charge",extra_charge_price:"Extra Charge Value",total_package_price:"Purchase Value",total_delivery_price:"ค่าจัดส่งรวม",total_price:"ยอดขายรวม",payment_type_id:"วิธีการชำระเงิน",seller_name_id:"Sales Rep"};return t[e]||e}},created(){this.filteredDailySales=this.dailySales,this.fetchLookupData(),this.fetchDailySales(this.selectedDate)},mounted(){this.fetchLookupData(),this.fetchDailySales(this.selectedDate),this.setToday(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.fetchSalesData()}}),(0,Po.A)(this.$refs.endDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.endDate=t,this.fetchSalesData()}})}))}};const LS=(0,_e.A)(vS,[["render",wS],["__scopeId","data-v-acd6e410"]]);var DS=LS;const PS={class:"mt-[-20px]"},CS={class:"flex items-center space-x-3 py-2"},SS={class:"flex space-x-5"},RS={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},TS={class:"text-center"},MS={class:"text-3xl font-bold text-custom-orange"},ES={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},FS={class:"text-center"},zS={class:"text-3xl font-bold text-custom-orange"},AS={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},OS={class:"text-center"},NS={class:"text-3xl font-bold text-custom-orange"},XS={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},VS={class:"text-center"},QS={class:"text-3xl font-bold text-custom-orange"},IS={class:"flex justify-end items-center space-x-2 relative"},US={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},$S={class:"text-m text-custom-orange font-bold"},BS={class:"flex space-x-4"},WS={class:"w-full min-w-1/2 table-auto rounded-2xl overflow-hidden mt-4"},qS={key:0},ZS={key:0,class:"px-4 py-2 align-top font-bold"},jS={key:1,class:"px-4 py-2 align-top"},JS={class:"px-4 py-2 align-top pb-5"},KS={class:"px-4 py-2 align-top"},HS={class:"px-4 py-2 align-top"},YS={class:"bg-purple-100",style:{height:"50px"}},GS={colspan:"4",class:"px-4 py-2 text-right"},eR={class:"w-full min-w-1/2 table-auto rounded-2xl overflow-hidden mt-4"},tR={class:"px-4 py-2 align-top font-bold pb-5"},sR={class:"px-4 py-2 align-top"},oR={class:"px-4 py-2 align-top"},aR={key:0},rR={class:"min-w-full table-auto rounded-2xl overflow-hidden mt-4"},lR={key:0},iR={key:0,class:"px-4 py-2 align-top font-bold pb-5"},nR={key:1,class:"px-4 py-2 align-top"},dR={class:"px-4 py-2 align-top pb-5"},cR={class:"px-4 py-2 align-top"},uR={class:"px-4 py-2 align-top"},pR={key:0,class:"bg-pink-100"},hR={colspan:"4",class:"px-4 py-2 text-right"},gR={class:"min-w-full table-auto rounded-2xl overflow-hidden mt-4"},mR={class:"bg-custom-orange text-white"},yR=["onClick"],kR={key:0,class:"ml-2 items-center"},fR={class:"material-symbols-outlined text-sm"},bR={class:"px-4 py-2 align-top pb-5"},xR={class:"px-4 py-2 align-top font-bold text-custom-orange"},_R={class:"px-4 py-2 align-top"},wR={class:"px-4 py-2 align-top"},vR={class:"px-4 py-2 align-top"},LR={class:"px-4 py-2 align-top"},DR={class:"px-4 py-2 align-top"},PR={class:"px-4 py-2 align-top"},CR={class:"px-4 py-2 align-top"},SR={class:"px-4 py-2 align-top text-right list-none"},RR=["onClick"],TR={key:0},MR={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},ER={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},FR={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},zR={class:"flex space-x-2"},AR={class:"pb-2 pt-2"},OR={class:"pl-3 pr-3"},NR={class:"mr-2"};function XR(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",PS,[(0,a.Lk)("div",CS,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>n.changeDate(-1)),class:"flex items-center"},t[8]||(t[8]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[9]||(t[9]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>n.changeDate(1)),class:"flex items-center"},t[10]||(t[10]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[11]||(t[11]=(0,a.Lk)("strong",{class:"text-gray-700"},"Start Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"startDatepicker",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.formattedStartDate=e),onInput:t[4]||(t[4]=(...e)=>n.onStartDateChange&&n.onStartDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่เริ่มต้น"},null,544),[[o.Jo,n.formattedStartDate]]),t[12]||(t[12]=(0,a.Lk)("strong",{class:"text-gray-700"},"End Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"endDatepicker",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.formattedEndDate=e),onInput:t[6]||(t[6]=(...e)=>n.onEndDateChange&&n.onEndDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่สิ้นสุด"},null,544),[[o.Jo,n.formattedEndDate]])]),(0,a.Lk)("div",SS,[(0,a.Lk)("div",RS,[t[14]||(t[14]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",TS,[(0,a.Lk)("p",MS,(0,l.v_)(n.formatPrice(i.totalSales)),1),t[13]||(t[13]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายทั้งหมด",-1))])]),(0,a.Lk)("div",ES,[t[16]||(t[16]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",FS,[(0,a.Lk)("p",zS,(0,l.v_)(n.formatPrice(i.totalSalesBeforeVAT)),1),t[15]||(t[15]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายทั้งหมดก่อน VAT",-1))])]),(0,a.Lk)("div",AS,[t[18]||(t[18]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," package_2 ")],-1)),(0,a.Lk)("div",OS,[(0,a.Lk)("p",NS,(0,l.v_)(n.formatPrice(i.totalPackageBeforeVAT)),1),t[17]||(t[17]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายสินค้าก่อน VAT",-1))])]),(0,a.Lk)("div",XS,[t[20]||(t[20]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," local_shipping ")],-1)),(0,a.Lk)("div",VS,[(0,a.Lk)("p",QS,(0,l.v_)(n.formatPrice(i.totalDeliveryBeforeVAT)),1),t[19]||(t[19]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายค่าส่งก่อน VAT",-1))])])]),(0,a.Lk)("div",IS,[(0,a.Lk)("div",US,[t[21]||(t[21]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"calendar_month",-1)),t[22]||(t[22]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการยอดขายประจำวันทั้งหมด: ",-1)),(0,a.Lk)("span",$S,(0,l.v_)(i.dailySales.length)+" รายการ",1)])]),(0,a.Lk)("div",BS,[(0,a.Lk)("table",WS,[t[27]||(t[27]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-purple-500 text-white"},[(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ผู้ขาย"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"Package Type"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,a.Lk)("tbody",null,[0===n.filteredSalesBySellerAddit.length?((0,a.uX)(),(0,a.CE)("tr",qS,t[23]||(t[23]=[(0,a.Lk)("td",{colspan:"4",class:"bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขาย ",-1)]))):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredSalesBySellerAddit,((e,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.sales,((t,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[0===s?((0,a.uX)(),(0,a.CE)("td",ZS,(0,l.v_)(n.getSellerName(e.sellerId)),1)):((0,a.uX)(),(0,a.CE)("td",jS)),(0,a.Lk)("td",JS,(0,l.v_)(n.getPackageTypeName(t.package_type_id)),1),(0,a.Lk)("td",KS,(0,l.v_)(n.formatPrice(t.total_sales)),1),(0,a.Lk)("td",HS,(0,l.v_)(n.formatPrice(t.pre_vat)),1)])))),128)),(0,a.Lk)("tr",YS,[(0,a.Lk)("td",GS,[t[24]||(t[24]=(0,a.Lk)("span",{class:"font-bold mr-2"},"ยอดขายรวมทั้งหมด:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(e.totalSales))+" ",1),t[25]||(t[25]=(0,a.Lk)("span",{class:"ml-4"},"|",-1)),t[26]||(t[26]=(0,a.Lk)("span",{class:"font-bold ml-4 mr-2"},"ยอดขายรวมทั้งหมดก่อน VAT:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(e.totalPreVat)),1)])])],64)))),128))])]),(0,a.Lk)("table",eR,[t[29]||(t[29]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-green-500 text-white"},[(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"วิธีการชำระเงิน"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.salesByPaymentType,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",tR,(0,l.v_)(n.getPaymentTypeName(e.payment_type_id)),1),(0,a.Lk)("td",sR,(0,l.v_)(n.formatPrice(e.total_sales)),1),(0,a.Lk)("td",oR,(0,l.v_)(n.formatPrice(e.pre_vat)),1)])))),128)),0===i.salesByPaymentType.length?((0,a.uX)(),(0,a.CE)("tr",aR,t[28]||(t[28]=[(0,a.Lk)("td",{colspan:"3",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขายตามประเภทการชำระเงิน ",-1)]))):(0,a.Q3)("",!0)])])]),(0,a.Lk)("table",rR,[t[33]||(t[33]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-pink-500 text-white"},[(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ผู้ขาย"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"Package Type"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,a.Lk)("tbody",null,[0===n.filteredSalesBySeller.length?((0,a.uX)(),(0,a.CE)("tr",lR,t[30]||(t[30]=[(0,a.Lk)("td",{colspan:"4",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขาย ",-1)]))):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredSalesBySeller,((e,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.sales,((t,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"border-b border-b-gray-200 bg-white relative"},[0===s?((0,a.uX)(),(0,a.CE)("td",iR,(0,l.v_)(n.getSellerName(e.sellerId)),1)):((0,a.uX)(),(0,a.CE)("td",nR)),(0,a.Lk)("td",dR,(0,l.v_)(n.getPackageTypeName(t.package_type_id)),1),(0,a.Lk)("td",cR,(0,l.v_)(n.formatPrice(t.total_sales)),1),(0,a.Lk)("td",uR,(0,l.v_)(n.formatPrice(t.pre_vat)),1)])))),128)),e.sales.length>0?((0,a.uX)(),(0,a.CE)("tr",pR,[(0,a.Lk)("td",hR,[t[31]||(t[31]=(0,a.Lk)("span",{class:"font-bold mr-2"},"ยอดขายรวมทั้งหมด:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(e.totalSales))+" ",1),t[32]||(t[32]=(0,a.Lk)("span",{class:"font-bold ml-14 mr-2"},"ยอดขายรวมทั้งหมดก่อน VAT:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(e.totalPreVat)),1)])])):(0,a.Q3)("",!0)],64)))),128))])]),(0,a.Lk)("table",gR,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",mR,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)([["px-4 py-2 text-left font-bold"],"items-center hover:text-gray-200"]),style:(0,l.Tr)({width:i.headerWidths[t],cursor:"pointer"}),onClick:t=>n.sortColumn(e)},[(0,a.Lk)("span",null,(0,l.v_)(e),1),"Transaction Date"===e?((0,a.uX)(),(0,a.CE)("span",kR,[(0,a.Lk)("span",fR,(0,l.v_)(i.sortIcon),1)])):(0,a.Q3)("",!0)],12,yR)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredDailySales,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",bR,(0,l.v_)(n.formatDate(e.paid_date)),1),(0,a.Lk)("td",xR,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",_R,(0,l.v_)(n.getPackageTypeName(e.package_type_id)),1),(0,a.Lk)("td",wR,(0,l.v_)(n.getPromotionTypeName(e.promotion_type_id)),1),(0,a.Lk)("td",vR,(0,l.v_)(n.getPackageName(e.package_id)||n.getAdditionalTypeName(e.additional_type_id)),1),(0,a.Lk)("td",LR,(0,l.v_)(n.getPromotionDetail(e.package_id)||e.add_detail),1),(0,a.Lk)("td",DR,(0,l.v_)(n.formatPrice(e.total_price)),1),(0,a.Lk)("td",PR,(0,l.v_)(n.getPaymentTypeName(e.payment_type_id)),1),(0,a.Lk)("td",CR,(0,l.v_)(n.getSellerName(e.seller_name_id)),1),(0,a.Lk)("td",SR,[(0,a.Lk)("li",{onClick:t=>n.onViewDetails(e),class:"px-2 py-1 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[34]||(t[34]=[(0,a.Lk)("span",null,"รายละเอียด",-1)]),8,RR)])])))),128)),0===i.filteredDailySales.length?((0,a.uX)(),(0,a.CE)("tr",TR,t[35]||(t[35]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูล",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",MR,[(0,a.Lk)("div",ER,[(0,a.Lk)("div",FR,[t[36]||(t[36]=(0,a.Lk)("span",{class:"font-bold"},[(0,a.Lk)("h2",null,"รายละเอียดยอดขายประจำวัน")],-1)),(0,a.Lk)("div",zR,[(0,a.Lk)("span",{onClick:t[7]||(t[7]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",AR,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetail,((e,t,s)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,l.C4)([s%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none","p-2 rounded-md"])},[(0,a.Lk)("p",OR,[(0,a.Lk)("strong",NR,(0,l.v_)(n.formatLabel(t))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)])],2)))),128))])])])):(0,a.Q3)("",!0)])])}var VR={data(){return{headers:["Transaction Date","Customer's Name","Package Type","Sales Category","Package/Purchase Details","Details","ยอดขายรวม","วิธีการชำระเงิน","Sales Rep"," "],headerWidths:["10%","12%","10%","10%","13%","12%","8%","10%","7%","8%"],sortDirection:"asc",sortIcon:"arrow_downward",filteredDailySales:[],selectedDate:"",dailySales:[],totalSales:0,totalSalesBeforeVAT:0,totalPackageBeforeVAT:0,totalDeliveryBeforeVAT:0,salesByPaymentType:[],customers:[],packages:[],promotion_types:[],seller_names:[],payment_types:[],package_types:[],selectedPackageTypeId:"",additional_types:[],isPaymentTableVisible:!1,selectedSeller:"",salesBySellerAndPackageType:[],sellers:[],groupedsalesBySellerAndPackageType:null,startDate:"",endDate:"",isDetailModalOpen:!1,selectedDailySaleDetail:{}}},computed:{totalSalesSum(){return this.groupedsalesBySellerAndPackageType?Object.values(this.groupedsalesBySellerAndPackageType).flat().reduce(((e,t)=>{const s=parseFloat(t.total_sales)||0;return e+s}),0):0},totalPreVatSum(){return this.groupedsalesBySellerAndPackageType?Object.values(this.groupedsalesBySellerAndPackageType).flat().reduce(((e,t)=>{const s=parseFloat(t.pre_vat)||0;return e+s}),0):0},filteredSalesBySellerAddit(){return Object.keys(this.salesBySellerAndPackageType).map((e=>{const t=this.salesBySellerAndPackageType[e].sales.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"===t||"consignment"===t}));return{sellerId:e,sales:t,totalSales:t.reduce(((e,t)=>e+parseFloat(t.total_sales)),0),totalPreVat:t.reduce(((e,t)=>e+parseFloat(t.pre_vat)),0)}})).filter((e=>e.sales.length>0))},filteredSalesBySeller(){return Object.keys(this.salesBySellerAndPackageType).map((e=>{const t=this.salesBySellerAndPackageType[e].sales.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t}));return{sellerId:e,sales:t,totalSales:t.reduce(((e,t)=>e+parseFloat(t.total_sales)),0),totalPreVat:t.reduce(((e,t)=>e+parseFloat(t.pre_vat)),0)}})).filter((e=>e.sales.length>0))},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""},filteredDetail(){return{paid_date:this.formatDate(this.selectedDailySaleDetail.paid_date),customer_id:this.getCustomerName(this.selectedDailySaleDetail.customer_id),package_type_id:this.getPackageTypeName(this.selectedDailySaleDetail.package_type_id),package_id:this.getPackageName(this.selectedDailySaleDetail.package_id)||this.getAdditionalTypeName(this.selectedDailySaleDetail.additional_type_id),promotion_type_id:this.getPromotionTypeName(this.selectedDailySaleDetail.promotion_type_id),package_price:this.formatPrice(this.getPackagePrice(this.selectedDailySaleDetail.package_id)),package_detail:this.getPromotionDetail(this.selectedDailySaleDetail.package_id)||this.selectedDailySaleDetail.add_detail,discount:this.formatPrice(this.selectedDailySaleDetail.discount),extra_charge:this.formatPercent(this.selectedDailySaleDetail.extra_charge),extra_charge_price:this.formatPrice(this.selectedDailySaleDetail.extra_charge_price),total_package_price:this.formatPrice(this.selectedDailySaleDetail.total_package_price),total_delivery_price:this.formatPrice(this.selectedDailySaleDetail.total_delivery_price),total_price:this.formatPrice(this.selectedDailySaleDetail.total_price),payment_type_id:this.getPaymentTypeName(this.selectedDailySaleDetail.payment_type_id),seller_name_id:this.getSellerName(this.selectedDailySaleDetail.seller_name_id)}}},methods:{formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},togglePaymentTableVisibility(){this.isPaymentTableVisible=!this.isPaymentTableVisible},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString())},onEndDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.endDate=t.toISOString())},sortColumn(e){"Transaction Date"===e&&(this.sortDirection="asc"===this.sortDirection?"desc":"asc",this.sortIcon="asc"===this.sortDirection?"arrow_downward":"arrow_upward",this.filteredDailySales.sort(((e,t)=>{const s=new Date(e.paid_date),o=new Date(t.paid_date);return"asc"===this.sortDirection?s-o:o-s})))},async fetchDailySales(e,t){try{const s=await ke.A.get("http://127.0.0.1:3333/sales-hhb/daily",{params:{startDate:e,endDate:t}});this.dailySales=s.data.data.dailySales,this.filteredDailySales=this.dailySales,this.totalSales=s.data.data.totalSales,this.totalSalesBeforeVAT=s.data.data.totalSalesBeforeVAT,this.totalPackageBeforeVAT=s.data.data.totalPackageBeforeVAT,this.totalDeliveryBeforeVAT=s.data.data.totalDeliveryBeforeVAT,this.salesByPaymentType=s.data.data.salesByPaymentType,this.salesBySellerAndPackageType=s.data.data.salesBySellerAndPackageType,this.sellers=this.seller_names.map((e=>({id:e.id,name:e.name}))),this.filteredDailySales=this.dailySales.sort(((e,t)=>{const s=new Date(e.paid_date),o=new Date(t.paid_date);return s-o})),this.filterSalesBySeller()}catch(s){console.error("Error fetching sales data in range:",s)}},selectSeller(e){this.selectedSeller=e,this.filterSalesBySeller()},filterSalesBySeller(){let e=this.salesBySellerAndPackageType;this.selectedSeller&&this.selectedSeller.id&&(e=this.salesBySellerAndPackageType.filter((e=>e.seller_name_id===this.selectedSeller.id))),this.groupedsalesBySellerAndPackageType=this.groupBySeller(e)},groupBySeller(e){return e.reduce(((e,t)=>(e[t.seller_name_id]||(e[t.seller_name_id]=[]),e[t.seller_name_id].push(t),e)),{})},clearSelectedSeller(){this.selectedSeller=null},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers-hhb"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types")]);this.customers=e.data,this.promotion_types=t.data,this.allPrograms=s.data||[],this.packages=o.data,this.package_types=a.data,this.zoneDeliveries=r.data,this.seller_names=l.data,this.payment_types=i.data.data,this.additional_types=n.data,await this.fetchDailySales()}catch(e){console.error("Error fetching lookup data:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:null},getPackageName(e){const t=this.packages.find((t=>t.id===e));return t?t.name:null},getPromotionTypeName(e){const t=this.promotion_types.find((t=>t.id===e));return t?t.name:null},getPaymentTypeName(e){const t=this.payment_types.find((t=>t.id===e));return t?t.name:null},getSellerName(e){const t=this.seller_names.find((t=>t.id===parseInt(e)));return t?t.name:null},getPackageTypeName(e){const t=this.package_types.find((t=>t.id===e));return t?t.name:null},getPromotionDetail(e){const t=this.packages.find((t=>t.id===e));return t?t.promotion_detail:null},getPackagePrice(e){const t=this.packages.find((t=>t.id===e));return t?t.price:"-"},getAdditionalTypeName(e){const t=this.additional_types.find((t=>t.id===e));return t?t.name:null},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchSalesData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchSalesData()},fetchSalesData(){this.startDate&&this.endDate&&this.fetchDailySales(this.startDate,this.endDate)},onViewDetails(e){this.selectedDailySaleDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedDailySaleDetail={}},formatLabel(e){const t={paid_date:"Transaction Date",customer_id:"Customer's Name",package_type_id:"Package Type",package_id:"Package/Purchase Details",promotion_type_id:"Sales Category",package_price:"Package Price",package_detail:"Details",discount:"Additional Discount",extra_charge:"% Extra Charge",extra_charge_price:"Extra Charge Value",total_package_price:"Purchase Value",total_delivery_price:"ค่าจัดส่งรวม",total_price:"ยอดขายรวม",payment_type_id:"วิธีการชำระเงิน",seller_name_id:"Sales Rep"};return t[e]||e}},created(){this.filteredDailySales=this.dailySales,this.fetchLookupData(),this.fetchDailySales(this.selectedDate)},mounted(){this.fetchLookupData(),this.fetchDailySales(this.selectedDate),this.setToday(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.fetchSalesData()}}),(0,Po.A)(this.$refs.endDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.endDate=t,this.fetchSalesData()}})}))}};const QR=(0,_e.A)(VR,[["render",XR],["__scopeId","data-v-5e92ba6c"]]);var IR=QR;const UR={class:"flex mt-[-20px] space-x-2 items-center relative"},$R={class:"px-4 flex items-center space-x-1 mr-auto"},BR={class:"text-m text-custom-orange font-bold"},WR={class:"sort relative inline-block",ref:"sortDropdown"},qR={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},ZR={class:"list-none p-0 m-0"},jR={key:0,class:"material-symbols-outlined text-sm"},JR={key:0,class:"material-symbols-outlined text-sm"},KR={class:"flex w-[250px] relative"},HR={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},YR={class:"bg-custom-orange text-white"},GR={class:"px-4 py-2 align-top pb-5"},eT={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},tT={class:"px-4 py-2 align-top pb-5"},sT={class:"px-4 py-2 align-top pb-5"},oT={class:"flex items-center"},aT={class:"flex items-center"},rT={class:"px-4 py-2 align-top pb-5"},lT={class:"px-4 py-2 align-top pb-5"},iT={key:0},nT=["onClick"],dT={key:0},cT={class:"list-none p-0 m-0"},uT=["onClick"],pT=["onClick"],hT=["onClick"],gT={key:1},mT={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},yT={class:"list-none p-0 m-0"},kT=["onClick"],fT=["onClick"],bT=["onClick"],xT={key:2},_T={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},wT={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},vT={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},LT={class:"flex space-x-2"},DT={class:"pb-2 pt-2 overflow-y-auto flex-grow"},PT={class:"pl-3 pr-3"},CT={class:"mr-2"},ST={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},RT={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},TT={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},MT={class:"flex space-x-2"},ET={class:"p-6 space-y-4 overflow-y-auto flex-grow"},FT={class:"mb-4"},zT={class:"mb-4"},AT={class:"flex space-x-4"},OT={class:"flex space-x-4"},NT={class:"w-1/2"},XT={class:"w-1/2"},VT={class:"flex space-x-4"},QT={key:0},IT={class:"flex space-x-4"},UT={class:"text-gray-700"},$T={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},BT={class:"flex space-x-2"},WT={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},qT={class:"bg-white rounded-lg shadow-md w-1/3"},ZT={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},jT={class:"flex justify-end space-x-2 p-4 border-t"},JT={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},KT=["disabled"],HT={class:"flex items-center space-x-1"},YT=["onClick"],GT=["disabled"];function eM(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[43]||(t[43]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[42]||(t[42]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[45]||(t[45]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[44]||(t[44]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",null,[(0,a.Lk)("div",UR,[(0,a.Lk)("div",$R,[t[46]||(t[46]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"person",-1)),t[47]||(t[47]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนลูกค้าทั้งหมด: ",-1)),(0,a.Lk)("span",BR,(0,l.v_)(i.customers.length)+" คน",1)]),(0,a.Lk)("div",WR,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[48]||(t[48]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[49]||(t[49]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto transition-transform duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",qR,[(0,a.Lk)("ul",ZR,[(0,a.Lk)("li",{onClick:t[3]||(t[3]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[50]||(t[50]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",jR,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[4]||(t[4]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[51]||(t[51]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",JR,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[5]||(t[5]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[52]||(t[52]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",KR,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[7]||(t[7]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[8]||(t[8]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",HR,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",YR,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredCustomers.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(n.filteredCustomers,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",GR,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",eT,(0,l.v_)(e.name),1),(0,a.Lk)("td",tT,(0,l.v_)(e.customer_id),1),(0,a.Lk)("td",sT,[(0,a.Lk)("div",oT,[t[53]||(t[53]=(0,a.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"mail",-1)),(0,a.eW)((0,l.v_)(e.email),1)]),(0,a.Lk)("div",aT,[t[54]||(t[54]=(0,a.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"phone",-1)),(0,a.eW)((0,l.v_)(e.tel),1)])]),(0,a.Lk)("td",rT,(0,l.v_)(e.address_1),1),(0,a.Lk)("td",lT,[(0,a.eW)((0,l.v_)(n.formatFoodAllergies(e.food_allergies))+" ",1),e.food_allergies_detail?((0,a.uX)(),(0,a.CE)("span",iT,(0,l.v_)(e.food_allergies_detail),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("td",{class:"px-4 py-2 text-right relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(s)},t[55]||(t[55]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,nT),n.filteredCustomers.length>4?((0,a.uX)(),(0,a.CE)("div",dT,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)([n.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",cT,[(0,a.Lk)("li",{onClick:t=>n.onViewDetails(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,uT),(0,a.Lk)("li",{onClick:t=>n.onEdit(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,pT),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,hT)])],2)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",gT,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",mT,[(0,a.Lk)("ul",yT,[(0,a.Lk)("li",{onClick:t=>n.onViewDetails(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,kT),(0,a.Lk)("li",{onClick:t=>n.onEdit(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,fT),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,bT)])])):(0,a.Q3)("",!0)]))],512)])))),128)):(0,a.Q3)("",!0),n.filteredCustomers.length<6&&n.filteredCustomers.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredCustomers.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[56]||(t[56]=[(0,a.Lk)("td",{colspan:"7",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredCustomers.length?((0,a.uX)(),(0,a.CE)("tr",xT,t[57]||(t[57]=[(0,a.Lk)("td",{colspan:"7",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",_T,[(0,a.Lk)("div",wT,[(0,a.Lk)("div",vT,[t[58]||(t[58]=(0,a.Lk)("span",{class:"font-bold"},[(0,a.Lk)("h2",null,"รายละเอียดลูกค้า")],-1)),(0,a.Lk)("div",LT,[(0,a.Lk)("span",{onClick:t[10]||(t[10]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",DT,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailsCustomer,((e,t,s)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,l.C4)([s%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none","p-2 rounded-md"])},[(0,a.Lk)("p",PT,[(0,a.Lk)("strong",CT,(0,l.v_)(n.formatLabel(t)),1),(0,a.Lk)("span",{style:(0,l.Tr)({whiteSpace:"note"===t?"pre-wrap":"normal",display:"inline-block",width:"100%"})},(0,l.v_)(e),5)])],2)))),128))])])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",ST,[(0,a.Lk)("div",RT,[(0,a.Lk)("div",TT,[t[59]||(t[59]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขข้อมูลลูกค้า",-1)),(0,a.Lk)("div",MT,[(0,a.Lk)("span",{onClick:t[11]||(t[11]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",ET,[(0,a.Lk)("div",FT,[t[60]||(t[60]=(0,a.Lk)("label",{for:"editCustomerName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.selectedCustomer.name=e),id:"editCustomerName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.name]])]),(0,a.Lk)("div",zT,[t[61]||(t[61]=(0,a.Lk)("label",{for:"editCustomerEmail",class:"block text-gray-700 font-medium"},"อีเมล",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>i.selectedCustomer.email=e),id:"editCustomerEmail",type:"email",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.email]])]),(0,a.Lk)("div",null,[t[62]||(t[62]=(0,a.Lk)("label",{for:"customer_id",class:"block font-medium text-gray-700"},"รหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>i.selectedCustomer.customer_id=e),placeholder:"กรอกรหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.customer_id]])]),(0,a.Lk)("div",null,[t[65]||(t[65]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"เพศ",-1)),(0,a.Lk)("div",AT,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[15]||(t[15]=e=>i.selectedCustomer.gender=e),value:"female",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.selectedCustomer.gender]]),t[63]||(t[63]=(0,a.eW)(" ผู้หญิง / Female "))]),(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[16]||(t[16]=e=>i.selectedCustomer.gender=e),value:"male",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.selectedCustomer.gender]]),t[64]||(t[64]=(0,a.eW)(" ผู้ชาย / Male "))])])]),(0,a.Lk)("div",OT,[(0,a.Lk)("div",NT,[t[66]||(t[66]=(0,a.Lk)("label",{for:"tel",class:"block font-medium text-gray-700"},"เบอร์โทรศัพท์",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>i.selectedCustomer.tel=e),maxlength:"10",placeholder:"กรอกหมายเลขโทรศัพท์",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.tel]])]),(0,a.Lk)("div",XT,[t[67]||(t[67]=(0,a.Lk)("label",{for:"line_id",class:"block font-medium text-gray-700"},"Line ID (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=e=>i.selectedCustomer.line_id=e),placeholder:"กรอก line id",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.line_id]])])]),(0,a.Lk)("div",null,[t[70]||(t[70]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"คุณแพ้อาหารชนิดใดหรือไม่?",-1)),(0,a.Lk)("div",VT,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedCustomer.food_allergies=e),value:"No",onChange:t[20]||(t[20]=e=>i.selectedCustomer.food_allergies_detail=null)},null,544),[[o.XL,i.selectedCustomer.food_allergies]]),t[68]||(t[68]=(0,a.eW)(" ไม่ / No "))]),(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[21]||(t[21]=e=>i.selectedCustomer.food_allergies=e),value:"Yes",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.selectedCustomer.food_allergies]]),t[69]||(t[69]=(0,a.eW)(" ใช่ / Yes "))])])]),"Yes"===i.selectedCustomer.food_allergies?((0,a.uX)(),(0,a.CE)("div",QT,[t[71]||(t[71]=(0,a.Lk)("label",{for:"food_allergies_detail",class:"block font-medium text-gray-700"},"โปรดระบุประเภทอาหารที่คุณมีอาการแพ้ในบรรทัดด้านล่าง",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"food_allergies_detail","onUpdate:modelValue":t[22]||(t[22]=e=>i.selectedCustomer.food_allergies_detail=e),placeholder:"Enter details here",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.food_allergies_detail]])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[72]||(t[72]=(0,a.Lk)("label",{for:"delivery_date",class:"block font-medium text-gray-700"},"โปรดระบุวันที่คุณต้องการรับอาหาร",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=e=>i.selectedCustomer.delivery_date=e),placeholder:"กรอกโปรดระบุวันที่คุณต้องการรับอาหาร",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.delivery_date]])]),(0,a.Lk)("div",null,[t[75]||(t[75]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"ผู้รับอาหาร?",-1)),(0,a.Lk)("div",IT,[(0,a.Lk)("label",UT,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[24]||(t[24]=e=>i.selectedCustomer.recipient_mon_to_fri=e),value:"ตัวคุณเอง",class:"focus:ring-custom-orange custom-radio"},null,512),[[o.XL,i.selectedCustomer.recipient_mon_to_fri]]),t[73]||(t[73]=(0,a.eW)(" ตัวคุณเอง "))]),t[74]||(t[74]=(0,a.Lk)("label",{class:"text-gray-700"}," มีผู้อื่นรับแทน (โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อในบรรทัดด้านล่าง) ",-1))])]),(0,a.Lk)("div",null,[t[76]||(t[76]=(0,a.Lk)("label",{for:"recipient_mon_to_fri",class:"block font-medium text-gray-700"},"โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"recipient_mon_to_fri","onUpdate:modelValue":t[25]||(t[25]=e=>i.selectedCustomer.recipient_mon_to_fri=e),placeholder:"Enter details here",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.recipient_mon_to_fri]])]),(0,a.Lk)("div",null,[t[77]||(t[77]=(0,a.Lk)("label",{for:"note",class:"block font-medium text-gray-700"},"หากมีรายละเอียดอื่นๆ ที่เราควรทราบ โปรดระบุ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[26]||(t[26]=e=>i.selectedCustomer.note=e),placeholder:"กรอกรายละเอียดอื่นๆ",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.note]])]),(0,a.Lk)("div",null,[t[78]||(t[78]=(0,a.Lk)("label",{for:"address_1",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 1",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address","onUpdate:modelValue":t[27]||(t[27]=e=>i.selectedCustomer.address_1=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.address_1]])]),(0,a.Lk)("div",null,[t[79]||(t[79]=(0,a.Lk)("label",{for:"address_2",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 2 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_2","onUpdate:modelValue":t[28]||(t[28]=e=>i.selectedCustomer.address_2=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.address_2]])]),(0,a.Lk)("div",null,[t[80]||(t[80]=(0,a.Lk)("label",{for:"address_3",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 3 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_3","onUpdate:modelValue":t[29]||(t[29]=e=>i.selectedCustomer.address_3=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.address_3]])])]),(0,a.Lk)("div",$T,[(0,a.Lk)("div",BT,[(0,a.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",WT,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[82]||(t[82]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",qT,[(0,a.Lk)("div",ZT,[t[83]||(t[83]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[33]||(t[33]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[84]||(t[84]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",jT,[(0,a.Lk)("button",{onClick:t[34]||(t[34]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[35]||(t[35]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",JT,[(0,a.Lk)("button",{onClick:t[36]||(t[36]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[85]||(t[85]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,KT),(0,a.Lk)("div",HT,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[37]||(t[37]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[38]||(t[38]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,YT)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[39]||(t[39]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[40]||(t[40]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[41]||(t[41]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[86]||(t[86]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,GT)])])],64)}var tM={name:"AFF Customers",data(){return{headers:["#","ชื่อ","รหัสอ้างอิง","ช่องทางการติดต่อ","ที่อยู่","ข้อมูลแพ้อาหาร",""],headerWidths:["5%","20%","10%","15%","30%","15%","5%"],searchQuery:"",isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",customers:[],currentPage:1,itemsPerPage:10,isDetailModalOpen:!1,selectedCustomer:{},moreOpenDropdownIndex:null,isEditModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{filteredCustomers(){const e=this.customers.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)},totalPages(){const e=this.customers.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())}));return Math.ceil(e.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredDetailsCustomer(){return{name:this.selectedCustomer.name,customer_id:this.selectedCustomer.customer_id,gender:"male"===this.selectedCustomer.gender?"ผู้ชาย":"ผู้หญิง",email:this.selectedCustomer.email,tel:this.selectedCustomer.tel,line_id:this.selectedCustomer.line_id,food_allergies:this.formatFoodAllergies(this.selectedCustomer.food_allergies)+(this.selectedCustomer.food_allergies_detail||""),delivery_date:this.selectedCustomer.delivery_date,recipient_mon_to_fri:this.selectedCustomer.recipient_mon_to_fri,note:this.selectedCustomer.note+"\n"+(this.selectedCustomer.other_detail||""),address_1:this.selectedCustomer.address_1,address_2:this.selectedCustomer.address_2,address_3:this.selectedCustomer.address_3}}},methods:{async fetchCustomers(){try{const e=await ke.A.get("http://127.0.0.1:3333/customers");this.customers=e.data,this.customers.sort(((e,t)=>e.id-t.id))}catch(e){console.error("Error fetching customers:",e)}},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.customers.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.customers.sort(((e,t)=>e.id-t.id)),this.currentPage=1},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null)},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredCustomers.length-2?"dropdown-up":"dropdown-down"},onViewDetails(e){this.selectedCustomer=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedCustomer={}},onEdit(e){this.selectedCustomer={...e},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedCustomer.name||!this.selectedCustomer.email)return void alert("กรุณากรอกข้อมูลให้ครบถ้วน");const e=await ke.A.put(`http://127.0.0.1:3333/customers/${this.selectedCustomer.id}`,{email:this.selectedCustomer.email,customer_id:this.selectedCustomer.customer_id,name:this.selectedCustomer.name,gender:this.selectedCustomer.gender,tel:this.selectedCustomer.tel,line_id:this.selectedCustomer.line_id,food_allergies:this.selectedCustomer.food_allergies,food_allergies_detail:this.selectedCustomer.food_allergies_detail,delivery_date:this.selectedCustomer.delivery_date,note:this.selectedCustomer.note,address_1:this.selectedCustomer.address_1,address_2:this.selectedCustomer.address_2,address_3:this.selectedCustomer.address_3,recipient_mon_to_fri:this.selectedCustomer.recipient_mon_to_fri}),t=this.customers.findIndex((e=>e.id===this.selectedCustomer.id));-1!==t&&(this.customers[t]=e.data),this.isEditModalOpen=!1,this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),await this.fetchCustomers()}catch(e){console.error("Error saving changes:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูลสำเร็จ")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedCustomer={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/customers/${this.itemToDelete}`),this.customers=this.customers.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchCustomers(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},formatLabel(e){const t={name:"ชื่อ",customer_id:"รหัสอ้างอิง",gender:"เพศ",email:"อีเมล",tel:"เบอร์โทรศัพท์",line_id:"Line ID",food_allergies:"ข้อมูลแพ้อาหาร",delivery_date:"วันที่ต้องการรับอาหาร",recipient_mon_to_fri:"ผู้รับอาหาร",note:"หากมีรายละเอียดอื่นๆ ที่เราควรทราบ โปรดระบุ",address_1:"ที่อยู่ 1",address_2:"ที่อยู่ 2",address_3:"ที่อยู่ 3"};return t[e]||e},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},formatFoodAllergies(e){return"Yes"===e?"ใช่ Yes,":"No"===e?"ไม่ No":e}},created(){this.fetchCustomers(),this.sortData("id")},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchCustomers()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const sM=(0,_e.A)(tM,[["render",eM],["__scopeId","data-v-4dc872f9"]]);var oM=sM;const aM={class:"mt-[-20px]"},rM={class:"flex space-x-2 items-center relative"},lM={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},iM={class:"text-m text-custom-orange font-bold"},nM={class:"ml-2"},dM={class:"sort relative inline-block",ref:"sortDropdown"},cM={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},uM={class:"list-none p-0 m-0"},pM={key:0,class:"material-symbols-outlined text-sm"},hM={key:0,class:"material-symbols-outlined text-sm"},gM={class:"flex w-[250px] relative"},mM={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},yM={class:"bg-custom-orange text-white text-sm"},kM={class:"px-4 py-2 align-top pb-5"},fM={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},bM={class:"px-4 py-2 align-top pb-5"},xM={class:"flex items-center"},_M={class:"px-4 py-2 align-top pb-5"},wM=["onUpdate:modelValue"],vM={key:1},LM={class:"px-4 py-2 align-top pb-5"},DM=["onUpdate:modelValue"],PM={key:1},CM={class:"px-4 py-2 align-top pb-5"},SM=["onUpdate:modelValue"],RM={key:1},TM={class:"px-4 py-2 align-top pb-5"},MM={class:"px-4 py-2 align-top pb-5"},EM={class:"px-4 py-2 align-top pb-5"},FM={class:"flex justify-end space-x-2"},zM=["onClick"],AM=["onClick"],OM={key:2},NM={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},XM={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},VM={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},QM={class:"flex space-x-2"},IM={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},UM={key:0,class:"flex items-center space-x-4 pl-3 pr-3"},$M={class:"flex-1"},BM={class:"mr-2"},WM={class:"flex-1"},qM={class:"flex-1"},ZM={key:1,class:"flex items-center space-x-4 pl-3 pr-3"},jM={class:"flex-1"},JM={class:"mr-2"},KM={class:"flex-1"},HM={class:"flex-1"},YM={key:2,class:"flex items-center space-x-4 pl-3 pr-3"},GM={class:"flex-1"},eE={class:"mr-2"},tE={class:"flex-1"},sE={class:"flex-1"},oE={key:3,class:"flex items-center space-x-4 pl-3 pr-3"},aE={class:"flex-1"},rE={class:"mr-2"},lE={class:"flex-1"},iE={class:"flex-1"},nE={class:"mr-2 pl-3 pr-3"},dE={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},cE={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},uE={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},pE={class:"flex space-x-2"},hE={class:"p-6 space-y-4 overflow-y-auto flex-grow"},gE={key:1,class:"mt-4 p-4 border border-custom-orange rounded-md"},mE={class:"flex flex-wrap"},yE={class:"md:w-1/2 lg:w-1/4"},kE={class:"md:w-1/2 lg:w-1/4"},fE={class:"md:w-1/2 lg:w-1/4"},bE={class:"md:w-1/2 lg:w-1/4"},xE={class:"md:w-1/2 lg:w-1/4"},_E={class:"md:w-1/2 lg:w-1/4"},wE={class:"md:w-1/2 lg:w-1/4"},vE={class:"md:w-1/2 lg:w-1/4"},LE={class:"space-y-4 overflow-y-auto flex-grow mt-4"},DE={class:"flex flex-wrap gap-4"},PE={class:"flex-1"},CE={class:"flex-1"},SE={class:"flex-1"},RE={class:"flex-1"},TE={class:"flex flex-wrap gap-4"},ME={class:"flex-1"},EE={class:"flex-1"},FE={class:"flex-1"},zE={class:"flex-1"},AE={class:"flex space-x-4"},OE={class:"flex-1"},NE={class:"relative"},XE={class:"flex-1"},VE={class:"relative"},QE={key:0},IE={class:"flex-1"},UE={class:"block font-bold text-gray-700"},$E={class:"text-gray-600"},BE={class:"text-gray-600"},WE={class:"text-gray-600"},qE={class:"flex space-x-4"},ZE={class:"flex-1"},jE={class:"flex-1"},JE={key:1,class:"flex-1"},KE={class:"block font-bold text-gray-700"},HE={class:"text-gray-600"},YE={class:"flex space-x-4"},GE={class:"flex-1"},eF={class:"flex-1"},tF={key:2,class:"flex-2"},sF={class:"block font-bold text-gray-700"},oF={class:"text-gray-600"},aF={class:"flex space-x-4"},rF={class:"flex-1"},lF={class:"flex-1"},iF={key:3,class:"flex-1"},nF={class:"block font-bold text-gray-700"},dF={class:"text-gray-600"},cF={class:"flex space-x-4"},uF={class:"flex-1"},pF={class:"flex-1"},hF={key:4,class:"flex-1"},gF={class:"block font-bold text-gray-700"},mF={class:"text-gray-600"},yF={key:5,class:"flex-1"},kF={class:"block font-bold text-gray-700"},fF={class:"text-gray-600"},bF={class:"text-gray-600"},xF={key:6,class:"flex-1"},_F={class:"block font-bold text-custom-orange"},wF={class:"text-gray-600"},vF={class:"text-gray-600"},LF={class:"flex space-x-4"},DF={class:"flex-1"},PF={class:"flex-1"},CF={class:"flex space-x-4"},SF={class:"flex-1"},RF={class:"flex-1"},TF={class:"mb-4"},MF={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},EF={class:"flex space-x-2"},FF={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},zF=["disabled"],AF={class:"flex items-center space-x-1"},OF=["onClick"],NF=["disabled"],XF={ref:"componentRef",class:"hidden-print p-4 relative"},VF={class:"relative flex justify-between items-center"},QF={class:"flex flex-col"},IF={class:"text-sm"},UF={class:"report-content min-w-full table-auto mt-4 p-4"},$F={class:"px-6 py-4 text-[12px] text-black border-b border-b-gray-300"},BF={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},WF={class:"flex items-center"},qF={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},ZF={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},jF={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},JF={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},KF={key:0,class:"list-disc pl-4"},HF={key:0},YF={key:1},GF={key:2};function ez(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[56]||(t[56]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[55]||(t[55]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[58]||(t[58]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",aM,[(0,a.Lk)("div",rM,[(0,a.Lk)("div",lM,[t[59]||(t[59]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"delivery_truck_speed",-1)),t[60]||(t[60]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการจัดส่งอาหารทั้งหมด: ",-1)),(0,a.Lk)("span",iM,(0,l.v_)(i.saleRecords.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[62]||(t[62]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",nM,[t[61]||(t[61]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.handlePrint&&r.handlePrint(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[63]||(t[63]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"print",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Print",-1)])),(0,a.Lk)("div",dM,[(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[64]||(t[64]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[65]||(t[65]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",cM,[(0,a.Lk)("ul",uM,[(0,a.Lk)("li",{onClick:t[5]||(t[5]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[66]||(t[66]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",pM,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[6]||(t[6]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[67]||(t[67]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",hM,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[7]||(t[7]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[68]||(t[68]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",gM,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[9]||(t[9]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[10]||(t[10]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",mM,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",yM,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredSaleRecordsPaid.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(i.filteredSaleRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",kM,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",fM,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",bM,[(0,a.Lk)("div",xM,[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"phone",-1)),(0,a.eW)((0,l.v_)(n.getCustomerTel(e.customer_id)),1)])]),(0,a.Lk)("td",_M,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{key:0,"onUpdate:modelValue":t=>e.delivery_round=t,class:"border px-2 py-1 rounded w-full h-24"},null,8,wM)),[[o.Jo,e.delivery_round]]):((0,a.uX)(),(0,a.CE)("span",vM,(0,l.v_)(e.delivery_round),1))]),(0,a.Lk)("td",LM,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{key:0,"onUpdate:modelValue":t=>e.deliver=t,class:"border px-2 py-1 rounded w-full h-24"},null,8,DM)),[[o.Jo,e.deliver]]):((0,a.uX)(),(0,a.CE)("span",PM,(0,l.v_)(e.deliver),1))]),(0,a.Lk)("td",CM,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{key:0,"onUpdate:modelValue":t=>e.delivery_zone=t,class:"border px-2 py-1 rounded w-full h-24"},null,8,SM)),[[o.Jo,e.delivery_zone]]):((0,a.uX)(),(0,a.CE)("span",RM,(0,l.v_)(e.delivery_zone),1))]),(0,a.Lk)("td",TM,(0,l.v_)(n.getCustomerAddress1(e.customer_id)),1),(0,a.Lk)("td",MM,(0,l.v_)(n.getCustomerAddress2(e.customer_id)),1),(0,a.Lk)("td",EM,(0,l.v_)(n.getCustomerAddress3(e.customer_id)),1),(0,a.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("div",FM,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t=>n.startEditing(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[70]||(t[70]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,zM)),i.isEditing&&i.editingSaleRecordId===e.id?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t=>n.saveUpdatedDelivery(e),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-1"},t[71]||(t[71]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"check",-1),(0,a.Lk)("span",null,"บันทึก",-1)]),8,AM)):(0,a.Q3)("",!0),i.isEditing&&i.editingSaleRecordId===e.id?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[12]||(t[12]=(...e)=>n.cancelEditing&&n.cancelEditing(...e)),class:"bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1),(0,a.Lk)("span",null,"ยกเลิก",-1)]))):(0,a.Q3)("",!0)])],512)])))),128)):(0,a.Q3)("",!0),n.filteredSaleRecordsPaid.length<6&&n.filteredSaleRecordsPaid.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredSaleRecordsPaid.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[73]||(t[73]=[(0,a.Lk)("td",{colspan:"10",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredSaleRecordsPaid.length?((0,a.uX)(),(0,a.CE)("tr",OM,t[74]||(t[74]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",NM,[(0,a.Lk)("div",XM,[(0,a.Lk)("div",VM,[t[75]||(t[75]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,a.Lk)("div",QM,[(0,a.Lk)("span",{onClick:t[13]||(t[13]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",IM,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,s,o)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,l.C4)(["p-2 rounded-md",o%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},["zone1_id"===s?((0,a.uX)(),(0,a.CE)("div",UM,[(0,a.Lk)("div",$M,[(0,a.Lk)("strong",BM,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",WM,[t[76]||(t[76]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone1_quantity),1)]),(0,a.Lk)("div",qM,[t[77]||(t[77]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id))),1)])])):"zone2_id"===s?((0,a.uX)(),(0,a.CE)("div",ZM,[(0,a.Lk)("div",jM,[(0,a.Lk)("strong",JM,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",KM,[t[78]||(t[78]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone2_quantity),1)]),(0,a.Lk)("div",HM,[t[79]||(t[79]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id))),1)])])):"zone3_id"===s?((0,a.uX)(),(0,a.CE)("div",YM,[(0,a.Lk)("div",GM,[(0,a.Lk)("strong",eE,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",tE,[t[80]||(t[80]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone3_quantity),1)]),(0,a.Lk)("div",sE,[t[81]||(t[81]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id))),1)])])):"zone_outsource_id"===s?((0,a.uX)(),(0,a.CE)("div",oE,[(0,a.Lk)("div",aE,[(0,a.Lk)("strong",rE,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",lE,[t[82]||(t[82]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone_outsource_quantity),1)]),(0,a.Lk)("div",iE,[t[83]||(t[83]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id))),1)])])):((0,a.uX)(),(0,a.CE)(a.FK,{key:4},[(0,a.Lk)("strong",nE,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))],2)))),128))],512)])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",dE,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[85]||(t[85]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[14]||(t[14]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[84]||(t[84]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",cE,[(0,a.Lk)("div",uE,[t[86]||(t[86]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขบันทึกการขาย",-1)),(0,a.Lk)("div",pE,[(0,a.Lk)("span",{onClick:t[15]||(t[15]=(...t)=>e.closeEditModal&&e.closeEditModal(...t)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",hE,[(0,a.Lk)("div",null,[t[87]||(t[87]=(0,a.Lk)("label",{for:"editCustomer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.customer_id,"onUpdate:modelValue":t[16]||(t[16]=e=>i.selectedSaleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editPackageType",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_type_id,"onUpdate:modelValue":t[17]||(t[17]=e=>i.selectedSaleRecord.package_type_id=e),options:n.filteredPackageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[89]||(t[89]=(0,a.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.promotion_type_id,"onUpdate:modelValue":t[18]||(t[18]=e=>i.selectedSaleRecord.promotion_type_id=e),options:i.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[90]||(t[90]=(0,a.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.program_id,"onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedSaleRecord.program_id=e),options:n.filteredPrograms,placeholder:"เลือก Program","track-by":"id",label:"name",disabled:!i.selectedSaleRecord.promotion_type_id||!i.selectedSaleRecord.promotion_type_id.id},null,8,["modelValue","options","disabled"])]),(0,a.Lk)("div",null,[t[108]||(t[108]=(0,a.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_id,"onUpdate:modelValue":t[20]||(t[20]=e=>i.selectedSaleRecord.package_id=e),options:i.packages,placeholder:"เลือก Package","track-by":"id",label:"displayLabel",disabled:!i.selectedSaleRecord.program_id||!i.selectedSaleRecord.program_id.id},null,8,["modelValue","options","disabled"]),i.selectedSaleRecord.package_id&&i.selectedSaleRecord.package_id.id?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[21]||(t[21]=(0,o.D$)((e=>n.togglePackageDetails(i.selectedSaleRecord.package_id)),["prevent"])),class:"mt-2 cursor-pointer text-custom-orange text-left hover:underline"},(0,l.v_)(i.isShowingPackageDetails?"ปิดรายละเอียด":"ดูรายละเอียดแพ็คเกจ"),1)):(0,a.Q3)("",!0),i.packageDetails?((0,a.uX)(),(0,a.CE)("div",gE,[t[107]||(t[107]=(0,a.Lk)("h3",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,a.Lk)("p",null,[t[91]||(t[91]=(0,a.Lk)("strong",null,"Package:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.name),1)]),(0,a.Lk)("p",null,[t[92]||(t[92]=(0,a.Lk)("strong",null,"ราคา:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(i.packageDetails.price)),1)]),(0,a.Lk)("p",null,[t[93]||(t[93]=(0,a.Lk)("strong",null,"Package Details for Purchase Summary:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_detail),1)]),(0,a.Lk)("p",null,[t[94]||(t[94]=(0,a.Lk)("strong",null,"Package Validity:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_validity)+" วัน ",1)]),(0,a.Lk)("p",null,[t[95]||(t[95]=(0,a.Lk)("strong",null,"Total Days:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_days)+" วัน ",1)]),(0,a.Lk)("p",null,[t[96]||(t[96]=(0,a.Lk)("strong",null,"# of Boxes/Day:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.boxes_per_day)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[97]||(t[97]=(0,a.Lk)("strong",null,"Total Boxes:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_boxes)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[98]||(t[98]=(0,a.Lk)("strong",null,"รายละเอียดโปรโมชัน:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.promotion_detail),1)]),(0,a.Lk)("div",mE,[(0,a.Lk)("div",yE,[(0,a.Lk)("p",null,[t[99]||(t[99]=(0,a.Lk)("strong",null,"M or A or D:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_mad),1)])]),(0,a.Lk)("div",kE,[(0,a.Lk)("p",null,[t[100]||(t[100]=(0,a.Lk)("strong",null,"Dessert:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dessert),1)])]),(0,a.Lk)("div",fE,[(0,a.Lk)("p",null,[t[101]||(t[101]=(0,a.Lk)("strong",null,"Brittles:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_brittles),1)])]),(0,a.Lk)("div",bE,[(0,a.Lk)("p",null,[t[102]||(t[102]=(0,a.Lk)("strong",null,"Energy Balls:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_energy_balls),1)])]),(0,a.Lk)("div",xE,[(0,a.Lk)("p",null,[t[103]||(t[103]=(0,a.Lk)("strong",null,"Dressing:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dressing),1)])]),(0,a.Lk)("div",_E,[(0,a.Lk)("p",null,[t[104]||(t[104]=(0,a.Lk)("strong",null,"Yoghurt:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_yoghurt),1)])]),(0,a.Lk)("div",wE,[(0,a.Lk)("p",null,[t[105]||(t[105]=(0,a.Lk)("strong",null,"Granola:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_granola),1)])]),(0,a.Lk)("div",vE,[(0,a.Lk)("p",null,[t[106]||(t[106]=(0,a.Lk)("strong",null,"เครดิตที่แถม (บาท):",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_credit),1)])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[t[109]||(t[109]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดโปรโมชันเพิ่มเติม (นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[22]||(t[22]=e=>i.selectedSaleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.other_promotion_detail]])]),(0,a.Lk)("div",LE,[t[118]||(t[118]=(0,a.Lk)("strong",{class:"text-custom-orange text-lg"},"จำนวนที่แถม",-1)),(0,a.Lk)("div",DE,[(0,a.Lk)("div",PE,[t[110]||(t[110]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[23]||(t[23]=e=>i.selectedSaleRecord.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_mad]])]),(0,a.Lk)("div",CE,[t[111]||(t[111]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[24]||(t[24]=e=>i.selectedSaleRecord.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dessert]])]),(0,a.Lk)("div",SE,[t[112]||(t[112]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[25]||(t[25]=e=>i.selectedSaleRecord.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_brittles]])]),(0,a.Lk)("div",RE,[t[113]||(t[113]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[26]||(t[26]=e=>i.selectedSaleRecord.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_energy_balls]])])]),(0,a.Lk)("div",TE,[(0,a.Lk)("div",ME,[t[114]||(t[114]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[27]||(t[27]=e=>i.selectedSaleRecord.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dressing]])]),(0,a.Lk)("div",EE,[t[115]||(t[115]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[28]||(t[28]=e=>i.selectedSaleRecord.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_yoghurt]])]),(0,a.Lk)("div",FE,[t[116]||(t[116]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[29]||(t[29]=e=>i.selectedSaleRecord.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_granola]])]),(0,a.Lk)("div",zE,[t[117]||(t[117]=(0,a.Lk)("label",{for:"freeCredit",class:"block font-bold text-gray-700"},"เครดิตที่แถม (บาท)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeCredit","onUpdate:modelValue":t[30]||(t[30]=e=>i.selectedSaleRecord.free_credit=e),type:"number",min:"0",step:"1",placeholder:"กรอกเครดิตที่แถม (บาท)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_credit]])])])]),(0,a.Lk)("div",AE,[(0,a.Lk)("div",OE,[t[120]||(t[120]=(0,a.Lk)("label",{for:"editDiscount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",NE,[t[119]||(t[119]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[31]||(t[31]=e=>i.selectedSaleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.discount]])])]),(0,a.Lk)("div",XE,[t[122]||(t[122]=(0,a.Lk)("label",{for:"editExtraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",VE,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[32]||(t[32]=e=>i.selectedSaleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.selectedSaleRecord.extra_charge]]),t[121]||(t[121]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),e.computedEditTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",QE,[(0,a.Lk)("div",IE,[(0,a.Lk)("label",UE," มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(e.computedEditTotalPackagePrice)),1),(0,a.Lk)("p",$E,"ราคาแพ็กเกจ: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.package_price)),1),(0,a.Lk)("p",BE,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.discount)),1),(0,a.Lk)("p",WE,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(e.computedEditExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[123]||(t[123]=(0,a.Lk)("label",{for:"editReceiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.receive_food_id,"onUpdate:modelValue":t[33]||(t[33]=e=>i.selectedSaleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",qE,[(0,a.Lk)("div",ZE,[t[124]||(t[124]=(0,a.Lk)("label",{for:"editZone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone1_id,"onUpdate:modelValue":t[34]||(t[34]=e=>i.selectedSaleRecord.zone1_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",jE,[t[125]||(t[125]=(0,a.Lk)("label",{for:"editZone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[35]||(t[35]=e=>i.selectedSaleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone1_quantity]])])]),e.computedEditZone1Price>0?((0,a.uX)(),(0,a.CE)("div",JE,[(0,a.Lk)("label",KE,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,l.v_)(n.formatPrice(e.computedEditZone1Price)),1),(0,a.Lk)("p",HE,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",YE,[(0,a.Lk)("div",GE,[t[126]||(t[126]=(0,a.Lk)("label",{for:"editZone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone2_id,"onUpdate:modelValue":t[36]||(t[36]=e=>i.selectedSaleRecord.zone2_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",eF,[t[127]||(t[127]=(0,a.Lk)("label",{for:"editZone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[37]||(t[37]=e=>i.selectedSaleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone2_quantity]])])]),e.computedEditZone2Price>0?((0,a.uX)(),(0,a.CE)("div",tF,[(0,a.Lk)("label",sF,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,l.v_)(n.formatPrice(e.computedEditZone2Price)),1),(0,a.Lk)("p",oF,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",aF,[(0,a.Lk)("div",rF,[t[128]||(t[128]=(0,a.Lk)("label",{for:"editZone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone3_id,"onUpdate:modelValue":t[38]||(t[38]=e=>i.selectedSaleRecord.zone3_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",lF,[t[129]||(t[129]=(0,a.Lk)("label",{for:"editZone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[39]||(t[39]=e=>i.selectedSaleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone3_quantity]])])]),e.computedEditZone3Price>0?((0,a.uX)(),(0,a.CE)("div",iF,[(0,a.Lk)("label",nF,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,l.v_)(n.formatPrice(e.computedEditZone3Price)),1),(0,a.Lk)("p",dF,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",cF,[(0,a.Lk)("div",uF,[t[130]||(t[130]=(0,a.Lk)("label",{for:"editZone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone_outsource_id,"onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedSaleRecord.zone_outsource_id=e),options:n.filteredOutsource,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",pF,[t[131]||(t[131]=(0,a.Lk)("label",{for:"editZone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedSaleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone_outsource_quantity]])])]),e.computedEditZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",hF,[(0,a.Lk)("label",gF,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(e.computedEditZoneOutsourcePrice)),1),(0,a.Lk)("p",mF,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),e.computedEditTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",yF,[(0,a.Lk)("label",kF,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(e.computedEditTotalDeliveryPrice)),1),(0,a.Lk)("p",fF,"ค่าจัดส่งรวม In-house Riders: "+(0,l.v_)(n.formatPrice(e.computedEditTotalZonePrice)),1),(0,a.Lk)("p",bF,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(e.computedEditZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),e.computedEditTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",xF,[(0,a.Lk)("label",_F,"มูลค่าขายรวม: "+(0,l.v_)(n.formatPrice(e.computedEditTotalPrice)),1),(0,a.Lk)("div",null,[(0,a.Lk)("p",wF,"มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(e.computedEditTotalPackagePrice)),1)]),(0,a.Lk)("p",vF,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(e.computedEditTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",LF,[(0,a.Lk)("div",DF,[t[132]||(t[132]=(0,a.Lk)("label",{for:"editSellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.seller_name_id,"onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedSaleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",PF,[t[133]||(t[133]=(0,a.Lk)("label",{for:"editStartDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[43]||(t[43]=e=>i.selectedSaleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.start_date]])])]),(0,a.Lk)("div",CF,[(0,a.Lk)("div",SF,[t[134]||(t[134]=(0,a.Lk)("label",{for:"editDeliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.delivery_round_id,"onUpdate:modelValue":t[44]||(t[44]=e=>i.selectedSaleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",RF,[t[135]||(t[135]=(0,a.Lk)("label",{for:"editSelectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.select_food_id,"onUpdate:modelValue":t[45]||(t[45]=e=>i.selectedSaleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",TF,[t[136]||(t[136]=(0,a.Lk)("label",{for:"editNote",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[46]||(t[46]=e=>i.selectedSaleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.note]])])]),(0,a.Lk)("div",MF,[(0,a.Lk)("div",EF,[(0,a.Lk)("button",{onClick:t[47]||(t[47]=(...t)=>e.closeEditModal&&e.closeEditModal(...t)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...t)=>e.saveChanges&&e.saveChanges(...t)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",FF,[(0,a.Lk)("button",{onClick:t[49]||(t[49]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[137]||(t[137]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,zF),(0,a.Lk)("div",AF,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[50]||(t[50]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[51]||(t[51]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,OF)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[52]||(t[52]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[53]||(t[53]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[54]||(t[54]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[138]||(t[138]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,NF)]),(0,a.Lk)("div",XF,[(0,a.Lk)("div",VF,[(0,a.Lk)("div",QF,[t[139]||(t[139]=(0,a.Lk)("strong",{class:"text-xl"},"Delivery Report",-1)),(0,a.Lk)("span",IF,"Date : "+(0,l.v_)(n.formattedDate),1)]),t[140]||(t[140]=(0,a.Lk)("div",{class:"flex items-center space-x-4"},[(0,a.Lk)("img",{src:Le,alt:"Logo",class:"w-48 h-18"})],-1))]),(0,a.Lk)("table",UF,[t[141]||(t[141]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-gray-100 text-black text-[12px]"},[(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"20%"}},"ชื่อ"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"5%"}},"โทรศัพท์"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"12%"}},"รอบการจัดส่ง"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"12%"}},"ผู้จัดส่ง"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"12%"}},"โซนการจัดส่ง"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"30%"}},"ที่อยู่")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.saleRecords,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:"bg-white border-b border-gray-300 hover:bg-gray-100"},[(0,a.Lk)("td",$F,(0,l.v_)(e.name),1),(0,a.Lk)("td",BF,[(0,a.Lk)("div",WF,(0,l.v_)(e.tel),1)]),(0,a.Lk)("td",qF,(0,l.v_)(e.delivery_round),1),(0,a.Lk)("td",ZF,(0,l.v_)(e.deliver),1),(0,a.Lk)("td",jF,(0,l.v_)(e.delivery_zone),1),(0,a.Lk)("td",JF,[n.getCustomerAddress1(e.customer_id)||n.getCustomerAddress2(e.customer_id)||n.getCustomerAddress3(e.customer_id)?((0,a.uX)(),(0,a.CE)("ul",KF,[n.getCustomerAddress1(e.customer_id)?((0,a.uX)(),(0,a.CE)("li",HF,(0,l.v_)(n.getCustomerAddress1(e.customer_id)),1)):(0,a.Q3)("",!0),n.getCustomerAddress2(e.customer_id)?((0,a.uX)(),(0,a.CE)("li",YF,(0,l.v_)(n.getCustomerAddress2(e.customer_id)),1)):(0,a.Q3)("",!0),n.getCustomerAddress3(e.customer_id)?((0,a.uX)(),(0,a.CE)("li",GF,(0,l.v_)(n.getCustomerAddress3(e.customer_id)),1)):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])])))),128))])])],512)])],64)}var tz=s(5982),sz=s(144),oz={setup(){const e=(0,sz.KR)(),{handlePrint:t}=(0,tz.Iv)({content:e,documentTitle:"Delivery Report"});return{componentRef:e,handlePrint:t}},components:{Multiselect:fp.Ay},data(){return{headers:["#","ชื่อ/นามสกุล (ไทย)","โทร","รอบ","ผู้ส่ง","โซนจัดส่งตามที่อยู่ตาม Routing","ที่อยู่ 1","ที่อยู่ 2","ที่อยู่ 3",""],headerWidths:["5%","10%","5%","10%","10%","10%","12%","12%","12%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],selectedAddressType:{},saleRecord:[],customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:[],isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isEditing:!1,editingSaleRecordId:null}},computed:{totalPages(){return Math.ceil(this.filteredSaleRecordsPaid.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{name:this.selectedSaleRecord.customer.name,package:this.selectedSaleRecord.package.package_detail,promotion_detail:this.selectedSaleRecord.package.promotion_detail,receive_food:this.totalReceiveFood,start_date:this.formatDate(this.selectedSaleRecord.start_date),sellect_by:this.getSelectFood(this.selectedSaleRecord.select_food_id),delivery_date:this.selectedSaleRecord.customer.delivery_date,delivery:this.getDeliveryRoundName(this.selectedSaleRecord.delivery_round_id),package_price:this.formatPrice(this.selectedSaleRecord.package.price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),note:this.selectedSaleRecord.note}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{seller_name_id:this.getSellerName(this.selectedSaleRecord.seller_name_id),name:this.selectedSaleRecord.customer?.name||"",package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),promotion_type:this.getPromotionTypeName(this.selectedSaleRecord.promotion_type_id)||"",program:this.getProgramName(this.selectedSaleRecord.program_id),package:this.selectedSaleRecord.package?.name||"",package_price:this.formatPrice(this.selectedSaleRecord.package?.price),promotion_detail:this.selectedSaleRecord.package?.promotion_detail||"",other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||"",free_mad:this.selectedSaleRecord.free_mad,free_dessert:this.selectedSaleRecord.free_dessert,free_brittles:this.selectedSaleRecord.free_brittles,free_energy_balls:this.selectedSaleRecord.free_energy_balls,free_dressing:this.selectedSaleRecord.free_dressing,free_yoghurt:this.selectedSaleRecord.free_yoghurt,free_granola:this.selectedSaleRecord.free_granola,free_credit:this.selectedSaleRecord.free_credit,discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPercent(this.selectedSaleRecord.extra_charge),extra_charge_price:this.formatPrice(this.selectedSaleRecord.extra_charge_price),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),receive_food_id:this.getReceiveFoodName(this.selectedSaleRecord.receive_food_id),zone1_id:this.getZoneName(this.selectedSaleRecord.zone1_id),total_zone1_price:this.formatPrice(this.selectedSaleRecord.total_zone1_price),zone2_id:this.getZoneName(this.selectedSaleRecord.zone2_id),total_zone2_price:this.formatPrice(this.selectedSaleRecord.total_zone2_price),zone3_id:this.getZoneName(this.selectedSaleRecord.zone3_id),total_zone3_price:this.formatPrice(this.selectedSaleRecord.total_zone3_price),zone_outsource_id:this.getZoneName(this.selectedSaleRecord.zone_outsource_id),total_zone_outsource_price:this.formatPrice(this.selectedSaleRecord.total_zone_outsource_price),total_delivery_zone_price:this.formatPrice(this.selectedSaleRecord.total_delivery_zone_price),total_delivery_price:this.formatPrice(this.selectedSaleRecord.total_delivery_price),total_price:this.formatPrice(this.selectedSaleRecord.total_price),payment_status:this.getPaymentStatusText(this.selectedSaleRecord.payment_status),paid_date:this.formatDate(this.selectedSaleRecord.paid_date),payment_type_id:this.getPaymentTypeName(this.selectedSaleRecord.payment_type_id),start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),receive_date:this.formatDate(this.selectedSaleRecord.start_date),note:this.selectedSaleRecord.note||"",package_detail:this.selectedSaleRecord.package?.package_detail||"",mad:this.selectedSaleRecord.mad,dessert:this.selectedSaleRecord.dessert,brittles:this.selectedSaleRecord.brittles,energy_balls:this.selectedSaleRecord.energy_balls,dressing:this.selectedSaleRecord.dressing,yoghurt:this.selectedSaleRecord.yoghurt,granola:this.selectedSaleRecord.granola,credit:this.selectedSaleRecord.credit,delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",select_food_id:this.getSelectFood(this.selectedSaleRecord.select_food_id)}:{name:"",expiry_date:""}},formattedDate(){return(new Date).toLocaleDateString("en-UK",{year:"numeric",month:"numeric",day:"numeric"})},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},filteredSaleRecordsPaid(){return this.saleRecords.filter((e=>"paid"===e.payment_status)).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}))},filteredPackageTypes(){return this.packageTypes.filter((e=>!e.name.toLowerCase().includes("additional sales")&&!e.name.toLowerCase().includes("consignment")))},filteredAdditionalTypes(){return this.additionalTypes.filter((e=>e.name.startsWith("AFF")))},filteredPrograms(){return this.programs.filter((e=>!e.name.startsWith("Happy")))},filteredInhouse(){return this.zoneDeliveries.filter((e=>e.name.startsWith("AFF")))},filteredOutsource(){return this.zoneDeliveries.filter((e=>!e.name.startsWith("AFF")))},...(0,Ze.L8)(["saleRecords"])},methods:{...(0,Ze.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.filteredSaleRecordsPaid.slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.filteredSaleRecordsPaid=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},filterEditPrograms(){this.selectedSaleRecord.promotion_type_id&&this.selectedSaleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.selectedSaleRecord.promotion_type_id.id)):this.programs=this.allPrograms},filterEditPackages(){this.selectedSaleRecord.program_id&&this.selectedSaleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.selectedSaleRecord.program_id.id)):this.packages=this.allPackages},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n,d,c,u,p]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers-hhb"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/zone-delivery-types"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types"),ke.A.get("http://127.0.0.1:3333/delivery-rounds"),ke.A.get("http://127.0.0.1:3333/receive-foods"),ke.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=r.data,this.zoneDeliveryTypes=l.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ke.A.get("http://127.0.0.1:3333/customers-hhb");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},getCustomerAddress1(e){const t=this.customers.find((t=>t.id===e));return t?t.address_1:"ไม่พบข้อมูล"},getCustomerAddress2(e){const t=this.customers.find((t=>t.id===e));return t?t.address_2:"ไม่พบข้อมูล"},getCustomerAddress3(e){const t=this.customers.find((t=>t.id===e));return t?t.address_3:"ไม่พบข้อมูล"},startEditing(e){this.isEditing=!0,this.editingSaleRecordId=e.id},saveUpdatedDelivery(e){this.updateDelivery(e),this.isEditing=!1,this.editingSaleRecordId=null},cancelEditing(){this.fetchSaleRecords(),this.isEditing=!1,this.editingSaleRecordId=null},async updateDelivery(e){try{await ke.A.put(`http://127.0.0.1:3333/customers-hhb/${e.id}/delivery`,{delivery_round:e.delivery_round||"",deliver:e.deliver||"",delivery_zone:e.delivery_zone||""}),await this.fetchSaleRecords(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(t){console.error("เกิดข้อผิดพลาดในการอัปเดตข้อมูลการจัดส่ง:",t),this.showErrorToastNotification("กิดข้อผิดพลาดในการแก้ไข!")}},getCustomerTel(e){const t=this.customers.find((t=>t.id===e));return t?t.tel:"ไม่พบข้อมูล"},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={seller_name_id:"ผู้ขาย",name:"ชื่อ-สกุลลูกค้า",package_type:"Package Type",promotion_type:"Promotion Type",program:"Program",package:"แพ็กเกจที่ซื้อ ",package_price:"ราคาแพ็กเกจ",promotion_detail:"รายละเอียดโปรโมชัน",other_promotion_detail:"รายละเอียดโปรโมชันเพิ่มเติม(นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",free_mad:"จำนวนกล่องที่แถม M or A or D",free_dessert:"จำนวนกล่องที่แถม Dessert",free_brittles:"จำนวนกล่องที่แถม Brittles",free_energy_balls:"จำนวนกล่องที่แถม Energy Balls",free_dressing:"จำนวนกล่องที่แถม Dressing",free_yoghurt:"จำนวนกล่องที่แถม Yoghurt",free_granola:"จำนวนกล่องที่แถม Granola",free_credit:"เครดิตที่แถม (บาท)",discount:"ส่วนลดเพิ่มเติมจากโปรฯ ประจำเดือน (ถ้ามี)",extra_charge:"Extra Charge (%)",extra_charge_price:"มูลค่า Extra Charge",total_package_price:"มูลค่าแพ็กเกจรวม",receive_food_id:"วิธีการรับอาหาร",zone1_id:"In-house Riders (ที่อยู่ 1)",total_zone1_price:"ค่าจัดส่งรวม (ที่อยู่ 1)",zone2_id:"In-house Riders (ที่อยู่ 2)",total_zone2_price:"ค่าจัดส่งรวม (ที่อยู่ 2)",zone3_id:"In-house Riders (ที่อยู่ 3)",total_zone3_price:"ค่าจัดส่งรวม (ที่อยู่ 3)",zone_outsource_id:"Outsource Riders",total_zone_outsource_price:"ค่าจัดส่งรวม Outsource",total_delivery_zone_price:"ค่าจัดส่งรวม In-house Riders",total_delivery_price:"รวมค่าจัดส่งทั้งหมด",total_price:"มูลค่าขายรวม",payment_status:"สถานะการชำระเงิน",paid_date:"วันที่ชำระเงิน",payment_type_id:"วิธีการชำระเงิน",receive_date:"วันเริ่มรับอาหารวันแรก",sellect_by:"เลือกอาหารโดย",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",note:"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",package_detail:"ข้อมูลแพ็กเกจ(สำหรับสรุปให้ลูกค้า)",mad:"M or A or D",dessert:"Dessert",brittles:"Brittles",energy_balls:"Energy Balls",dressing:"Dressing",yoghurt:"Yoghurt",granola:"Granola",credit:"Cash Credit ที่ได้รับ",delivery_date:"วันที่ต้องการรับอาหาร",select_food_id:"วิธีการเลือกอาหาร"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},onViewResultSaleRecord(e){this.selectedSaleRecord=e,this.isResultModalOpen=!0,this.moreOpenDropdownIndex=null},closeResultModal(){this.isResultModalOpen=!1},formatResultLabel(e){const t={name:"🏷 คุณ",package:"▶️ แพ็คเกจ",promotion_detail:"🔥",receive_food:"▶️ อาหารที่ได้รับ",start_date:"▶️ วันรับอาหารวันแรก",sellect_by:"▶️ เลือกอาหารโดย",delivery_date:"▶️ วันที่รับอาหาร",delivery:"▶️ จัดส่ง",package_price:"▶️ ราคาแพ็คเกจ",extra_charge:"▶️ Extra Chrage",discount:"▶️ ส่วนลด",total_delivery_price:"▶️ ค่าจัดส่ง",total_price:"▶️ ยอดชำระ",expiry_date:"▶️ วันหมดอายุแพ็คเกจ",note:"▶️ หมายเหตุ:"};return t[e]||e},copyResultModalContent(){let e=this.$refs.modalContent.innerText;if(e=e.replace(/\n\s*\n/g,"\n"),navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)})).catch((e=>{console.error("ไม่สามารถคัดลอกข้อความ:",e)}));else{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)}catch(t){console.error("ไม่สามารถคัดลอกข้อความ:",t)}finally{document.body.removeChild(s)}}},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},searchQuery(){this.updatePage()},currentPage(){this.updatePage()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const az=(0,_e.A)(oz,[["render",ez]]);var rz=az;const lz={class:"mt-4 flex"},iz={class:"w-1/5"},nz={class:"mb-4"},dz={class:"flex items-center space-x-3 py-2"},cz={class:"mb-4 space-y-2"},uz=["onClick"],pz={class:"w-4/5 p-4"},hz={class:"font-bold text-xl mb-4"},gz={key:0,class:"text-center text-gray-600"},mz={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3"},yz={class:"mb-4"},kz=["src"],fz={key:1,class:"bg-gray-100 w-full h-48 rounded-md flex items-center justify-center"},bz={class:"text-lg font-semibold block"},xz={class:"block"},_z={class:"block text-custom-orange font-bold"},wz={class:"text-gray-700 text-sm"},vz={class:"mr-2"},Lz={class:"mr-2"},Dz={class:"mr-2"},Pz={class:"mr-2"},Cz={class:"mt-auto flex w-full space-x-2"},Sz={class:"flex items-center justify-center w-1/2 space-x-2 p-2"},Rz=["onClick"],Tz=["onUpdate:modelValue"],Mz=["onClick"],Ez={class:"w-1/2 p-2 flex justify-end"},Fz=["onClick"];function zz(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[t[19]||(t[19]=(0,a.Lk)("h1",{class:"mt-4 font-bold text-custom-orange text-2xl mb-4 text-center"},"Premium Health",-1)),(0,a.Lk)("div",lz,[(0,a.Lk)("div",iz,[(0,a.Lk)("div",nz,[(0,a.Lk)("div",dz,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>n.changeDate(-1)),class:"flex items-center"},t[6]||(t[6]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[7]||(t[7]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>n.changeDate(1)),class:"flex items-center"},t[8]||(t[8]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{type:"date",id:"menuDate","onUpdate:modelValue":t[3]||(t[3]=e=>i.selectedDate=e),class:"p-2 border rounded-md w-auto",onChange:t[4]||(t[4]=(...e)=>n.fetchMenusForSelectedDate&&n.fetchMenusForSelectedDate(...e))},null,544),[[o.Jo,i.selectedDate]])])]),t[9]||(t[9]=(0,a.Lk)("h1",{class:"font-bold text-xl mb-4"},"ฟิลเตอร์เมนู",-1)),(0,a.Lk)("div",cz,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=e=>i.selectedMealType=""),class:(0,l.C4)(["w-full text-left py-2 hover:text-custom-orange",""===i.selectedMealType?"text-custom-orange font-bold":"text-gray-600"])}," ทุกประเภท ",2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMealTypes,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e.id,onClick:t=>i.selectedMealType=e.id,class:(0,l.C4)(["w-full py-2 text-left hover:text-custom-orange",i.selectedMealType===e.id?"text-custom-orange font-bold":"text-gray-600"])},(0,l.v_)(e.name),11,uz)))),128))])]),(0,a.Lk)("div",pz,[(0,a.Lk)("h1",hz,"รายการอาหารประจำวันที่ "+(0,l.v_)(n.formatDate(i.selectedDate))+" ("+(0,l.v_)(n.formatDateEng(i.selectedDate))+")",1),0===i.todayMenus.length?((0,a.uX)(),(0,a.CE)("div",gz,t[10]||(t[10]=[(0,a.Lk)("strong",{class:"text-2xl"},"ไม่มีเมนู",-1)]))):(0,a.Q3)("",!0),(0,a.Lk)("div",mz,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMenus,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"p-4 border rounded-lg shadow-md bg-white flex flex-col h-full mb-6"},[(0,a.Lk)("div",yz,[n.getMenuImage(e.menu_id)?((0,a.uX)(),(0,a.CE)("img",{key:0,src:`http://127.0.0.1:3333/images/${n.getMenuImage(e.menu_id)}`,alt:"Menu Image",class:"min-h-48 max-h-48 w-full object-cover rounded"},null,8,kz)):((0,a.uX)(),(0,a.CE)("div",fz,t[11]||(t[11]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-4xl text-gray-500"}," hide_image ",-1)])))]),(0,a.Lk)("span",bz,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("span",xz,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("span",_z,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("div",wz,[(0,a.Lk)("span",vz,(0,l.v_)(n.getMenuCal(e.menu_id))+" Cal",1),(0,a.Lk)("span",Lz,[t[12]||(t[12]=(0,a.eW)("|")),t[13]||(t[13]=(0,a.Lk)("strong",null," Protein: ",-1)),(0,a.eW)(" "+(0,l.v_)(n.getMenuProtein(e.menu_id))+" g",1)]),(0,a.Lk)("span",Dz,[t[14]||(t[14]=(0,a.eW)("|")),t[15]||(t[15]=(0,a.Lk)("strong",null," Carbohydrate: ",-1)),(0,a.eW)((0,l.v_)(n.getMenuCarb(e.menu_id))+" g",1)]),(0,a.Lk)("span",Pz,[t[16]||(t[16]=(0,a.eW)("|")),t[17]||(t[17]=(0,a.Lk)("strong",null," Fat: ",-1)),(0,a.eW)((0,l.v_)(n.getMenuFat(e.menu_id))+" g",1)])]),(0,a.Lk)("div",Cz,[(0,a.Lk)("div",Sz,[(0,a.Lk)("button",{onClick:t=>n.adjustQuantity(e,-1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"-",8,Rz),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,min:"0",placeholder:"จำนวน",class:"p-2 border rounded-md w-16 text-center input-no-spinner"},null,8,Tz),[[o.Jo,e.quantity,void 0,{number:!0}]]),(0,a.Lk)("button",{onClick:t=>n.adjustQuantity(e,1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"+",8,Mz)]),(0,a.Lk)("div",Ez,[(0,a.Lk)("button",{onClick:t=>n.orderMenu(e),class:"px-4 py-2 w-full bg-custom-orange text-white rounded-md hover:bg-custom-orange-hover transition flex items-center space-x-2 justify-center"},t[18]||(t[18]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," shopping_cart ",-1),(0,a.Lk)("span",null,"สั่งซื้อ",-1)]),8,Fz)])])])))),128))])])])],64)}s(3949);var Az={data(){return{menus:[],todayMenus:[],meal_types:[],selectedDate:this.getTodayDate(),selectedMealType:""}},computed:{filteredMenus(){return 0===this.todayMenus.length?[]:this.selectedMealType?this.todayMenus.filter((e=>this.getMealTypeID(e.menu_id)===this.selectedMealType)):this.todayMenus},filteredMealTypes(){const e=new Set(this.todayMenus.map((e=>this.getMealTypeID(e.menu_id))));return this.meal_types.filter((t=>e.has(t.id)))}},methods:{getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusForSelectedDate()},setToday(){this.selectedDate=this.getTodayDate(),this.fetchMenusForSelectedDate()},async fetchMenusForSelectedDate(){try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-ph/menus-by-day/${this.selectedDate}`);console.log("API Response:",e.data),e.data.menus&&e.data.menus.length>0?(this.todayMenus=e.data.menus,this.todayMenus.forEach((e=>{e.quantity=0})),console.log("Date",this.selectedDate)):this.todayMenus=[]}catch(e){this.todayMenus=[]}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},getMenuCal(e){const t=this.menus.find((t=>t.id===e));return t?t.cal:null},getMenuProtein(e){const t=this.menus.find((t=>t.id===e));return t?t.protein:null},getMenuFat(e){const t=this.menus.find((t=>t.id===e));return t?t.fat:null},getMenuCarb(e){const t=this.menus.find((t=>t.id===e));return t?t.carb:null},getMenuImage(e){const t=this.menus.find((t=>t.id===e));return t?t.image:null},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatDateEng(e){const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e).toLocaleDateString("en-US",t);return s},orderMenu(e){e.quantity&&e.quantity>0?ke.A.post("http://127.0.0.1:3333/order-ph",{menu_id:e.menu_id,quantity:e.quantity,order_date:this.selectedDate}).then((t=>{console.log("Order Success:",t.data),alert(`สั่งซื้อ ${e.quantity} ชิ้น ${this.getMenuEnglishName(e.menu_id)} สำหรับวันที่ ${this.selectedDate} เรียบร้อยแล้ว`),e.quantity=0})).catch((e=>{console.error("Order Error:",e),alert("เกิดข้อผิดพลาดในการสั่งซื้อ")})):alert("กรุณาระบุจำนวนที่ต้องการ")},adjustQuantity(e,t){const s=e.quantity+t;s>=0&&(e.quantity=s)}},created(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},mounted(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},watch:{selectedDate(){this.fetchMenusForSelectedDate()}}};const Oz=(0,_e.A)(Az,[["render",zz],["__scopeId","data-v-1b918d03"]]);var Nz=Oz;function Xz(e,t,s,o,r,i){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("h1",null,"Welcome, "+(0,l.v_)(r.user.username),1),(0,a.Lk)("p",null,"Email: "+(0,l.v_)(r.user.email),1),(0,a.Lk)("p",null,"Name: "+(0,l.v_)(r.user.fullname),1)])}var Vz={data(){return{user:{},error:null}},created(){this.fetchProfile()},methods:{async fetchProfile(){try{this.user=await be.getProfile()}catch(e){this.error=e.message||"Failed to fetch profile"}},async logout(){try{await be.logout(),this.$router.push("/test")}catch(e){this.error=e.message||"Logout failed"}}}};const Qz=(0,_e.A)(Vz,[["render",Xz]]);var Iz=Qz;const Uz={class:"flex mt-[-20px] space-x-2 items-center relative"},$z={class:"px-4 flex items-center space-x-1 mr-auto"},Bz={class:"text-m text-custom-orange font-bold"},Wz={class:"sort relative inline-block",ref:"sortDropdown"},qz={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Zz={class:"list-none p-0 m-0"},jz={key:0,class:"material-symbols-outlined text-sm"},Jz={key:0,class:"material-symbols-outlined text-sm"},Kz={class:"flex w-[250px] relative"},Hz={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},Yz={class:"bg-custom-orange text-white"},Gz={class:"px-4 py-2 align-top pb-5"},eA={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},tA={class:"px-4 py-2 align-top pb-5"},sA={class:"px-4 py-2 align-top pb-5"},oA={class:"flex items-center"},aA={class:"flex items-center"},rA={class:"px-4 py-2 align-top pb-5"},lA={class:"px-4 py-2 align-top pb-5"},iA=["onClick"],nA={key:0},dA={class:"list-none p-0 m-0"},cA=["onClick"],uA=["onClick"],pA=["onClick"],hA={key:1},gA={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},mA={class:"list-none p-0 m-0"},yA=["onClick"],kA=["onClick"],fA=["onClick"],bA={key:2},xA={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},_A={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},wA={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},vA={class:"flex space-x-2"},LA={class:"pb-2 pt-2 overflow-y-auto flex-grow"},DA={class:"pl-3 pr-3"},PA={class:"mr-2"},CA={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},SA={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},RA={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},TA={class:"flex space-x-2"},MA={class:"p-6 space-y-4 overflow-y-auto flex-grow"},EA={class:"mb-4"},FA={class:"mb-4"},zA={class:"flex space-x-4"},AA={class:"w-1/2"},OA={class:"w-1/2"},NA={class:"flex space-x-4"},XA={class:"text-gray-700"},VA={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},QA={class:"flex space-x-2"},IA={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},UA={class:"bg-white rounded-lg shadow-md w-1/3"},$A={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},BA={class:"flex justify-end space-x-2 p-4 border-t"},WA={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},qA=["disabled"],ZA={class:"flex items-center space-x-1"},jA=["onClick"],JA=["disabled"];function KA(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[37]||(t[37]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[39]||(t[39]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[38]||(t[38]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",null,[(0,a.Lk)("div",Uz,[(0,a.Lk)("div",$z,[t[40]||(t[40]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"person",-1)),t[41]||(t[41]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนลูกค้าทั้งหมด: ",-1)),(0,a.Lk)("span",Bz,(0,l.v_)(i.customers.length)+" คน",1)]),(0,a.Lk)("div",Wz,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[42]||(t[42]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[43]||(t[43]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto transition-transform duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",qz,[(0,a.Lk)("ul",Zz,[(0,a.Lk)("li",{onClick:t[3]||(t[3]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[44]||(t[44]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",jz,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[4]||(t[4]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[45]||(t[45]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",Jz,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[5]||(t[5]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[46]||(t[46]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Kz,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[7]||(t[7]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[8]||(t[8]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",Hz,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Yz,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredCustomers.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(n.filteredCustomers,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,a.Lk)("td",Gz,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",eA,(0,l.v_)(e.name),1),(0,a.Lk)("td",tA,(0,l.v_)(e.customer_id),1),(0,a.Lk)("td",sA,[(0,a.Lk)("div",oA,[t[47]||(t[47]=(0,a.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"mail",-1)),(0,a.eW)((0,l.v_)(e.email),1)]),(0,a.Lk)("div",aA,[t[48]||(t[48]=(0,a.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"phone",-1)),(0,a.eW)((0,l.v_)(e.tel),1)])]),(0,a.Lk)("td",rA,(0,l.v_)(e.address_1),1),(0,a.Lk)("td",lA,(0,l.v_)(e.nearby_places),1),(0,a.Lk)("td",{class:"px-4 py-2 text-right relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(s)},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,iA),n.filteredCustomers.length>4?((0,a.uX)(),(0,a.CE)("div",nA,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)([n.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",dA,[(0,a.Lk)("li",{onClick:t=>n.onViewDetails(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,cA),(0,a.Lk)("li",{onClick:t=>n.onEdit(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,uA),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,pA)])],2)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",hA,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",gA,[(0,a.Lk)("ul",mA,[(0,a.Lk)("li",{onClick:t=>n.onViewDetails(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,yA),(0,a.Lk)("li",{onClick:t=>n.onEdit(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,kA),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,fA)])])):(0,a.Q3)("",!0)]))],512)])))),128)):(0,a.Q3)("",!0),n.filteredCustomers.length<6&&n.filteredCustomers.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredCustomers.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[50]||(t[50]=[(0,a.Lk)("td",{colspan:"7",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredCustomers.length?((0,a.uX)(),(0,a.CE)("tr",bA,t[51]||(t[51]=[(0,a.Lk)("td",{colspan:"7",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",xA,[(0,a.Lk)("div",_A,[(0,a.Lk)("div",wA,[t[52]||(t[52]=(0,a.Lk)("span",{class:"font-bold"},[(0,a.Lk)("h2",null,"รายละเอียดลูกค้า")],-1)),(0,a.Lk)("div",vA,[(0,a.Lk)("span",{onClick:t[10]||(t[10]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",LA,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailsCustomer,((e,t,s)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,l.C4)([s%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none","p-2 rounded-md"])},[(0,a.Lk)("p",DA,[(0,a.Lk)("strong",PA,(0,l.v_)(n.formatLabel(t)),1),(0,a.Lk)("span",{style:(0,l.Tr)({whiteSpace:"note"===t?"pre-wrap":"normal",display:"inline-block",width:"100%"})},(0,l.v_)(e),5)])],2)))),128))])])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",CA,[(0,a.Lk)("div",SA,[(0,a.Lk)("div",RA,[t[53]||(t[53]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขข้อมูลลูกค้า",-1)),(0,a.Lk)("div",TA,[(0,a.Lk)("span",{onClick:t[11]||(t[11]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",MA,[(0,a.Lk)("div",EA,[t[54]||(t[54]=(0,a.Lk)("label",{for:"editCustomerName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.selectedCustomer.name=e),id:"editCustomerName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.name]])]),(0,a.Lk)("div",FA,[t[55]||(t[55]=(0,a.Lk)("label",{for:"editCustomerEmail",class:"block text-gray-700 font-medium"},"อีเมล",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>i.selectedCustomer.email=e),id:"editCustomerEmail",type:"email",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.email]])]),(0,a.Lk)("div",null,[t[56]||(t[56]=(0,a.Lk)("label",{for:"customer_id",class:"block font-medium text-gray-700"},"รหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>i.selectedCustomer.customer_id=e),placeholder:"กรอกรหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.customer_id]])]),(0,a.Lk)("div",zA,[(0,a.Lk)("div",AA,[t[57]||(t[57]=(0,a.Lk)("label",{for:"tel",class:"block font-medium text-gray-700"},"เบอร์โทรศัพท์",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=e=>i.selectedCustomer.tel=e),maxlength:"10",placeholder:"กรอกหมายเลขโทรศัพท์",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.tel]])]),(0,a.Lk)("div",OA,[t[58]||(t[58]=(0,a.Lk)("label",{for:"line_id",class:"block font-medium text-gray-700"},"Line ID (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>i.selectedCustomer.line_id=e),placeholder:"กรอก line id",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.line_id]])])]),(0,a.Lk)("div",null,[t[61]||(t[61]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"ผู้รับอาหาร?",-1)),(0,a.Lk)("div",NA,[(0,a.Lk)("label",XA,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[17]||(t[17]=e=>i.selectedCustomer.recipient=e),value:"ตัวคุณเอง",class:"focus:ring-custom-orange custom-radio"},null,512),[[o.XL,i.selectedCustomer.recipient]]),t[59]||(t[59]=(0,a.eW)(" ตัวคุณเอง "))]),t[60]||(t[60]=(0,a.Lk)("label",{class:"text-gray-700"}," มีผู้อื่นรับแทน (โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อในบรรทัดด้านล่าง) ",-1))])]),(0,a.Lk)("div",null,[t[62]||(t[62]=(0,a.Lk)("label",{for:"recipient",class:"block font-medium text-gray-700"},"โปรดระบุชื่อ พร้อมเบอร์โทรติดต่อ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"recipient","onUpdate:modelValue":t[18]||(t[18]=e=>i.selectedCustomer.recipient=e),placeholder:"Enter details here",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.recipient]])]),(0,a.Lk)("div",null,[t[63]||(t[63]=(0,a.Lk)("label",{for:"note",class:"block font-medium text-gray-700"},"โปรดระบุเบอร์โทรติดต่อสำรอง หรือรายละเอียดอื่น ๆ ที่เราควรทราบ (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedCustomer.note=e),placeholder:"ระบุเบอร์โทรติดต่อสำรอง หรือรายละเอียดอื่น ๆ ที่เราควรทราบ (ถ้ามี)",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.note]])]),(0,a.Lk)("div",null,[t[64]||(t[64]=(0,a.Lk)("label",{for:"address_1",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 1",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address","onUpdate:modelValue":t[20]||(t[20]=e=>i.selectedCustomer.address_1=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.address_1]])]),(0,a.Lk)("div",null,[t[65]||(t[65]=(0,a.Lk)("label",{for:"address_2",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 2 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_2","onUpdate:modelValue":t[21]||(t[21]=e=>i.selectedCustomer.address_2=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.address_2]])]),(0,a.Lk)("div",null,[t[66]||(t[66]=(0,a.Lk)("label",{for:"address_3",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 3 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_3","onUpdate:modelValue":t[22]||(t[22]=e=>i.selectedCustomer.address_3=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.address_3]])]),(0,a.Lk)("div",null,[t[67]||(t[67]=(0,a.Lk)("label",{for:"nearby_places",class:"block font-medium text-gray-700"},"สถานที่ใกล้เคียงหรือจุดสังเกตอื่นๆ ",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"nearby_places","onUpdate:modelValue":t[23]||(t[23]=e=>i.selectedCustomer.nearby_places=e),placeholder:"กรอกสถานที่ใกล้เคียงหรือจุดสังเกตอื่น ๆ ",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.selectedCustomer.nearby_places]])])]),(0,a.Lk)("div",VA,[(0,a.Lk)("div",QA,[(0,a.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",IA,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",UA,[(0,a.Lk)("div",$A,[t[70]||(t[70]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[27]||(t[27]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[71]||(t[71]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",BA,[(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[29]||(t[29]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",WA,[(0,a.Lk)("button",{onClick:t[30]||(t[30]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,qA),(0,a.Lk)("div",ZA,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[31]||(t[31]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[32]||(t[32]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,jA)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[33]||(t[33]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[34]||(t[34]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[35]||(t[35]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[73]||(t[73]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,JA)])])],64)}var HA={name:"AFF Customers",data(){return{headers:["#","ชื่อ","รหัสอ้างอิง","ช่องทางการติดต่อ","ที่อยู่","สถานที่ใกล้เคียง",""],headerWidths:["5%","20%","10%","15%","30%","15%","5%"],searchQuery:"",isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",customers:[],currentPage:1,itemsPerPage:10,isDetailModalOpen:!1,selectedCustomer:{},moreOpenDropdownIndex:null,isEditModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{filteredCustomers(){const e=this.customers.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)},totalPages(){const e=this.customers.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())}));return Math.ceil(e.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredDetailsCustomer(){return{name:this.selectedCustomer.name,customer_id:this.selectedCustomer.customer_id,email:this.selectedCustomer.email,tel:this.selectedCustomer.tel,line_id:this.selectedCustomer.line_id,nearby_places:this.selectedCustomer.nearby_places,recipient:this.selectedCustomer.recipient,note:this.selectedCustomer.note,address_1:this.selectedCustomer.address_1,address_2:this.selectedCustomer.address_2,address_3:this.selectedCustomer.address_3}}},methods:{async fetchCustomers(){try{const e=await ke.A.get("http://127.0.0.1:3333/customers-hhb");this.customers=e.data,this.customers.sort(((e,t)=>e.id-t.id))}catch(e){console.error("Error fetching customers:",e)}},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.customers.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.customers.sort(((e,t)=>e.id-t.id)),this.currentPage=1},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null)},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredCustomers.length-2?"dropdown-up":"dropdown-down"},onViewDetails(e){this.selectedCustomer=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedCustomer={}},onEdit(e){this.selectedCustomer={...e},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedCustomer.name||!this.selectedCustomer.email)return void alert("กรุณากรอกข้อมูลให้ครบถ้วน");const e=await ke.A.put(`http://127.0.0.1:3333/customers-hhb/${this.selectedCustomer.id}`,{email:this.selectedCustomer.email,customer_id:this.selectedCustomer.customer_id,name:this.selectedCustomer.name,tel:this.selectedCustomer.tel,line_id:this.selectedCustomer.line_id,nearby_places:this.selectedCustomer.nearby_places,recipient:this.selectedCustomer.recipient,note:this.selectedCustomer.note,address_1:this.selectedCustomer.address_1,address_2:this.selectedCustomer.address_2,address_3:this.selectedCustomer.address_3}),t=this.customers.findIndex((e=>e.id===this.selectedCustomer.id));-1!==t&&(this.customers[t]=e.data),this.isEditModalOpen=!1,this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),await this.fetchCustomers()}catch(e){console.error("Error saving changes:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูลสำเร็จ")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedCustomer={}},onDelete(e){alert(`ลบข้อมูล: ${e.name}`)},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/customers-hhb/${this.itemToDelete}`),this.customers=this.customers.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchCustomers(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},formatLabel(e){const t={name:"ชื่อ",customer_id:"รหัสอ้างอิง",gender:"เพศ",email:"อีเมล",tel:"เบอร์โทรศัพท์",line_id:"Line ID",nearby_places:"สถานที่ใกล้เคียงหรือจุดสังเกตอื่นๆ",recipient:"ผู้รับอาหาร",note:"รายละเอียดอื่น ๆ",address_1:"ที่อยู่ 1",address_2:"ที่อยู่ 2",address_3:"ที่อยู่ 3"};return t[e]||e},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.fetchCustomers(),this.sortData("id")},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchCustomers()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const YA=(0,_e.A)(HA,[["render",KA],["__scopeId","data-v-27770e56"]]);var GA=YA;const eO={class:"mt-[-20px]"},tO={class:"flex space-x-2 items-center relative"},sO={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},oO={class:"text-m text-custom-orange font-bold"},aO={class:"add relative inline-block"},rO={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},lO={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},iO={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},nO={class:"flex space-x-2"},dO={class:"p-6 space-y-4 overflow-y-auto flex-grow"},cO={class:"mb-4"},uO={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},pO={class:"flex space-x-2"},hO={class:"sort relative inline-block",ref:"sortDropdown"},gO={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},mO={class:"list-none p-0 m-0"},yO={key:0,class:"material-symbols-outlined text-sm"},kO={key:0,class:"material-symbols-outlined text-sm"},fO={class:"flex w-[250px] relative"},bO={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},xO={class:"bg-custom-orange text-white"},_O={class:"px-4 py-2 align-top pb-5"},wO={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},vO={class:"px-4 py-2 align-top text-right pb-5"},LO={class:"flex justify-end space-x-2"},DO=["onClick"],PO=["onClick"],CO={key:0},SO={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},RO={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},TO={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},MO={class:"flex space-x-2"},EO={class:"p-6 space-y-4 overflow-y-auto flex-grow"},FO={class:"mb-4"},zO={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},AO={class:"flex space-x-2"},OO={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},NO={class:"bg-white rounded-lg shadow-md w-1/3"},XO={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},VO={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},QO={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},IO=["disabled"],UO={class:"flex items-center space-x-1"},$O=["onClick"],BO=["disabled"];function WO(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[32]||(t[32]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[31]||(t[31]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[34]||(t[34]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[33]||(t[33]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",eO,[(0,a.Lk)("div",tO,[(0,a.Lk)("div",sO,[t[35]||(t[35]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวน Promotion Type ทั้งหมด: ",-1)),(0,a.Lk)("span",oO,(0,l.v_)(i.promotion_types.length)+" รายการ",1)]),(0,a.Lk)("div",aO,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",rO,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[38]||(t[38]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[37]||(t[37]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",lO,[(0,a.Lk)("div",iO,[t[39]||(t[39]=(0,a.Lk)("div",{class:"flex-1 flex items-left"},[(0,a.Lk)("span",{class:"font-bold"},"เพิ่ม Promotion Type")],-1)),(0,a.Lk)("div",nO,[(0,a.Lk)("span",{onClick:t[4]||(t[4]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",dO,[(0,a.Lk)("div",cO,[t[40]||(t[40]=(0,a.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>i.newPromotionType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[o.Jo,i.newPromotionType.name]])])]),(0,a.Lk)("div",uO,[(0,a.Lk)("div",pO,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.addPromotionType&&n.addPromotionType(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",hO,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[41]||(t[41]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[42]||(t[42]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",gO,[(0,a.Lk)("ul",mO,[(0,a.Lk)("li",{onClick:t[9]||(t[9]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[43]||(t[43]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",yO,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[10]||(t[10]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[44]||(t[44]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",kO,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[45]||(t[45]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",fO,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[13]||(t[13]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[14]||(t[14]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",bO,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",xO,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPromotionType,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",_O,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",wO,(0,l.v_)(e.name),1),(0,a.Lk)("td",vO,[(0,a.Lk)("div",LO,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[46]||(t[46]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,DO),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[47]||(t[47]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,PO)])])])))),128)),0===n.filteredPromotionType.length?((0,a.uX)(),(0,a.CE)("tr",CO,t[48]||(t[48]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",SO,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[16]||(t[16]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",RO,[(0,a.Lk)("div",TO,[t[51]||(t[51]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข Promotion Type",-1)),(0,a.Lk)("div",MO,[(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",EO,[(0,a.Lk)("div",FO,[t[52]||(t[52]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>i.selectedPromotionType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPromotionType.name]])])]),(0,a.Lk)("div",zO,[(0,a.Lk)("div",AO,[(0,a.Lk)("button",{onClick:t[19]||(t[19]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",OO,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[54]||(t[54]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",NO,[(0,a.Lk)("div",XO,[t[55]||(t[55]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[22]||(t[22]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[56]||(t[56]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",VO,[(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",QO,[(0,a.Lk)("button",{onClick:t[25]||(t[25]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,IO),(0,a.Lk)("div",UO,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[26]||(t[26]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[27]||(t[27]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,$O)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[28]||(t[28]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[29]||(t[29]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[30]||(t[30]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,BO)])])],64)}var qO={name:"PromotionTypePage",data(){return{headers:["#","ชื่อ",""],headerWidths:["10%","85%","5%"],searchQuery:"",isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",promotion_types:[],currentPage:1,itemsPerPage:10,selectedPromotionType:{},isEditModalOpen:!1,isAddModalOpen:!1,newPromotionType:{name:""},isDeleteModalOpen:!1,itemToDelete:null,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){const e=this.promotion_types.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())}));return Math.ceil(e.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredPromotionType(){const e=this.promotion_types.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)}},methods:{async fetchPromotionTypes(){try{const e=await ke.A.get("http://127.0.0.1:3333/promotion-types");this.promotion_types=e.data,this.promotion_types.sort(((e,t)=>e.id-t.id))}catch(e){}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.promotion_types.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.promotion_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedPromotionType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await ke.A.put(`http://127.0.0.1:3333/promotion-types/${this.selectedPromotionType.id}`,{name:this.selectedPromotionType.name});const e=this.promotion_types.findIndex((e=>e.id===this.selectedPromotionType.id));-1!==e&&(this.promotion_types[e]={...this.selectedPromotionType}),this.isEditModalOpen=!1,await this.fetchPromotionTypes(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPromotionType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/promotion-types/${this.itemToDelete}`),this.promotion_types=this.promotion_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchPromotionTypes(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0,this.newPromotionType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addPromotionType(){if(this.newPromotionType.name.trim())try{const e=await ke.A.post("http://127.0.0.1:3333/promotion-types",this.newPromotionType);this.promotion_types.push(e.data),await this.fetchPromotionTypes(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!"),this.closeAddModal()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกชื่อ!")},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.sortData("id"),this.fetchPromotionTypes()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPromotionTypes()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const ZO=(0,_e.A)(qO,[["render",WO]]);var jO=ZO;const JO={class:"mt-[-20px]"},KO={class:"flex space-x-2 items-center relative"},HO={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},YO={class:"text-m text-custom-orange font-bold"},GO={class:"ml-2"},eN={class:"add relative inline-block"},tN={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},sN={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[500px] flex flex-col"},oN={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},aN={class:"p-6 space-y-4"},rN={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},lN={class:"flex space-x-2"},iN={class:"sort relative inline-block",ref:"sortDropdown"},nN={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},dN={class:"list-none p-0 m-0"},cN={key:0,class:"material-symbols-outlined text-sm"},uN={key:0,class:"material-symbols-outlined text-sm"},pN={class:"filter relative inline-block",ref:"filterDropdown"},hN={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},gN={class:"p-4 w-[500px] list-none"},mN={class:"grid grid-cols-2 gap-4"},yN=["value"],kN={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},fN={class:"flex space-x-2"},bN={class:"flex w-[250px] relative"},xN={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},_N={class:"bg-custom-orange text-white"},wN={class:"px-4 py-2 align-top pb-5"},vN={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},LN={class:"px-4 py-2 align-top pb-5"},DN={class:"px-4 py-2 align-top text-right pb-5"},PN={class:"flex justify-end space-x-2"},CN=["onClick"],SN=["onClick"],RN={key:0},TN={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},MN={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},EN={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},FN={class:"flex space-x-2"},zN={class:"p-6 space-y-4"},AN={class:"mb-4"},ON={class:"mb-4"},NN={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},XN={class:"flex space-x-2"},VN={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},QN={class:"bg-white rounded-lg shadow-md w-1/3"},IN={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},UN={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},$N={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},BN=["disabled"],WN={class:"flex items-center space-x-1"},qN=["onClick"],ZN=["disabled"];function jN(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[40]||(t[40]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[39]||(t[39]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[42]||(t[42]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[41]||(t[41]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",JO,[(0,a.Lk)("div",KO,[(0,a.Lk)("div",HO,[t[43]||(t[43]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวน Program ทั้งหมด: ",-1)),(0,a.Lk)("span",YO,(0,l.v_)(i.programs.length)+" รายการ",1)]),i.selectedPromotionType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[45]||(t[45]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",GO,[t[44]||(t[44]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPromotionType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPromotionType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",eN,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[46]||(t[46]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",tN,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[48]||(t[48]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[47]||(t[47]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",sN,[(0,a.Lk)("div",oN,[t[49]||(t[49]=(0,a.Lk)("h2",{class:"font-bold"},"เพิ่ม Program",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",aN,[(0,a.Lk)("div",null,[t[50]||(t[50]=(0,a.Lk)("label",{for:"programName",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bo)((0,a.Lk)("input",{id:"programName","onUpdate:modelValue":t[6]||(t[6]=e=>i.newProgram.name=e),type:"text",placeholder:"กรอกชื่อโปรแกรม",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newProgram.name]])]),(0,a.Lk)("div",null,[t[51]||(t[51]=(0,a.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.newProgram.promotion_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.newProgram.promotion_type_id=e),options:i.promotion_types,"track-by":"id",label:"name",placeholder:"เลือก Promotion Type"},null,8,["modelValue","options"]),t[52]||(t[52]=(0,a.Lk)("div",null,null,-1))])]),(0,a.Lk)("div",rN,[(0,a.Lk)("div",lN,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>n.addProgram&&n.addProgram(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",iN,[(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[53]||(t[53]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[54]||(t[54]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",nN,[(0,a.Lk)("ul",dN,[(0,a.Lk)("li",{onClick:t[11]||(t[11]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[55]||(t[55]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",cN,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[12]||(t[12]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[56]||(t[56]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",uN,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[13]||(t[13]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[57]||(t[57]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",pN,[(0,a.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[58]||(t[58]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[59]||(t[59]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",hN,[(0,a.Lk)("div",gN,[t[60]||(t[60]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Promotion Type",-1)),(0,a.Lk)("div",mN,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.promotion_types,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>i.selectedPromotionType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,yN),[[o.lH,i.selectedPromotionType]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",kN,[(0,a.Lk)("li",{onClick:t[16]||(t[16]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[61]||(t[61]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",fN,[(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",bN,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[20]||(t[20]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[21]||(t[21]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",xN,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",_N,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredProgram,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",wN,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",vN,(0,l.v_)(e.name),1),(0,a.Lk)("td",LN,(0,l.v_)(n.getPromotionTypeName(e.promotion_type_id)),1),(0,a.Lk)("td",DN,[(0,a.Lk)("div",PN,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[62]||(t[62]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,CN),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[63]||(t[63]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,SN)])])])))),128)),0===n.filteredProgram.length?((0,a.uX)(),(0,a.CE)("tr",RN,t[64]||(t[64]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",TN,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[66]||(t[66]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[23]||(t[23]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[65]||(t[65]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",MN,[(0,a.Lk)("div",EN,[t[67]||(t[67]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขโปรแกรม",-1)),(0,a.Lk)("div",FN,[(0,a.Lk)("span",{onClick:t[24]||(t[24]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",zN,[(0,a.Lk)("div",AN,[t[68]||(t[68]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"Program",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>i.selectedProgram.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedProgram.name]])]),(0,a.Lk)("div",ON,[t[69]||(t[69]=(0,a.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.selectedProgram.promotion_type_id,"onUpdate:modelValue":t[26]||(t[26]=e=>i.selectedProgram.promotion_type_id=e),options:i.promotion_types,placeholder:"เลือก Promotion Type","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",NN,[(0,a.Lk)("div",XN,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",VN,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[71]||(t[71]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[70]||(t[70]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",QN,[(0,a.Lk)("div",IN,[t[72]||(t[72]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[30]||(t[30]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[73]||(t[73]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",UN,[(0,a.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[32]||(t[32]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",$N,[(0,a.Lk)("button",{onClick:t[33]||(t[33]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[74]||(t[74]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,BN),(0,a.Lk)("div",WN,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[34]||(t[34]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[35]||(t[35]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,qN)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[36]||(t[36]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[37]||(t[37]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[38]||(t[38]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,ZN)])])],64)}var JN={name:"ProgramPage",data(){return{headers:["#","Program","Promotion Type",""],headerWidths:["10%","50%","35%","5%"],searchQuery:"",selectedPromotionType:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",programs:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newProgram:{name:"",promotion_type_id:""},selectedProgram:{id:"",name:"",promotion_type_id:""},promotion_types:[],isDeleteModalOpen:!1,itemToDelete:null,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},components:{Multiselect:fp.Ay},computed:{totalPages(){return Math.ceil(this.programs.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPromotionType.length||this.selectedPromotionType.includes(e.promotion_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredProgram(){const e=this.programs.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPromotionType.length||this.selectedPromotionType.includes(e.promotion_type_id);return t&&s})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)},...(0,Ze.L8)(["programs"])},methods:{...(0,Ze.i0)(["fetchPrograms","fetchPromotionTypes"]),async fetchPrograms(){try{const e=await ke.A.get("http://127.0.0.1:3333/programs");this.programs=e.data,this.programs.sort(((e,t)=>e.id-t.id))}catch(e){console.error("Error fetching program:",e)}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.programs.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.programs.sort(((e,t)=>e.id-t.id)),this.currentPage=1},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPromotionType.length>0?this.filteredProgram=this.programs.filter((e=>this.selectedPromotionType.includes(e.promotion_type_id))):this.filteredProgram=this.programs,this.isFilterDropdownOpen=!1},clearFilter(){this.selectedPromotionType=[],this.filteredProgram=this.programs},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getPromotionTypeName(e){const t=this.promotion_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){const t=this.promotion_types.find((t=>t.id===e.promotion_type_id));this.selectedProgram={...e,promotion_type_id:t?{id:t.id,name:`${t.name}`}:null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedProgram.name||!this.selectedProgram.promotion_type_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=await ke.A.put(`http://127.0.0.1:3333/programs/${this.selectedProgram.id}`,{name:this.selectedProgram.name,promotion_type_id:this.selectedProgram.promotion_type_id.id}),t=this.programs.findIndex((e=>e.id===this.selectedProgram.id));-1!==t&&(this.programs[t]=e.data),await this.fetchPrograms(),this.isEditModalOpen=!1,this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){console.error("Error saving changes:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedProgram={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/programs/${this.itemToDelete}`),this.programs=this.programs.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchPrograms(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewProgram()},resetNewProgram(){this.newProgram={name:"",promotion_type_id:""}},async addProgram(){if(this.newProgram.name&&this.newProgram.promotion_type_id)try{const e=await ke.A.post("http://127.0.0.1:3333/programs",{name:this.newProgram.name,promotion_type_id:this.newProgram.promotion_type_id.id});this.programs.push(e.data),this.closeAddModal(),await this.fetchPrograms(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},async fetchPromotionTypes(){try{const e=await ke.A.get("http://127.0.0.1:3333/promotion-types");this.promotion_types=e.data}catch(e){}},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.sortData("id"),this.fetchPrograms(),this.fetchPromotionTypes()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPrograms(),this.fetchPromotionTypes()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const KN=(0,_e.A)(JN,[["render",jN]]);var HN=KN;const YN={class:"mt-[-20px]"},GN={class:"flex space-x-2 items-center relative"},eX={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},tX={class:"text-m text-custom-orange font-bold"},sX={class:"ml-2"},oX={key:0},aX={class:"add relative inline-block"},rX={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},lX={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},iX={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},nX={class:"p-6 space-y-4 overflow-y-auto flex-grow"},dX={class:"flex flex-wrap gap-4"},cX={class:"flex-1"},uX={class:"flex-1"},pX={class:"flex-1"},hX={class:"flex-1"},gX={class:"flex gap-4"},mX={class:"flex-1"},yX={class:"flex-1"},kX={class:"space-y-4 overflow-y-auto flex-grow"},fX={class:"flex flex-wrap gap-4"},bX={class:"flex-1"},xX={class:"flex-1"},_X={class:"flex-1"},wX={class:"flex-1"},vX={class:"flex flex-wrap gap-4"},LX={class:"flex-1"},DX={class:"flex-1"},PX={class:"flex-1"},CX={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},SX={class:"flex space-x-2"},RX={class:"sort relative inline-block",ref:"sortDropdown"},TX={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},MX={class:"list-none p-0 m-0"},EX={key:0,class:"material-symbols-outlined text-sm"},FX={key:0,class:"material-symbols-outlined text-sm"},zX={class:"filter relative inline-block",ref:"filterDropdown"},AX={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},OX={class:"p-4 w-[500px] list-none"},NX={class:"flex justify-between items-center"},XX={class:"font-semibold mb-2 text-custom-orange"},VX=["onClick"],QX={class:"grid grid-cols-2 gap-4"},IX=["value"],UX={class:"break-words"},$X={class:"mb-4"},BX={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},WX={class:"flex space-x-2"},qX={class:"flex w-[250px] relative"},ZX={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},jX={class:"bg-custom-orange text-white"},JX={class:"px-4 py-2 align-top pb-5"},KX={class:"px-4 py-2 align-top pb-5"},HX={class:"px-4 py-2 align-top pb-5"},YX={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},GX={key:0},eV={class:"px-4 py-2 align-top pb-5"},tV={class:"px-4 py-2 align-top pb-5"},sV={class:"px-4 py-2 align-top pb-5"},oV={class:"px-4 py-2 align-top text-right pb-5"},aV={class:"flex justify-end space-x-2 list-none"},rV=["onClick"],lV=["onClick"],iV=["onClick"],nV={key:0},dV={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},cV={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},uV={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},pV={class:"flex space-x-2"},hV={class:"p-6"},gV={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},mV={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},yV={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},kV={class:"flex space-x-2"},fV={class:"p-6 space-y-4 overflow-y-auto flex-grow"},bV={class:"mb-4"},xV={class:"mb-4"},_V={class:"mb-4"},wV={class:"flex flex-wrap gap-4"},vV={class:"flex-1"},LV={class:"flex-1"},DV={class:"flex-1"},PV={class:"flex-1"},CV={class:"flex gap-4"},SV={class:"flex-1"},RV={class:"flex-1"},TV={class:"mb-4"},MV={class:"space-y-4 overflow-y-auto flex-grow"},EV={class:"flex flex-wrap gap-4"},FV={class:"flex-1"},zV={class:"flex-1"},AV={class:"flex-1"},OV={class:"flex-1"},NV={class:"flex flex-wrap gap-4"},XV={class:"flex-1"},VV={class:"flex-1"},QV={class:"flex-1"},IV={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},UV={class:"flex space-x-2"},$V={key:2,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},BV={class:"bg-white rounded-lg shadow-md w-1/3"},WV={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},qV={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},ZV={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},jV=["disabled"],JV={class:"flex items-center space-x-1"},KV=["onClick"],HV=["disabled"];function YV(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)("div",YN,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[75]||(t[75]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[74]||(t[74]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[77]||(t[77]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[76]||(t[76]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",GN,[(0,a.Lk)("div",eX,[t[78]||(t[78]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวน Package ทั้งหมด: ",-1)),(0,a.Lk)("span",tX,(0,l.v_)(i.packages.length)+" รายการ",1)]),i.selectedProgram.length>0||e.selectedMonthYear?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[80]||(t[80]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",sX,[t[79]||(t[79]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedProgram.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedProgram.length)+") ",1)],64)):(0,a.Q3)("",!0),e.selectedMonthYear?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[i.selectedProgram.length>0?((0,a.uX)(),(0,a.CE)("span",oX,", ")):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,l.v_)(n.formattedStartDate(e.selectedMonthYear)),1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",aX,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",rX,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[83]||(t[83]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[82]||(t[82]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",lX,[(0,a.Lk)("div",iX,[t[84]||(t[84]=(0,a.Lk)("h2",{class:"font-bold"},"เพิ่ม Package",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",nX,[(0,a.Lk)("div",null,[t[85]||(t[85]=(0,a.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.selectedPromotionType,"onUpdate:modelValue":t[6]||(t[6]=e=>i.selectedPromotionType=e),options:i.promotion_types,"custom-label":e.customLabel,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options","custom-label"])]),(0,a.Lk)("div",null,[t[86]||(t[86]=(0,a.Lk)("label",{for:"programType",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.newPackage.program_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.newPackage.program_id=e),options:n.filteredPrograms,"track-by":"id",label:"name",placeholder:"เลือกประเภทโปรแกรม"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[87]||(t[87]=(0,a.Lk)("label",{for:"packageName",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bo)((0,a.Lk)("input",{id:"packageName","onUpdate:modelValue":t[8]||(t[8]=e=>i.newPackage.name=e),type:"text",placeholder:"กรอกชื่อแพ็คเกจ",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.name]])]),(0,a.Lk)("div",null,[t[88]||(t[88]=(0,a.Lk)("label",{for:"packageDetail",class:"block font-bold text-gray-700"},"Package Details for Purchase Summary",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"packageDetail","onUpdate:modelValue":t[9]||(t[9]=e=>i.newPackage.package_detail=e),placeholder:"กรอกรายละเอียดแพ็คเกจ",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.newPackage.package_detail]])]),(0,a.Lk)("div",dX,[(0,a.Lk)("div",cX,[t[89]||(t[89]=(0,a.Lk)("label",{for:"packageValidity",class:"block font-bold text-gray-700"},"Package Validity",-1)),(0,a.bo)((0,a.Lk)("input",{id:"packageValidity","onUpdate:modelValue":t[10]||(t[10]=e=>i.newPackage.package_validity=e),type:"number",step:"1",min:"0",placeholder:"กรอก Package Validity",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.package_validity]])]),(0,a.Lk)("div",uX,[t[90]||(t[90]=(0,a.Lk)("label",{for:"totalDays",class:"block font-bold text-gray-700"},"Total Days",-1)),(0,a.bo)((0,a.Lk)("input",{id:"totalDays","onUpdate:modelValue":t[11]||(t[11]=e=>i.newPackage.total_days=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Days",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.total_days]])]),(0,a.Lk)("div",pX,[t[91]||(t[91]=(0,a.Lk)("label",{for:"boxesPerDay",class:"block font-bold text-gray-700"},"# of Boxes/Day",-1)),(0,a.bo)((0,a.Lk)("input",{id:"boxesPerDay","onUpdate:modelValue":t[12]||(t[12]=e=>i.newPackage.boxes_per_day=e),type:"number",step:"1",min:"0",placeholder:"กรอก # of Boxes/Day",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.boxes_per_day]])]),(0,a.Lk)("div",hX,[t[92]||(t[92]=(0,a.Lk)("label",{for:"totalBoxes",class:"block font-bold text-gray-700"},"Total Boxes",-1)),(0,a.bo)((0,a.Lk)("input",{id:"totalBoxes","onUpdate:modelValue":t[13]||(t[13]=e=>i.newPackage.total_boxes=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Boxes",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.total_boxes]])])]),(0,a.Lk)("div",gX,[(0,a.Lk)("div",mX,[t[93]||(t[93]=(0,a.Lk)("label",{for:"packagePrice",class:"block font-bold text-gray-700"},"ราคา",-1)),(0,a.bo)((0,a.Lk)("input",{id:"packagePrice","onUpdate:modelValue":t[14]||(t[14]=e=>i.newPackage.price=e),type:"number",step:"1",min:"0",placeholder:"กรอกราคา",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.price]])]),(0,a.Lk)("div",yX,[t[94]||(t[94]=(0,a.Lk)("label",{for:"startMonth",class:"block font-bold text-gray-700"},"เลือกเดือนเริ่มต้น (เฉพาะ Flash Sale)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"startMonth","onUpdate:modelValue":t[15]||(t[15]=e=>i.newPackage.start_date=e),type:"month",placeholder:"เลือกเดือนเริ่มต้น",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.start_date]])])]),(0,a.Lk)("div",null,[t[95]||(t[95]=(0,a.Lk)("label",{for:"promotionDetail",class:"block font-bold text-gray-700"},"รายละเอียดโปรโมชัน",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"promotionDetail","onUpdate:modelValue":t[16]||(t[16]=e=>i.newPackage.promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชัน",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.newPackage.promotion_detail]])]),(0,a.Lk)("div",kX,[(0,a.Lk)("div",fX,[(0,a.Lk)("div",bX,[t[96]||(t[96]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[17]||(t[17]=e=>i.newPackage.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_mad]])]),(0,a.Lk)("div",xX,[t[97]||(t[97]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[18]||(t[18]=e=>i.newPackage.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_dessert]])]),(0,a.Lk)("div",_X,[t[98]||(t[98]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[19]||(t[19]=e=>i.newPackage.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_brittles]])]),(0,a.Lk)("div",wX,[t[99]||(t[99]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[20]||(t[20]=e=>i.newPackage.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_energy_balls]])])]),(0,a.Lk)("div",vX,[(0,a.Lk)("div",LX,[t[100]||(t[100]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[21]||(t[21]=e=>i.newPackage.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_dressing]])]),(0,a.Lk)("div",DX,[t[101]||(t[101]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[22]||(t[22]=e=>i.newPackage.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_yoghurt]])]),(0,a.Lk)("div",PX,[t[102]||(t[102]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[23]||(t[23]=e=>i.newPackage.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_granola]])])])])]),(0,a.Lk)("div",CX,[(0,a.Lk)("li",{onClick:t[24]||(t[24]=(...e)=>n.clearAdd&&n.clearAdd(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[103]||(t[103]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",SX,[(0,a.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>n.addPackage&&n.addPackage(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",RX,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[104]||(t[104]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[105]||(t[105]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",TX,[(0,a.Lk)("ul",MX,[(0,a.Lk)("li",{onClick:t[28]||(t[28]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[106]||(t[106]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",EX,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[29]||(t[29]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[107]||(t[107]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",FX,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[30]||(t[30]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[108]||(t[108]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",zX,[(0,a.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[109]||(t[109]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[110]||(t[110]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",AX,[(0,a.Lk)("div",OX,[t[112]||(t[112]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Program",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.groupedPrograms,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"mb-4"},[(0,a.Lk)("div",NX,[(0,a.Lk)("h4",XX,(0,l.v_)(s),1),(0,a.Lk)("button",{onClick:e=>n.toggleSelectPromotionAll(s),class:"text-custom-orange hover:text-custom-orange-hover text-sm"},(0,l.v_)(i.selectAllProgramState[s]?"ยกเลิกเลือกทั้งหมด":"เลือกทั้งหมด"),9,VX)]),(0,a.Lk)("div",QX,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[32]||(t[32]=e=>i.selectedProgram=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent flex-shrink-0"},null,8,IX),[[o.lH,i.selectedProgram]]),(0,a.Lk)("span",UX,(0,l.v_)(e.name),1)])))),128))])])))),128)),(0,a.Lk)("div",$X,[t[111]||(t[111]=(0,a.Lk)("label",{for:"startMonth",class:"block font-semibold mb-2 text-custom-orange"},"กรองตามเดือนและปี",-1)),(0,a.bo)((0,a.Lk)("input",{id:"startMonth","onUpdate:modelValue":t[33]||(t[33]=t=>e.selectedMonthYear=t),type:"month",class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,e.selectedMonthYear]])])]),(0,a.Lk)("div",BX,[(0,a.Lk)("li",{onClick:t[34]||(t[34]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[113]||(t[113]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",WX,[(0,a.Lk)("button",{onClick:t[35]||(t[35]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[36]||(t[36]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",qX,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[37]||(t[37]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[38]||(t[38]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[39]||(t[39]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[40]||(t[40]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",ZX,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",jX,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPackage,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",JX,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",KX,(0,l.v_)(e.program&&e.program.promotionType?e.program.promotionType.name:"N/A"),1),(0,a.Lk)("td",HX,(0,l.v_)(n.getProgramName(e.program_id)),1),(0,a.Lk)("td",YX,[(0,a.eW)((0,l.v_)(e.name)+" ",1),e.start_date?((0,a.uX)(),(0,a.CE)("span",GX,"( "+(0,l.v_)(n.formattedStartDate(e.start_date))+" )",1)):(0,a.Q3)("",!0)]),(0,a.Lk)("td",eV,(0,l.v_)(e.package_validity)+" วัน",1),(0,a.Lk)("td",tV,(0,l.v_)(e.total_days)+" วัน",1),(0,a.Lk)("td",sV,(0,l.v_)(n.formatPrice(e.price)),1),(0,a.Lk)("td",oV,[(0,a.Lk)("div",aV,[(0,a.Lk)("li",{onClick:t=>n.onViewDetails(e),class:"px-2 py-1 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[114]||(t[114]=[(0,a.Lk)("span",null,"ดูรายละเอียด",-1)]),8,rV),(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[115]||(t[115]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,lV),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[116]||(t[116]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,iV)])])])))),128)),0===n.filteredPackage.length?((0,a.uX)(),(0,a.CE)("tr",nV,t[117]||(t[117]=[(0,a.Lk)("td",{colspan:"8",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",dV,[(0,a.Lk)("div",cV,[(0,a.Lk)("div",uV,[t[118]||(t[118]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียด Package",-1)),(0,a.Lk)("div",pV,[(0,a.Lk)("span",{onClick:t[41]||(t[41]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",hV,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetail,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-2"},[(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,(0,l.v_)(n.formatLabel(t))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)])])))),128))])])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",gV,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[120]||(t[120]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[42]||(t[42]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[119]||(t[119]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",mV,[(0,a.Lk)("div",yV,[t[121]||(t[121]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข Package",-1)),(0,a.Lk)("div",kV,[(0,a.Lk)("span",{onClick:t[43]||(t[43]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",fV,[(0,a.Lk)("div",null,[t[122]||(t[122]=(0,a.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.selectedPackage.program.promotionType,"onUpdate:modelValue":t[44]||(t[44]=e=>i.selectedPackage.program.promotionType=e),options:i.promotion_types,"custom-label":e.customLabel,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options","custom-label"])]),(0,a.Lk)("div",bV,[t[123]||(t[123]=(0,a.Lk)("label",{for:"editProgramType",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.selectedPackage.program_id,"onUpdate:modelValue":t[45]||(t[45]=e=>i.selectedPackage.program_id=e),options:n.filteredEditPrograms,placeholder:"เลือกประเภทโปรแกรม","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",xV,[t[124]||(t[124]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-bold"},"Package",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[46]||(t[46]=e=>i.selectedPackage.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.name]])]),(0,a.Lk)("div",_V,[t[125]||(t[125]=(0,a.Lk)("label",{for:"editPackageDetail",class:"block text-gray-700 font-bold"},"Package Details for Purchase Summary",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"editPackageDetail","onUpdate:modelValue":t[47]||(t[47]=e=>i.selectedPackage.package_detail=e),placeholder:"กรอก Package Details for Purchase Summary",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedPackage.package_detail]])]),(0,a.Lk)("div",wV,[(0,a.Lk)("div",vV,[t[126]||(t[126]=(0,a.Lk)("label",{for:"packageValidity",class:"block font-bold text-gray-700"},"Package Validity",-1)),(0,a.bo)((0,a.Lk)("input",{id:"packageValidity","onUpdate:modelValue":t[48]||(t[48]=e=>i.selectedPackage.package_validity=e),type:"number",step:"1",min:"0",placeholder:"กรอก Package Validity",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.package_validity]])]),(0,a.Lk)("div",LV,[t[127]||(t[127]=(0,a.Lk)("label",{for:"totalDays",class:"block font-bold text-gray-700"},"Total Days",-1)),(0,a.bo)((0,a.Lk)("input",{id:"totalDays","onUpdate:modelValue":t[49]||(t[49]=e=>i.selectedPackage.total_days=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Days",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.total_days]])]),(0,a.Lk)("div",DV,[t[128]||(t[128]=(0,a.Lk)("label",{for:"boxesPerDay",class:"block font-bold text-gray-700"},"# of Boxes/Day",-1)),(0,a.bo)((0,a.Lk)("input",{id:"boxesPerDay","onUpdate:modelValue":t[50]||(t[50]=e=>i.selectedPackage.boxes_per_day=e),type:"number",step:"1",min:"0",placeholder:"กรอก # of Boxes/Day",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.boxes_per_day]])]),(0,a.Lk)("div",PV,[t[129]||(t[129]=(0,a.Lk)("label",{for:"totalBoxes",class:"block font-bold text-gray-700"},"Total Boxes",-1)),(0,a.bo)((0,a.Lk)("input",{id:"totalBoxes","onUpdate:modelValue":t[51]||(t[51]=e=>i.selectedPackage.total_boxes=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Boxes",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.total_boxes]])])]),(0,a.Lk)("div",CV,[(0,a.Lk)("div",SV,[t[130]||(t[130]=(0,a.Lk)("label",{for:"packagePrice",class:"block font-bold text-gray-700"},"ราคา",-1)),(0,a.bo)((0,a.Lk)("input",{id:"packagePrice","onUpdate:modelValue":t[52]||(t[52]=e=>i.selectedPackage.price=e),type:"number",step:"1",min:"0",placeholder:"กรอกราคา",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.price]])]),(0,a.Lk)("div",RV,[t[131]||(t[131]=(0,a.Lk)("label",{for:"startMonth",class:"block font-bold text-gray-700"},"เลือกเดือนเริ่มต้น (เฉพาะ Flash Sale)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"startMonth","onUpdate:modelValue":t[53]||(t[53]=e=>i.selectedPackage.start_date=e),type:"month",placeholder:"เลือกเดือนเริ่มต้น",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.start_date]])])]),(0,a.Lk)("div",TV,[t[132]||(t[132]=(0,a.Lk)("label",{for:"editPromotionDetail",class:"block text-gray-700 font-bold"},"รายละเอียดโปรโมชัน",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"editPromotionDetail","onUpdate:modelValue":t[54]||(t[54]=e=>i.selectedPackage.promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชัน",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedPackage.promotion_detail]])]),(0,a.Lk)("div",MV,[(0,a.Lk)("div",EV,[(0,a.Lk)("div",FV,[t[133]||(t[133]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[55]||(t[55]=e=>i.selectedPackage.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_mad]])]),(0,a.Lk)("div",zV,[t[134]||(t[134]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[56]||(t[56]=e=>i.selectedPackage.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_dessert]])]),(0,a.Lk)("div",AV,[t[135]||(t[135]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[57]||(t[57]=e=>i.selectedPackage.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_brittles]])]),(0,a.Lk)("div",OV,[t[136]||(t[136]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[58]||(t[58]=e=>i.selectedPackage.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_energy_balls]])])]),(0,a.Lk)("div",NV,[(0,a.Lk)("div",XV,[t[137]||(t[137]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[59]||(t[59]=e=>i.selectedPackage.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_dressing]])]),(0,a.Lk)("div",VV,[t[138]||(t[138]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[60]||(t[60]=e=>i.selectedPackage.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_yoghurt]])]),(0,a.Lk)("div",QV,[t[139]||(t[139]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[61]||(t[61]=e=>i.selectedPackage.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_granola]])])])])]),(0,a.Lk)("div",IV,[(0,a.Lk)("div",UV,[(0,a.Lk)("button",{onClick:t[62]||(t[62]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[63]||(t[63]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",$V,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[141]||(t[141]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[64]||(t[64]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[140]||(t[140]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",BV,[(0,a.Lk)("div",WV,[t[142]||(t[142]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[65]||(t[65]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[143]||(t[143]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",qV,[(0,a.Lk)("button",{onClick:t[66]||(t[66]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[67]||(t[67]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",ZV,[(0,a.Lk)("button",{onClick:t[68]||(t[68]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[144]||(t[144]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,jV),(0,a.Lk)("div",JV,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[69]||(t[69]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[70]||(t[70]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,KV)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[71]||(t[71]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[72]||(t[72]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[73]||(t[73]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[145]||(t[145]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,HV)])])}s(7550);var GV={name:"PackagePage",data(){return{headers:["#","Promotion Type","Program","Package","Package Validity","Total Days","ราคา",""],headerWidths:["5%","10%","10%","15%","10%","10%","10%","15%","15%"],searchQuery:"",selectedProgram:[],isFilterDropdownOpen:!1,selectAllProgramState:{},isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",packages:[],currentPage:1,itemsPerPage:10,isDetailModalOpen:!1,selectedPackageDetail:{},isEditModalOpen:!1,isAddModalOpen:!1,newPackage:{name:"",program_id:"",package_detail:"",package_validity:0,total_days:0,boxes_per_day:0,total_boxes:0,price:0,promotion_detail:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,start_date:null},selectedPackage:{id:"",name:"",program_id:"",package_detail:"",package_validity:0,total_days:0,boxes_per_day:0,total_boxes:0,price:0,promotion_detail:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,start_date:null},programs:[],promotion_types:[],selectedPromotionType:"",isDeleteModalOpen:!1,itemToDelete:null,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},components:{Multiselect:fp.Ay},computed:{totalPages(){return Math.ceil(this.packages.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedProgram.length||this.selectedProgram.includes(e.program_id),o=!this.selectedMonthYear||new Date(e.start_date).toISOString().slice(0,7)===this.selectedMonthYear;return t&&s&&o})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredPackage(){if(!this.packages||!Array.isArray(this.packages))return[];const e=this.packages.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedProgram.length||this.selectedProgram.includes(e.program_id),o=!this.selectedMonthYear||new Date(e.start_date).toISOString().slice(0,7)===this.selectedMonthYear;return t&&s&&o})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)},filteredDetail(){return{name:this.selectedPackageDetail.name,program:this.selectedPackageDetail.program.name,package_detail:this.selectedPackageDetail.package_detail,package_validity:this.selectedPackageDetail.package_validity,total_days:this.selectedPackageDetail.total_days,boxes_per_day:this.selectedPackageDetail.boxes_per_day,total_boxes:this.selectedPackageDetail.total_boxes,price:this.formatPrice(this.selectedPackageDetail.price),promotion_detail:this.selectedPackageDetail.promotion_detail,free_mad:this.selectedPackageDetail.free_mad,free_dessert:this.selectedPackageDetail.free_dessert,free_brittles:this.selectedPackageDetail.free_brittles,free_energy_balls:this.selectedPackageDetail.free_energy_balls,free_dressing:this.selectedPackageDetail.free_dressing,free_yoghurt:this.selectedPackageDetail.free_yoghurt,free_granola:this.selectedPackageDetail.free_granola}},filteredPrograms(){return this.selectedPromotionType&&this.selectedPromotionType.id?this.programs.filter((e=>e.promotion_type_id===this.selectedPromotionType.id)):[]},filteredEditPrograms(){return this.selectedPackage.program&&this.selectedPackage.program.promotionType?this.programs.filter((e=>e.promotion_type_id===this.selectedPackage.program.promotionType.id)):[]},groupedPrograms(){return this.programs.reduce(((e,t)=>{const s=t.promotionType?t.promotionType.name:"ไม่มีข้อมูล";return e[s]||(e[s]=[]),e[s].push(t),e}),{})},...(0,Ze.L8)(["packages"])},methods:{...(0,Ze.i0)(["fetchPackages","fetchPrograms","fetchPromotionTypes"]),formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formattedStartDate(e){if(!e)return"";const t=new Date(e),s=t.getMonth(),o=t.getFullYear(),a=["January","February","March","April","May","June","July","August","September","October","November","December"];return`${a[s]} ${o}`},async fetchPackages(){try{const e=await ke.A.get("http://127.0.0.1:3333/packages");this.packages=e.data,this.packages.sort(((e,t)=>e.id-t.id))}catch(e){console.error("Error fetching program:",e)}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.packages.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.packages.sort(((e,t)=>e.id-t.id)),this.currentPage=1},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){if(this.selectedProgram.length>0?this.filteredPackage=this.packages.filter((e=>this.selectedProgram.includes(e.program_id))):this.filteredPackage=this.packages,this.selectedMonthYear){const[e,t]=this.selectedMonthYear.split("-").map(Number);this.filteredPackage=this.filteredPackage.filter((s=>{const o=new Date(s.start_date);return o.getFullYear()===e&&o.getMonth()+1===t}))}this.isFilterDropdownOpen=!1,this.currentPage=1},toggleSelectPromotionAll(e){if(this.selectAllProgramState[e])this.selectedProgram=this.selectedProgram.filter((t=>!this.groupedPrograms[e].some((e=>e.id===t))));else{const t=this.groupedPrograms[e].map((e=>e.id));this.selectedProgram=[...new Set([...this.selectedProgram,...t])]}this.selectAllProgramState[e]=!this.selectAllProgramState[e]},clearFilter(){this.selectedProgram=[],this.selectedMonthYear="",this.filteredPackage=this.packages,Object.keys(this.selectAllProgramState).forEach((e=>{this.selectAllProgramState[e]=!1})),this.applyFilter()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getProgramName(e){const t=this.programs.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},onViewDetails(e){this.selectedPackageDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedPackageDetail={}},formatLabel(e){const t={name:"Package",program:"Program",package_detail:"Package Details for Purchase Summary",package_validity:"Package Validity",total_days:"Total Days",boxes_per_day:"# of Boxes/Day",total_boxes:"Total Boxes",price:"ราคา",promotion_detail:"รายละเอียดโปรโมชัน",free_mad:"จำนวนกล่องที่แถม M or A or D",free_dessert:"จำนวนกล่องที่แถม Dessert",free_brittles:"จำนวนกล่องที่แถม Brittles",free_energy_balls:"จำนวนกล่องที่แถม Energy Balls",free_dressing:"จำนวนกล่องที่แถม Dressing",free_yoghurt:"จำนวนกล่องที่แถม Yoghurt",free_granola:"จำนวนกล่องที่แถม Granola"};return t[e]||e},openEditModal(e){const t=this.programs.find((t=>t.id===e.program_id));this.selectedPackage={...e,program_id:t?{id:t.id,name:`${t.name}`}:null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedPackage.name||!this.selectedPackage.program_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=await ke.A.put(`http://127.0.0.1:3333/packages/${this.selectedPackage.id}`,{name:this.selectedPackage.name,program_id:this.selectedPackage.program_id.id,package_detail:this.selectedPackage.package_detail,package_validity:this.selectedPackage.package_validity,total_days:this.selectedPackage.total_days,boxes_per_day:this.selectedPackage.boxes_per_day,total_boxes:this.selectedPackage.total_boxes,price:this.selectedPackage.price,promotion_detail:this.selectedPackage.promotion_detail,free_mad:this.selectedPackage.free_mad,free_dessert:this.selectedPackage.free_dessert,free_brittles:this.selectedPackage.free_brittles,free_energy_balls:this.selectedPackage.free_energy_balls,free_dressing:this.selectedPackage.free_dressing,free_yoghurt:this.selectedPackage.free_yoghurt,free_granola:this.selectedPackage.free_granola,start_date:this.selectedPackage.start_date}),t=this.packages.findIndex((e=>e.id===this.selectedPackage.id));-1!==t&&(this.packages[t]={...e.data,promotionType:this.promotion_types.find((t=>t.id===e.data.promotion_type_id))||{}}),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.isEditModalOpen=!1,await this.fetchPackages()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPackage={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/packages/${this.itemToDelete}`),this.packages=this.packages.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchPackages(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.clearAdd()},clearAdd(){this.newPackage={name:"",program_id:"",package_detail:"",package_validity:0,total_days:0,boxes_per_day:0,total_boxes:0,price:0,promotion_detail:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,start_date:null},this.selectedPromotionType=null},async addPackage(){if(this.newPackage.name)try{const e=await ke.A.post("http://127.0.0.1:3333/packages",{name:this.newPackage.name,program_id:this.newPackage.program_id.id,package_detail:this.newPackage.package_detail,package_validity:this.newPackage.package_validity,total_days:this.newPackage.total_days,boxes_per_day:this.newPackage.boxes_per_day,total_boxes:this.newPackage.total_boxes,price:this.newPackage.price,promotion_detail:this.newPackage.promotion_detail,start_date:this.newPackage.start_date,free_mad:this.newPackage.free_mad,free_dessert:this.newPackage.free_dessert,free_brittles:this.newPackage.free_brittles,free_energy_balls:this.newPackage.free_energy_balls,free_dressing:this.newPackage.free_dressing,free_yoghurt:this.newPackage.free_yoghurt,free_granola:this.newPackage.free_granola});e.data&&e.data.promotionType&&e.data.program.promotionType&&this.packages.push(e.data),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!"),this.closeAddModal(),await this.fetchPackages()}catch(e){console.error("Error adding program:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},async fetchPrograms(){try{const e=await ke.A.get("http://127.0.0.1:3333/programs");this.programs=e.data}catch(e){console.error("Error fetching promotion types:",e)}},async fetchPromotionTypes(){try{const e=await ke.A.get("http://127.0.0.1:3333/promotion-types");this.promotion_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.sortData("id"),this.fetchPackages(),this.fetchPrograms(),this.fetchPromotionTypes()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPackages(),this.fetchPrograms(),this.fetchPromotionTypes(),(0,Po.A)("#startMonth",{dateFormat:"Y-m",altInput:!0,altFormat:"F Y",allowInput:!0})},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const eQ=(0,_e.A)(GV,[["render",YV]]);var tQ=eQ;const sQ={class:"mt-[-20px]"},oQ={class:"flex space-x-2 items-center relative"},aQ={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},rQ={class:"text-m text-custom-orange font-bold"},lQ={class:"add relative inline-block"},iQ={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},nQ={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},dQ={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},cQ={class:"flex space-x-2"},uQ={class:"p-6 space-y-4 overflow-y-auto flex-grow"},pQ={class:"mb-4"},hQ={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},gQ={class:"flex space-x-2"},mQ={class:"sort relative inline-block",ref:"sortDropdown"},yQ={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},kQ={class:"list-none p-0 m-0"},fQ={key:0,class:"material-symbols-outlined text-sm"},bQ={key:0,class:"material-symbols-outlined text-sm"},xQ={class:"flex w-[250px] relative"},_Q={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},wQ={class:"bg-custom-orange text-white"},vQ={class:"px-4 py-2 align-top pb-5"},LQ={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},DQ={class:"px-4 py-2 align-top text-right pb-5"},PQ={class:"flex justify-end space-x-2"},CQ=["onClick"],SQ=["onClick"],RQ={key:0},TQ={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},MQ={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},EQ={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},FQ={class:"flex space-x-2"},zQ={class:"p-6 space-y-4 overflow-y-auto flex-grow"},AQ={class:"mb-4"},OQ={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},NQ={class:"flex space-x-2"},XQ={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},VQ={class:"bg-white rounded-lg shadow-md w-1/3"},QQ={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},IQ={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},UQ={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},$Q=["disabled"],BQ={class:"flex items-center space-x-1"},WQ=["onClick"],qQ=["disabled"];function ZQ(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[32]||(t[32]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[31]||(t[31]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[34]||(t[34]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[33]||(t[33]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",sQ,[(0,a.Lk)("div",oQ,[(0,a.Lk)("div",aQ,[t[35]||(t[35]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภท Package Type ทั้งหมด: ",-1)),(0,a.Lk)("span",rQ,(0,l.v_)(i.package_types.length)+" รายการ",1)]),(0,a.Lk)("div",lQ,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",iQ,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[38]||(t[38]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[37]||(t[37]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",nQ,[(0,a.Lk)("div",dQ,[t[39]||(t[39]=(0,a.Lk)("div",{class:"flex-1 flex items-left"},[(0,a.Lk)("span",{class:"text-xl font-bold"},"เพิ่ม Package Type")],-1)),(0,a.Lk)("div",cQ,[(0,a.Lk)("span",{onClick:t[4]||(t[4]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",uQ,[(0,a.Lk)("div",pQ,[t[40]||(t[40]=(0,a.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อ Package Type",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>i.newPackageType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[o.Jo,i.newPackageType.name]])])]),(0,a.Lk)("div",hQ,[(0,a.Lk)("div",gQ,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.addPromotionType&&n.addPromotionType(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",mQ,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[41]||(t[41]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[42]||(t[42]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",yQ,[(0,a.Lk)("ul",kQ,[(0,a.Lk)("li",{onClick:t[9]||(t[9]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[43]||(t[43]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",fQ,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[10]||(t[10]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[44]||(t[44]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",bQ,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[45]||(t[45]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",xQ,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[13]||(t[13]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[14]||(t[14]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",_Q,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",wQ,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPackageType,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",vQ,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",LQ,(0,l.v_)(e.name),1),(0,a.Lk)("td",DQ,[(0,a.Lk)("div",PQ,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[46]||(t[46]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,CQ),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[47]||(t[47]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,SQ)])])])))),128)),0===n.filteredPackageType.length?((0,a.uX)(),(0,a.CE)("tr",RQ,t[48]||(t[48]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",TQ,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[16]||(t[16]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",MQ,[(0,a.Lk)("div",EQ,[t[51]||(t[51]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข Package Type",-1)),(0,a.Lk)("div",FQ,[(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",zQ,[(0,a.Lk)("div",AQ,[t[52]||(t[52]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>i.selectedPackageType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPackageType.name]])])]),(0,a.Lk)("div",OQ,[(0,a.Lk)("div",NQ,[(0,a.Lk)("button",{onClick:t[19]||(t[19]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",XQ,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[54]||(t[54]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",VQ,[(0,a.Lk)("div",QQ,[t[55]||(t[55]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[22]||(t[22]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[56]||(t[56]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",IQ,[(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",UQ,[(0,a.Lk)("button",{onClick:t[25]||(t[25]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,$Q),(0,a.Lk)("div",BQ,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[26]||(t[26]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[27]||(t[27]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,WQ)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[28]||(t[28]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[29]||(t[29]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[30]||(t[30]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,qQ)])])],64)}var jQ={name:"PromotionTypePage",data(){return{headers:["#","ชื่อ",""],headerWidths:["10%","85%","5%"],searchQuery:"",isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",package_types:[],currentPage:1,itemsPerPage:10,selectedPackageType:{},isEditModalOpen:!1,isAddModalOpen:!1,newPackageType:{name:""},isDeleteModalOpen:!1,itemToDelete:null,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){const e=this.package_types.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())}));return Math.ceil(e.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredPackageType(){const e=this.package_types.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)}},methods:{async fetchPackageTypes(){try{const e=await ke.A.get("http://127.0.0.1:3333/package-types");this.package_types=e.data,this.package_types.sort(((e,t)=>e.id-t.id))}catch(e){}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.package_types.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.package_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedPackageType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await ke.A.put(`http://127.0.0.1:3333/package-types/${this.selectedPackageType.id}`,{name:this.selectedPackageType.name});const e=this.package_types.findIndex((e=>e.id===this.selectedPackageType.id));-1!==e&&(this.package_types[e]={...this.selectedPackageType},await this.fetchPackageTypes(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")),this.isEditModalOpen=!1}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPackageType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/package-types/${this.itemToDelete}`),this.package_types=this.package_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchPackageTypes(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0,this.newPackageType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addPromotionType(){if(this.newPackageType.name.trim())try{const e=await ke.A.post("http://127.0.0.1:3333/package-types",this.newPackageType);this.package_types.push(e.data),this.closeAddModal(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!"),await this.fetchPackageTypes()}catch(e){console.error("Error adding promotion type:",e),alert("เกิดข้อผิดพลาดในการเพิ่มข้อมูล")}else this.showErrorToastNotification("กรุณากรอกชื่อ!")},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.sortData("id"),this.fetchPackageTypes()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPackageTypes()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const JQ=(0,_e.A)(jQ,[["render",ZQ]]);var KQ=JQ;const HQ={class:"mt-[-20px]"},YQ={class:"flex space-x-2 items-center relative"},GQ={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},eI={class:"text-m text-custom-orange font-bold"},tI={class:"add relative inline-block"},sI={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},oI={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},aI={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},rI={class:"flex space-x-2"},lI={class:"p-6 space-y-4 overflow-y-auto flex-grow"},iI={class:"mb-4"},nI={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},dI={class:"flex space-x-2"},cI={class:"sort relative inline-block",ref:"sortDropdown"},uI={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},pI={class:"list-none p-0 m-0"},hI={key:0,class:"material-symbols-outlined text-sm"},gI={key:0,class:"material-symbols-outlined text-sm"},mI={class:"flex w-[250px] relative"},yI={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},kI={class:"bg-custom-orange text-white"},fI={class:"px-4 py-2 align-top pb-5"},bI={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},xI={class:"px-4 py-2 align-top text-right pb-5"},_I={class:"flex justify-end space-x-2"},wI=["onClick"],vI=["onClick"],LI={key:0},DI={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},PI={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},CI={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},SI={class:"flex space-x-2"},RI={class:"p-6 space-y-4 overflow-y-auto flex-grow"},TI={class:"mb-4"},MI={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},EI={class:"flex space-x-2"},FI={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},zI={class:"bg-white rounded-lg shadow-md w-1/3"},AI={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},OI={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},NI={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},XI=["disabled"],VI={class:"flex items-center space-x-1"},QI=["onClick"],II=["disabled"];function UI(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[32]||(t[32]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[31]||(t[31]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[34]||(t[34]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[33]||(t[33]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",HQ,[(0,a.Lk)("div",YQ,[(0,a.Lk)("div",GQ,[t[35]||(t[35]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวน Sales Type (Additional Sales) ทั้งหมด: ",-1)),(0,a.Lk)("span",eI,(0,l.v_)(i.additional_types.length)+" รายการ",1)]),(0,a.Lk)("div",tI,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",sI,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[38]||(t[38]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[37]||(t[37]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",oI,[(0,a.Lk)("div",aI,[t[39]||(t[39]=(0,a.Lk)("div",{class:"flex-1 flex items-left"},[(0,a.Lk)("span",{class:"font-bold"},"เพิ่ม Sales Type (Additional Sales)")],-1)),(0,a.Lk)("div",rI,[(0,a.Lk)("span",{onClick:t[4]||(t[4]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",lI,[(0,a.Lk)("div",iI,[t[40]||(t[40]=(0,a.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อ Sales Type (Additional Sales)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>i.newPromotionType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[o.Jo,i.newPromotionType.name]])])]),(0,a.Lk)("div",nI,[(0,a.Lk)("div",dI,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.addAdditionalType&&n.addAdditionalType(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",cI,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[41]||(t[41]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[42]||(t[42]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",uI,[(0,a.Lk)("ul",pI,[(0,a.Lk)("li",{onClick:t[9]||(t[9]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[43]||(t[43]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",hI,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[10]||(t[10]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[44]||(t[44]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",gI,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[45]||(t[45]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",mI,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[13]||(t[13]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[14]||(t[14]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",yI,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",kI,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredAdditionalType,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",fI,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",bI,(0,l.v_)(e.name),1),(0,a.Lk)("td",xI,[(0,a.Lk)("div",_I,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[46]||(t[46]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,wI),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[47]||(t[47]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,vI)])])])))),128)),0===n.filteredAdditionalType.length?((0,a.uX)(),(0,a.CE)("tr",LI,t[48]||(t[48]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",DI,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[16]||(t[16]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",PI,[(0,a.Lk)("div",CI,[t[51]||(t[51]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข Sales Type (Additional Sales)",-1)),(0,a.Lk)("div",SI,[(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",RI,[(0,a.Lk)("div",TI,[t[52]||(t[52]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>i.selectedAdditionalType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedAdditionalType.name]])])]),(0,a.Lk)("div",MI,[(0,a.Lk)("div",EI,[(0,a.Lk)("button",{onClick:t[19]||(t[19]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",FI,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[54]||(t[54]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",zI,[(0,a.Lk)("div",AI,[t[55]||(t[55]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[22]||(t[22]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[56]||(t[56]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",OI,[(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",NI,[(0,a.Lk)("button",{onClick:t[25]||(t[25]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,XI),(0,a.Lk)("div",VI,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[26]||(t[26]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[27]||(t[27]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,QI)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[28]||(t[28]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[29]||(t[29]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[30]||(t[30]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,II)])])],64)}var $I={name:"AdditionalTypePage",data(){return{headers:["#","ชื่อ",""],headerWidths:["10%","85%","5%"],searchQuery:"",isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",additional_types:[],currentPage:1,itemsPerPage:10,selectedAdditionalType:{},isEditModalOpen:!1,isAddModalOpen:!1,newPromotionType:{name:""},isDeleteModalOpen:!1,itemToDelete:null,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){const e=this.additional_types.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())}));return Math.ceil(e.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredAdditionalType(){const e=this.additional_types.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)}},methods:{async fetchAdditionalTypes(){try{const e=await ke.A.get("http://127.0.0.1:3333/additional-types");this.additional_types=e.data,this.additional_types.sort(((e,t)=>e.id-t.id))}catch(e){}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.additional_types.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.additional_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedAdditionalType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await ke.A.put(`http://127.0.0.1:3333/additional-types/${this.selectedAdditionalType.id}`,{name:this.selectedAdditionalType.name});const e=this.additional_types.findIndex((e=>e.id===this.selectedAdditionalType.id));-1!==e&&(this.additional_types[e]={...this.selectedAdditionalType},await this.fetchAdditionalTypes()),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.isEditModalOpen=!1}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedAdditionalType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/additional-types/${this.itemToDelete}`),this.additional_types=this.additional_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchAdditionalTypes(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0,this.newPromotionType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addAdditionalType(){if(this.newPromotionType.name.trim())try{const e=await ke.A.post("http://127.0.0.1:3333/additional-types",this.newPromotionType);this.additional_types.push(e.data),await this.fetchAdditionalTypes(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!"),this.closeAddModal()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกชื่อ!")},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.sortData("id"),this.fetchAdditionalTypes()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchAdditionalTypes()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const BI=(0,_e.A)($I,[["render",UI]]);var WI=BI;const qI={class:"mt-[-20px]"},ZI={class:"flex space-x-2 items-center relative"},jI={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},JI={class:"text-m text-custom-orange font-bold"},KI={class:"add relative inline-block"},HI={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},YI={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},GI={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},eU={class:"flex space-x-2"},tU={class:"p-6 space-y-4 overflow-y-auto flex-grow"},sU={class:"mb-4"},oU={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},aU={class:"flex space-x-2"},rU={class:"sort relative inline-block",ref:"sortDropdown"},lU={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},iU={class:"list-none p-0 m-0"},nU={key:0,class:"material-symbols-outlined text-sm"},dU={key:0,class:"material-symbols-outlined text-sm"},cU={class:"flex w-[250px] relative"},uU={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},pU={class:"bg-custom-orange text-white"},hU={class:"px-4 py-2 align-top pb-5"},gU={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},mU={class:"px-4 py-2 align-top text-right pb-5"},yU={class:"flex justify-end space-x-2"},kU=["onClick"],fU=["onClick"],bU={key:0},xU={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},_U={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},wU={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},vU={class:"flex space-x-2"},LU={class:"p-6 space-y-4 overflow-y-auto flex-grow"},DU={class:"mb-4"},PU={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},CU={class:"flex space-x-2"},SU={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},RU={class:"bg-white rounded-lg shadow-md w-1/3"},TU={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},MU={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},EU={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},FU=["disabled"],zU={class:"flex items-center space-x-1"},AU=["onClick"],OU=["disabled"];function NU(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[32]||(t[32]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[31]||(t[31]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[34]||(t[34]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[33]||(t[33]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",qI,[(0,a.Lk)("div",ZI,[(0,a.Lk)("div",jI,[t[35]||(t[35]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภทโซนการจัดส่งทั้งหมด: ",-1)),(0,a.Lk)("span",JI,(0,l.v_)(i.zone_types.length)+" รายการ",1)]),(0,a.Lk)("div",KI,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",HI,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[38]||(t[38]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[37]||(t[37]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",YI,[(0,a.Lk)("div",GI,[t[39]||(t[39]=(0,a.Lk)("div",{class:"flex-1 flex items-left"},[(0,a.Lk)("span",{class:"font-bold"},"เพิ่มประเภทโซนการจัดส่ง")],-1)),(0,a.Lk)("div",eU,[(0,a.Lk)("span",{onClick:t[4]||(t[4]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",tU,[(0,a.Lk)("div",sU,[t[40]||(t[40]=(0,a.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อประเภทโซนการจัดส่ง",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>i.newZoneDeliveryType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[o.Jo,i.newZoneDeliveryType.name]])])]),(0,a.Lk)("div",oU,[(0,a.Lk)("div",aU,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.addZoneDliveryType&&n.addZoneDliveryType(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",rU,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[41]||(t[41]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[42]||(t[42]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",lU,[(0,a.Lk)("ul",iU,[(0,a.Lk)("li",{onClick:t[9]||(t[9]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[43]||(t[43]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",nU,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[10]||(t[10]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[44]||(t[44]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",dU,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[45]||(t[45]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",cU,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[13]||(t[13]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[14]||(t[14]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",uU,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",pU,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredZoneTypes,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",hU,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",gU,(0,l.v_)(e.name),1),(0,a.Lk)("td",mU,[(0,a.Lk)("div",yU,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[46]||(t[46]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,kU),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[47]||(t[47]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,fU)])])])))),128)),0===n.filteredZoneTypes.length?((0,a.uX)(),(0,a.CE)("tr",bU,t[48]||(t[48]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",xU,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[16]||(t[16]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",_U,[(0,a.Lk)("div",wU,[t[51]||(t[51]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขประเภทโซนการจัดส่ง",-1)),(0,a.Lk)("div",vU,[(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",LU,[(0,a.Lk)("div",DU,[t[52]||(t[52]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>i.selectedZoneDeliveryType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedZoneDeliveryType.name]])])]),(0,a.Lk)("div",PU,[(0,a.Lk)("div",CU,[(0,a.Lk)("button",{onClick:t[19]||(t[19]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",SU,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[54]||(t[54]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",RU,[(0,a.Lk)("div",TU,[t[55]||(t[55]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[22]||(t[22]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[56]||(t[56]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",MU,[(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",EU,[(0,a.Lk)("button",{onClick:t[25]||(t[25]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,FU),(0,a.Lk)("div",zU,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[26]||(t[26]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[27]||(t[27]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,AU)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[28]||(t[28]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[29]||(t[29]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[30]||(t[30]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,OU)])])],64)}var XU={name:"ZoneDeliveryTypePage",data(){return{headers:["#","ชื่อ",""],headerWidths:["10%","85%","5%"],searchQuery:"",isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",zone_types:[],currentPage:1,itemsPerPage:10,selectedZoneDeliveryType:{},isEditModalOpen:!1,isAddModalOpen:!1,newZoneDeliveryType:{name:""},isDeleteModalOpen:!1,itemToDelete:null,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){const e=this.zone_types.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())}));return Math.ceil(e.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredZoneTypes(){const e=this.zone_types.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)}},methods:{async fetchZoneTypes(){try{const e=await ke.A.get("http://127.0.0.1:3333/zone-delivery-types");this.zone_types=e.data,this.zone_types.sort(((e,t)=>e.id-t.id))}catch(e){}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.zone_types.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.zone_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedZoneDeliveryType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await ke.A.put(`http://127.0.0.1:3333/zone-delivery-types/${this.selectedZoneDeliveryType.id}`,{name:this.selectedZoneDeliveryType.name});const e=this.zone_types.findIndex((e=>e.id===this.selectedZoneDeliveryType.id));-1!==e&&(this.zone_types[e]={...this.selectedZoneDeliveryType},await this.fetchZoneTypes()),this.isEditModalOpen=!1,this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedZoneDeliveryType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/zone-delivery-types/${this.itemToDelete}`),this.zone_types=this.zone_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchZoneTypes(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0,this.newZoneDeliveryType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addZoneDliveryType(){if(this.newZoneDeliveryType.name.trim())try{const e=await ke.A.post("http://127.0.0.1:3333/zone-delivery-types",this.newZoneDeliveryType);this.zone_types.push(e.data),await this.fetchZoneTypes(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!"),this.closeAddModal()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else alert("กรุณากรอกชื่อโปรโมชั่น")},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.sortData("id"),this.fetchZoneTypes()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchZoneTypes()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const VU=(0,_e.A)(XU,[["render",NU]]);var QU=VU;const IU={class:"mt-[-20px]"},UU={class:"flex space-x-2 items-center relative"},$U={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},BU={class:"text-m text-custom-orange font-bold"},WU={class:"ml-2"},qU={class:"add relative inline-block"},ZU={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},jU={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[500px] flex flex-col"},JU={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},KU={class:"p-6 space-y-4"},HU={class:"flex items-center gap-4"},YU={class:"w-1/2"},GU={class:"w-1/2"},e$={class:"relative"},t$={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},s$={class:"flex space-x-2"},o$={class:"sort relative inline-block",ref:"sortDropdown"},a$={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},r$={class:"list-none p-0 m-0"},l$={key:0,class:"material-symbols-outlined text-sm"},i$={key:0,class:"material-symbols-outlined text-sm"},n$={class:"filter relative inline-block",ref:"filterDropdown"},d$={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},c$={class:"p-4 w-[500px] list-none"},u$={class:"grid grid-cols-2 gap-4"},p$=["value"],h$={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},g$={class:"flex space-x-2"},m$={class:"flex w-[250px] relative"},y$={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},k$={class:"bg-custom-orange text-white"},f$={class:"px-4 py-2 align-top pb-5"},b$={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},x$={class:"px-4 py-2 align-top pb-5"},_$={class:"px-4 py-2 align-top pb-5"},w$={class:"px-4 py-2 align-top text-right pb-5"},v$={class:"flex justify-end space-x-2"},L$=["onClick"],D$=["onClick"],P$={key:0},C$={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},S$={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},R$={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},T$={class:"flex space-x-2"},M$={class:"p-6 space-y-4"},E$={class:"mb-4"},F$={class:"flex items-center gap-4"},z$={class:"w-1/2"},A$={class:"w-1/2"},O$={class:"relative"},N$={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},X$={class:"flex space-x-2"},V$={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Q$={class:"bg-white rounded-lg shadow-md w-1/3"},I$={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},U$={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},$$={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},B$=["disabled"],W$={class:"flex items-center space-x-1"},q$=["onClick"],Z$=["disabled"];function j$(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[42]||(t[42]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[41]||(t[41]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[44]||(t[44]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[43]||(t[43]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",IU,[(0,a.Lk)("div",UU,[(0,a.Lk)("div",$U,[t[45]||(t[45]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนโซนการจัดส่งทั้งหมด: ",-1)),(0,a.Lk)("span",BU,(0,l.v_)(i.zoneDeliveries.length)+" รายการ",1)]),i.selectedZoneDeliveryTypes.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[47]||(t[47]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",WU,[t[46]||(t[46]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedZoneDeliveryTypes.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedZoneDeliveryTypes.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",qU,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[48]||(t[48]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",ZU,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",jU,[(0,a.Lk)("div",JU,[t[51]||(t[51]=(0,a.Lk)("h2",{class:"font-bold"},"เพิ่มโซนการจัดส่ง",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",KU,[(0,a.Lk)("div",null,[t[52]||(t[52]=(0,a.Lk)("label",{for:"zoneDeliveryName",class:"block font-bold text-gray-700"},"ชื่อโซนการจัดส่ง",-1)),(0,a.bo)((0,a.Lk)("input",{id:"zoneDeliveryName","onUpdate:modelValue":t[6]||(t[6]=e=>i.newZoneDelivery.name=e),type:"text",placeholder:"กรอกชื่อโซนการจัดส่ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newZoneDelivery.name]])]),(0,a.Lk)("div",HU,[(0,a.Lk)("div",YU,[t[53]||(t[53]=(0,a.Lk)("label",{for:"zoneDeliveryType",class:"block font-bold text-gray-700"},"ประเภทโซนการจัดส่ง",-1)),(0,a.bF)(d,{modelValue:i.newZoneDelivery.zone_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.newZoneDelivery.zone_type_id=e),options:i.zone_delivery_types,"track-by":"id",label:"name",placeholder:"เลือกประเภทโซนการจัดส่ง"},null,8,["modelValue","options"])]),(0,a.Lk)("div",GU,[t[55]||(t[55]=(0,a.Lk)("label",{for:"zoneDeliveryPrice",class:"block text-gray-700 font-medium"},"ราคา",-1)),(0,a.Lk)("div",e$,[t[54]||(t[54]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.newZoneDelivery.price=e),id:"zoneDeliveryPrice",type:"number",step:"1",min:"0",class:"w-full pl-8 px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newZoneDelivery.price]])])])])]),(0,a.Lk)("div",t$,[(0,a.Lk)("div",s$,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>n.addzoneDelivery&&n.addzoneDelivery(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",o$,[(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[56]||(t[56]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[57]||(t[57]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",a$,[(0,a.Lk)("ul",r$,[(0,a.Lk)("li",{onClick:t[12]||(t[12]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[58]||(t[58]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",l$,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[13]||(t[13]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[59]||(t[59]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",i$,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[14]||(t[14]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[60]||(t[60]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",n$,[(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[61]||(t[61]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[62]||(t[62]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",d$,[(0,a.Lk)("div",c$,[t[63]||(t[63]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยประเภทโซนการจัดส่ง",-1)),(0,a.Lk)("div",u$,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.zone_delivery_types,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=e=>i.selectedZoneDeliveryTypes=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,p$),[[o.lH,i.selectedZoneDeliveryTypes]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",h$,[(0,a.Lk)("li",{onClick:t[17]||(t[17]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[64]||(t[64]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",g$,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",m$,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[21]||(t[21]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",y$,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",k$,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredZoneDeliveries,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",f$,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",b$,(0,l.v_)(e.name),1),(0,a.Lk)("td",x$,(0,l.v_)(n.getZoneDeliveryTypeName(e.zone_type_id)),1),(0,a.Lk)("td",_$,(0,l.v_)(n.formatPrice(e.price)),1),(0,a.Lk)("td",w$,[(0,a.Lk)("div",v$,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[65]||(t[65]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,L$),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[66]||(t[66]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,D$)])])])))),128)),0===n.filteredZoneDeliveries.length?((0,a.uX)(),(0,a.CE)("tr",P$,t[67]||(t[67]=[(0,a.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",C$,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[24]||(t[24]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",S$,[(0,a.Lk)("div",R$,[t[70]||(t[70]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขโซนการจัดส่ง",-1)),(0,a.Lk)("div",T$,[(0,a.Lk)("span",{onClick:t[25]||(t[25]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",M$,[(0,a.Lk)("div",E$,[t[71]||(t[71]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>i.selectedZoneDelivery.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedZoneDelivery.name]])]),(0,a.Lk)("div",F$,[(0,a.Lk)("div",z$,[t[72]||(t[72]=(0,a.Lk)("label",{for:"editZoneDeliveryType",class:"block font-bold text-gray-700"},"ประเภทโซนการจัดส่ง",-1)),(0,a.bF)(d,{modelValue:i.selectedZoneDelivery.zone_type_id,"onUpdate:modelValue":t[27]||(t[27]=e=>i.selectedZoneDelivery.zone_type_id=e),options:i.zone_delivery_types,placeholder:"เลือกประเภทโซนการจัดส่งe","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",A$,[t[74]||(t[74]=(0,a.Lk)("label",{for:"editZoneDeliveryPrice",class:"block text-gray-700 font-medium"},"ราคา",-1)),(0,a.Lk)("div",O$,[t[73]||(t[73]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[28]||(t[28]=e=>i.selectedZoneDelivery.price=e),id:"editZoneDeliveryPrice",type:"number",step:"1",min:"0",class:"w-full pl-8 px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedZoneDelivery.price]])])])])]),(0,a.Lk)("div",N$,[(0,a.Lk)("div",X$,[(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",V$,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[76]||(t[76]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[31]||(t[31]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[75]||(t[75]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Q$,[(0,a.Lk)("div",I$,[t[77]||(t[77]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[32]||(t[32]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[78]||(t[78]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",U$,[(0,a.Lk)("button",{onClick:t[33]||(t[33]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[34]||(t[34]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",$$,[(0,a.Lk)("button",{onClick:t[35]||(t[35]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[79]||(t[79]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,B$),(0,a.Lk)("div",W$,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[36]||(t[36]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[37]||(t[37]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,q$)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[38]||(t[38]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[39]||(t[39]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[40]||(t[40]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[80]||(t[80]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Z$)])])],64)}var J$={name:"zoneDeliveryPage",data(){return{headers:["#","ชื่อ","ประเภทโซนการจัดส่ง","ราคา",""],headerWidths:["10%","30%","35%","20","5%"],searchQuery:"",selectedZoneDeliveryTypes:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",zoneDeliveries:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newZoneDelivery:{name:"",zone_type_id:"",price:""},selectedZoneDelivery:{id:"",name:"",zone_type_id:"",price:""},zone_delivery_types:[],isDeleteModalOpen:!1,itemToDelete:null,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},components:{Multiselect:fp.Ay},computed:{totalPages(){return Math.ceil(this.zoneDeliveries.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedZoneDeliveryTypes.length||this.selectedZoneDeliveryTypes.includes(e.zone_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredZoneDeliveries(){const e=this.zoneDeliveries.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedZoneDeliveryTypes.length||this.selectedZoneDeliveryTypes.includes(e.zone_type_id);return t&&s})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)},...(0,Ze.L8)(["zoneDeliveries"])},methods:{...(0,Ze.i0)(["fetchZoneDeliveries","fetchZoneDliveryTypes"]),formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},async fetchZoneDeliveries(){try{const e=await ke.A.get("http://127.0.0.1:3333/zone-deliveries");this.zoneDeliveries=e.data,this.zoneDeliveries.sort(((e,t)=>e.id-t.id))}catch(e){console.error("Error fetching zoneDelivery:",e)}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.zoneDeliveries.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.zoneDeliveries.sort(((e,t)=>e.id-t.id)),this.currentPage=1},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedZoneDeliveryTypes.length>0?this.filteredZoneDeliveries=this.zoneDeliveries.filter((e=>this.selectedZoneDeliveryTypes.includes(e.zone_type_id))):this.filteredZoneDeliveries=this.zoneDeliveries,this.isFilterDropdownOpen=!1},clearFilter(){this.selectedZoneDeliveryTypes=[],this.filteredZoneDeliveries=this.zoneDeliveries},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getZoneDeliveryTypeName(e){const t=this.zone_delivery_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){const t=this.zone_delivery_types.find((t=>t.id===e.zone_type_id));this.selectedZoneDelivery={...e,zone_type_id:t?{id:t.id,name:`${t.name}`}:null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedZoneDelivery.name||!this.selectedZoneDelivery.zone_type_id||!this.selectedZoneDelivery.price)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=await ke.A.put(`http://127.0.0.1:3333/zone-deliveries/${this.selectedZoneDelivery.id}`,{name:this.selectedZoneDelivery.name,zone_type_id:this.selectedZoneDelivery.zone_type_id.id,price:this.selectedZoneDelivery.price}),t=this.zoneDeliveries.findIndex((e=>e.id===this.selectedZoneDelivery.id));-1!==t&&(this.zoneDeliveries[t]=e.data),this.closeEditModal(),await this.fetchZoneDeliveries(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedZoneDelivery={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/zone-deliveries/${this.itemToDelete}`),this.zoneDeliveries=this.zoneDeliveries.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchZoneDeliveries(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewZoneDelivery()},resetNewZoneDelivery(){this.newZoneDelivery={name:"",zone_type_id:"",price:""}},async addzoneDelivery(){if(this.newZoneDelivery.name&&this.newZoneDelivery.zone_type_id)try{const e=await ke.A.post("http://127.0.0.1:3333/zone-deliveries",{name:this.newZoneDelivery.name,zone_type_id:this.newZoneDelivery.zone_type_id.id,price:this.newZoneDelivery.price});this.zoneDeliveries.push(e.data),this.closeAddModal(),await this.fetchZoneDeliveries(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},async fetchZoneDliveryTypes(){try{const e=await ke.A.get("http://127.0.0.1:3333/zone-delivery-types");this.zone_delivery_types=e.data}catch(e){}},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.sortData("id"),this.fetchZoneDeliveries(),this.fetchZoneDliveryTypes()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchZoneDeliveries(),this.fetchZoneDliveryTypes()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const K$=(0,_e.A)(J$,[["render",j$],["__scopeId","data-v-03148b32"]]);var H$=K$;const Y$={class:"mt-[-20px]"},G$={class:"flex space-x-2 items-center relative"},eB={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},tB={class:"text-m text-custom-orange font-bold"},sB={class:"add relative inline-block"},oB={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},aB={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},rB={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},lB={class:"flex space-x-2"},iB={class:"p-6 space-y-4 overflow-y-auto flex-grow"},nB={class:"mb-4"},dB={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},cB={class:"flex space-x-2"},uB={class:"sort relative inline-block",ref:"sortDropdown"},pB={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},hB={class:"list-none p-0 m-0"},gB={key:0,class:"material-symbols-outlined text-sm"},mB={key:0,class:"material-symbols-outlined text-sm"},yB={class:"flex w-[250px] relative"},kB={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},fB={class:"bg-custom-orange text-white"},bB={class:"px-4 py-2 align-top pb-5"},xB={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},_B={class:"px-4 py-2 align-top text-right pb-5"},wB={class:"flex justify-end space-x-2"},vB=["onClick"],LB=["onClick"],DB={key:0},PB={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},CB={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},SB={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},RB={class:"flex space-x-2"},TB={class:"p-6 space-y-4 overflow-y-auto flex-grow"},MB={class:"mb-4"},EB={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},FB={class:"flex space-x-2"},zB={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},AB={class:"bg-white rounded-lg shadow-md w-1/3"},OB={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},NB={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},XB={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},VB=["disabled"],QB={class:"flex items-center space-x-1"},IB=["onClick"],UB=["disabled"];function $B(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[32]||(t[32]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[31]||(t[31]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[34]||(t[34]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[33]||(t[33]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Y$,[(0,a.Lk)("div",G$,[(0,a.Lk)("div",eB,[t[35]||(t[35]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภทโปรแกรมเมนูทั้งหมด: ",-1)),(0,a.Lk)("span",tB,(0,l.v_)(i.menu_types.length)+" รายการ",1)]),(0,a.Lk)("div",sB,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",oB,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[38]||(t[38]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[37]||(t[37]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",aB,[(0,a.Lk)("div",rB,[t[39]||(t[39]=(0,a.Lk)("div",{class:"flex-1 flex items-left"},[(0,a.Lk)("span",{class:"font-bold"},"เพิ่มประเภทโปรแกรมเมนู")],-1)),(0,a.Lk)("div",lB,[(0,a.Lk)("span",{onClick:t[4]||(t[4]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",iB,[(0,a.Lk)("div",nB,[t[40]||(t[40]=(0,a.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>i.newMenuType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[o.Jo,i.newMenuType.name]])])]),(0,a.Lk)("div",dB,[(0,a.Lk)("div",cB,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.addMenuType&&n.addMenuType(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",uB,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[41]||(t[41]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[42]||(t[42]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",pB,[(0,a.Lk)("ul",hB,[(0,a.Lk)("li",{onClick:t[9]||(t[9]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[43]||(t[43]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",gB,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[10]||(t[10]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[44]||(t[44]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",mB,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[45]||(t[45]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",yB,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[13]||(t[13]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[14]||(t[14]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",kB,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",fB,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMenuType,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",bB,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",xB,(0,l.v_)(e.name),1),(0,a.Lk)("td",_B,[(0,a.Lk)("div",wB,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[46]||(t[46]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,vB),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[47]||(t[47]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,LB)])])])))),128)),0===n.filteredMenuType.length?((0,a.uX)(),(0,a.CE)("tr",DB,t[48]||(t[48]=[(0,a.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",PB,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[16]||(t[16]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",CB,[(0,a.Lk)("div",SB,[t[51]||(t[51]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขโปรแกรมเมนู",-1)),(0,a.Lk)("div",RB,[(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",TB,[(0,a.Lk)("div",MB,[t[52]||(t[52]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>i.selectedPromotionType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPromotionType.name]])])]),(0,a.Lk)("div",EB,[(0,a.Lk)("div",FB,[(0,a.Lk)("button",{onClick:t[19]||(t[19]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",zB,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[54]||(t[54]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",AB,[(0,a.Lk)("div",OB,[t[55]||(t[55]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[22]||(t[22]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[56]||(t[56]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",NB,[(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",XB,[(0,a.Lk)("button",{onClick:t[25]||(t[25]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,VB),(0,a.Lk)("div",QB,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[26]||(t[26]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[27]||(t[27]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,IB)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[28]||(t[28]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[29]||(t[29]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[30]||(t[30]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,UB)])])],64)}var BB={name:"PromotionTypePage",data(){return{headers:["#","ชื่อ",""],headerWidths:["10%","80%","10%"],searchQuery:"",isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",menu_types:[],currentPage:1,itemsPerPage:10,selectedPromotionType:{},isEditModalOpen:!1,isAddModalOpen:!1,newMenuType:{name:""},toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){const e=this.menu_types.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())}));return Math.ceil(e.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredMenuType(){const e=this.menu_types.filter((e=>{const t=e.name||"";return t.toLowerCase().includes(this.searchQuery.toLowerCase())})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)}},methods:{async fetchMenuTypes(){try{const e=await ke.A.get("http://127.0.0.1:3333/menu-types");this.menu_types=e.data,this.menu_types.sort(((e,t)=>e.id-t.id))}catch(e){}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.menu_types.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.menu_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedPromotionType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await ke.A.put(`http://127.0.0.1:3333/menu-types/${this.selectedPromotionType.id}`,{name:this.selectedPromotionType.name});const e=this.menu_types.findIndex((e=>e.id===this.selectedPromotionType.id));-1!==e&&(this.menu_types[e]={...this.selectedPromotionType},await this.fetchMenuTypes(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")),this.isEditModalOpen=!1}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPromotionType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/menu-types/${this.itemToDelete}`),this.menu_types=this.menu_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchMenuTypes(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0,this.newMenuType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addMenuType(){if(this.newMenuType.name.trim())try{const e=await ke.A.post("http://127.0.0.1:3333/menu-types",this.newMenuType);this.menu_types.push(e.data),await this.fetchMenuTypes(),this.closeAddModal(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบ!")},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.sortData("id"),this.fetchMenuTypes()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchMenuTypes()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const WB=(0,_e.A)(BB,[["render",$B]]);var qB=WB;const ZB={class:"mt-[-20px]"},jB={class:"flex space-x-2 items-center relative"},JB={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},KB={class:"text-m text-custom-orange font-bold"},HB={class:"ml-2"},YB={class:"add relative inline-block"},GB={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},eW={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[500px] flex flex-col"},tW={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},sW={class:"p-6 space-y-4"},oW={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},aW={class:"sort relative inline-block",ref:"sortDropdown"},rW={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},lW={class:"list-none p-0 m-0"},iW={key:0,class:"material-symbols-outlined text-sm"},nW={key:0,class:"material-symbols-outlined text-sm"},dW={class:"filter relative inline-block",ref:"filterDropdown"},cW={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},uW={class:"p-4 w-[500px] list-none"},pW={class:"grid grid-cols-3 gap-4"},hW=["value"],gW={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},mW={class:"flex space-x-2"},yW={class:"flex w-[250px] relative"},kW={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},fW={class:"bg-custom-orange text-white"},bW={class:"px-4 py-2 align-top pb-5"},xW={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},_W={class:"px-4 py-2 align-top pb-5"},wW={class:"px-4 py-2 align-top text-right pb-5"},vW={class:"flex justify-end space-x-2"},LW=["onClick"],DW=["onClick"],PW={key:0},CW={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},SW={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},RW={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},TW={class:"flex space-x-2"},MW={class:"p-6 space-y-4"},EW={class:"mb-4"},FW={class:"mb-4"},zW={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},AW={class:"flex space-x-2"},OW={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},NW={class:"bg-white rounded-lg shadow-md w-1/3"},XW={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},VW={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},QW={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},IW=["disabled"],UW={class:"flex items-center space-x-1"},$W=["onClick"],BW=["disabled"];function WW(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[39]||(t[39]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[38]||(t[38]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[41]||(t[41]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[40]||(t[40]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",ZB,[(0,a.Lk)("div",jB,[(0,a.Lk)("div",JB,[t[42]||(t[42]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภทเมนูทั้งหมด: ",-1)),(0,a.Lk)("span",KB,(0,l.v_)(i.meal_types.length)+" รายการ",1)]),i.selectedMenuType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[43]||(t[43]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",HB,"รีเซ็ตตัวกรอง ("+(0,l.v_)(i.selectedMenuType.length)+")",1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",YB,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[44]||(t[44]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",GB,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[46]||(t[46]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[45]||(t[45]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",eW,[(0,a.Lk)("div",tW,[t[47]||(t[47]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มประเภทเมนู",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",sW,[(0,a.Lk)("div",null,[t[48]||(t[48]=(0,a.Lk)("label",{for:"meal_typeName",class:"block font-bold text-gray-700"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{id:"meal_typeName","onUpdate:modelValue":t[6]||(t[6]=e=>i.newMealType.name=e),type:"text",placeholder:"กรอกชื่อประเภทเมนู",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMealType.name]])]),(0,a.Lk)("div",null,[t[49]||(t[49]=(0,a.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"ประเภทโปรแกรมเมนู",-1)),(0,a.bF)(d,{modelValue:i.newMealType.menu_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.newMealType.menu_type_id=e),options:i.menu_types,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทโปรแกรมเมนู",label:"name","track-by":"id",class:"z-50"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",oW,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>n.addMealType&&n.addMealType(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",aW,[(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[51]||(t[51]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",rW,[(0,a.Lk)("ul",lW,[(0,a.Lk)("li",{onClick:t[11]||(t[11]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[52]||(t[52]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",iW,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[12]||(t[12]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[53]||(t[53]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",nW,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[13]||(t[13]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[54]||(t[54]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",dW,[(0,a.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[55]||(t[55]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[56]||(t[56]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",cW,[(0,a.Lk)("div",uW,[t[57]||(t[57]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยประเภทโปรแกรมเมนู",-1)),(0,a.Lk)("div",pW,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.menu_types,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>i.selectedMenuType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,hW),[[o.lH,i.selectedMenuType]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",gW,[(0,a.Lk)("li",{onClick:t[16]||(t[16]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[58]||(t[58]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",mW,[(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",yW,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[20]||(t[20]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[21]||(t[21]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",kW,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",fW,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMealType,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",bW,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",xW,(0,l.v_)(e.name),1),(0,a.Lk)("td",_W,(0,l.v_)(n.getMenuTypeName(e.menu_type_id)),1),(0,a.Lk)("td",wW,[(0,a.Lk)("div",vW,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[59]||(t[59]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,LW),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[60]||(t[60]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,DW)])])])))),128)),0===n.filteredMealType.length?((0,a.uX)(),(0,a.CE)("tr",PW,t[61]||(t[61]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",CW,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[63]||(t[63]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[23]||(t[23]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[62]||(t[62]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",SW,[(0,a.Lk)("div",RW,[t[64]||(t[64]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขประเภทเมนู",-1)),(0,a.Lk)("div",TW,[(0,a.Lk)("span",{onClick:t[24]||(t[24]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",MW,[(0,a.Lk)("div",EW,[t[65]||(t[65]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>i.selectedMealType.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMealType.name]])]),(0,a.Lk)("div",FW,[t[66]||(t[66]=(0,a.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"ประเภทโปรแกรมเมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedMealType.menu_type_id,"onUpdate:modelValue":t[26]||(t[26]=e=>i.selectedMealType.menu_type_id=e),options:i.menu_types,"track-by":"id",label:"name",placeholder:"เลือกประเภทโปรแกรมเมนู"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",zW,[(0,a.Lk)("div",AW,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>i.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded hover:bg-custom-orange-hover flex items-center space-x-30"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",OW,[(0,a.Lk)("div",NW,[(0,a.Lk)("div",XW,[t[67]||(t[67]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[29]||(t[29]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[68]||(t[68]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",VW,[(0,a.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",QW,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[69]||(t[69]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,IW),(0,a.Lk)("div",UW,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,$W)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[37]||(t[37]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[70]||(t[70]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,BW)])])],64)}var qW={name:"meal_typePage",data(){return{headers:["#","ชื่อ","ประเภทโปรแกรมเมนู",""],headerWidths:["10%","50%","35%","5%"],searchQuery:"",selectedMenuType:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",meal_types:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newMealType:{name:"",menu_type_id:""},selectedMealType:{id:"",name:"",menu_type_id:""},menu_types:[],toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isDeleteModalOpen:!1,itemToDelete:null}},components:{Multiselect:fp.Ay},computed:{totalPages(){return Math.ceil(this.meal_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMenuType.length||this.selectedMenuType.includes(e.menu_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredMealType(){const e=this.meal_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMenuType.length||this.selectedMenuType.includes(e.menu_type_id);return t&&s})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)},...(0,Ze.L8)(["menu_types"])},methods:{...(0,Ze.i0)(["fetchMenuTypes","fetchMealTypes"]),async fetchMealTypes(){try{const e=await ke.A.get("http://127.0.0.1:3333/meal-types");this.meal_types=e.data,this.meal_types.sort(((e,t)=>e.id-t.id))}catch(e){}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.meal_types.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.meal_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedMenuType.length>0?this.filteredMealType=this.meal_types.filter((e=>this.selectedMenuType.includes(e.menu_type_id))):this.filteredMealType=this.meal_types,this.isFilterDropdownOpen=!1},clearFilter(){this.selectedMenuType=[],this.filteredMealType=this.meal_types},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getMenuTypeName(e){const t=this.menu_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){this.selectedMealType={...e,menu_type_id:this.menu_types.find((t=>t.id===e.menu_type_id))},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedMealType.name||!this.selectedMealType.menu_type_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=await ke.A.put(`http://127.0.0.1:3333/meal-types/${this.selectedMealType.id}`,{name:this.selectedMealType.name,menu_type_id:this.selectedMealType.menu_type_id.id}),t=this.meal_types.findIndex((e=>e.id===this.selectedMealType.id));-1!==t&&(this.meal_types[t]=e.data),this.isEditModalOpen=!1,await this.fetchMealTypes(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedMealType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/meal-types/${this.itemToDelete}`),this.meal_types=this.meal_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchMealTypes(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewMealType()},resetNewMealType(){this.newMealType={name:"",menu_type_id:""}},async addMealType(){if(this.newMealType.name&&this.newMealType.menu_type_id)try{const e=await ke.A.post("http://127.0.0.1:3333/meal-types",{name:this.newMealType.name,menu_type_id:this.newMealType.menu_type_id.id});this.meal_types.push(e.data),this.closeAddModal(),await this.fetchMealTypes(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบ!")},async fetchMenuTypes(){try{const e=await ke.A.get("http://127.0.0.1:3333/menu-types");this.menu_types=e.data}catch(e){}},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.sortData("id"),this.fetchMealTypes(),this.fetchMenuTypes()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchMealTypes(),this.fetchMenuTypes()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const ZW=(0,_e.A)(qW,[["render",WW]]);var jW=ZW;const JW={class:"mt-[-20px]"},KW={class:"flex space-x-2 items-center relative"},HW={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},YW={class:"text-m text-custom-orange font-bold"},GW={class:"ml-2"},eq={class:"add relative inline-block"},tq={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},sq={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},oq={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},aq={class:"p-6 space-y-4"},rq={class:"flex items-center space-x-4 w-full"},lq={key:0,class:"flex-shrink-0"},iq=["src"],nq={class:"w-full"},dq={class:"flex space-x-4"},cq={class:"flex-1"},uq={class:"flex-1"},pq={class:"flex-1"},hq={class:"flex-1"},gq={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},mq={class:"flex space-x-2"},yq={class:"sort relative inline-block",ref:"sortDropdown"},kq={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-64 z-50 border border-gray-300"},fq={class:"list-none p-0 m-0"},bq={key:0,class:"material-symbols-outlined text-sm"},xq={key:0,class:"material-symbols-outlined text-sm"},_q={key:0,class:"material-symbols-outlined text-sm"},wq={class:"filter relative inline-block",ref:"filterDropdown"},vq={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},Lq={class:"p-4 w-[500px] h-auto max-h-[400px] overflow-y-auto flex-grow list-none"},Dq={class:"flex justify-between items-center"},Pq={class:"font-semibold mb-2 text-custom-orange"},Cq=["onClick"],Sq={class:"grid grid-cols-2 gap-4"},Rq=["value"],Tq={class:"break-words"},Mq={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Eq={class:"flex space-x-2"},Fq={class:"flex w-[250px] relative"},zq={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},Aq={class:"bg-custom-orange text-white"},Oq={class:"px-4 py-2 align-top pb-5"},Nq={class:"px-4 py-2 align-top font-bold text-custom-orange pb-5"},Xq={class:"px-4 py-2 align-top font-bold pb-5"},Vq={class:"px-4 py-2 align-top pb-5"},Qq={key:0},Iq={key:1},Uq={class:"px-4 py-2 align-top pb-5"},$q={class:"px-4 py-2 align-top pb-5"},Bq={class:"px-4 py-2 align-top pb-5"},Wq={class:"px-4 py-2 align-top pb-5"},qq={class:"px-4 py-2 align-top text-right pb-5"},Zq={class:"flex justify-end space-x-2"},jq=["onClick"],Jq=["onClick"],Kq={key:0},Hq={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Yq={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Gq={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},eZ={class:"flex space-x-2"},tZ={class:"p-6 space-y-4"},sZ={class:"mb-4"},oZ={key:0,class:"mb-2 flex items-center space-x-4"},aZ=["src"],rZ={key:1},lZ={key:2,class:"mt-2 text-sm text-gray-500"},iZ={class:"mb-4"},nZ={class:"mb-4"},dZ={class:"mb-4"},cZ={class:"mb-4"},uZ={class:"flex space-x-4"},pZ={class:"flex-1"},hZ={class:"flex-1"},gZ={class:"flex-1"},mZ={class:"flex-1"},yZ={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},kZ={class:"flex space-x-2"},fZ={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},bZ={class:"bg-white rounded-lg shadow-md w-1/3"},xZ={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},_Z={class:"flex justify-end space-x-2 p-4 border-t"},wZ={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},vZ=["disabled"],LZ={class:"flex items-center space-x-1"},DZ=["onClick"],PZ=["disabled"];function CZ(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[57]||(t[57]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[56]||(t[56]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[59]||(t[59]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",JW,[(0,a.Lk)("div",KW,[(0,a.Lk)("div",HW,[t[60]||(t[60]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนเมนูทั้งหมด: ",-1)),(0,a.Lk)("span",YW,(0,l.v_)(i.menus.length)+" รายการ",1)]),i.selectedMealType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[61]||(t[61]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",GW,"รีเซ็ตตัวกรอง ("+(0,l.v_)(i.selectedMealType.length)+")",1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",eq,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[62]||(t[62]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",tq,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[64]||(t[64]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[63]||(t[63]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",sq,[(0,a.Lk)("div",oq,[t[65]||(t[65]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มเมนู",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",aq,[(0,a.Lk)("div",null,[t[66]||(t[66]=(0,a.Lk)("label",{for:"Image",class:"block text-gray-700 font-bold"},"เลือกรูปภาพ",-1)),(0,a.Lk)("div",rq,[i.previewImage||i.newMenu.image?((0,a.uX)(),(0,a.CE)("div",lq,[(0,a.Lk)("img",{src:i.previewImage||`http://127.0.0.1:3333/images/${i.newMenu.image}`,alt:"Menu Image",class:"max-w-48 max-h-48 object-contain rounded border"},null,8,iq)])):(0,a.Q3)("",!0),(0,a.Lk)("div",nq,[(0,a.Lk)("input",{id:"Image",type:"file",onChange:t[6]||(t[6]=(...e)=>n.onFileChange&&n.onFileChange(...e)),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,32)])])]),(0,a.Lk)("div",null,[t[67]||(t[67]=(0,a.Lk)("label",{for:"menuCode",class:"block font-bold text-gray-700"},"รหัสเมนู",-1)),(0,a.bo)((0,a.Lk)("input",{id:"menuCode","onUpdate:modelValue":t[7]||(t[7]=e=>i.newMenu.menu_code=e),type:"text",placeholder:"กรอกรหัสเมนู",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.menu_code]])]),(0,a.Lk)("div",null,[t[68]||(t[68]=(0,a.Lk)("label",{for:"nameEnglish",class:"block font-bold text-gray-700"},"ชื่อเมนูภาษาอังกฤษ",-1)),(0,a.bo)((0,a.Lk)("input",{id:"nameEnglish","onUpdate:modelValue":t[8]||(t[8]=e=>i.newMenu.name_english=e),type:"text",placeholder:"กรอกชื่อเมนูภาษาอังกฤษ",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.name_english]])]),(0,a.Lk)("div",null,[t[69]||(t[69]=(0,a.Lk)("label",{for:"nameThai",class:"block font-bold text-gray-700"},"ชื่อเมนูภาษาไทย",-1)),(0,a.bo)((0,a.Lk)("input",{id:"nameThai","onUpdate:modelValue":t[9]||(t[9]=e=>i.newMenu.name_thai=e),type:"text",placeholder:"กรอกชื่อเมนูภาษาไทย",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.name_thai]])]),(0,a.Lk)("div",null,[t[70]||(t[70]=(0,a.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"ประเภทเมนู",-1)),(0,a.bF)(d,{modelValue:i.newMenu.meal_type_id,"onUpdate:modelValue":t[10]||(t[10]=e=>i.newMenu.meal_type_id=e),options:i.meal_types.map((e=>({id:e.id,name:`${e.name} (${e.menuType?e.menuType.name:"ไม่มีข้อมูล"})`}))),multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทเมนู",label:"name","track-by":"id",class:"z-50"},null,8,["modelValue","options"])]),(0,a.Lk)("div",dq,[(0,a.Lk)("div",cq,[t[71]||(t[71]=(0,a.Lk)("label",{for:"cal",class:"block font-bold text-gray-700"},"แคลอรี่",-1)),(0,a.bo)((0,a.Lk)("input",{id:"cal","onUpdate:modelValue":t[11]||(t[11]=e=>i.newMenu.cal=e),type:"number",placeholder:"กรอกแคลอรี่",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.cal]])]),(0,a.Lk)("div",uq,[t[72]||(t[72]=(0,a.Lk)("label",{for:"protein",class:"block font-bold text-gray-700"},"โปรตีน",-1)),(0,a.bo)((0,a.Lk)("input",{id:"protein","onUpdate:modelValue":t[12]||(t[12]=e=>i.newMenu.protein=e),type:"number",placeholder:"กรอกโปรตีน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.protein]])]),(0,a.Lk)("div",pq,[t[73]||(t[73]=(0,a.Lk)("label",{for:"fat",class:"block font-bold text-gray-700"},"ไขมัน",-1)),(0,a.bo)((0,a.Lk)("input",{id:"fat","onUpdate:modelValue":t[13]||(t[13]=e=>i.newMenu.fat=e),type:"number",placeholder:"กรอกไขมัน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.fat]])]),(0,a.Lk)("div",hq,[t[74]||(t[74]=(0,a.Lk)("label",{for:"carb",class:"block font-bold text-gray-700"},"คาร์โบไฮเดรต",-1)),(0,a.bo)((0,a.Lk)("input",{id:"carb","onUpdate:modelValue":t[14]||(t[14]=e=>i.newMenu.carb=e),type:"number",placeholder:"กรอกคาร์โบไฮเดรต",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.carb]])])])]),(0,a.Lk)("div",gq,[(0,a.Lk)("li",{onClick:t[15]||(t[15]=(...e)=>n.resetNewMenu&&n.resetNewMenu(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[75]||(t[75]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",mq,[(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.addMenu&&n.addMenu(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",yq,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[76]||(t[76]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[77]||(t[77]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",kq,[(0,a.Lk)("ul",fq,[(0,a.Lk)("li",{onClick:t[19]||(t[19]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[78]||(t[78]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",bq,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[20]||(t[20]=e=>n.sortData("name_english")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[79]||(t[79]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อภาษาอังกฤษ",-1)),"name_english"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",xq,(0,l.v_)(1===i.sortDirection["name_english"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[21]||(t[21]=e=>n.sortData("name_thai")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[80]||(t[80]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อภาษาไทย",-1)),"name_thai"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",_q,(0,l.v_)(1===i.sortDirection["name_thai"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[22]||(t[22]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[81]||(t[81]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",wq,[(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[82]||(t[82]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[83]||(t[83]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",vq,[(0,a.Lk)("div",Lq,[t[84]||(t[84]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยประเภทเมนู",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.groupedMealTypes,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"mb-4"},[(0,a.Lk)("div",Dq,[(0,a.Lk)("h4",Pq,(0,l.v_)(s),1),(0,a.Lk)("button",{onClick:e=>n.toggleSelectMenuTypeAll(s),class:"text-custom-orange hover:text-custom-orange-hover text-sm"},(0,l.v_)(i.selectAllMenuTypeState[s]?"ยกเลิกเลือกทั้งหมด":"เลือกทั้งหมด"),9,Cq)]),(0,a.Lk)("div",Sq,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=e=>i.selectedMealType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent flex-shrink-0"},null,8,Rq),[[o.lH,i.selectedMealType]]),(0,a.Lk)("span",Tq,(0,l.v_)(e.name),1)])))),128))])])))),128))]),(0,a.Lk)("div",Mq,[(0,a.Lk)("li",{onClick:t[25]||(t[25]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[85]||(t[85]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",Eq,[(0,a.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Fq,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[28]||(t[28]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[29]||(t[29]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[30]||(t[30]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",zq,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Aq,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMenu,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",Oq,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",Nq,(0,l.v_)(e.name_english),1),(0,a.Lk)("td",Xq,(0,l.v_)(e.name_thai),1),(0,a.Lk)("td",Vq,[(0,a.eW)((0,l.v_)(n.getMealTypeName(e.meal_type_id))+" ",1),e.mealType&&e.mealType.menuType?((0,a.uX)(),(0,a.CE)("span",Qq," ("+(0,l.v_)(e.mealType.menuType.name)+") ",1)):((0,a.uX)(),(0,a.CE)("span",Iq," (ไม่มีข้อมูล) "))]),(0,a.Lk)("td",Uq,(0,l.v_)(e.cal),1),(0,a.Lk)("td",$q,(0,l.v_)(e.protein),1),(0,a.Lk)("td",Bq,(0,l.v_)(e.fat),1),(0,a.Lk)("td",Wq,(0,l.v_)(e.carb),1),(0,a.Lk)("td",qq,[(0,a.Lk)("div",Zq,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[86]||(t[86]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,jq),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[87]||(t[87]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,Jq)])])])))),128)),0===n.filteredMenu.length?((0,a.uX)(),(0,a.CE)("tr",Kq,t[88]||(t[88]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",Hq,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[90]||(t[90]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[89]||(t[89]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Yq,[(0,a.Lk)("div",Gq,[t[91]||(t[91]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขเมนู",-1)),(0,a.Lk)("div",eZ,[(0,a.Lk)("span",{onClick:t[33]||(t[33]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",tZ,[(0,a.Lk)("div",sZ,[t[92]||(t[92]=(0,a.Lk)("label",{for:"editImage",class:"block text-gray-700 font-bold"},"เลือกรูปภาพ",-1)),i.selectedMenu.image||i.previewImage?((0,a.uX)(),(0,a.CE)("div",oZ,[(0,a.Lk)("img",{src:i.previewImage||`http://127.0.0.1:3333/images/${i.selectedMenu.image}`,alt:"Menu Image",class:"max-w-48 max-h-48 object-contain rounded border"},null,8,aZ),(0,a.Lk)("input",{id:"editImage",type:"file",onChange:t[34]||(t[34]=(...e)=>n.onFileChange&&n.onFileChange(...e)),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,32)])):((0,a.uX)(),(0,a.CE)("div",rZ,[(0,a.Lk)("input",{id:"editImage",type:"file",onChange:t[35]||(t[35]=(...e)=>n.onFileChange&&n.onFileChange(...e)),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,32)])),i.selectedMenu.image?((0,a.uX)(),(0,a.CE)("div",lZ," ชื่อไฟล์ปัจจุบัน: "+(0,l.v_)(i.selectedMenu.image),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",iZ,[t[93]||(t[93]=(0,a.Lk)("label",{for:"editMenuCode",class:"block text-gray-700 font-bold"},"รหัสเมนู",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[36]||(t[36]=e=>i.selectedMenu.menu_code=e),id:"editMenuCode",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.menu_code]])]),(0,a.Lk)("div",nZ,[t[94]||(t[94]=(0,a.Lk)("label",{for:"editNameEnglish",class:"block text-gray-700 font-bold"},"ชื่อเมนูภาษาอังกฤษ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[37]||(t[37]=e=>i.selectedMenu.name_english=e),id:"editNameEnglish",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.name_english]])]),(0,a.Lk)("div",dZ,[t[95]||(t[95]=(0,a.Lk)("label",{for:"editNameThai",class:"block text-gray-700 font-bold"},"ชื่อเมนูภาษาไทย",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[38]||(t[38]=e=>i.selectedMenu.name_thai=e),id:"editNameThai",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.name_thai]])]),(0,a.Lk)("div",cZ,[t[96]||(t[96]=(0,a.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"ประเภทเมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedMenu.meal_type_id,"onUpdate:modelValue":t[39]||(t[39]=e=>i.selectedMenu.meal_type_id=e),options:i.meal_types.map((e=>({id:e.id,name:`${e.name} (${e.menuType?e.menuType.name:"ไม่มีข้อมูล"})`}))),"track-by":"id",label:"name",placeholder:"เลือกประเภทเมนู",multiple:!1,searchable:!0,"close-on-select":!0,class:"z-50"},null,8,["modelValue","options"])]),(0,a.Lk)("div",uZ,[(0,a.Lk)("div",pZ,[t[97]||(t[97]=(0,a.Lk)("label",{for:"editCal",class:"block font-bold text-gray-700"},"แคลอรี่",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editCal","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedMenu.cal=e),type:"number",placeholder:"กรอกแคลอรี่",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.cal]])]),(0,a.Lk)("div",hZ,[t[98]||(t[98]=(0,a.Lk)("label",{for:"editProtein",class:"block font-bold text-gray-700"},"โปรตีน",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editProtein","onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedMenu.protein=e),type:"number",placeholder:"กรอกโปรตีน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.protein]])]),(0,a.Lk)("div",gZ,[t[99]||(t[99]=(0,a.Lk)("label",{for:"editFat",class:"block font-bold text-gray-700"},"ไขมัน",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editFat","onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedMenu.fat=e),type:"number",placeholder:"กรอกไขมัน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.fat]])]),(0,a.Lk)("div",mZ,[t[100]||(t[100]=(0,a.Lk)("label",{for:"editCarb",class:"block font-bold text-gray-700"},"คาร์โบไฮเดรต",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editCarb","onUpdate:modelValue":t[43]||(t[43]=e=>i.selectedMenu.carb=e),type:"number",placeholder:"กรอกคาร์โบไฮเดรต",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.carb]])])])]),(0,a.Lk)("div",yZ,[(0,a.Lk)("div",kZ,[(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[45]||(t[45]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",fZ,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[102]||(t[102]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[46]||(t[46]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[101]||(t[101]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",bZ,[(0,a.Lk)("div",xZ,[t[103]||(t[103]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[47]||(t[47]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[104]||(t[104]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",_Z,[(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[49]||(t[49]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",wZ,[(0,a.Lk)("button",{onClick:t[50]||(t[50]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[105]||(t[105]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,vZ),(0,a.Lk)("div",LZ,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[51]||(t[51]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[52]||(t[52]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,DZ)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[53]||(t[53]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[54]||(t[54]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[55]||(t[55]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[106]||(t[106]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,PZ)])])],64)}s(4603),s(7566),s(8721);var SZ={name:"menuPage",data(){return{headers:["#","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย","ประเภทโปรแกรมเมนู","แคลอรี่","โปรตีน","ไขมัน","คาร์โบไฮเดต",""],headerWidths:["5%","25%","20%","15%","5%","5%","5%","10%","10%"],searchQuery:"",selectedMealType:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",menus:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newMenu:{menu_code:"",name_english:"",name_thai:"",meal_type_id:"",cal:0,protein:0,fat:0,carb:0,image:""},selectedMenu:{id:"",menu_code:"",name_english:"",name_thai:"",meal_type_id:"",cal:0,protein:0,fat:0,carb:0,image:"",imageFile:null},previewImage:"",meal_types:[],toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isDeleteModalOpen:!1,itemToDelete:null,selectAllMenuTypeState:{}}},components:{Multiselect:fp.Ay},computed:{totalPages(){return Math.ceil(this.menus.filter((e=>{const t=e.name_english.toLowerCase().includes(this.searchQuery.toLowerCase())||e.name_thai.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMealType.length||this.selectedMealType.includes(e.meal_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},groupedMealTypes(){return this.meal_types.reduce(((e,t)=>{const s=t.menuType?t.menuType.name:"ไม่มีข้อมูล";return e[s]||(e[s]=[]),e[s].push(t),e}),{})},filteredMenu(){const e=this.menus.filter((e=>{const t=e.name_english.toLowerCase().includes(this.searchQuery.toLowerCase())||e.name_thai.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMealType.length||this.selectedMealType.includes(e.meal_type_id);return t&&s})),t=(this.currentPage-1)*this.itemsPerPage,s=t+this.itemsPerPage;return e.slice(t,s)},...(0,Ze.L8)(["menus"])},methods:{...(0,Ze.i0)(["fetchMealTypes","fetchMenus"]),async fetchMenus(){try{const e=await ke.A.get("http://127.0.0.1:3333/menus");this.menus=e.data,this.menus.sort(((e,t)=>e.id-t.id))}catch(e){}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},onFileChange(e){const t=e.target.files[0];t&&(this.selectedMenu.imageFile=t,this.previewImage=URL.createObjectURL(t))},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.menus.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.menus.sort(((e,t)=>e.id-t.id)),this.currentPage=1},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.currentPage=1,this.selectedMealType.length>0?this.filteredMenu=this.menus.filter((e=>this.selectedMealType.includes(e.meal_type_id))):this.filteredMenu=this.menus,this.isFilterDropdownOpen=!1,this.currentPage=1},toggleSelectMenuTypeAll(e){if(this.selectAllMenuTypeState[e])this.selectedMealType=this.selectedMealType.filter((t=>!this.groupedMealTypes[e].some((e=>e.id===t))));else{const t=this.groupedMealTypes[e].map((e=>e.id));this.selectedMealType=[...new Set([...this.selectedMealType,...t])]}this.selectAllMenuTypeState[e]=!this.selectAllMenuTypeState[e]},clearFilter(){this.selectedMealType=[],this.filteredMenu=this.menus,Object.keys(this.selectAllMenuTypeState).forEach((e=>{this.selectAllMenuTypeState[e]=!1})),this.applyFilter()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){const t=this.meal_types.find((t=>t.id===e.meal_type_id));this.selectedMenu={...e,meal_type_id:t?{id:t.id,name:`${t.name} (${t.menuType?t.menuType.name:"ไม่มีข้อมูล"})`}:null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedMenu.name_english||!this.selectedMenu.name_thai||!this.selectedMenu.meal_type_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=new FormData;e.append("menu_code",this.selectedMenu.menu_code),e.append("name_english",this.selectedMenu.name_english),e.append("name_thai",this.selectedMenu.name_thai),e.append("meal_type_id",this.selectedMenu.meal_type_id.id),e.append("cal",this.selectedMenu.cal),e.append("protein",this.selectedMenu.protein),e.append("fat",this.selectedMenu.fat),e.append("carb",this.selectedMenu.carb),this.selectedMenu.imageFile&&e.append("image",this.selectedMenu.imageFile);const t=await ke.A.put(`http://127.0.0.1:3333/menus/${this.selectedMenu.id}`,e,{headers:{"Content-Type":"multipart/form-data"}}),s=this.menus.findIndex((e=>e.id===this.selectedMenu.id));-1!==s&&(this.menus[s]={...t.data,mealType:this.meal_types.find((e=>e.id===t.data.meal_type_id))||{}}),this.isEditModalOpen=!1,await this.fetchMenus(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedMenu={},this.previewImage=null},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/menus/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchMenus(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewMenu()},resetNewMenu(){this.newMenu={menu_code:"",name_english:"",name_thai:"",meal_type_id:"",cal:0,protein:0,fat:0,carb:0,image:"",imageFile:null},this.previewImage=null},async addMenu(){if(this.newMenu.name_english&&this.newMenu.name_thai&&this.newMenu.meal_type_id)try{const e=new FormData;e.append("menu_code",this.newMenu.menu_code),e.append("name_english",this.newMenu.name_english),e.append("name_thai",this.newMenu.name_thai),e.append("meal_type_id",this.newMenu.meal_type_id.id),e.append("cal",this.newMenu.cal),e.append("protein",this.newMenu.protein),e.append("fat",this.newMenu.fat),e.append("carb",this.newMenu.carb),this.newMenu.imageFile&&e.append("image",this.newMenu.imageFile);const t=await ke.A.post("http://127.0.0.1:3333/menus",e,{headers:{"Content-Type":"multipart/form-data"}});t.data&&t.data.mealType&&t.data.mealType.menuType&&this.menus.push(t.data),this.closeAddModal(),await this.fetchMenus(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){console.error("Error adding menu:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบ!")},async fetchMealTypes(){try{const e=await ke.A.get("http://127.0.0.1:3333/meal-types");this.meal_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:" "},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.sortData("id"),this.fetchMenus(),this.fetchMealTypes()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchMenus(),this.fetchMealTypes()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const RZ=(0,_e.A)(SZ,[["render",CZ]]);var TZ=RZ;const MZ={class:"flex justify-end items-center space-x-2 relative"},EZ={class:"flex items-center space-x-1 mr-auto"},FZ={class:"text-2xl font-bold mb-2 ml-auto"},zZ={class:"flex items-center space-x-4"},AZ={class:"add relative inline-block"},OZ={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},NZ={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},XZ={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},VZ={class:"p-6 space-y-4 overflow-y-auto flex-grow"},QZ={class:"flex items-center space-x-4"},IZ={class:"text-xl font-bold text-gray-700"},UZ={class:"absolute top-2 right-4"},$Z=["onClick"],BZ={class:"mb-4 flex justify-center"},WZ={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},qZ={class:"flex space-x-2"},ZZ={class:"flex w-[250px] relative"},jZ={class:"flex items-center space-x-3 py-2"},JZ={key:0,class:"mb-8"},KZ={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},HZ={class:"bg-custom-orange text-white"},YZ={class:"px-4 py-2 align-top pb-5"},GZ=["rowspan"],ej={class:"flex items-center"},tj={class:"px-4 py-2 align-top pb-5"},sj={class:"px-4 py-2 align-top pb-5"},oj={class:"px-4 py-2 align-top pb-5"},aj={class:"px-4 py-2 align-top text-right"},rj={class:"flex justify-end space-x-2"},lj=["onClick"],ij=["onClick"],nj={key:0},dj={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},cj=["disabled"],uj={class:"flex items-center space-x-1"},pj=["onClick"],hj=["disabled"],gj={class:"flex items-center space-x-3 py-2"},mj={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},yj={class:"bg-custom-orange text-white"},kj={class:"px-4 py-2 align-top pb-5"},fj={class:"px-4 py-2 align-top pb-5"},bj={class:"px-4 py-2 align-top pb-5"},xj={class:"px-4 py-2 align-top pb-5"},_j={class:"px-4 py-2 align-top text-right"},wj={class:"flex justify-end space-x-2"},vj=["onClick"],Lj=["onClick"],Dj={key:0},Pj={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},Cj=["disabled"],Sj={class:"flex items-center space-x-1"},Rj=["onClick"],Tj=["disabled"],Mj={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Ej={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Fj={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},zj={class:"flex space-x-2"},Aj={class:"p-6 space-y-4"},Oj={class:"flex items-center space-x-4"},Nj={class:"mb-4"},Xj={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Vj={class:"flex space-x-2"},Qj={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Ij={class:"bg-white rounded-lg shadow-md w-1/3"},Uj={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},$j={class:"flex justify-end space-x-2 p-4 border-t"};function Bj(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[52]||(t[52]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",MZ,[(0,a.Lk)("div",EZ,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.viewMode="week"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===i.viewMode}])},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.viewMode="day"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===i.viewMode}])},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,a.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,a.Lk)("h1",FZ,(0,l.v_)("week"===i.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,a.Lk)("div",zZ,[(0,a.Lk)("div",null,[t[56]||(t[56]=(0,a.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),i.isDateConfirmed||i.startDate===i.initialStartDate?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>n.updateStartDate&&n.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,a.Lk)("div",AZ,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",OZ,[(0,a.Lk)("div",NZ,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[59]||(t[59]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[7]||(t[7]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",XZ,[t[60]||(t[60]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,a.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",VZ,[(0,a.Lk)("div",QZ,[t[61]||(t[61]=(0,a.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[o.Jo,i.day_of_week]])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.formRows,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"space-y-4 relative"},[(0,a.Lk)("div",IZ," ประเภทอาหาร "+(0,l.v_)(s+1),1),(0,a.Lk)("div",null,[t[62]||(t[62]=(0,a.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:n.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,a.Lk)("div",null,[t[63]||(t[63]=(0,a.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,a.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:n.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":n.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,a.Lk)("div",UZ,[(0,a.Lk)("button",{type:"button",onClick:e=>n.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,a.Lk)("span",null,"× ลบเมนู",-1)]),8,$Z)])])))),128)),(0,a.Lk)("div",BZ,[(0,a.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>n.addRow&&n.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,a.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,a.Lk)("div",WZ,[(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",qZ,[(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.addMenus&&n.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",ZZ,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",jZ,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),n.weekOptions.length>0?((0,a.uX)(),(0,a.Wv)(d,{key:0,modelValue:i.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedWeek=e),options:n.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>n.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),i.selectedWeek?((0,a.uX)(),(0,a.CE)("div",JZ,[(0,a.Lk)("table",KZ,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",HZ,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenus,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",YZ,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),0===s||e.day_of_week!==n.paginatedMenus[s-1].day_of_week?((0,a.uX)(),(0,a.CE)("td",{key:0,rowspan:n.getRowSpan(n.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,a.Lk)("div",null,[t[70]||(t[70]=(0,a.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,a.eW)((0,l.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",ej,[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,a.eW)(" "+(0,l.v_)(n.formattedDate(e.date_to_show)),1)])])],8,GZ)):(0,a.Q3)("",!0),(0,a.Lk)("td",tj,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",sj,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",oj,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",aj,[(0,a.Lk)("div",rj,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,lj),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,ij)])])])))),128)),0===n.paginatedMenus.length?((0,a.uX)(),(0,a.CE)("tr",nj,t[74]||(t[74]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",dj,[(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,cj),(0,a.Lk)("div",uj,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,pj)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,hj)])])):(0,a.Q3)("",!0)],512),[[o.aG,"week"===i.viewMode]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",gj,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>n.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>n.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>n.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>n.onSelectDateChange&&n.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[o.Jo,n.formattedSelectedDate]])]),(0,a.Lk)("table",mj,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",yj,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headersByDay,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidthsByDay[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenusByDay,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",kj,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",fj,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",bj,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",xj,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",_j,[(0,a.Lk)("div",wj,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,vj),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,Lj)])])])))),128)),0===n.paginatedMenusByDay.length?((0,a.uX)(),(0,a.CE)("tr",Dj,t[82]||(t[82]=[(0,a.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Pj,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPageByDay(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Cj),(0,a.Lk)("div",Sj,[n.totalPagesArrayByDay.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>n.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>n.goToPageByDay(n.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArrayByDay.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPageByDay(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,Rj)))),128)),n.totalPagesArrayByDay.end<n.totalPagesByDay-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>n.goToPageByDay(n.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.end<n.totalPagesByDay?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>n.goToPageByDay(n.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[37]||(t[37]=e=>n.goToPageByDay(i.currentPage+1)),disabled:i.currentPage===n.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Tj)])],512),[[o.aG,"day"===i.viewMode]]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",Mj,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[86]||(t[86]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[38]||(t[38]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Ej,[(0,a.Lk)("div",Fj,[t[87]||(t[87]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,a.Lk)("div",zj,[(0,a.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",Aj,[(0,a.Lk)("div",Oj,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSetupMenu.day_of_week]])]),(0,a.Lk)("div",null,[t[89]||(t[89]=(0,a.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedSetupMenu.meal_type_id=e),options:n.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Nj,[t[90]||(t[90]=(0,a.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedSetupMenu.menu_id=e),options:n.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",Xj,[(0,a.Lk)("div",Vj,[(0,a.Lk)("button",{onClick:t[43]||(t[43]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",Qj,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[92]||(t[92]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[45]||(t[45]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Ij,[(0,a.Lk)("div",Uj,[t[93]||(t[93]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",$j,[(0,a.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)],64)}var Wj={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:fp.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&1===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)||e.day_of_week.toString().includes(o)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-ph"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await ke.A.get(`http://127.0.0.1:3333/setup-menu-ph/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-ph/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await ke.A.get("http://127.0.0.1:3333/setup-menu-ph/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await ke.A.post("http://127.0.0.1:3333/setup-menu-ph/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&1===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.post("http://127.0.0.1:3333/setup-menu-ph",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.put(`http://127.0.0.1:3333/setup-menu-ph/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/setup-menu-ph/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,Po.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const qj=(0,_e.A)(Wj,[["render",Bj],["__scopeId","data-v-434f56f3"]]);var Zj=qj;const jj={class:"flex justify-end items-center space-x-2 relative"},Jj={class:"flex items-center space-x-1 mr-auto"},Kj={class:"text-2xl font-bold mb-2 ml-auto"},Hj={class:"flex items-center space-x-4"},Yj={class:"add relative inline-block"},Gj={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},eJ={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},tJ={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},sJ={class:"p-6 space-y-4 overflow-y-auto flex-grow"},oJ={class:"flex items-center space-x-4"},aJ={class:"text-xl font-bold text-gray-700"},rJ={class:"absolute top-2 right-4"},lJ=["onClick"],iJ={class:"mb-4 flex justify-center"},nJ={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},dJ={class:"flex space-x-2"},cJ={class:"flex w-[250px] relative"},uJ={class:"flex items-center space-x-3 py-2"},pJ={key:0,class:"mb-8"},hJ={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},gJ={class:"bg-custom-orange text-white"},mJ={class:"px-4 py-2 align-top pb-5"},yJ=["rowspan"],kJ={class:"flex items-center"},fJ={class:"px-4 py-2 align-top pb-5"},bJ={class:"px-4 py-2 align-top pb-5"},xJ={class:"px-4 py-2 align-top pb-5"},_J={class:"px-4 py-2 align-top text-right"},wJ={class:"flex justify-end space-x-2"},vJ=["onClick"],LJ=["onClick"],DJ={key:0},PJ={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},CJ=["disabled"],SJ={class:"flex items-center space-x-1"},RJ=["onClick"],TJ=["disabled"],MJ={class:"flex items-center space-x-3 py-2"},EJ={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},FJ={class:"bg-custom-orange text-white"},zJ={class:"px-4 py-2 align-top pb-5"},AJ={class:"px-4 py-2 align-top pb-5"},OJ={class:"px-4 py-2 align-top pb-5"},NJ={class:"px-4 py-2 align-top pb-5"},XJ={class:"px-4 py-2 align-top text-right"},VJ={class:"flex justify-end space-x-2"},QJ=["onClick"],IJ=["onClick"],UJ={key:0},$J={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},BJ=["disabled"],WJ={class:"flex items-center space-x-1"},qJ=["onClick"],ZJ=["disabled"],jJ={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},JJ={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},KJ={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},HJ={class:"flex space-x-2"},YJ={class:"p-6 space-y-4"},GJ={class:"flex items-center space-x-4"},eK={class:"mb-4"},tK={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},sK={class:"flex space-x-2"},oK={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},aK={class:"bg-white rounded-lg shadow-md w-1/3"},rK={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},lK={class:"flex justify-end space-x-2 p-4 border-t"};function iK(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[52]||(t[52]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",jj,[(0,a.Lk)("div",Jj,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.viewMode="week"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===i.viewMode}])},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.viewMode="day"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===i.viewMode}])},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,a.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,a.Lk)("h1",Kj,(0,l.v_)("week"===i.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,a.Lk)("div",Hj,[(0,a.Lk)("div",null,[t[56]||(t[56]=(0,a.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),i.isDateConfirmed||i.startDate===i.initialStartDate?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>n.updateStartDate&&n.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,a.Lk)("div",Yj,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",Gj,[(0,a.Lk)("div",eJ,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[59]||(t[59]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[7]||(t[7]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",tJ,[t[60]||(t[60]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,a.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",sJ,[(0,a.Lk)("div",oJ,[t[61]||(t[61]=(0,a.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[o.Jo,i.day_of_week]])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.formRows,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"space-y-4 relative"},[(0,a.Lk)("div",aJ," ประเภทอาหาร "+(0,l.v_)(s+1),1),(0,a.Lk)("div",null,[t[62]||(t[62]=(0,a.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:n.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,a.Lk)("div",null,[t[63]||(t[63]=(0,a.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,a.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:n.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":n.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,a.Lk)("div",rJ,[(0,a.Lk)("button",{type:"button",onClick:e=>n.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,a.Lk)("span",null,"× ลบเมนู",-1)]),8,lJ)])])))),128)),(0,a.Lk)("div",iJ,[(0,a.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>n.addRow&&n.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,a.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,a.Lk)("div",nJ,[(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",dJ,[(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.addMenus&&n.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",cJ,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",uJ,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),n.weekOptions.length>0?((0,a.uX)(),(0,a.Wv)(d,{key:0,modelValue:i.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedWeek=e),options:n.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>n.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),i.selectedWeek?((0,a.uX)(),(0,a.CE)("div",pJ,[(0,a.Lk)("table",hJ,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",gJ,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenus,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",mJ,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),0===s||e.day_of_week!==n.paginatedMenus[s-1].day_of_week?((0,a.uX)(),(0,a.CE)("td",{key:0,rowspan:n.getRowSpan(n.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,a.Lk)("div",null,[t[70]||(t[70]=(0,a.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,a.eW)((0,l.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",kJ,[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,a.eW)(" "+(0,l.v_)(n.formattedDate(e.date_to_show)),1)])])],8,yJ)):(0,a.Q3)("",!0),(0,a.Lk)("td",fJ,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",bJ,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",xJ,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",_J,[(0,a.Lk)("div",wJ,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,vJ),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,LJ)])])])))),128)),0===n.paginatedMenus.length?((0,a.uX)(),(0,a.CE)("tr",DJ,t[74]||(t[74]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",PJ,[(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,CJ),(0,a.Lk)("div",SJ,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,RJ)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,TJ)])])):(0,a.Q3)("",!0)],512),[[o.aG,"week"===i.viewMode]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",MJ,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>n.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>n.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>n.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>n.onSelectDateChange&&n.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[o.Jo,n.formattedSelectedDate]])]),(0,a.Lk)("table",EJ,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",FJ,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headersByDay,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidthsByDay[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenusByDay,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",zJ,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",AJ,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",OJ,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",NJ,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",XJ,[(0,a.Lk)("div",VJ,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,QJ),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,IJ)])])])))),128)),0===n.paginatedMenusByDay.length?((0,a.uX)(),(0,a.CE)("tr",UJ,t[82]||(t[82]=[(0,a.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",$J,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPageByDay(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,BJ),(0,a.Lk)("div",WJ,[n.totalPagesArrayByDay.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>n.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>n.goToPageByDay(n.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArrayByDay.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPageByDay(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,qJ)))),128)),n.totalPagesArrayByDay.end<n.totalPagesByDay-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>n.goToPageByDay(n.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.end<n.totalPagesByDay?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>n.goToPageByDay(n.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[37]||(t[37]=e=>n.goToPageByDay(i.currentPage+1)),disabled:i.currentPage===n.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,ZJ)])],512),[[o.aG,"day"===i.viewMode]]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",jJ,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[86]||(t[86]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[38]||(t[38]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",JJ,[(0,a.Lk)("div",KJ,[t[87]||(t[87]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,a.Lk)("div",HJ,[(0,a.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",YJ,[(0,a.Lk)("div",GJ,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSetupMenu.day_of_week]])]),(0,a.Lk)("div",null,[t[89]||(t[89]=(0,a.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedSetupMenu.meal_type_id=e),options:n.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,a.Lk)("div",eK,[t[90]||(t[90]=(0,a.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedSetupMenu.menu_id=e),options:n.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",tK,[(0,a.Lk)("div",sK,[(0,a.Lk)("button",{onClick:t[43]||(t[43]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",oK,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[92]||(t[92]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[45]||(t[45]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",aK,[(0,a.Lk)("div",rK,[t[93]||(t[93]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",lK,[(0,a.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)],64)}var nK={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:fp.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&2===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)||e.day_of_week.toString().includes(o)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-hhb"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await ke.A.get(`http://127.0.0.1:3333/setup-menu-hhb/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-hhb/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await ke.A.get("http://127.0.0.1:3333/setup-menu-hhb/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await ke.A.post("http://127.0.0.1:3333/setup-menu-hhb/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&2===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.post("http://127.0.0.1:3333/setup-menu-hhb",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.put(`http://127.0.0.1:3333/setup-menu-hhb/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/setup-menu-hhb/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,Po.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const dK=(0,_e.A)(nK,[["render",iK],["__scopeId","data-v-54c84af2"]]);var cK=dK;const uK={class:"flex justify-end items-center space-x-2 relative"},pK={class:"flex items-center space-x-1 mr-auto"},hK={class:"text-2xl font-bold mb-2 ml-auto"},gK={class:"flex items-center space-x-4"},mK={class:"add relative inline-block"},yK={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},kK={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},fK={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},bK={class:"p-6 space-y-4 overflow-y-auto flex-grow"},xK={class:"flex items-center space-x-4"},_K={class:"text-xl font-bold text-gray-700"},wK={class:"absolute top-2 right-4"},vK=["onClick"],LK={class:"mb-4 flex justify-center"},DK={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},PK={class:"flex space-x-2"},CK={class:"flex w-[250px] relative"},SK={class:"flex items-center space-x-3 py-2"},RK={key:0,class:"mb-8"},TK={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},MK={class:"bg-custom-orange text-white"},EK={class:"px-4 py-2 align-top pb-5"},FK=["rowspan"],zK={class:"flex items-center"},AK={class:"px-4 py-2 align-top pb-5"},OK={class:"px-4 py-2 align-top pb-5"},NK={class:"px-4 py-2 align-top pb-5"},XK={class:"px-4 py-2 align-top text-right"},VK={class:"flex justify-end space-x-2"},QK=["onClick"],IK=["onClick"],UK={key:0},$K={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},BK=["disabled"],WK={class:"flex items-center space-x-1"},qK=["onClick"],ZK=["disabled"],jK={class:"flex items-center space-x-3 py-2"},JK={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},KK={class:"bg-custom-orange text-white"},HK={class:"px-4 py-2 align-top pb-5"},YK={class:"px-4 py-2 align-top pb-5"},GK={class:"px-4 py-2 align-top pb-5"},eH={class:"px-4 py-2 align-top pb-5"},tH={class:"px-4 py-2 align-top text-right"},sH={class:"flex justify-end space-x-2"},oH=["onClick"],aH=["onClick"],rH={key:0},lH={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},iH=["disabled"],nH={class:"flex items-center space-x-1"},dH=["onClick"],cH=["disabled"],uH={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},pH={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},hH={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},gH={class:"flex space-x-2"},mH={class:"p-6 space-y-4"},yH={class:"flex items-center space-x-4"},kH={class:"mb-4"},fH={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},bH={class:"flex space-x-2"},xH={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},_H={class:"bg-white rounded-lg shadow-md w-1/3"},wH={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},vH={class:"flex justify-end space-x-2 p-4 border-t"};function LH(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[52]||(t[52]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",uK,[(0,a.Lk)("div",pK,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.viewMode="week"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===i.viewMode}])},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.viewMode="day"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===i.viewMode}])},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,a.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,a.Lk)("h1",hK,(0,l.v_)("week"===i.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,a.Lk)("div",gK,[(0,a.Lk)("div",null,[t[56]||(t[56]=(0,a.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),i.isDateConfirmed||i.startDate===i.initialStartDate?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>n.updateStartDate&&n.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,a.Lk)("div",mK,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",yK,[(0,a.Lk)("div",kK,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[59]||(t[59]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[7]||(t[7]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",fK,[t[60]||(t[60]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,a.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",bK,[(0,a.Lk)("div",xK,[t[61]||(t[61]=(0,a.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[o.Jo,i.day_of_week]])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.formRows,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"space-y-4 relative"},[(0,a.Lk)("div",_K," ประเภทอาหาร "+(0,l.v_)(s+1),1),(0,a.Lk)("div",null,[t[62]||(t[62]=(0,a.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:n.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,a.Lk)("div",null,[t[63]||(t[63]=(0,a.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,a.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:n.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":n.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,a.Lk)("div",wK,[(0,a.Lk)("button",{type:"button",onClick:e=>n.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,a.Lk)("span",null,"× ลบเมนู",-1)]),8,vK)])])))),128)),(0,a.Lk)("div",LK,[(0,a.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>n.addRow&&n.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,a.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,a.Lk)("div",DK,[(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",PK,[(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.addMenus&&n.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",CK,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",SK,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),n.weekOptions.length>0?((0,a.uX)(),(0,a.Wv)(d,{key:0,modelValue:i.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedWeek=e),options:n.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>n.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),i.selectedWeek?((0,a.uX)(),(0,a.CE)("div",RK,[(0,a.Lk)("table",TK,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",MK,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenus,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",EK,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),0===s||e.day_of_week!==n.paginatedMenus[s-1].day_of_week?((0,a.uX)(),(0,a.CE)("td",{key:0,rowspan:n.getRowSpan(n.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,a.Lk)("div",null,[t[70]||(t[70]=(0,a.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,a.eW)((0,l.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",zK,[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,a.eW)(" "+(0,l.v_)(n.formattedDate(e.date_to_show)),1)])])],8,FK)):(0,a.Q3)("",!0),(0,a.Lk)("td",AK,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",OK,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",NK,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",XK,[(0,a.Lk)("div",VK,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,QK),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,IK)])])])))),128)),0===n.paginatedMenus.length?((0,a.uX)(),(0,a.CE)("tr",UK,t[74]||(t[74]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",$K,[(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,BK),(0,a.Lk)("div",WK,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,qK)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,ZK)])])):(0,a.Q3)("",!0)],512),[[o.aG,"week"===i.viewMode]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",jK,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>n.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>n.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>n.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>n.onSelectDateChange&&n.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[o.Jo,n.formattedSelectedDate]])]),(0,a.Lk)("table",JK,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",KK,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headersByDay,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidthsByDay[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenusByDay,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",HK,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",YK,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",GK,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",eH,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",tH,[(0,a.Lk)("div",sH,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,oH),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,aH)])])])))),128)),0===n.paginatedMenusByDay.length?((0,a.uX)(),(0,a.CE)("tr",rH,t[82]||(t[82]=[(0,a.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",lH,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPageByDay(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,iH),(0,a.Lk)("div",nH,[n.totalPagesArrayByDay.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>n.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>n.goToPageByDay(n.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArrayByDay.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPageByDay(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,dH)))),128)),n.totalPagesArrayByDay.end<n.totalPagesByDay-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>n.goToPageByDay(n.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.end<n.totalPagesByDay?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>n.goToPageByDay(n.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[37]||(t[37]=e=>n.goToPageByDay(i.currentPage+1)),disabled:i.currentPage===n.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,cH)])],512),[[o.aG,"day"===i.viewMode]]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",uH,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[86]||(t[86]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[38]||(t[38]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",pH,[(0,a.Lk)("div",hH,[t[87]||(t[87]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,a.Lk)("div",gH,[(0,a.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",mH,[(0,a.Lk)("div",yH,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSetupMenu.day_of_week]])]),(0,a.Lk)("div",null,[t[89]||(t[89]=(0,a.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedSetupMenu.meal_type_id=e),options:n.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,a.Lk)("div",kH,[t[90]||(t[90]=(0,a.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedSetupMenu.menu_id=e),options:n.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",fH,[(0,a.Lk)("div",bH,[(0,a.Lk)("button",{onClick:t[43]||(t[43]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",xH,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[92]||(t[92]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[45]||(t[45]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",_H,[(0,a.Lk)("div",wH,[t[93]||(t[93]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",vH,[(0,a.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)],64)}var DH={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:fp.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&14===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)||e.day_of_week.toString().includes(o)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-lc"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await ke.A.get(`http://127.0.0.1:3333/setup-menu-lc/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-lc/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await ke.A.get("http://127.0.0.1:3333/setup-menu-lc/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await ke.A.post("http://127.0.0.1:3333/setup-menu-lc/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&14===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.post("http://127.0.0.1:3333/setup-menu-lc",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.put(`http://127.0.0.1:3333/setup-menu-lc/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/setup-menu-lc/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,Po.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const PH=(0,_e.A)(DH,[["render",LH],["__scopeId","data-v-5a88fe05"]]);var CH=PH;const SH={class:"flex justify-end items-center space-x-2 relative"},RH={class:"flex items-center space-x-1 mr-auto"},TH={class:"text-2xl font-bold mb-2 ml-auto"},MH={class:"flex items-center space-x-4"},EH={class:"add relative inline-block"},FH={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},zH={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},AH={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},OH={class:"p-6 space-y-4 overflow-y-auto flex-grow"},NH={class:"flex items-center space-x-4"},XH={class:"text-xl font-bold text-gray-700"},VH={class:"absolute top-2 right-4"},QH=["onClick"],IH={class:"mb-4 flex justify-center"},UH={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},$H={class:"flex space-x-2"},BH={class:"flex w-[250px] relative"},WH={class:"flex items-center space-x-3 py-2"},qH={key:0,class:"mb-8"},ZH={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},jH={class:"bg-custom-orange text-white"},JH={class:"px-4 py-2 align-top pb-5"},KH=["rowspan"],HH={class:"flex items-center"},YH={class:"px-4 py-2 align-top pb-5"},GH={class:"px-4 py-2 align-top pb-5"},eY={class:"px-4 py-2 align-top pb-5"},tY={class:"px-4 py-2 align-top text-right"},sY={class:"flex justify-end space-x-2"},oY=["onClick"],aY=["onClick"],rY={key:0},lY={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},iY=["disabled"],nY={class:"flex items-center space-x-1"},dY=["onClick"],cY=["disabled"],uY={class:"flex items-center space-x-3 py-2"},pY={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},hY={class:"bg-custom-orange text-white"},gY={class:"px-4 py-2 align-top pb-5"},mY={class:"px-4 py-2 align-top pb-5"},yY={class:"px-4 py-2 align-top pb-5"},kY={class:"px-4 py-2 align-top pb-5"},fY={class:"px-4 py-2 align-top text-right"},bY={class:"flex justify-end space-x-2"},xY=["onClick"],_Y=["onClick"],wY={key:0},vY={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},LY=["disabled"],DY={class:"flex items-center space-x-1"},PY=["onClick"],CY=["disabled"],SY={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},RY={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},TY={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},MY={class:"flex space-x-2"},EY={class:"p-6 space-y-4"},FY={class:"flex items-center space-x-4"},zY={class:"mb-4"},AY={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},OY={class:"flex space-x-2"},NY={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},XY={class:"bg-white rounded-lg shadow-md w-1/3"},VY={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},QY={class:"flex justify-end space-x-2 p-4 border-t"};function IY(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[52]||(t[52]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",SH,[(0,a.Lk)("div",RH,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.viewMode="week"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===i.viewMode}])},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.viewMode="day"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===i.viewMode}])},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,a.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,a.Lk)("h1",TH,(0,l.v_)("week"===i.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,a.Lk)("div",MH,[(0,a.Lk)("div",null,[t[56]||(t[56]=(0,a.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),i.isDateConfirmed||i.startDate===i.initialStartDate?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>n.updateStartDate&&n.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,a.Lk)("div",EH,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",FH,[(0,a.Lk)("div",zH,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[59]||(t[59]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[7]||(t[7]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",AH,[t[60]||(t[60]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,a.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",OH,[(0,a.Lk)("div",NH,[t[61]||(t[61]=(0,a.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[o.Jo,i.day_of_week]])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.formRows,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"space-y-4 relative"},[(0,a.Lk)("div",XH," ประเภทอาหาร "+(0,l.v_)(s+1),1),(0,a.Lk)("div",null,[t[62]||(t[62]=(0,a.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:n.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,a.Lk)("div",null,[t[63]||(t[63]=(0,a.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,a.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:n.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":n.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,a.Lk)("div",VH,[(0,a.Lk)("button",{type:"button",onClick:e=>n.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,a.Lk)("span",null,"× ลบเมนู",-1)]),8,QH)])])))),128)),(0,a.Lk)("div",IH,[(0,a.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>n.addRow&&n.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,a.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,a.Lk)("div",UH,[(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",$H,[(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.addMenus&&n.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",BH,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",WH,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),n.weekOptions.length>0?((0,a.uX)(),(0,a.Wv)(d,{key:0,modelValue:i.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedWeek=e),options:n.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>n.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),i.selectedWeek?((0,a.uX)(),(0,a.CE)("div",qH,[(0,a.Lk)("table",ZH,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",jH,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenus,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",JH,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),0===s||e.day_of_week!==n.paginatedMenus[s-1].day_of_week?((0,a.uX)(),(0,a.CE)("td",{key:0,rowspan:n.getRowSpan(n.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,a.Lk)("div",null,[t[70]||(t[70]=(0,a.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,a.eW)((0,l.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",HH,[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,a.eW)(" "+(0,l.v_)(n.formattedDate(e.date_to_show)),1)])])],8,KH)):(0,a.Q3)("",!0),(0,a.Lk)("td",YH,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",GH,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",eY,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",tY,[(0,a.Lk)("div",sY,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,oY),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,aY)])])])))),128)),0===n.paginatedMenus.length?((0,a.uX)(),(0,a.CE)("tr",rY,t[74]||(t[74]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",lY,[(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,iY),(0,a.Lk)("div",nY,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,dY)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,cY)])])):(0,a.Q3)("",!0)],512),[[o.aG,"week"===i.viewMode]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",uY,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>n.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>n.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>n.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>n.onSelectDateChange&&n.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[o.Jo,n.formattedSelectedDate]])]),(0,a.Lk)("table",pY,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",hY,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headersByDay,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidthsByDay[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenusByDay,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",gY,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",mY,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",yY,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",kY,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",fY,[(0,a.Lk)("div",bY,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,xY),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,_Y)])])])))),128)),0===n.paginatedMenusByDay.length?((0,a.uX)(),(0,a.CE)("tr",wY,t[82]||(t[82]=[(0,a.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",vY,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPageByDay(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,LY),(0,a.Lk)("div",DY,[n.totalPagesArrayByDay.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>n.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>n.goToPageByDay(n.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArrayByDay.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPageByDay(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,PY)))),128)),n.totalPagesArrayByDay.end<n.totalPagesByDay-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>n.goToPageByDay(n.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.end<n.totalPagesByDay?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>n.goToPageByDay(n.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[37]||(t[37]=e=>n.goToPageByDay(i.currentPage+1)),disabled:i.currentPage===n.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,CY)])],512),[[o.aG,"day"===i.viewMode]]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",SY,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[86]||(t[86]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[38]||(t[38]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",RY,[(0,a.Lk)("div",TY,[t[87]||(t[87]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,a.Lk)("div",MY,[(0,a.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",EY,[(0,a.Lk)("div",FY,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSetupMenu.day_of_week]])]),(0,a.Lk)("div",null,[t[89]||(t[89]=(0,a.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedSetupMenu.meal_type_id=e),options:n.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,a.Lk)("div",zY,[t[90]||(t[90]=(0,a.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedSetupMenu.menu_id=e),options:n.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",AY,[(0,a.Lk)("div",OY,[(0,a.Lk)("button",{onClick:t[43]||(t[43]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",NY,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[92]||(t[92]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[45]||(t[45]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",XY,[(0,a.Lk)("div",VY,[t[93]||(t[93]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",QY,[(0,a.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)],64)}var UY={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:fp.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&13===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)||e.day_of_week.toString().includes(o)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-fl"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await ke.A.get(`http://127.0.0.1:3333/setup-menu-fl/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-fl/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await ke.A.get("http://127.0.0.1:3333/setup-menu-fl/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await ke.A.post("http://127.0.0.1:3333/setup-menu-fl/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&13===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.post("http://127.0.0.1:3333/setup-menu-fl",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.put(`http://127.0.0.1:3333/setup-menu-fl/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/setup-menu-fl/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,Po.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const $Y=(0,_e.A)(UY,[["render",IY],["__scopeId","data-v-5f3cf267"]]);var BY=$Y;const WY={class:"flex justify-end items-center space-x-2 relative"},qY={class:"flex items-center space-x-1 mr-auto"},ZY={class:"text-2xl font-bold mb-2 ml-auto"},jY={class:"flex items-center space-x-4"},JY={class:"add relative inline-block"},KY={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},HY={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},YY={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},GY={class:"p-6 space-y-4 overflow-y-auto flex-grow"},eG={class:"flex items-center space-x-4"},tG={class:"text-xl font-bold text-gray-700"},sG={class:"absolute top-2 right-4"},oG=["onClick"],aG={class:"mb-4 flex justify-center"},rG={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},lG={class:"flex space-x-2"},iG={class:"flex w-[250px] relative"},nG={class:"flex items-center space-x-3 py-2"},dG={key:0,class:"mb-8"},cG={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},uG={class:"bg-custom-orange text-white"},pG={class:"px-4 py-2 align-top pb-5"},hG=["rowspan"],gG={class:"flex items-center"},mG={class:"px-4 py-2 align-top pb-5"},yG={class:"px-4 py-2 align-top pb-5"},kG={class:"px-4 py-2 align-top pb-5"},fG={class:"px-4 py-2 align-top text-right"},bG={class:"flex justify-end space-x-2"},xG=["onClick"],_G=["onClick"],wG={key:0},vG={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},LG=["disabled"],DG={class:"flex items-center space-x-1"},PG=["onClick"],CG=["disabled"],SG={class:"flex items-center space-x-3 py-2"},RG={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},TG={class:"bg-custom-orange text-white"},MG={class:"px-4 py-2 align-top pb-5"},EG={class:"px-4 py-2 align-top pb-5"},FG={class:"px-4 py-2 align-top pb-5"},zG={class:"px-4 py-2 align-top pb-5"},AG={class:"px-4 py-2 align-top text-right"},OG={class:"flex justify-end space-x-2"},NG=["onClick"],XG=["onClick"],VG={key:0},QG={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},IG=["disabled"],UG={class:"flex items-center space-x-1"},$G=["onClick"],BG=["disabled"],WG={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},qG={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},ZG={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},jG={class:"flex space-x-2"},JG={class:"p-6 space-y-4"},KG={class:"flex items-center space-x-4"},HG={class:"mb-4"},YG={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},GG={class:"flex space-x-2"},e0={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},t0={class:"bg-white rounded-lg shadow-md w-1/3"},s0={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},o0={class:"flex justify-end space-x-2 p-4 border-t"};function a0(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[52]||(t[52]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",WY,[(0,a.Lk)("div",qY,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.viewMode="week"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===i.viewMode}])},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.viewMode="day"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===i.viewMode}])},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,a.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,a.Lk)("h1",ZY,(0,l.v_)("week"===i.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,a.Lk)("div",jY,[(0,a.Lk)("div",null,[t[56]||(t[56]=(0,a.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),i.isDateConfirmed||i.startDate===i.initialStartDate?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>n.updateStartDate&&n.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,a.Lk)("div",JY,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",KY,[(0,a.Lk)("div",HY,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[59]||(t[59]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[7]||(t[7]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",YY,[t[60]||(t[60]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,a.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",GY,[(0,a.Lk)("div",eG,[t[61]||(t[61]=(0,a.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[o.Jo,i.day_of_week]])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.formRows,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"space-y-4 relative"},[(0,a.Lk)("div",tG," ประเภทอาหาร "+(0,l.v_)(s+1),1),(0,a.Lk)("div",null,[t[62]||(t[62]=(0,a.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:n.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,a.Lk)("div",null,[t[63]||(t[63]=(0,a.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,a.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:n.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":n.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,a.Lk)("div",sG,[(0,a.Lk)("button",{type:"button",onClick:e=>n.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,a.Lk)("span",null,"× ลบเมนู",-1)]),8,oG)])])))),128)),(0,a.Lk)("div",aG,[(0,a.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>n.addRow&&n.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,a.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,a.Lk)("div",rG,[(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",lG,[(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.addMenus&&n.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",iG,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",nG,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),n.weekOptions.length>0?((0,a.uX)(),(0,a.Wv)(d,{key:0,modelValue:i.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedWeek=e),options:n.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>n.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),i.selectedWeek?((0,a.uX)(),(0,a.CE)("div",dG,[(0,a.Lk)("table",cG,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",uG,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenus,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",pG,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),0===s||e.day_of_week!==n.paginatedMenus[s-1].day_of_week?((0,a.uX)(),(0,a.CE)("td",{key:0,rowspan:n.getRowSpan(n.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,a.Lk)("div",null,[t[70]||(t[70]=(0,a.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,a.eW)((0,l.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",gG,[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,a.eW)(" "+(0,l.v_)(n.formattedDate(e.date_to_show)),1)])])],8,hG)):(0,a.Q3)("",!0),(0,a.Lk)("td",mG,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",yG,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",kG,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",fG,[(0,a.Lk)("div",bG,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,xG),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,_G)])])])))),128)),0===n.paginatedMenus.length?((0,a.uX)(),(0,a.CE)("tr",wG,t[74]||(t[74]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",vG,[(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,LG),(0,a.Lk)("div",DG,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,PG)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,CG)])])):(0,a.Q3)("",!0)],512),[[o.aG,"week"===i.viewMode]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",SG,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>n.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>n.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>n.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>n.onSelectDateChange&&n.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[o.Jo,n.formattedSelectedDate]])]),(0,a.Lk)("table",RG,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",TG,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headersByDay,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidthsByDay[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenusByDay,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",MG,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",EG,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",FG,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",zG,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",AG,[(0,a.Lk)("div",OG,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,NG),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,XG)])])])))),128)),0===n.paginatedMenusByDay.length?((0,a.uX)(),(0,a.CE)("tr",VG,t[82]||(t[82]=[(0,a.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",QG,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPageByDay(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,IG),(0,a.Lk)("div",UG,[n.totalPagesArrayByDay.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>n.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>n.goToPageByDay(n.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArrayByDay.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPageByDay(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,$G)))),128)),n.totalPagesArrayByDay.end<n.totalPagesByDay-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>n.goToPageByDay(n.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.end<n.totalPagesByDay?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>n.goToPageByDay(n.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[37]||(t[37]=e=>n.goToPageByDay(i.currentPage+1)),disabled:i.currentPage===n.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,BG)])],512),[[o.aG,"day"===i.viewMode]]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",WG,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[86]||(t[86]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[38]||(t[38]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",qG,[(0,a.Lk)("div",ZG,[t[87]||(t[87]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,a.Lk)("div",jG,[(0,a.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",JG,[(0,a.Lk)("div",KG,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSetupMenu.day_of_week]])]),(0,a.Lk)("div",null,[t[89]||(t[89]=(0,a.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedSetupMenu.meal_type_id=e),options:n.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,a.Lk)("div",HG,[t[90]||(t[90]=(0,a.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedSetupMenu.menu_id=e),options:n.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",YG,[(0,a.Lk)("div",GG,[(0,a.Lk)("button",{onClick:t[43]||(t[43]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",e0,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[92]||(t[92]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[45]||(t[45]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",t0,[(0,a.Lk)("div",s0,[t[93]||(t[93]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",o0,[(0,a.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)],64)}var r0={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:fp.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&15===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)||e.day_of_week.toString().includes(o)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-bpd"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await ke.A.get(`http://127.0.0.1:3333/setup-menu-bpd/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-bpd/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await ke.A.get("http://127.0.0.1:3333/setup-menu-bpd/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await ke.A.post("http://127.0.0.1:3333/setup-menu-bpd/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&15===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.post("http://127.0.0.1:3333/setup-menu-bpd",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.put(`http://127.0.0.1:3333/setup-menu-bpd/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/setup-menu-bpd/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,Po.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const l0=(0,_e.A)(r0,[["render",a0],["__scopeId","data-v-a23ac46e"]]);var i0=l0;const n0={class:"flex justify-end items-center space-x-2 relative"},d0={class:"flex items-center space-x-1 mr-auto"},c0={class:"text-2xl font-bold mb-2 ml-auto"},u0={class:"flex items-center space-x-4"},p0={class:"add relative inline-block"},h0={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},g0={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},m0={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},y0={class:"p-6 space-y-4 overflow-y-auto flex-grow"},k0={class:"flex items-center space-x-4"},f0={class:"text-xl font-bold text-gray-700"},b0={class:"absolute top-2 right-4"},x0=["onClick"],_0={class:"mb-4 flex justify-center"},w0={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},v0={class:"flex space-x-2"},L0={class:"flex w-[250px] relative"},D0={class:"flex items-center space-x-3 py-2"},P0={key:0,class:"mb-8"},C0={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},S0={class:"bg-custom-orange text-white"},R0={class:"px-4 py-2 align-top pb-5"},T0=["rowspan"],M0={class:"flex items-center"},E0={class:"px-4 py-2 align-top pb-5"},F0={class:"px-4 py-2 align-top pb-5"},z0={class:"px-4 py-2 align-top pb-5"},A0={class:"px-4 py-2 align-top text-right"},O0={class:"flex justify-end space-x-2"},N0=["onClick"],X0=["onClick"],V0={key:0},Q0={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},I0=["disabled"],U0={class:"flex items-center space-x-1"},$0=["onClick"],B0=["disabled"],W0={class:"flex items-center space-x-3 py-2"},q0={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},Z0={class:"bg-custom-orange text-white"},j0={class:"px-4 py-2 align-top pb-5"},J0={class:"px-4 py-2 align-top pb-5"},K0={class:"px-4 py-2 align-top pb-5"},H0={class:"px-4 py-2 align-top pb-5"},Y0={class:"px-4 py-2 align-top text-right"},G0={class:"flex justify-end space-x-2"},e1=["onClick"],t1=["onClick"],s1={key:0},o1={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},a1=["disabled"],r1={class:"flex items-center space-x-1"},l1=["onClick"],i1=["disabled"],n1={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},d1={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},c1={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},u1={class:"flex space-x-2"},p1={class:"p-6 space-y-4"},h1={class:"flex items-center space-x-4"},g1={class:"mb-4"},m1={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},y1={class:"flex space-x-2"},k1={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},f1={class:"bg-white rounded-lg shadow-md w-1/3"},b1={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},x1={class:"flex justify-end space-x-2 p-4 border-t"};function _1(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[52]||(t[52]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",n0,[(0,a.Lk)("div",d0,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.viewMode="week"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===i.viewMode}])},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.viewMode="day"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===i.viewMode}])},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,a.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,a.Lk)("h1",c0,(0,l.v_)("week"===i.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,a.Lk)("div",u0,[(0,a.Lk)("div",null,[t[56]||(t[56]=(0,a.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),i.isDateConfirmed||i.startDate===i.initialStartDate?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>n.updateStartDate&&n.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,a.Lk)("div",p0,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",h0,[(0,a.Lk)("div",g0,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[59]||(t[59]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[7]||(t[7]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",m0,[t[60]||(t[60]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,a.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",y0,[(0,a.Lk)("div",k0,[t[61]||(t[61]=(0,a.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[o.Jo,i.day_of_week]])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.formRows,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"space-y-4 relative"},[(0,a.Lk)("div",f0," ประเภทอาหาร "+(0,l.v_)(s+1),1),(0,a.Lk)("div",null,[t[62]||(t[62]=(0,a.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:n.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,a.Lk)("div",null,[t[63]||(t[63]=(0,a.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,a.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:n.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":n.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,a.Lk)("div",b0,[(0,a.Lk)("button",{type:"button",onClick:e=>n.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,a.Lk)("span",null,"× ลบเมนู",-1)]),8,x0)])])))),128)),(0,a.Lk)("div",_0,[(0,a.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>n.addRow&&n.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,a.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,a.Lk)("div",w0,[(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",v0,[(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.addMenus&&n.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",L0,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",D0,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),n.weekOptions.length>0?((0,a.uX)(),(0,a.Wv)(d,{key:0,modelValue:i.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedWeek=e),options:n.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>n.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),i.selectedWeek?((0,a.uX)(),(0,a.CE)("div",P0,[(0,a.Lk)("table",C0,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",S0,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenus,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",R0,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),0===s||e.day_of_week!==n.paginatedMenus[s-1].day_of_week?((0,a.uX)(),(0,a.CE)("td",{key:0,rowspan:n.getRowSpan(n.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,a.Lk)("div",null,[t[70]||(t[70]=(0,a.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,a.eW)((0,l.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",M0,[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,a.eW)(" "+(0,l.v_)(n.formattedDate(e.date_to_show)),1)])])],8,T0)):(0,a.Q3)("",!0),(0,a.Lk)("td",E0,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",F0,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",z0,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",A0,[(0,a.Lk)("div",O0,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,N0),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,X0)])])])))),128)),0===n.paginatedMenus.length?((0,a.uX)(),(0,a.CE)("tr",V0,t[74]||(t[74]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Q0,[(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,I0),(0,a.Lk)("div",U0,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,$0)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,B0)])])):(0,a.Q3)("",!0)],512),[[o.aG,"week"===i.viewMode]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",W0,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>n.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>n.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>n.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>n.onSelectDateChange&&n.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[o.Jo,n.formattedSelectedDate]])]),(0,a.Lk)("table",q0,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Z0,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headersByDay,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidthsByDay[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenusByDay,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",j0,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",J0,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",K0,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",H0,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",Y0,[(0,a.Lk)("div",G0,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,e1),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,t1)])])])))),128)),0===n.paginatedMenusByDay.length?((0,a.uX)(),(0,a.CE)("tr",s1,t[82]||(t[82]=[(0,a.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",o1,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPageByDay(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,a1),(0,a.Lk)("div",r1,[n.totalPagesArrayByDay.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>n.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>n.goToPageByDay(n.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArrayByDay.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPageByDay(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,l1)))),128)),n.totalPagesArrayByDay.end<n.totalPagesByDay-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>n.goToPageByDay(n.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.end<n.totalPagesByDay?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>n.goToPageByDay(n.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[37]||(t[37]=e=>n.goToPageByDay(i.currentPage+1)),disabled:i.currentPage===n.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,i1)])],512),[[o.aG,"day"===i.viewMode]]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",n1,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[86]||(t[86]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[38]||(t[38]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",d1,[(0,a.Lk)("div",c1,[t[87]||(t[87]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,a.Lk)("div",u1,[(0,a.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",p1,[(0,a.Lk)("div",h1,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSetupMenu.day_of_week]])]),(0,a.Lk)("div",null,[t[89]||(t[89]=(0,a.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedSetupMenu.meal_type_id=e),options:n.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,a.Lk)("div",g1,[t[90]||(t[90]=(0,a.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedSetupMenu.menu_id=e),options:n.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",m1,[(0,a.Lk)("div",y1,[(0,a.Lk)("button",{onClick:t[43]||(t[43]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",k1,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[92]||(t[92]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[45]||(t[45]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",f1,[(0,a.Lk)("div",b1,[t[93]||(t[93]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",x1,[(0,a.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)],64)}var w1={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:fp.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&17===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)||e.day_of_week.toString().includes(o)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-fat-disease"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await ke.A.get(`http://127.0.0.1:3333/setup-menu-fat-disease/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-fat-disease/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await ke.A.get("http://127.0.0.1:3333/setup-menu-fat-disease/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await ke.A.post("http://127.0.0.1:3333/setup-menu-fat-disease/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&17===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.post("http://127.0.0.1:3333/setup-menu-fat-disease",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.put(`http://127.0.0.1:3333/setup-menu-fat-disease/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/setup-menu-fat-disease/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,Po.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const v1=(0,_e.A)(w1,[["render",_1],["__scopeId","data-v-46de674c"]]);var L1=v1;const D1={class:"flex justify-end items-center space-x-2 relative"},P1={class:"flex items-center space-x-1 mr-auto"},C1={class:"text-2xl font-bold mb-2 ml-auto"},S1={class:"flex items-center space-x-4"},R1={class:"add relative inline-block"},T1={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},M1={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},E1={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},F1={class:"p-6 space-y-4 overflow-y-auto flex-grow"},z1={class:"flex items-center space-x-4"},A1={class:"text-xl font-bold text-gray-700"},O1={class:"absolute top-2 right-4"},N1=["onClick"],X1={class:"mb-4 flex justify-center"},V1={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Q1={class:"flex space-x-2"},I1={class:"flex w-[250px] relative"},U1={class:"flex items-center space-x-3 py-2"},$1={key:0,class:"mb-8"},B1={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},W1={class:"bg-custom-orange text-white"},q1={class:"px-4 py-2 align-top pb-5"},Z1=["rowspan"],j1={class:"flex items-center"},J1={class:"px-4 py-2 align-top pb-5"},K1={class:"px-4 py-2 align-top pb-5"},H1={class:"px-4 py-2 align-top pb-5"},Y1={class:"px-4 py-2 align-top text-right"},G1={class:"flex justify-end space-x-2"},e2=["onClick"],t2=["onClick"],s2={key:0},o2={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},a2=["disabled"],r2={class:"flex items-center space-x-1"},l2=["onClick"],i2=["disabled"],n2={class:"flex items-center space-x-3 py-2"},d2={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},c2={class:"bg-custom-orange text-white"},u2={class:"px-4 py-2 align-top pb-5"},p2={class:"px-4 py-2 align-top pb-5"},h2={class:"px-4 py-2 align-top pb-5"},g2={class:"px-4 py-2 align-top pb-5"},m2={class:"px-4 py-2 align-top text-right"},y2={class:"flex justify-end space-x-2"},k2=["onClick"],f2=["onClick"],b2={key:0},x2={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},_2=["disabled"],w2={class:"flex items-center space-x-1"},v2=["onClick"],L2=["disabled"],D2={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},P2={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},C2={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},S2={class:"flex space-x-2"},R2={class:"p-6 space-y-4"},T2={class:"flex items-center space-x-4"},M2={class:"mb-4"},E2={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},F2={class:"flex space-x-2"},z2={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},A2={class:"bg-white rounded-lg shadow-md w-1/3"},O2={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},N2={class:"flex justify-end space-x-2 p-4 border-t"};function X2(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[52]||(t[52]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",D1,[(0,a.Lk)("div",P1,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.viewMode="week"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===i.viewMode}])},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.viewMode="day"),class:(0,l.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===i.viewMode}])},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,a.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,a.Lk)("h1",C1,(0,l.v_)("week"===i.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,a.Lk)("div",S1,[(0,a.Lk)("div",null,[t[56]||(t[56]=(0,a.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),i.isDateConfirmed||i.startDate===i.initialStartDate?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>n.updateStartDate&&n.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,a.Lk)("div",R1,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",T1,[(0,a.Lk)("div",M1,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[59]||(t[59]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[7]||(t[7]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",E1,[t[60]||(t[60]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,a.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",F1,[(0,a.Lk)("div",z1,[t[61]||(t[61]=(0,a.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[o.Jo,i.day_of_week]])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.formRows,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"space-y-4 relative"},[(0,a.Lk)("div",A1," ประเภทอาหาร "+(0,l.v_)(s+1),1),(0,a.Lk)("div",null,[t[62]||(t[62]=(0,a.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:n.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,a.Lk)("div",null,[t[63]||(t[63]=(0,a.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,a.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:n.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":n.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,a.Lk)("div",O1,[(0,a.Lk)("button",{type:"button",onClick:e=>n.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,a.Lk)("span",null,"× ลบเมนู",-1)]),8,N1)])])))),128)),(0,a.Lk)("div",X1,[(0,a.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>n.addRow&&n.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,a.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,a.Lk)("div",V1,[(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",Q1,[(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.addMenus&&n.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",I1,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",U1,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),n.weekOptions.length>0?((0,a.uX)(),(0,a.Wv)(d,{key:0,modelValue:i.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedWeek=e),options:n.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>n.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),i.selectedWeek?((0,a.uX)(),(0,a.CE)("div",$1,[(0,a.Lk)("table",B1,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",W1,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenus,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",q1,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),0===s||e.day_of_week!==n.paginatedMenus[s-1].day_of_week?((0,a.uX)(),(0,a.CE)("td",{key:0,rowspan:n.getRowSpan(n.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,a.Lk)("div",null,[t[70]||(t[70]=(0,a.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,a.eW)((0,l.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",j1,[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,a.eW)(" "+(0,l.v_)(n.formattedDate(e.date_to_show)),1)])])],8,Z1)):(0,a.Q3)("",!0),(0,a.Lk)("td",J1,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",K1,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",H1,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",Y1,[(0,a.Lk)("div",G1,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,e2),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,t2)])])])))),128)),0===n.paginatedMenus.length?((0,a.uX)(),(0,a.CE)("tr",s2,t[74]||(t[74]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",o2,[(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,a2),(0,a.Lk)("div",r2,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,l2)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,i2)])])):(0,a.Q3)("",!0)],512),[[o.aG,"week"===i.viewMode]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",n2,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>n.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>n.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>n.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>n.onSelectDateChange&&n.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[o.Jo,n.formattedSelectedDate]])]),(0,a.Lk)("table",d2,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",c2,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headersByDay,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidthsByDay[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenusByDay,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",u2,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",p2,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",h2,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",g2,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",m2,[(0,a.Lk)("div",y2,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,k2),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,f2)])])])))),128)),0===n.paginatedMenusByDay.length?((0,a.uX)(),(0,a.CE)("tr",b2,t[82]||(t[82]=[(0,a.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",x2,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPageByDay(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,_2),(0,a.Lk)("div",w2,[n.totalPagesArrayByDay.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>n.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>n.goToPageByDay(n.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArrayByDay.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPageByDay(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,v2)))),128)),n.totalPagesArrayByDay.end<n.totalPagesByDay-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>n.goToPageByDay(n.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.end<n.totalPagesByDay?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>n.goToPageByDay(n.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[37]||(t[37]=e=>n.goToPageByDay(i.currentPage+1)),disabled:i.currentPage===n.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,L2)])],512),[[o.aG,"day"===i.viewMode]]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",D2,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[86]||(t[86]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[38]||(t[38]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",P2,[(0,a.Lk)("div",C2,[t[87]||(t[87]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,a.Lk)("div",S2,[(0,a.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",R2,[(0,a.Lk)("div",T2,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSetupMenu.day_of_week]])]),(0,a.Lk)("div",null,[t[89]||(t[89]=(0,a.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedSetupMenu.meal_type_id=e),options:n.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,a.Lk)("div",M2,[t[90]||(t[90]=(0,a.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedSetupMenu.menu_id=e),options:n.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",E2,[(0,a.Lk)("div",F2,[(0,a.Lk)("button",{onClick:t[43]||(t[43]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",z2,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[92]||(t[92]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[45]||(t[45]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",A2,[(0,a.Lk)("div",O2,[t[93]||(t[93]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",N2,[(0,a.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)],64)}var V2={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:fp.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&16===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)||e.day_of_week.toString().includes(o)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-diabete"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await ke.A.get(`http://127.0.0.1:3333/setup-menu-diabete/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-diabete/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await ke.A.get("http://127.0.0.1:3333/setup-menu-diabete/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await ke.A.post("http://127.0.0.1:3333/setup-menu-diabete/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&16===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.post("http://127.0.0.1:3333/setup-menu-diabete",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ke.A.put(`http://127.0.0.1:3333/setup-menu-diabete/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ke.A.delete(`http://127.0.0.1:3333/setup-menu-diabete/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,Po.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const Q2=(0,_e.A)(V2,[["render",X2],["__scopeId","data-v-fa19eb16"]]);var I2=Q2;const U2={class:"mt-[-20px]"},$2={class:"flex items-center space-x-3 py-2"},B2={class:"flex justify-end items-center space-x-2 relative"},W2={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},q2={class:"text-m text-custom-orange font-bold"},Z2=["disabled"],j2=["disabled"],J2={class:"ml-2"},K2={class:"sort relative inline-block",ref:"sortDropdown"},H2={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-52 z-50 border border-gray-300"},Y2={class:"list-none p-0 m-0"},G2={key:0,class:"material-symbols-outlined text-sm"},e3={key:0,class:"material-symbols-outlined text-sm"},t3={key:0,class:"material-symbols-outlined text-sm"},s3={class:"filter relative inline-block",ref:"filterDropdown"},o3={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},a3={class:"p-4 w-[500px] list-none"},r3={class:"grid grid-cols-3 gap-4"},l3=["value"],i3={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},n3={class:"flex space-x-2"},d3={class:"flex w-[250px] relative"},c3={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},u3={class:"bg-custom-orange text-white"},p3={class:"px-4 py-2 text-left align-center"},h3=["checked"],g3={class:"px-4 py-2 align-top pb-5"},m3=["value"],y3={class:"px-4 py-2 align-top pb-5"},k3=["rowspan"],f3={class:"px-4 py-2 align-top pb-5"},b3={class:"px-4 py-2 align-top pb-5"},x3={class:"px-4 py-2 align-top pb-5"},_3={class:"px-4 py-2 align-top pb-5"},w3={class:"px-4 py-2 align-top font-bold pb-5"},v3=["onClick"],L3={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},D3={class:"bg-white rounded-md w-1/3 max-w-lg"},P3={class:"font-bold"},C3={class:"p-6 space-y-4"},S3={class:"text-gray-700"},R3={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},T3={key:0},M3={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},E3=["disabled"],F3={class:"flex items-center space-x-1"},z3=["onClick"],A3=["disabled"];function O3(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",U2,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[39]||(t[39]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[38]||(t[38]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[41]||(t[41]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[40]||(t[40]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[43]||(t[43]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[42]||(t[42]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",$2,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>n.changeDate(-1)),class:"flex items-center"},t[44]||(t[44]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[45]||(t[45]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[5]||(t[5]=e=>n.changeDate(1)),class:"flex items-center"},t[46]||(t[46]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[47]||(t[47]=(0,a.Lk)("strong",{class:"text-gray-700"},"Start Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"startDatepicker",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>n.formattedStartDate=e),onInput:t[7]||(t[7]=(...e)=>n.onStartDateChange&&n.onStartDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่เริ่มต้น"},null,544),[[o.Jo,n.formattedStartDate]]),t[48]||(t[48]=(0,a.Lk)("strong",{class:"text-gray-700"},"End Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"endDatepicker",type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>n.formattedEndDate=e),onInput:t[9]||(t[9]=(...e)=>n.onEndDateChange&&n.onEndDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่สิ้นสุด"},null,544),[[o.Jo,n.formattedEndDate]])]),(0,a.Lk)("div",B2,[(0,a.Lk)("div",W2,[t[49]||(t[49]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"receipt_long",-1)),t[50]||(t[50]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนรายการอาหารประจำวันของลูกค้าทั้งหมด: ",-1)),(0,a.Lk)("span",q2,(0,l.v_)(n.filteredOrdersWithoutHappy.length)+" รายการ",1)]),(0,a.Lk)("div",null,[i.selectedOrders.some((e=>"pending"===e.status))&&!i.selectedOrders.some((e=>"confirm"===e.status))?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[10]||(t[10]=(...e)=>n.confirmMultipleOrders&&n.confirmMultipleOrders(...e)),class:"bg-green-500 hover:bg-green-600 text-white px-2 py-2 rounded-md flex items-center space-x-1",disabled:0===i.selectedOrders.length}," ยืนยันการสั่งซื้อที่เลือก ("+(0,l.v_)(i.selectedOrders.length)+") ",9,Z2)):(0,a.Q3)("",!0),i.selectedOrders.some((e=>"confirm"===e.status))&&!i.selectedOrders.some((e=>"pending"===e.status))?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[11]||(t[11]=(...e)=>n.pendingMultipleOrders&&n.pendingMultipleOrders(...e)),class:"bg-red-500 hover:bg-red-600 text-white px-2 py-2 rounded-md flex items-center space-x-1",disabled:0===i.selectedOrders.length}," ยกเลิกยืนยันการสั่งซื้อที่เลือก ("+(0,l.v_)(i.selectedOrders.length)+") ",9,j2)):(0,a.Q3)("",!0)]),i.selectedOrder.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[12]||(t[12]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[51]||(t[51]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",J2,"รีเซ็ตตัวกรอง ("+(0,l.v_)(i.selectedOrder.length)+")",1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",K2,[(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[52]||(t[52]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[53]||(t[53]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",H2,[(0,a.Lk)("ul",Y2,[(0,a.Lk)("li",{onClick:t[14]||(t[14]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[54]||(t[54]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",G2,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[15]||(t[15]=e=>n.sortData("user_id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[55]||(t[55]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"user_id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",e3,(0,l.v_)(1===i.sortDirection["user_id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[16]||(t[16]=e=>n.sortData("order_date")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[56]||(t[56]=(0,a.Lk)("span",null,"จัดเรียงตามวันที่สั่งซื้อ",-1)),"order_date"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",t3,(0,l.v_)(1===i.sortDirection["order_date"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[17]||(t[17]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[57]||(t[57]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",s3,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[58]||(t[58]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[59]||(t[59]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",o3,[(0,a.Lk)("div",a3,[t[60]||(t[60]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",r3,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMenuTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedOrder=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,l3),[[o.lH,i.selectedOrder]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",i3,[(0,a.Lk)("li",{onClick:t[20]||(t[20]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[61]||(t[61]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",n3,[(0,a.Lk)("button",{onClick:t[21]||(t[21]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",d3,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[23]||(t[23]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[24]||(t[24]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[25]||(t[25]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",c3,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",u3,[(0,a.Lk)("th",p3,[(0,a.Lk)("input",{type:"checkbox",onChange:t[27]||(t[27]=(...e)=>n.toggleSelectAll&&n.toggleSelectAll(...e)),checked:i.isAllSelected,class:"w-4 h-4 accent-black focus:ring-0"},null,40,h3)]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t],cursor:"default",pointerEvents:"none"})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredOrders,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",g3,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[28]||(t[28]=e=>i.selectedOrders=e),value:e,class:"w-4 h-4 accent-custom-orange focus:ring-0"},null,8,m3),[[o.lH,i.selectedOrders]])]),(0,a.Lk)("td",y3,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),n.shouldDisplayUserName(s,e.user_id)?((0,a.uX)(),(0,a.CE)("td",{key:0,class:"px-4 py-2 align-top font-bold border-l border-r text-custom-orange pb-5",rowspan:n.getRowspan(e.user_id,s)},(0,l.v_)(n.getCustomerName(e.user_id)),9,k3)):(0,a.Q3)("",!0),(0,a.Lk)("td",f3,(0,l.v_)(n.formatDate(e.order_date)),1),(0,a.Lk)("td",b3,(0,l.v_)(n.getMenuTypeName(e.menu_type_id)),1),(0,a.Lk)("td",x3,[(0,a.Lk)("div",null,(0,l.v_)(n.getMenuEngName(e.menu_id)),1),(0,a.Lk)("div",null,"("+(0,l.v_)(n.getMenuName(e.menu_id))+")",1)]),(0,a.Lk)("td",_3,(0,l.v_)(e.quantity),1),(0,a.Lk)("td",w3,[(0,a.Lk)("button",{onClick:t=>n.openConfirmSatatusModal(e),class:(0,l.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none hover:text-gray-200",n.getStatusClass(e.status)])},(0,l.v_)(n.getStatusText(e.status)),11,v3),i.isConfirmStatusModalOpen?((0,a.uX)(),(0,a.CE)("div",L3,[(0,a.Lk)("div",D3,[(0,a.Lk)("div",{class:(0,l.C4)([{"bg-green-500":"pending"===i.selectedOrder.status,"bg-red-500":"confirm"===i.selectedOrder.status},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,a.Lk)("span",P3,(0,l.v_)("paid"===i.selectedOrder.status?"เปลี่ยนสถานะเป็นยังไม่ได้ยืนยันการสั่งซื้อ":"ยืนยันการสั่งซื้อ"),1),(0,a.Lk)("button",{onClick:t[29]||(t[29]=(...e)=>n.closeConfirmStatusModal&&n.closeConfirmStatusModal(...e)),class:"text-white hover:text-gray-200"},t[62]||(t[62]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,a.Lk)("div",C3,[(0,a.Lk)("p",S3,(0,l.v_)("confirm"===i.selectedOrder.status?'คุณต้องการเปลี่ยนสถานะเป็น "ยังไม่ได้ยืนยันการสั่งซื้อ" หรือไม่?':"ยืนยันการสั่งซื้อ?"),1)]),(0,a.Lk)("div",R3,[(0,a.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>n.closeConfirmStatusModal&&n.closeConfirmStatusModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>n.confirmStatus&&n.confirmStatus(...e)),class:(0,l.C4)([{"bg-green-500 hover:bg-green-600":"pending"===i.selectedOrder.status,"bg-red-500 hover:bg-red-600":"confirm"===i.selectedOrder.status},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,a.Q3)("",!0)])])))),128)),0===n.filteredOrders.length?((0,a.uX)(),(0,a.CE)("tr",T3,t[63]||(t[63]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",M3,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[64]||(t[64]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,E3),(0,a.Lk)("div",F3,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,z3)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[37]||(t[37]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[65]||(t[65]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,A3)])])}var N3={data(){return{headers:["#","Customer's Name","วันที่สั่งซื้อ","Packge Type","รายการอาหาร","จำนวน","สถานะ"],headerWidths:["5%","20%","15%","15%","20%","10%","15%"],sortIcon:"arrow_downward",orders:[],searchQuery:"",selectedDate:"",customers:[],menus:[],menu_types:[],selectedOrder:[],selectedOrders:[],isConfirmStatusModalOpen:!1,isAllSelected:!1,currentPage:1,itemsPerPage:10,startDate:"",endDate:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:""}},computed:{filteredMenuTypes(){return this.menu_types.filter((e=>!e.name.startsWith("Happy")))},filteredOrdersWithoutHappy(){return this.orders.filter((e=>{const t=this.getMenuTypeName(e.menu_type_id)||"";return!t.startsWith("Happy")}))},filteredOrders(){const e=this.searchQuery?this.searchQuery.toLowerCase():"";return this.filteredOrdersWithoutHappy.filter((t=>{const s=this.getCustomerName(t.user_id)||"",o=""===e||s.toLowerCase().includes(e),a=!Array.isArray(this.selectedOrder)||0===this.selectedOrder.length||this.selectedOrder.includes(t.menu_type_id);return o&&a})).slice((this.currentPage-1)*this.itemsPerPage,this.currentPage*this.itemsPerPage)},totalPages(){const e=this.searchQuery?this.searchQuery.toLowerCase():"";return Math.ceil(this.filteredOrdersWithoutHappy.filter((t=>{const s=this.getCustomerName(t.user_id)||"",o=""===e||s.toLowerCase().includes(e),a=!Array.isArray(this.selectedOrder)||0===this.selectedOrder.length||this.selectedOrder.includes(t.menu_type_id);return o&&a})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""}},methods:{goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString())},onEndDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.endDate=t.toISOString())},async fetchOrders(e,t){try{const s=await ke.A.get("http://127.0.0.1:3333/orders/date-range",{params:{start_date:e,end_date:t}});this.orders=s.data.orders,this.filteredOrders=this.orders,this.orders.sort(((e,t)=>{const s=new Date(e.order_date),o=new Date(t.order_date);return s-o}))}catch(s){}},async fetchLookupData(){try{const[e,t,s]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/menu-types")]);this.customers=e.data,this.menus=t.data,this.menu_types=s.data}catch(e){console.error("Error fetching lookup data:",e)}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},getCustomerName(e){const t=this.customers.find((t=>t.user_id===e));return t?t.name:null},getMenuName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMenuEngName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuTypeName(e){const t=this.menu_types.find((t=>t.id===e));return t?t.name:null},getStatusText(e){return"confirm"===e?"ยืนยันการสั่งซื้อแล้ว":"ยังไม่ได้ยืนยันการสั่งซื้อ"},getStatusClass(e){return"confirm"===e?"text-white bg-green-500":"text-white bg-red-500"},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchOrdersData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchOrdersData()},fetchOrdersData(){this.startDate&&this.endDate&&this.fetchOrders(this.startDate,this.endDate)},shouldDisplayUserName(e,t){return 0===e||this.filteredOrders[e-1].user_id!==t},getRowspan(e,t){let s=0;for(let o=t;o<this.filteredOrders.length;o++){if(this.filteredOrders[o].user_id!==e)break;s++}return s},shouldDisplayOrderDate(e,t){return 0===e||this.filteredOrders[e-1].order_date!==t},getOrderDateRowspan(e,t){let s=0;for(let o=t;o<this.filteredOrders.length;o++){if(this.filteredOrders[o].order_date!==e)break;s++}return s},onViewDetails(e){this.selectedDailySaleDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedDailySaleDetail={}},formatLabel(e){const t={paid_date:"Transaction Date",customer_id:"Customer's Name",package_type_id:"Package Type",package_id:"Package/Purchase Details",promotion_type_id:"Sales Category",package_price:"Package Price",package_detail:"Details",discount:"Additional Discount",extra_charge:"% Extra Charge",extra_charge_price:"Extra Charge Value",total_package_price:"Purchase Value",total_delivery_price:"ค่าจัดส่งรวม",total_price:"ยอดขายรวม",payment_type_id:"วิธีการชำระเงิน",seller_name_id:"Sales Rep"};return t[e]||e},openConfirmSatatusModal(e){this.selectedOrder=e,this.isConfirmStatusModalOpen=!0},closeConfirmStatusModal(){this.isConfirmStatusModalOpen=!1,this.selectedPaidDate=""},async confirmStatus(){try{const e="confirm"===this.selectedOrder.status?"pending":"confirm",t={status:e},s=await ke.A.put(`http://127.0.0.1:3333/order/${this.selectedOrder.id}/status`,t);if(await this.fetchOrders(),200!==s.status)throw new Error("Unexpected response status");{const e=s.data.data,t=this.orders.findIndex((t=>t.id===e.id));-1!==t&&(this.orders[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmStatusModal()},async confirmMultipleOrders(){if(0===this.selectedOrders.length)return;const e=this.selectedOrders.map((e=>e.id));console.log("Selected Orders:",this.selectedOrders);try{const t=await fetch("http://127.0.0.1:3333/order/update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_ids:e,status:"confirm"})});await t.json(),t.ok?(this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!"),this.selectedOrders=[],await this.fetchOrders(this.startDate,this.endDate)):this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}catch(t){console.error("Error:",t),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเชื่อมต่อ!")}},async pendingMultipleOrders(){if(0===this.selectedOrders.length)return;const e=this.selectedOrders.map((e=>e.id));try{const t=await fetch("http://127.0.0.1:3333/order/update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_ids:e,status:"pending"})});await t.json(),t.ok?(this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!"),this.selectedOrders=[],await this.fetchOrders(this.startDate,this.endDate)):this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}catch(t){console.error("Error:",t),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเชื่อมต่อ!")}},selectOrder(e){this.selectedOrders.includes(e)?this.selectedOrders=this.selectedOrders.filter((t=>t.id!==e.id)):this.selectedOrders.push(e)},toggleSelectAll(e){e.target.checked?this.selectedOrders=[...this.filteredOrders]:this.selectedOrders=[],this.isAllSelected=e.target.checked},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedOrder.length>0?this.filteredOrders=this.menu_types.filter((e=>this.selectedOrder.includes(e.menu_type_id))):this.filteredOrders=this.orders,this.isFilterDropdownOpen=!1},clearFilter(){this.selectedOrder=[],this.filteredOrders=this.orders},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.orders.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.orders.sort(((e,t)=>{const s=new Date(e.order_date),o=new Date(t.order_date);return s-o})),this.currentPage=1},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredOrders=this.orders,this.sortData("id"),this.fetchLookupData(),this.fetchOrders(this.selectedDate)},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchOrders(this.selectedDate),this.setToday(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.fetchOrdersData()}}),(0,Po.A)(this.$refs.endDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.endDate=t,this.fetchOrdersData()}})}))},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},watch:{selectedOrders(){this.isAllSelected=this.selectedOrders.length===this.filteredOrders.length}}};const X3=(0,_e.A)(N3,[["render",O3],["__scopeId","data-v-e5ce2408"]]);var V3=X3;const Q3={class:"mt-[-20px]"},I3={class:"flex items-center space-x-3 py-2"},U3={class:"flex justify-end items-center space-x-2 relative"},$3={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},B3={class:"text-m text-custom-orange font-bold"},W3=["disabled"],q3=["disabled"],Z3={class:"ml-2"},j3={class:"sort relative inline-block",ref:"sortDropdown"},J3={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-52 z-50 border border-gray-300"},K3={class:"list-none p-0 m-0"},H3={key:0,class:"material-symbols-outlined text-sm"},Y3={key:0,class:"material-symbols-outlined text-sm"},G3={key:0,class:"material-symbols-outlined text-sm"},e4={class:"flex w-[250px] relative"},t4={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},s4={class:"bg-custom-orange text-white"},o4={class:"px-4 py-2 text-left align-center"},a4=["checked"],r4={class:"px-4 py-2 align-top pb-5"},l4=["value"],i4={class:"px-4 py-2 align-top pb-5"},n4=["rowspan"],d4={class:"px-4 py-2 align-top pb-5"},c4={class:"px-4 py-2 align-top pb-5"},u4={class:"px-4 py-2 align-top pb-5"},p4={class:"px-4 py-2 align-top pb-5"},h4={class:"px-4 py-2 align-top font-bold pb-5"},g4=["onClick"],m4={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},y4={class:"bg-white rounded-md w-1/3 max-w-lg"},k4={class:"font-bold"},f4={class:"p-6 space-y-4"},b4={class:"text-gray-700"},x4={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},_4={key:0},w4={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},v4=["disabled"],L4={class:"flex items-center space-x-1"},D4=["onClick"],P4=["disabled"];function C4(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",Q3,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[34]||(t[34]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[33]||(t[33]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[36]||(t[36]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[35]||(t[35]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",I3,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>n.changeDate(-1)),class:"flex items-center"},t[37]||(t[37]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[38]||(t[38]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>n.changeDate(1)),class:"flex items-center"},t[39]||(t[39]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[40]||(t[40]=(0,a.Lk)("strong",{class:"text-gray-700"},"Start Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"startDatepicker",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.formattedStartDate=e),onInput:t[6]||(t[6]=(...e)=>n.onStartDateChange&&n.onStartDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่เริ่มต้น"},null,544),[[o.Jo,n.formattedStartDate]]),t[41]||(t[41]=(0,a.Lk)("strong",{class:"text-gray-700"},"End Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"endDatepicker",type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>n.formattedEndDate=e),onInput:t[8]||(t[8]=(...e)=>n.onEndDateChange&&n.onEndDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่สิ้นสุด"},null,544),[[o.Jo,n.formattedEndDate]])]),(0,a.Lk)("div",U3,[(0,a.Lk)("div",$3,[t[42]||(t[42]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"receipt_long",-1)),t[43]||(t[43]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนรายการอาหารประจำวันของลูกค้าทั้งหมด: ",-1)),(0,a.Lk)("span",B3,(0,l.v_)(n.filteredOrdersWithoutHappy.length)+" รายการ",1)]),(0,a.Lk)("div",null,[i.selectedOrders.some((e=>"pending"===e.status))&&!i.selectedOrders.some((e=>"confirm"===e.status))?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[9]||(t[9]=(...e)=>n.confirmMultipleOrders&&n.confirmMultipleOrders(...e)),class:"bg-green-500 hover:bg-green-600 text-white px-2 py-2 rounded-md flex items-center space-x-1",disabled:0===i.selectedOrders.length}," ยืนยันการสั่งซื้อที่เลือก ("+(0,l.v_)(i.selectedOrders.length)+") ",9,W3)):(0,a.Q3)("",!0),i.selectedOrders.some((e=>"confirm"===e.status))&&!i.selectedOrders.some((e=>"pending"===e.status))?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[10]||(t[10]=(...e)=>n.pendingMultipleOrders&&n.pendingMultipleOrders(...e)),class:"bg-red-500 hover:bg-red-600 text-white px-2 py-2 rounded-md flex items-center space-x-1",disabled:0===i.selectedOrders.length}," ยกเลิกยืนยันการสั่งซื้อที่เลือก ("+(0,l.v_)(i.selectedOrders.length)+") ",9,q3)):(0,a.Q3)("",!0)]),i.selectedOrder.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[11]||(t[11]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[44]||(t[44]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",Z3,"รีเซ็ตตัวกรอง ("+(0,l.v_)(i.selectedOrder.length)+")",1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",j3,[(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[45]||(t[45]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[46]||(t[46]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",J3,[(0,a.Lk)("ul",K3,[(0,a.Lk)("li",{onClick:t[13]||(t[13]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[47]||(t[47]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",H3,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[14]||(t[14]=e=>n.sortData("user_id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[48]||(t[48]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"user_id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",Y3,(0,l.v_)(1===i.sortDirection["user_id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[15]||(t[15]=e=>n.sortData("order_date")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[49]||(t[49]=(0,a.Lk)("span",null,"จัดเรียงตามวันที่สั่งซื้อ",-1)),"order_date"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",G3,(0,l.v_)(1===i.sortDirection["order_date"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[16]||(t[16]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[50]||(t[50]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",e4,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[17]||(t[17]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[18]||(t[18]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[19]||(t[19]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",t4,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",s4,[(0,a.Lk)("th",o4,[(0,a.Lk)("input",{type:"checkbox",onChange:t[21]||(t[21]=(...e)=>n.toggleSelectAll&&n.toggleSelectAll(...e)),checked:i.isAllSelected,class:"w-4 h-4 accent-black focus:ring-0"},null,40,a4)]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t],cursor:"default",pointerEvents:"none"})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredOrders,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",r4,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[22]||(t[22]=e=>i.selectedOrders=e),value:e,class:"w-4 h-4 accent-custom-orange focus:ring-0"},null,8,l4),[[o.lH,i.selectedOrders]])]),(0,a.Lk)("td",i4,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),n.shouldDisplayUserName(s,e.user_id)?((0,a.uX)(),(0,a.CE)("td",{key:0,class:"px-4 py-2 align-top font-bold border-l border-r text-custom-orange pb-5",rowspan:n.getRowspan(e.user_id,s)},(0,l.v_)(n.getCustomerName(e.user_id)),9,n4)):(0,a.Q3)("",!0),(0,a.Lk)("td",d4,(0,l.v_)(n.formatDate(e.order_date)),1),(0,a.Lk)("td",c4,(0,l.v_)(n.getMenuTypeName(e.menu_type_id)),1),(0,a.Lk)("td",u4,[(0,a.Lk)("div",null,(0,l.v_)(n.getMenuEngName(e.menu_id)),1),(0,a.Lk)("div",null,"("+(0,l.v_)(n.getMenuName(e.menu_id))+")",1)]),(0,a.Lk)("td",p4,(0,l.v_)(e.quantity),1),(0,a.Lk)("td",h4,[(0,a.Lk)("button",{onClick:t=>n.openConfirmSatatusModal(e),class:(0,l.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none hover:text-gray-200",n.getStatusClass(e.status)])},(0,l.v_)(n.getStatusText(e.status)),11,g4),i.isConfirmStatusModalOpen?((0,a.uX)(),(0,a.CE)("div",m4,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[52]||(t[52]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[23]||(t[23]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",y4,[(0,a.Lk)("div",{class:(0,l.C4)([{"bg-green-500":"pending"===i.selectedOrder.status,"bg-red-500":"confirm"===i.selectedOrder.status},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,a.Lk)("span",k4,(0,l.v_)("paid"===i.selectedOrder.status?"เปลี่ยนสถานะเป็นยังไม่ได้ยืนยันการสั่งซื้อ":"ยืนยันการสั่งซื้อ"),1),(0,a.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>n.closeConfirmStatusModal&&n.closeConfirmStatusModal(...e)),class:"text-white hover:text-gray-200"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,a.Lk)("div",f4,[(0,a.Lk)("p",b4,(0,l.v_)("confirm"===i.selectedOrder.status?'คุณต้องการเปลี่ยนสถานะเป็น "ยังไม่ได้ยืนยันการสั่งซื้อ" หรือไม่?':"ยืนยันการสั่งซื้อ?"),1)]),(0,a.Lk)("div",x4,[(0,a.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>n.closeConfirmStatusModal&&n.closeConfirmStatusModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>n.confirmStatus&&n.confirmStatus(...e)),class:(0,l.C4)([{"bg-green-500 hover:bg-green-600":"pending"===i.selectedOrder.status,"bg-red-500 hover:bg-red-600":"confirm"===i.selectedOrder.status},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,a.Q3)("",!0)])])))),128)),0===n.filteredOrders.length?((0,a.uX)(),(0,a.CE)("tr",_4,t[54]||(t[54]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",w4,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[55]||(t[55]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,v4),(0,a.Lk)("div",L4,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[28]||(t[28]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[29]||(t[29]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,D4)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[30]||(t[30]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[31]||(t[31]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[56]||(t[56]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,P4)])])}var S4={data(){return{headers:["#","Customer's Name","วันที่สั่งซื้อ","Packge Type","รายการอาหาร","จำนวน","สถานะ"],headerWidths:["5%","20%","15%","15%","20%","10%","15%"],sortIcon:"arrow_downward",orders:[],searchQuery:"",selectedDate:"",customers:[],menus:[],menu_types:[],selectedOrder:[],selectedOrders:[],isConfirmStatusModalOpen:!1,isAllSelected:!1,currentPage:1,itemsPerPage:10,startDate:"",endDate:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:""}},computed:{filteredMenuTypes(){return this.menu_types.filter((e=>e.name.startsWith("Happy")))},filteredOrdersWithoutHappy(){return this.orders.filter((e=>{const t=this.getMenuTypeName(e.menu_type_id)||"";return t.startsWith("Happy")}))},filteredOrders(){const e=this.searchQuery?this.searchQuery.toLowerCase():"";return this.filteredOrdersWithoutHappy.filter((t=>{const s=this.getCustomerName(t.user_id)||"",o=""===e||s.toLowerCase().includes(e),a=!Array.isArray(this.selectedOrder)||0===this.selectedOrder.length||this.selectedOrder.includes(t.menu_type_id);return o&&a})).slice((this.currentPage-1)*this.itemsPerPage,this.currentPage*this.itemsPerPage)},totalPages(){const e=this.searchQuery?this.searchQuery.toLowerCase():"";return Math.ceil(this.filteredOrdersWithoutHappy.filter((t=>{const s=this.getCustomerName(t.user_id)||"",o=""===e||s.toLowerCase().includes(e),a=!Array.isArray(this.selectedOrder)||0===this.selectedOrder.length||this.selectedOrder.includes(t.menu_type_id);return o&&a})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""}},methods:{goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString())},onEndDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.endDate=t.toISOString())},async fetchOrders(e,t){try{const s=await ke.A.get("http://127.0.0.1:3333/orders-hhb/date-range",{params:{start_date:e,end_date:t}});this.orders=s.data.orders,this.filteredOrders=this.orders,this.orders.sort(((e,t)=>{const s=new Date(e.order_date),o=new Date(t.order_date);return s-o}))}catch(s){}},async fetchLookupData(){try{const[e,t,s]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers-hhb"),ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/menu-types")]);this.customers=e.data,this.menus=t.data,this.menu_types=s.data}catch(e){console.error("Error fetching lookup data:",e)}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},getCustomerName(e){const t=this.customers.find((t=>t.user_id===e));return t?t.name:null},getMenuName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMenuEngName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuTypeName(e){const t=this.menu_types.find((t=>t.id===e));return t?t.name:null},getStatusText(e){return"confirm"===e?"ยืนยันการสั่งซื้อแล้ว":"ยังไม่ได้ยืนยันการสั่งซื้อ"},getStatusClass(e){return"confirm"===e?"text-white bg-green-500":"text-white bg-red-500"},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchOrdersData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchOrdersData()},fetchOrdersData(){this.startDate&&this.endDate&&this.fetchOrders(this.startDate,this.endDate)},shouldDisplayUserName(e,t){return 0===e||this.filteredOrders[e-1].user_id!==t},getRowspan(e,t){let s=0;for(let o=t;o<this.filteredOrders.length;o++){if(this.filteredOrders[o].user_id!==e)break;s++}return s},shouldDisplayOrderDate(e,t){return 0===e||this.filteredOrders[e-1].order_date!==t},getOrderDateRowspan(e,t){let s=0;for(let o=t;o<this.filteredOrders.length;o++){if(this.filteredOrders[o].order_date!==e)break;s++}return s},onViewDetails(e){this.selectedDailySaleDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedDailySaleDetail={}},formatLabel(e){const t={paid_date:"Transaction Date",customer_id:"Customer's Name",package_type_id:"Package Type",package_id:"Package/Purchase Details",promotion_type_id:"Sales Category",package_price:"Package Price",package_detail:"Details",discount:"Additional Discount",extra_charge:"% Extra Charge",extra_charge_price:"Extra Charge Value",total_package_price:"Purchase Value",total_delivery_price:"ค่าจัดส่งรวม",total_price:"ยอดขายรวม",payment_type_id:"วิธีการชำระเงิน",seller_name_id:"Sales Rep"};return t[e]||e},openConfirmSatatusModal(e){this.selectedOrder=e,this.isConfirmStatusModalOpen=!0},closeConfirmStatusModal(){this.isConfirmStatusModalOpen=!1,this.selectedPaidDate=""},async confirmStatus(){try{const e="confirm"===this.selectedOrder.status?"pending":"confirm",t={status:e},s=await ke.A.put(`http://127.0.0.1:3333/order-hhb/${this.selectedOrder.id}/status`,t);if(await this.fetchOrders(),200!==s.status)throw new Error("Unexpected response status");{const e=s.data.data,t=this.orders.findIndex((t=>t.id===e.id));-1!==t&&(this.orders[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error updating payment status:",e),console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmStatusModal()},async confirmMultipleOrders(){if(0===this.selectedOrders.length)return;const e=this.selectedOrders.map((e=>e.id));console.log("Selected Orders:",this.selectedOrders);try{const t=await fetch("http://127.0.0.1:3333/order-hhb/update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_ids:e,status:"confirm"})});await t.json(),t.ok?(this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!"),this.selectedOrders=[],await this.fetchOrders(this.startDate,this.endDate)):this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}catch(t){console.error("Error:",t),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเชื่อมต่อ!")}},async pendingMultipleOrders(){if(0===this.selectedOrders.length)return;const e=this.selectedOrders.map((e=>e.id));try{const t=await fetch("http://127.0.0.1:3333/order-hhb/update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_ids:e,status:"pending"})});await t.json(),t.ok?(this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!"),this.selectedOrders=[],await this.fetchOrders(this.startDate,this.endDate)):this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}catch(t){console.error("Error:",t),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเชื่อมต่อ!")}},selectOrder(e){this.selectedOrders.includes(e)?this.selectedOrders=this.selectedOrders.filter((t=>t.id!==e.id)):this.selectedOrders.push(e)},toggleSelectAll(e){e.target.checked?this.selectedOrders=[...this.filteredOrders]:this.selectedOrders=[],this.isAllSelected=e.target.checked},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedOrder.length>0?this.filteredOrders=this.menu_types.filter((e=>this.selectedOrder.includes(e.menu_type_id))):this.filteredOrders=this.orders,this.isFilterDropdownOpen=!1},clearFilter(){this.selectedOrder=[],this.filteredOrders=this.orders},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.orders.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.orders.sort(((e,t)=>{const s=new Date(e.order_date),o=new Date(t.order_date);return s-o})),this.currentPage=1},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredOrders=this.orders,this.sortData("id"),this.fetchLookupData(),this.fetchOrders(this.selectedDate)},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchOrders(this.selectedDate),this.setToday(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.fetchOrdersData()}}),(0,Po.A)(this.$refs.endDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.endDate=t,this.fetchOrdersData()}})}))},watch:{selectedOrders(){this.isAllSelected=this.selectedOrders.length===this.filteredOrders.length}},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const R4=(0,_e.A)(S4,[["render",C4],["__scopeId","data-v-c0bf1d82"]]);var T4=R4;const M4={class:"mt-[-20px]"},E4={class:"flex items-center space-x-3 py-2"},F4={class:"flex justify-end items-center space-x-2 relative"},z4={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},A4={class:"text-m text-custom-orange font-bold"},O4={class:"ml-2"},N4={class:"sort relative inline-block",ref:"sortDropdown"},X4={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-52 z-50 border border-gray-300"},V4={class:"list-none p-0 m-0"},Q4={key:0,class:"material-symbols-outlined text-sm"},I4={key:0,class:"material-symbols-outlined text-sm"},U4={class:"filter relative inline-block",ref:"filterDropdown"},$4={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},B4={class:"p-4 w-[500px] list-none"},W4={class:"grid grid-cols-3 gap-4"},q4=["value"],Z4={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},j4={class:"flex space-x-2"},J4={class:"flex w-[250px] relative"},K4={ref:"printTable",class:"min-w-full table-auto rounded-2xl overflow-hidden mt-4"},H4={class:"bg-custom-orange text-white"},Y4={key:0,class:"ml-2 items-center"},G4={class:"material-symbols-outlined text-sm"},e5={class:"px-4 py-2 align-top pb-5"},t5={class:"px-4 py-2 align-top pb-5"},s5={class:"px-4 py-2 align-top pb-5"},o5={class:"px-4 py-2 align-top pb-5"},a5={class:"px-4 py-2 align-top font-bold pb-5"},r5={class:"px-4 py-2 align-top pb-5"},l5={key:0},i5={ref:"componentRef",class:"hidden-print p-4 relative"},n5={class:"relative flex justify-between items-center p-4"},d5={class:"flex flex-col"},c5={class:"text-sm"},u5={class:"font-bold text-lg text-center w-full block"},p5={class:"font-medium text-lg mt-4"},h5={class:"mt-2"},g5={class:"font-semibold text-custom-orange underline"},m5={class:"ml-4"};function y5(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",M4,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[25]||(t[25]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[24]||(t[24]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[27]||(t[27]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[26]||(t[26]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",E4,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>n.changeDate(-1)),class:"flex items-center"},t[28]||(t[28]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[29]||(t[29]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>n.changeDate(1)),class:"flex items-center"},t[30]||(t[30]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[31]||(t[31]=(0,a.Lk)("strong",{class:"text-gray-700"},"Start Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"startDatepicker",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.formattedStartDate=e),onInput:t[6]||(t[6]=(...e)=>n.onStartDateChange&&n.onStartDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่เริ่มต้น"},null,544),[[o.Jo,n.formattedStartDate]]),t[32]||(t[32]=(0,a.Lk)("strong",{class:"text-gray-700"},"End Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"endDatepicker",type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>n.formattedEndDate=e),onInput:t[8]||(t[8]=(...e)=>n.onEndDateChange&&n.onEndDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่สิ้นสุด"},null,544),[[o.Jo,n.formattedEndDate]])]),(0,a.Lk)("div",F4,[(0,a.Lk)("div",z4,[t[33]||(t[33]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"stockpot",-1)),t[34]||(t[34]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนรายการ Kitchen Orders: ",-1)),(0,a.Lk)("span",A4,(0,l.v_)(n.filteredOrdersWithoutHappy.length)+" รายการ",1)]),i.selectedOrder.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[9]||(t[9]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[35]||(t[35]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",O4,"รีเซ็ตตัวกรอง ("+(0,l.v_)(i.selectedOrder.length)+")",1)])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>r.handlePrint&&r.handlePrint(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"print",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Print",-1)])),(0,a.Lk)("div",N4,[(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[37]||(t[37]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[38]||(t[38]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",X4,[(0,a.Lk)("ul",V4,[(0,a.Lk)("li",{onClick:t[12]||(t[12]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[39]||(t[39]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",Q4,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[13]||(t[13]=e=>n.sortData("order_date")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[40]||(t[40]=(0,a.Lk)("span",null,"จัดเรียงตามวันที่สั่งซื้อ",-1)),"order_date"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",I4,(0,l.v_)(1===i.sortDirection["order_date"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[14]||(t[14]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[41]||(t[41]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",U4,[(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[42]||(t[42]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[43]||(t[43]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",$4,[(0,a.Lk)("div",B4,[t[44]||(t[44]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",W4,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMenuTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=e=>i.selectedOrder=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,q4),[[o.lH,i.selectedOrder]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",Z4,[(0,a.Lk)("li",{onClick:t[17]||(t[17]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[45]||(t[45]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",j4,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",J4,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[21]||(t[21]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",K4,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",H4,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((t,s)=>((0,a.uX)(),(0,a.CE)("th",{key:s,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[s],cursor:"pointer"})},[(0,a.Lk)("span",null,(0,l.v_)(t),1),"Transaction Date"===t?((0,a.uX)(),(0,a.CE)("span",Y4,[(0,a.Lk)("span",G4,(0,l.v_)(e.sortIcon),1)])):(0,a.Q3)("",!0)],4)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredOrders,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",e5,(0,l.v_)(t+1),1),(0,a.Lk)("td",t5,(0,l.v_)(n.formatDate(e.order_date)),1),(0,a.Lk)("td",s5,(0,l.v_)(n.getMenuTypeName(e.menu_type_id)),1),(0,a.Lk)("td",o5,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",a5,[(0,a.Lk)("div",null,(0,l.v_)(e.menu_eng_name),1),(0,a.Lk)("div",null,"("+(0,l.v_)(e.menu_name)+")",1)]),(0,a.Lk)("td",r5,(0,l.v_)(e.quantity),1)])))),128)),0===n.filteredOrders.length?((0,a.uX)(),(0,a.CE)("tr",l5,t[46]||(t[46]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])],512),(0,a.Lk)("div",i5,[(0,a.Lk)("div",n5,[(0,a.Lk)("div",d5,[t[47]||(t[47]=(0,a.Lk)("strong",{class:"text-xl"},"Kitchen Orders Report",-1)),(0,a.Lk)("span",c5,"Date : "+(0,l.v_)(n.formattedDate),1)]),t[48]||(t[48]=(0,a.Lk)("div",{class:"flex items-center space-x-4"},[(0,a.Lk)("img",{src:Le,alt:"Logo",class:"w-48 h-18"})],-1))]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.groupedOrdersPrint,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-4 mt-2 p-4"},[(0,a.Lk)("span",u5,(0,l.v_)(e.menu_type),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.items,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t},[(0,a.Lk)("h2",p5,(0,l.v_)(n.formatDate(e.order_date)),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.items,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t},[(0,a.Lk)("div",h5,[(0,a.Lk)("span",g5,(0,l.v_)(e.meal_type),1),(0,a.Lk)("ul",m5,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.items,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t},[(0,a.Lk)("strong",null,(0,l.v_)(e.quantity),1),(0,a.eW)(" x "+(0,l.v_)(e.menu_name)+" ("+(0,l.v_)(e.menu_eng_name)+") ",1)])))),128))])])])))),128))])))),128))])))),128))],512)])}var k5={setup(){const e=(0,sz.KR)(),{handlePrint:t}=(0,tz.Iv)({content:e,documentTitle:"Kitchen Orders Report"});return{componentRef:e,handlePrint:t}},data(){return{headers:["#","วันที่สั่งซื้อ","Packge Type","ประเภทอาหาร","รายการอาหาร","จำนวน"],headerWidths:["5%","10%","15%","20%","35%","10%"],orders:[],searchQuery:"",selectedDate:"",customers:[],menus:[],menu_types:[],meal_types:[],selectedOrders:[],selectedOrder:[],isConfirmStatusModalOpen:!1,isAllSelected:!1,currentPage:1,itemsPerPage:5,startDate:"",endDate:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:""}},computed:{filteredMenuTypes(){return this.menu_types.filter((e=>!e.name.startsWith("Happy")))},filteredOrdersWithoutHappy(){return this.groupedOrders.filter((e=>{const t=this.getMenuTypeName(e.menu_type_id)||"";return!t.startsWith("Happy")}))},filteredOrders(){const e=this.searchQuery?this.searchQuery.toLowerCase():"";return this.filteredOrdersWithoutHappy.filter((t=>{const s=this.getMenuEngName(t.menu_id)||"",o=this.getMenuName(t.menu_id)||"",a=""===e||s.toLowerCase().includes(e)||o.toLowerCase().includes(e),r=!Array.isArray(this.selectedOrder)||0===this.selectedOrder.length||this.selectedOrder.includes(t.menu_type_id);return a&&r}))},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""},formattedDate(){return(new Date).toLocaleDateString("en-UK",{year:"numeric",month:"numeric",day:"numeric"})},groupedOrders(){const e=this.orders.reduce(((e,t)=>{e[t.order_date]||(e[t.order_date]=[]);const s=e[t.order_date].find((e=>e.menu_id===t.menu_id));return s?s.quantity+=t.quantity:e[t.order_date].push({menu_id:t.menu_id,quantity:t.quantity,menu_name:this.getMenuName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),order_date:t.order_date,menu_type_id:t.menu_type_id}),e}),{});return Object.keys(e).flatMap((t=>e[t]))},groupedOrdersPrint(){const e=this.filteredOrders.reduce(((e,t)=>{const s=this.getMenuTypeName(t.menu_type_id),o=this.getMealTypeName(this.getMealTypeID(t.menu_id));e[s]||(e[s]=[]);const a=e[s].find((e=>e.order_date===t.order_date));if(a){const e=a.items.find((e=>e.meal_type===o));if(e){const s=e.items.find((e=>e.menu_name===this.getMenuName(t.menu_id)));s?s.quantity+=t.quantity:e.items.push({menu_name:this.getMenuName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),quantity:t.quantity,meal_type:o})}else a.items.push({meal_type:o,items:[{menu_name:this.getMenuName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),quantity:t.quantity,meal_type:o}]})}else e[s].push({menu_type:s,order_date:t.order_date,items:[{meal_type:o,items:[{menu_name:this.getMenuName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),quantity:t.quantity,meal_type:o}]}]});return e}),{});return Object.keys(e).map((t=>({menu_type:t,items:e[t].map((e=>({order_date:e.order_date,items:e.items.map((e=>({meal_type:e.meal_type,items:e.items})))})))})))}},methods:{formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString())},onEndDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.endDate=t.toISOString())},async fetchOrders(e,t){try{const s=await ke.A.get("http://127.0.0.1:3333/orders/date-range",{params:{start_date:e,end_date:t}});this.orders=s.data.orders,this.filteredOrders=this.orders,this.orders.sort(((e,t)=>{const s=new Date(e.order_date),o=new Date(t.order_date);return s-o}))}catch(s){console.error("Error fetching orders data:",s)}},async fetchLookupData(){try{const[e,t,s,o]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/menu-types"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.customers=e.data,this.menus=t.data,this.menu_types=s.data,this.meal_types=o.data}catch(e){console.error("Error fetching lookup data:",e)}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},getCustomerName(e){const t=this.customers.find((t=>t.user_id===e));return t?t.name:null},getMenuName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMenuEngName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuTypeName(e){const t=this.menu_types.find((t=>t.id===e));return t?t.name:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:null},getStatusText(e){return"confirm"===e?"ยืนยันการสั่งซื้อแล้ว":"ยังไม่ได้ยืนยันการสั่งซื้อ"},getStatusClass(e){return"confirm"===e?"text-white bg-green-500":"text-white bg-red-500"},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchOrdersData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchOrdersData()},fetchOrdersData(){this.startDate&&this.endDate&&this.fetchOrders(this.startDate,this.endDate)},shouldDisplayOrderDate(e,t){return 0===e||this.orders[e-1].order_date!==t},getOrderDateRowspan(e,t){let s=0;for(let o=t;o<this.orders.length;o++){if(this.orders[o].order_date!==e)break;s++}return s},onViewDetails(e){this.selectedDailySaleDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedDailySaleDetail={}},formatLabel(e){const t={paid_date:"Transaction Date",customer_id:"Customer's Name",package_type_id:"Package Type",package_id:"Package/Purchase Details",promotion_type_id:"Sales Category",package_price:"Package Price",package_detail:"Details",discount:"Additional Discount",extra_charge:"% Extra Charge",extra_charge_price:"Extra Charge Value",total_package_price:"Purchase Value",total_delivery_price:"ค่าจัดส่งรวม",total_price:"ยอดขายรวม",payment_type_id:"วิธีการชำระเงิน",seller_name_id:"Sales Rep"};return t[e]||e},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedOrder.length>0?this.filteredOrders=this.menu_types.filter((e=>this.selectedOrder.includes(e.menu_type_id))):this.filteredOrders=this.orders,this.isFilterDropdownOpen=!1},clearFilter(){this.selectedOrder=[],this.filteredOrders=this.orders},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.orders.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.orders.sort(((e,t)=>{const s=new Date(e.order_date),o=new Date(t.order_date);return s-o})),this.currentPage=1},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredOrders=this.orders,this.fetchLookupData(),this.fetchOrders(this.selectedDate)},mounted(){this.fetchLookupData(),this.fetchOrders(this.selectedDate),this.setToday(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.fetchOrdersData()}}),(0,Po.A)(this.$refs.endDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.endDate=t,this.fetchOrdersData()}})}))},watch:{selectedOrders(){this.isAllSelected=this.selectedOrders.length===this.filteredOrders.length}}};const f5=(0,_e.A)(k5,[["render",y5]]);var b5=f5;const x5={class:"mt-[-20px]"},_5={class:"flex items-center space-x-3 py-2"},w5={class:"flex justify-end items-center space-x-2 relative"},v5={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},L5={class:"text-m text-custom-orange font-bold"},D5={class:"ml-2"},P5={class:"sort relative inline-block",ref:"sortDropdown"},C5={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-52 z-50 border border-gray-300"},S5={class:"list-none p-0 m-0"},R5={key:0,class:"material-symbols-outlined text-sm"},T5={key:0,class:"material-symbols-outlined text-sm"},M5={class:"filter relative inline-block",ref:"filterDropdown"},E5={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},F5={class:"p-4 w-[500px] list-none"},z5={class:"grid grid-cols-3 gap-4"},A5=["value"],O5={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},N5={class:"flex space-x-2"},X5={class:"flex w-[250px] relative"},V5={ref:"printTable",class:"min-w-full table-auto rounded-2xl overflow-hidden mt-4"},Q5={class:"bg-custom-orange text-white"},I5={key:0,class:"ml-2 items-center"},U5={class:"material-symbols-outlined text-sm"},$5={class:"px-4 py-2 align-top pb-5"},B5={class:"px-4 py-2 align-top pb-5"},W5={class:"px-4 py-2 align-top pb-5"},q5={class:"px-4 py-2 align-top pb-5"},Z5={class:"px-4 py-2 align-top font-bold pb-5"},j5={class:"px-4 py-2 align-top pb-5"},J5={key:0},K5={ref:"componentRef",class:"hidden-print p-4 relative"},H5={class:"relative flex justify-between items-center p-4"},Y5={class:"flex flex-col"},G5={class:"text-sm"},e7={class:"font-bold text-lg text-center w-full block"},t7={class:"font-medium text-lg mt-4"},s7={class:"mt-2"},o7={class:"font-semibold text-custom-orange underline"},a7={class:"ml-4"};function r7(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",x5,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[25]||(t[25]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[24]||(t[24]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[27]||(t[27]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[26]||(t[26]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",_5,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>n.changeDate(-1)),class:"flex items-center"},t[28]||(t[28]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[29]||(t[29]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>n.changeDate(1)),class:"flex items-center"},t[30]||(t[30]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[31]||(t[31]=(0,a.Lk)("strong",{class:"text-gray-700"},"Start Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"startDatepicker",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.formattedStartDate=e),onInput:t[6]||(t[6]=(...e)=>n.onStartDateChange&&n.onStartDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่เริ่มต้น"},null,544),[[o.Jo,n.formattedStartDate]]),t[32]||(t[32]=(0,a.Lk)("strong",{class:"text-gray-700"},"End Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"endDatepicker",type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>n.formattedEndDate=e),onInput:t[8]||(t[8]=(...e)=>n.onEndDateChange&&n.onEndDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่สิ้นสุด"},null,544),[[o.Jo,n.formattedEndDate]])]),(0,a.Lk)("div",w5,[(0,a.Lk)("div",v5,[t[33]||(t[33]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"stockpot",-1)),t[34]||(t[34]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนรายการ Kitchen Orders: ",-1)),(0,a.Lk)("span",L5,(0,l.v_)(n.filteredOrdersWithoutHappy.length)+" รายการ",1)]),i.selectedOrder.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[9]||(t[9]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[35]||(t[35]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",D5,"รีเซ็ตตัวกรอง ("+(0,l.v_)(i.selectedOrder.length)+")",1)])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>r.handlePrint&&r.handlePrint(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"print",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Print",-1)])),(0,a.Lk)("div",P5,[(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[37]||(t[37]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[38]||(t[38]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",C5,[(0,a.Lk)("ul",S5,[(0,a.Lk)("li",{onClick:t[12]||(t[12]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[39]||(t[39]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",R5,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[13]||(t[13]=e=>n.sortData("order_date")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[40]||(t[40]=(0,a.Lk)("span",null,"จัดเรียงตามวันที่สั่งซื้อ",-1)),"order_date"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",T5,(0,l.v_)(1===i.sortDirection["order_date"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[14]||(t[14]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[41]||(t[41]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",M5,[(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[42]||(t[42]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[43]||(t[43]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",E5,[(0,a.Lk)("div",F5,[t[44]||(t[44]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",z5,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMenuTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=e=>i.selectedOrder=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,A5),[[o.lH,i.selectedOrder]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",O5,[(0,a.Lk)("li",{onClick:t[17]||(t[17]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[45]||(t[45]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",N5,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",X5,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[21]||(t[21]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",V5,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Q5,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((t,s)=>((0,a.uX)(),(0,a.CE)("th",{key:s,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[s],cursor:"pointer"})},[(0,a.Lk)("span",null,(0,l.v_)(t),1),"Transaction Date"===t?((0,a.uX)(),(0,a.CE)("span",I5,[(0,a.Lk)("span",U5,(0,l.v_)(e.sortIcon),1)])):(0,a.Q3)("",!0)],4)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredOrders,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",$5,(0,l.v_)(t+1),1),(0,a.Lk)("td",B5,(0,l.v_)(n.formatDate(e.order_date)),1),(0,a.Lk)("td",W5,(0,l.v_)(n.getMenuTypeName(e.menu_type_id)),1),(0,a.Lk)("td",q5,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",Z5,[(0,a.Lk)("div",null,(0,l.v_)(e.menu_eng_name),1),(0,a.Lk)("div",null,"("+(0,l.v_)(e.menu_name)+")",1)]),(0,a.Lk)("td",j5,(0,l.v_)(e.quantity),1)])))),128)),0===n.filteredOrders.length?((0,a.uX)(),(0,a.CE)("tr",J5,t[46]||(t[46]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])],512),(0,a.Lk)("div",K5,[(0,a.Lk)("div",H5,[(0,a.Lk)("div",Y5,[t[47]||(t[47]=(0,a.Lk)("strong",{class:"text-xl"},"Kitchen Orders Report",-1)),(0,a.Lk)("span",G5,"Date : "+(0,l.v_)(n.formattedDate),1)]),t[48]||(t[48]=(0,a.Lk)("div",{class:"flex items-center space-x-4"},[(0,a.Lk)("img",{src:Le,alt:"Logo",class:"w-48 h-18"})],-1))]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.groupedOrdersPrint,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-4 mt-2 p-4"},[(0,a.Lk)("span",e7,(0,l.v_)(e.menu_type),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.items,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t},[(0,a.Lk)("h2",t7,(0,l.v_)(n.formatDate(e.order_date)),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.items,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t},[(0,a.Lk)("div",s7,[(0,a.Lk)("span",o7,(0,l.v_)(e.meal_type),1),(0,a.Lk)("ul",a7,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.items,((e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t},[(0,a.Lk)("strong",null,(0,l.v_)(e.quantity),1),(0,a.eW)(" x "+(0,l.v_)(e.menu_name)+" ("+(0,l.v_)(e.menu_eng_name)+") ",1)])))),128))])])])))),128))])))),128))])))),128))],512)])}var l7={setup(){const e=(0,sz.KR)(),{handlePrint:t}=(0,tz.Iv)({content:e,documentTitle:"Kitchen Orders Report"});return{componentRef:e,handlePrint:t}},data(){return{headers:["#","วันที่สั่งซื้อ","Packge Type","ประเภทอาหาร","รายการอาหาร","จำนวน"],headerWidths:["5%","10%","15%","20%","35%","10%"],orders:[],searchQuery:"",selectedDate:"",customers:[],menus:[],menu_types:[],meal_types:[],selectedOrders:[],selectedOrder:[],isConfirmStatusModalOpen:!1,isAllSelected:!1,currentPage:1,itemsPerPage:5,startDate:"",endDate:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:""}},computed:{filteredMenuTypes(){return this.menu_types.filter((e=>!e.name.startsWith("Happy")))},filteredOrdersWithoutHappy(){return this.groupedOrders.filter((e=>{const t=this.getMenuTypeName(e.menu_type_id)||"";return t.startsWith("Happy")}))},filteredOrders(){const e=this.searchQuery?this.searchQuery.toLowerCase():"";return this.filteredOrdersWithoutHappy.filter((t=>{const s=this.getMenuEngName(t.menu_id)||"",o=this.getMenuName(t.menu_id)||"",a=""===e||s.toLowerCase().includes(e)||o.toLowerCase().includes(e),r=!Array.isArray(this.selectedOrder)||0===this.selectedOrder.length||this.selectedOrder.includes(t.menu_type_id);return a&&r}))},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""},formattedDate(){return(new Date).toLocaleDateString("en-UK",{year:"numeric",month:"numeric",day:"numeric"})},groupedOrders(){const e=this.orders.reduce(((e,t)=>{e[t.order_date]||(e[t.order_date]=[]);const s=e[t.order_date].find((e=>e.menu_id===t.menu_id));return s?s.quantity+=t.quantity:e[t.order_date].push({menu_id:t.menu_id,quantity:t.quantity,menu_name:this.getMenuName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),order_date:t.order_date,menu_type_id:t.menu_type_id}),e}),{});return Object.keys(e).flatMap((t=>e[t]))},groupedOrdersPrint(){const e=this.filteredOrders.reduce(((e,t)=>{const s=this.getMenuTypeName(t.menu_type_id),o=this.getMealTypeName(this.getMealTypeID(t.menu_id));e[s]||(e[s]=[]);const a=e[s].find((e=>e.order_date===t.order_date));if(a){const e=a.items.find((e=>e.meal_type===o));if(e){const s=e.items.find((e=>e.menu_name===this.getMenuName(t.menu_id)));s?s.quantity+=t.quantity:e.items.push({menu_name:this.getMenuName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),quantity:t.quantity,meal_type:o})}else a.items.push({meal_type:o,items:[{menu_name:this.getMenuName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),quantity:t.quantity,meal_type:o}]})}else e[s].push({menu_type:s,order_date:t.order_date,items:[{meal_type:o,items:[{menu_name:this.getMenuName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),quantity:t.quantity,meal_type:o}]}]});return e}),{});return Object.keys(e).map((t=>({menu_type:t,items:e[t].map((e=>({order_date:e.order_date,items:e.items.map((e=>({meal_type:e.meal_type,items:e.items})))})))})))}},methods:{formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString())},onEndDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.endDate=t.toISOString())},async fetchOrders(e,t){try{const s=await ke.A.get("http://127.0.0.1:3333/orders/date-range",{params:{start_date:e,end_date:t}});this.orders=s.data.orders,this.filteredOrders=this.orders,this.orders.sort(((e,t)=>{const s=new Date(e.order_date),o=new Date(t.order_date);return s-o}))}catch(s){console.error("Error fetching orders data:",s)}},async fetchLookupData(){try{const[e,t,s,o]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/menu-types"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.customers=e.data,this.menus=t.data,this.menu_types=s.data,this.meal_types=o.data}catch(e){console.error("Error fetching lookup data:",e)}},search(){this.currentPage=1},clearSearch(){this.searchQuery="",this.currentPage=1},getCustomerName(e){const t=this.customers.find((t=>t.user_id===e));return t?t.name:null},getMenuName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMenuEngName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuTypeName(e){const t=this.menu_types.find((t=>t.id===e));return t?t.name:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:null},getStatusText(e){return"confirm"===e?"ยืนยันการสั่งซื้อแล้ว":"ยังไม่ได้ยืนยันการสั่งซื้อ"},getStatusClass(e){return"confirm"===e?"text-white bg-green-500":"text-white bg-red-500"},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchOrdersData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchOrdersData()},fetchOrdersData(){this.startDate&&this.endDate&&this.fetchOrders(this.startDate,this.endDate)},shouldDisplayOrderDate(e,t){return 0===e||this.orders[e-1].order_date!==t},getOrderDateRowspan(e,t){let s=0;for(let o=t;o<this.orders.length;o++){if(this.orders[o].order_date!==e)break;s++}return s},onViewDetails(e){this.selectedDailySaleDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedDailySaleDetail={}},formatLabel(e){const t={paid_date:"Transaction Date",customer_id:"Customer's Name",package_type_id:"Package Type",package_id:"Package/Purchase Details",promotion_type_id:"Sales Category",package_price:"Package Price",package_detail:"Details",discount:"Additional Discount",extra_charge:"% Extra Charge",extra_charge_price:"Extra Charge Value",total_package_price:"Purchase Value",total_delivery_price:"ค่าจัดส่งรวม",total_price:"ยอดขายรวม",payment_type_id:"วิธีการชำระเงิน",seller_name_id:"Sales Rep"};return t[e]||e},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedOrder.length>0?this.filteredOrders=this.menu_types.filter((e=>this.selectedOrder.includes(e.menu_type_id))):this.filteredOrders=this.orders,this.isFilterDropdownOpen=!1},clearFilter(){this.selectedOrder=[],this.filteredOrders=this.orders},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.orders.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.orders.sort(((e,t)=>{const s=new Date(e.order_date),o=new Date(t.order_date);return s-o})),this.currentPage=1},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredOrders=this.orders,this.fetchLookupData(),this.fetchOrders(this.selectedDate)},mounted(){this.fetchLookupData(),this.fetchOrders(this.selectedDate),this.setToday(),this.$nextTick((()=>{(0,Po.A)(this.$refs.startDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.fetchOrdersData()}}),(0,Po.A)(this.$refs.endDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.endDate=t,this.fetchOrdersData()}})}))},watch:{selectedOrders(){this.isAllSelected=this.selectedOrders.length===this.filteredOrders.length}}};const i7=(0,_e.A)(l7,[["render",r7]]);var n7=i7;const d7={class:"mt-[-20px]"},c7={class:"flex space-x-2 items-center relative"},u7={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},p7={class:"text-m text-custom-orange font-bold"},h7={class:"ml-2"},g7={class:"sort relative inline-block",ref:"sortDropdown"},m7={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},y7={class:"list-none p-0 m-0"},k7={key:0,class:"material-symbols-outlined text-sm"},f7={key:0,class:"material-symbols-outlined text-sm"},b7={class:"filter relative inline-block",ref:"filterDropdown"},x7={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},_7={class:"p-4 w-[500px] list-none"},w7={class:"grid grid-cols-3 gap-4"},v7=["value"],L7={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},D7={class:"flex space-x-2"},P7={class:"flex w-[250px] relative"},C7={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},S7={class:"bg-custom-orange text-white"},R7={class:"px-4 py-2 align-top pb-5"},T7={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},M7={class:"px-4 py-2 align-top pb-5 font-bold"},E7={class:"px-4 py-2 align-top pb-5"},F7={class:"px-4 py-2 align-top pb-5"},z7={class:"px-4 py-2 align-top pb-5"},A7={key:0,class:"text-red-500 font-bold"},O7={key:1},N7={class:"px-4 py-2 align-top pb-5"},X7={class:"px-4 py-2 align-top pb-5"},V7={key:0,class:"text-red-500 font-bold"},Q7={key:1},I7={class:"px-4 py-2 align-top pb-5"},U7={key:2},$7={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},B7={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},W7={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},q7={class:"flex space-x-2"},Z7={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},j7={key:0,class:"flex items-center space-x-4 pl-3 pr-3"},J7={class:"flex-1"},K7={class:"mr-2"},H7={class:"flex-1"},Y7={class:"flex-1"},G7={key:1,class:"flex items-center space-x-4 pl-3 pr-3"},e8={class:"flex-1"},t8={class:"mr-2"},s8={class:"flex-1"},o8={class:"flex-1"},a8={key:2,class:"flex items-center space-x-4 pl-3 pr-3"},r8={class:"flex-1"},l8={class:"mr-2"},i8={class:"flex-1"},n8={class:"flex-1"},d8={key:3,class:"flex items-center space-x-4 pl-3 pr-3"},c8={class:"flex-1"},u8={class:"mr-2"},p8={class:"flex-1"},h8={class:"flex-1"},g8={class:"mr-2 pl-3 pr-3"},m8={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},y8={class:"bg-white rounded-md shadow-lg w-1/2 max-w-4xl h-auto max-h-[600px] flex flex-col"},k8={class:"flex justify-between items-center bg-blue-500 text-white px-4 py-2 rounded-t-md"},f8={class:"font-bold"},b8={class:"p-4 overflow-y-auto flex-grow"},x8={key:0},_8={key:1,class:"w-full mt-2 border-collapse border border-gray-300"},w8={class:"border border-gray-300 px-4 py-2"},v8={class:"border border-gray-300 px-4 py-2"},L8={class:"border border-gray-300 px-4 py-2"},D8={class:"border border-gray-300 px-4 py-2"},P8={key:2,class:"text-gray-500 mt-2"},C8={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},S8=["disabled"],R8={class:"flex items-center space-x-1"},T8=["onClick"],M8=["disabled"];function E8(e,t,s,r,i,n){const d=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[25]||(t[25]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[24]||(t[24]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[27]||(t[27]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[26]||(t[26]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",d7,[(0,a.Lk)("div",c7,[(0,a.Lk)("div",u7,[t[28]||(t[28]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"deployed_code_history",-1)),t[29]||(t[29]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนลูกค้าที่มีแพ็คเกจทั้งหมด: ",-1)),(0,a.Lk)("span",p7,(0,l.v_)(n.filteredSaleRecords1standRenew.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[31]||(t[31]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",h7,[t[30]||(t[30]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",g7,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[32]||(t[32]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[33]||(t[33]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",m7,[(0,a.Lk)("ul",y7,[(0,a.Lk)("li",{onClick:t[4]||(t[4]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[34]||(t[34]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",k7,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[5]||(t[5]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[35]||(t[35]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",f7,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[6]||(t[6]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[36]||(t[36]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",b7,[(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[37]||(t[37]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[38]||(t[38]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",x7,[(0,a.Lk)("div",_7,[t[39]||(t[39]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",w7,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPackageTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>i.selectedPackageType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,v7),[[o.lH,i.selectedPackageType]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",L7,[(0,a.Lk)("li",{onClick:t[9]||(t[9]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[40]||(t[40]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",D7,[(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",P7,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[13]||(t[13]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[14]||(t[14]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",C7,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",S7,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left text-sm font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(i.filteredSaleRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",R7,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",T7,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",M7,(0,l.v_)(n.getPackageTypeName(e.package_type_id)),1),(0,a.Lk)("td",E7,(0,l.v_)(n.getProgramName(e.program_id)),1),(0,a.Lk)("td",F7,(0,l.v_)(n.getPackageName(e.package_id)),1),(0,a.Lk)("td",z7,[e.remaining_days<0?((0,a.uX)(),(0,a.CE)("span",A7," หมดอายุ ")):((0,a.uX)(),(0,a.CE)("span",O7,(0,l.v_)(e.remaining_days)+" วัน ",1))]),(0,a.Lk)("td",N7,(0,l.v_)(n.formatDate(e.expiry_date)),1),(0,a.Lk)("td",X7,[e.total_boxes<=0?((0,a.uX)(),(0,a.CE)("span",V7,(0,l.v_)(e.total_boxes),1)):((0,a.uX)(),(0,a.CE)("span",Q7,(0,l.v_)(e.total_boxes),1))]),(0,a.Lk)("td",I7,[(0,a.bF)(d,{to:`/order-history/${e.customer_id}`,class:"flex items-center space-x-1 text-custom-orange hover:text-custom-orange-hover"},{default:(0,a.k6)((()=>t[41]||(t[41]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"history",-1),(0,a.Lk)("span",{class:"text-m"},"ประวัติการสั่งซื้อ",-1)]))),_:2},1032,["to"])])])))),128)):(0,a.Q3)("",!0),n.filteredSaleRecords1standRenew.length<6&&n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredSaleRecords1standRenew.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[42]||(t[42]=[(0,a.Lk)("td",{colspan:"9",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredSaleRecords1standRenew.length?((0,a.uX)(),(0,a.CE)("tr",U7,t[43]||(t[43]=[(0,a.Lk)("td",{colspan:"9",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",$7,[(0,a.Lk)("div",B7,[(0,a.Lk)("div",W7,[t[44]||(t[44]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,a.Lk)("div",q7,[(0,a.Lk)("span",{onClick:t[16]||(t[16]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Z7,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,s,o)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,l.C4)(["p-2 rounded-md",o%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},["zone1_id"===s?((0,a.uX)(),(0,a.CE)("div",j7,[(0,a.Lk)("div",J7,[(0,a.Lk)("strong",K7,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",H7,[t[45]||(t[45]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone1_quantity),1)]),(0,a.Lk)("div",Y7,[t[46]||(t[46]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id))),1)])])):"zone2_id"===s?((0,a.uX)(),(0,a.CE)("div",G7,[(0,a.Lk)("div",e8,[(0,a.Lk)("strong",t8,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",s8,[t[47]||(t[47]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone2_quantity),1)]),(0,a.Lk)("div",o8,[t[48]||(t[48]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id))),1)])])):"zone3_id"===s?((0,a.uX)(),(0,a.CE)("div",a8,[(0,a.Lk)("div",r8,[(0,a.Lk)("strong",l8,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",i8,[t[49]||(t[49]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone3_quantity),1)]),(0,a.Lk)("div",n8,[t[50]||(t[50]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id))),1)])])):"zone_outsource_id"===s?((0,a.uX)(),(0,a.CE)("div",d8,[(0,a.Lk)("div",c8,[(0,a.Lk)("strong",u8,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",p8,[t[51]||(t[51]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone_outsource_quantity),1)]),(0,a.Lk)("div",h8,[t[52]||(t[52]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id))),1)])])):((0,a.uX)(),(0,a.CE)(a.FK,{key:4},[(0,a.Lk)("strong",g8,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))],2)))),128))],512)])])):(0,a.Q3)("",!0),i.isHistoryModalOpen?((0,a.uX)(),(0,a.CE)("div",m8,[(0,a.Lk)("div",y8,[(0,a.Lk)("div",k8,[(0,a.Lk)("span",f8,"ประวัติการสั่งซื้อของลูกค้า "+(0,l.v_)(i.selectedCustomerId),1),(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeHistoryModal&&n.closeHistoryModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",b8,[i.loadingHistory?((0,a.uX)(),(0,a.CE)("div",x8,"กำลังโหลด...")):i.orderHistory.length>0?((0,a.uX)(),(0,a.CE)("table",_8,[t[53]||(t[53]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-gray-200"},[(0,a.Lk)("th",{class:"border border-gray-300 px-4 py-2"},"หมายเลขคำสั่งซื้อ"),(0,a.Lk)("th",{class:"border border-gray-300 px-4 py-2"},"วันที่สั่งซื้อ"),(0,a.Lk)("th",{class:"border border-gray-300 px-4 py-2"},"สถานะ"),(0,a.Lk)("th",{class:"border border-gray-300 px-4 py-2"},"จำนวน")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.orderHistory,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",w8,(0,l.v_)(e.id),1),(0,a.Lk)("td",v8,(0,l.v_)(e.order_date),1),(0,a.Lk)("td",L8,(0,l.v_)(e.status),1),(0,a.Lk)("td",D8,(0,l.v_)(e.quantity),1)])))),128))])])):((0,a.uX)(),(0,a.CE)("div",P8,"ไม่มีประวัติการสั่งซื้อ"))])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",C8,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,S8),(0,a.Lk)("div",R8,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[19]||(t[19]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[20]||(t[20]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,T8)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[21]||(t[21]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[22]||(t[22]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[23]||(t[23]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[55]||(t[55]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,M8)])])],64)}var F8={data(){return{headers:["#","Customer's Name","Package Type","Program","Package","วันคงเหลือของแพ็กเกจ","วันหมดอายุแพ็กเกจ","ยอดคงเหลือแพ็กเกจ",""],headerWidths:["5%","15%","10%","15%","15%","10%","10%","10%","15%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],isAddModalOpen:!1,saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:"",total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,isHistoryModalOpen:!1,selectedCustomerId:null,orderHistory:[],loadingHistory:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.filteredSaleRecords1standRenew.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{name:this.selectedSaleRecord.customer.name,package:this.selectedSaleRecord.package.package_detail,promotion_detail:this.selectedSaleRecord.package.promotion_detail,receive_food:this.totalReceiveFood,start_date:this.formatDate(this.selectedSaleRecord.start_date),sellect_by:this.getSelectFood(this.selectedSaleRecord.select_food_id),delivery_date:this.selectedSaleRecord.customer.delivery_date,delivery:this.getDeliveryRoundName(this.selectedSaleRecord.delivery_round_id),package_price:this.formatPrice(this.selectedSaleRecord.package.price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),note:this.selectedSaleRecord.note}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{seller_name_id:this.getSellerName(this.selectedSaleRecord.seller_name_id),name:this.selectedSaleRecord.customer?.name||"",package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),promotion_type:this.getPromotionTypeName(this.selectedSaleRecord.promotion_type_id)||"",program:this.getProgramName(this.selectedSaleRecord.program_id),package:this.selectedSaleRecord.package?.name||"",package_price:this.formatPrice(this.selectedSaleRecord.package?.price),promotion_detail:this.selectedSaleRecord.package?.promotion_detail||"",other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||"",free_mad:this.selectedSaleRecord.free_mad,free_dessert:this.selectedSaleRecord.free_dessert,free_brittles:this.selectedSaleRecord.free_brittles,free_energy_balls:this.selectedSaleRecord.free_energy_balls,free_dressing:this.selectedSaleRecord.free_dressing,free_yoghurt:this.selectedSaleRecord.free_yoghurt,free_granola:this.selectedSaleRecord.free_granola,free_credit:this.selectedSaleRecord.free_credit,discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPercent(this.selectedSaleRecord.extra_charge),extra_charge_price:this.formatPrice(this.selectedSaleRecord.extra_charge_price),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),receive_food_id:this.getReceiveFoodName(this.selectedSaleRecord.receive_food_id),zone1_id:this.getZoneName(this.selectedSaleRecord.zone1_id),total_zone1_price:this.formatPrice(this.selectedSaleRecord.total_zone1_price),zone2_id:this.getZoneName(this.selectedSaleRecord.zone2_id),total_zone2_price:this.formatPrice(this.selectedSaleRecord.total_zone2_price),zone3_id:this.getZoneName(this.selectedSaleRecord.zone3_id),total_zone3_price:this.formatPrice(this.selectedSaleRecord.total_zone3_price),zone_outsource_id:this.getZoneName(this.selectedSaleRecord.zone_outsource_id),total_zone_outsource_price:this.formatPrice(this.selectedSaleRecord.total_zone_outsource_price),total_delivery_zone_price:this.formatPrice(this.selectedSaleRecord.total_delivery_zone_price),total_delivery_price:this.formatPrice(this.selectedSaleRecord.total_delivery_price),total_price:this.formatPrice(this.selectedSaleRecord.total_price),payment_status:this.getPaymentStatusText(this.selectedSaleRecord.payment_status),paid_date:this.formatDate(this.selectedSaleRecord.paid_date),payment_type_id:this.getPaymentTypeName(this.selectedSaleRecord.payment_type_id),start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),receive_date:this.formatDate(this.selectedSaleRecord.start_date),note:this.selectedSaleRecord.note||"",package_detail:this.selectedSaleRecord.package?.package_detail||"",mad:this.selectedSaleRecord.mad,dessert:this.selectedSaleRecord.dessert,brittles:this.selectedSaleRecord.brittles,energy_balls:this.selectedSaleRecord.energy_balls,dressing:this.selectedSaleRecord.dressing,yoghurt:this.selectedSaleRecord.yoghurt,granola:this.selectedSaleRecord.granola,credit:this.selectedSaleRecord.credit,delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",select_food_id:this.getSelectFood(this.selectedSaleRecord.select_food_id)}:{name:"",expiry_date:""}},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},totalReceiveFood(){let e=[];this.selectedSaleRecord.mad>0&&e.push(`${this.selectedSaleRecord.mad} x Main Dish`),this.selectedSaleRecord.dessert>0&&e.push(`${this.selectedSaleRecord.dessert} x Dessert`),this.selectedSaleRecord.brittles>0&&e.push(`${this.selectedSaleRecord.brittles} x Brittles`),this.selectedSaleRecord.energy_balls>0&&e.push(`${this.selectedSaleRecord.energy_balls} x Energy Balls`),this.selectedSaleRecord.dressing>0&&e.push(`${this.selectedSaleRecord.dressing} x Dressing`),this.selectedSaleRecord.yoghurt>0&&e.push(`${this.selectedSaleRecord.yoghurt} x Yoghurt`),this.selectedSaleRecord.granola>0&&e.push(`${this.selectedSaleRecord.granola} x Granola`);let t=e.length>0?e.join(" + "):"";return t},totalDeliveryPrice(){let e=[];null!==this.selectedSaleRecord.zone1_id&&this.selectedSaleRecord.zone1_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone1_id)} x ${this.selectedSaleRecord.zone1_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone2_id&&this.selectedSaleRecord.zone2_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone2_id)} x ${this.selectedSaleRecord.zone2_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone3_id&&this.selectedSaleRecord.zone3_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone3_id)} x ${this.selectedSaleRecord.zone3_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone_outsource_id&&this.selectedSaleRecord.zone_outsource_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone_outsource_id)} x ${this.selectedSaleRecord.zone_outsource_quantity} ครั้ง`);let t=e.length>0?`(${e.join(" + ")})`:"";return this.selectedSaleRecord.total_delivery_price>0?`${this.formatPrice(this.selectedSaleRecord.total_delivery_price)} ${t}`:""},filteredSaleRecords1standRenew(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t})).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id),o="paid"===e.payment_status;return t&&s&&o}))},filteredPackageTypes(){return this.packageTypes.filter((e=>!e.name.toLowerCase().includes("additional sales")&&!e.name.toLowerCase().includes("consignment")))},isConsignmentOrAdditional(){const e=this.saleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)}},methods:{resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.filteredSaleRecords1standRenew.slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.filteredSaleRecords1standRenew=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n,d,c,u,p]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/zone-delivery-types"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types"),ke.A.get("http://127.0.0.1:3333/delivery-rounds"),ke.A.get("http://127.0.0.1:3333/receive-foods"),ke.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=r.data,this.zoneDeliveryTypes=l.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ke.A.get("http://127.0.0.1:3333/sale-records");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={seller_name_id:"ผู้ขาย",name:"ชื่อ-สกุลลูกค้า",package_type:"Package Type",promotion_type:"Promotion Type",program:"Program",package:"แพ็กเกจที่ซื้อ ",package_price:"ราคาแพ็กเกจ",promotion_detail:"รายละเอียดโปรโมชัน",other_promotion_detail:"รายละเอียดโปรโมชันเพิ่มเติม(นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",free_mad:"จำนวนกล่องที่แถม M or A or D",free_dessert:"จำนวนกล่องที่แถม Dessert",free_brittles:"จำนวนกล่องที่แถม Brittles",free_energy_balls:"จำนวนกล่องที่แถม Energy Balls",free_dressing:"จำนวนกล่องที่แถม Dressing",free_yoghurt:"จำนวนกล่องที่แถม Yoghurt",free_granola:"จำนวนกล่องที่แถม Granola",free_credit:"เครดิตที่แถม (บาท)",discount:"ส่วนลดเพิ่มเติมจากโปรฯ ประจำเดือน (ถ้ามี)",extra_charge:"Extra Charge (%)",extra_charge_price:"มูลค่า Extra Charge",total_package_price:"มูลค่าแพ็กเกจรวม",receive_food_id:"วิธีการรับอาหาร",zone1_id:"In-house Riders (ที่อยู่ 1)",total_zone1_price:"ค่าจัดส่งรวม (ที่อยู่ 1)",zone2_id:"In-house Riders (ที่อยู่ 2)",total_zone2_price:"ค่าจัดส่งรวม (ที่อยู่ 2)",zone3_id:"In-house Riders (ที่อยู่ 3)",total_zone3_price:"ค่าจัดส่งรวม (ที่อยู่ 3)",zone_outsource_id:"Outsource Riders",total_zone_outsource_price:"ค่าจัดส่งรวม Outsource",total_delivery_zone_price:"ค่าจัดส่งรวม In-house Riders",total_delivery_price:"รวมค่าจัดส่งทั้งหมด",total_price:"มูลค่าขายรวม",payment_status:"สถานะการชำระเงิน",paid_date:"วันที่ชำระเงิน",payment_type_id:"วิธีการชำระเงิน",receive_date:"วันเริ่มรับอาหารวันแรก",sellect_by:"เลือกอาหารโดย",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",note:"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",package_detail:"ข้อมูลแพ็กเกจ(สำหรับสรุปให้ลูกค้า)",mad:"M or A or D",dessert:"Dessert",brittles:"Brittles",energy_balls:"Energy Balls",dressing:"Dressing",yoghurt:"Yoghurt",granola:"Granola",credit:"Cash Credit ที่ได้รับ",delivery_date:"วันที่ต้องการรับอาหาร",select_food_id:"วิธีการเลือกอาหาร"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},clearNotAdditionalForm(){this.saleRecord.add_detail=null,this.saleRecord.additional_type_id=null,this.saleRecord.add_price=0},clearAdditionalForm(){this.saleRecord.promotion_type_id=null,this.saleRecord.program_id=null,this.saleRecord.package_id=null},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},async fetchOrderHistory(e){this.loadingHistory=!0;try{const t=await ke.A.get(`http://127.0.0.1:3333/orders/user/${e}`);this.orderHistory=t.data.orders}catch(t){console.error("เกิดข้อผิดพลาดในการดึงประวัติการสั่งซื้อ:",t)}finally{this.loadingHistory=!1}},openHistoryModal(e){this.selectedCustomerId=e,this.fetchOrderHistory(e),this.isHistoryModalOpen=!0},closeHistoryModal(){this.isHistoryModalOpen=!1},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.package_type_id":"checkPackageType","selectedSaleRecord.package_type_id":"checkEditPackageType",searchQuery(){this.updatePage()},currentPage(){this.updatePage()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const z8=(0,_e.A)(F8,[["render",E8]]);var A8=z8;const O8={class:"flex items-center space-x-3 py-2"},N8={class:"mt-4"},X8={class:"flex items-center"},V8={class:"text-xl text-custom-orange font-bold ml-2"},Q8={key:0,class:"mt-4 text-center text-gray-600"},I8={key:1,class:"mt-4 bg-white rounded-md shadow-lg p-4 border border-gray-300 overflow-y-auto h-[650px]"},U8={class:"flex justify-between items-center"},$8={class:"font-semibold"},B8={class:"text-gray-600"},W8={class:"mt-2 text-gray-500"},q8={class:"flex items-center"},Z8={class:"ml-2 text-black"},j8={class:"flex items-center"},J8={key:2,class:"mt-4 bg-white rounded-md shadow-lg p-4 border border-gray-300 h-[650px] flex justify-center items-center"};function K8(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",O8,[(0,a.Lk)("div",{onClick:t[0]||(t[0]=t=>e.$router.back()),class:"flex items-center space-x-1 cursor-pointer text-custom-orange hover:text-custom-orange-hover"},t[5]||(t[5]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"arrow_back",-1),(0,a.Lk)("span",{class:"text font-bold"},"กลับ",-1)])),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>n.changeDate(-1)),class:"flex items-center"},t[6]||(t[6]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[7]||(t[7]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>n.changeDate(1)),class:"flex items-center"},t[8]||(t[8]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[9]||(t[9]=(0,a.Lk)("strong",{class:"text-gray-700"},"เลือกวันที่:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"singleDatepicker",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),(0,a.Lk)("div",N8,[(0,a.Lk)("div",X8,[t[10]||(t[10]=(0,a.Lk)("h1",{class:"text-xl font-bold"},"ประวัติการสั่งซื้อ: ",-1)),(0,a.Lk)("h1",V8,(0,l.v_)(n.getCustomerName(i.customerId)),1)]),i.loading?((0,a.uX)(),(0,a.CE)("div",Q8,"กำลังโหลด...")):(0,a.Q3)("",!0),i.orders.length>0?((0,a.uX)(),(0,a.CE)("div",I8,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.orders,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.order_date,class:"border-b border-gray-200 py-4"},[(0,a.Lk)("div",U8,[(0,a.Lk)("div",$8,(0,l.v_)(n.getMenuEngName(e.menu_id))+" ("+(0,l.v_)(n.getMenuThaiName(e.menu_id))+")",1),(0,a.Lk)("div",B8,(0,l.v_)(n.formattedDate(e.order_date)),1)]),(0,a.Lk)("div",W8,[(0,a.Lk)("div",q8,[t[11]||(t[11]=(0,a.Lk)("p",null,"จำนวน:",-1)),(0,a.Lk)("strong",Z8,(0,l.v_)(e.quantity),1)]),(0,a.Lk)("div",j8,[t[12]||(t[12]=(0,a.Lk)("p",null,"สถานะ: ",-1)),(0,a.Lk)("div",{class:(0,l.C4)([{"text-yellow-500 font-bold":"pending"===e.status,"text-green-500 font-bold":"confirm"===e.status},"ml-2"])},(0,l.v_)(n.getStatusText(e.status)),3)])])])))),128))])):(0,a.Q3)("",!0),0===i.orders.length?((0,a.uX)(),(0,a.CE)("div",J8,t[13]||(t[13]=[(0,a.Lk)("div",{class:"flex items-center space-x-1 text-gray-500 font-bold text-center"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"history_off"),(0,a.Lk)("span",{class:"text-xl"},"ไม่มีประวัติการสั่งซื้อในวันนี้")],-1)]))):(0,a.Q3)("",!0)])])}var H8={data(){return{customerId:this.$route.params.customerId,orders:[],customers:[],menus:[],loading:!1,startDate:"",endDate:"",selectedDate:""}},computed:{formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""},groupedOrders(){const e=this.orders.reduce(((e,t)=>{e[t.order_date]||(e[t.order_date]=[]);const s=e[t.order_date].find((e=>e.menu_id===t.menu_id));return s?s.quantity+=t.quantity:e[t.order_date].push({menu_id:t.menu_id,quantity:t.quantity,menu_name:this.getMenuThaiName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),order_date:t.order_date,status:t.status,menu_type_id:t.menu_type_id}),e}),{});return Object.keys(e).flatMap((t=>e[t]))}},methods:{formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},async fetchOrders(e,t){this.loading=!0;try{const s=await ke.A.get(`http://127.0.0.1:3333/orders/user/${this.customerId}`,{params:{start_date:e,end_date:t}});this.orders=s.data.orders||[]}catch(s){this.orders=[]}finally{this.loading=!1}},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString(),this.endDate=t.toISOString())},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchOrdersData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchOrdersData()},fetchOrdersData(){this.startDate&&this.endDate&&this.fetchOrders(this.startDate,this.endDate)},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/menus")]);this.customers=e.data,this.menus=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id.toString()===e.toString()));return t?t.name:"ไม่พบข้อมูล"},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:"ไม่พบข้อมูล"},getMenuEngName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:"ไม่พบข้อมูล"},getStatusText(e){return"confirm"===e?"ยืนยันการสั่งซื้อแล้ว":"ยังไม่ได้ยืนยันการสั่งซื้อ"}},created(){this.fetchOrders(this.selectedDate),this.setToday(),this.fetchLookupData()},mounted(){this.fetchLookupData(),this.fetchOrders(this.selectedDate),this.setToday(),this.$nextTick((()=>{this.fetchOrdersData(),(0,Po.A)(this.$refs.singleDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.endDate=t,this.fetchOrdersData()}})}))}};const Y8=(0,_e.A)(H8,[["render",K8]]);var G8=Y8;const e6={class:"mt-[-20px]"},t6={class:"flex space-x-2 items-center relative"},s6={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},o6={class:"text-m text-custom-orange font-bold"},a6={class:"ml-2"},r6={class:"sort relative inline-block",ref:"sortDropdown"},l6={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},i6={class:"list-none p-0 m-0"},n6={key:0,class:"material-symbols-outlined text-sm"},d6={key:0,class:"material-symbols-outlined text-sm"},c6={class:"filter relative inline-block",ref:"filterDropdown"},u6={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},p6={class:"p-4 w-[500px] list-none"},h6={class:"grid grid-cols-3 gap-4"},g6=["value"],m6={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},y6={class:"flex space-x-2"},k6={class:"flex w-[250px] relative"},f6={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},b6={class:"bg-custom-orange text-white"},x6={class:"px-4 py-2 align-top pb-5"},_6={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},w6={class:"px-4 py-2 align-top pb-5 font-bold"},v6={class:"px-4 py-2 align-top pb-5"},L6={class:"px-4 py-2 align-top pb-5"},D6={class:"px-4 py-2 align-top pb-5"},P6={key:0,class:"text-red-500 font-bold"},C6={key:1},S6={class:"px-4 py-2 align-top pb-5"},R6={class:"px-4 py-2 align-top pb-5"},T6={key:0,class:"text-red-500 font-bold"},M6={key:1},E6={class:"px-4 py-2 align-top pb-5"},F6={key:2},z6={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},A6={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},O6={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},N6={class:"flex space-x-2"},X6={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},V6={key:0,class:"flex items-center space-x-4 pl-3 pr-3"},Q6={class:"flex-1"},I6={class:"mr-2"},U6={class:"flex-1"},$6={class:"flex-1"},B6={key:1,class:"flex items-center space-x-4 pl-3 pr-3"},W6={class:"flex-1"},q6={class:"mr-2"},Z6={class:"flex-1"},j6={class:"flex-1"},J6={key:2,class:"flex items-center space-x-4 pl-3 pr-3"},K6={class:"flex-1"},H6={class:"mr-2"},Y6={class:"flex-1"},G6={class:"flex-1"},e9={key:3,class:"flex items-center space-x-4 pl-3 pr-3"},t9={class:"flex-1"},s9={class:"mr-2"},o9={class:"flex-1"},a9={class:"flex-1"},r9={class:"mr-2 pl-3 pr-3"},l9={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},i9={class:"bg-white rounded-md shadow-lg w-1/2 max-w-4xl h-auto max-h-[600px] flex flex-col"},n9={class:"flex justify-between items-center bg-blue-500 text-white px-4 py-2 rounded-t-md"},d9={class:"font-bold"},c9={class:"p-4 overflow-y-auto flex-grow"},u9={key:0},p9={key:1,class:"w-full mt-2 border-collapse border border-gray-300"},h9={class:"border border-gray-300 px-4 py-2"},g9={class:"border border-gray-300 px-4 py-2"},m9={class:"border border-gray-300 px-4 py-2"},y9={class:"border border-gray-300 px-4 py-2"},k9={key:2,class:"text-gray-500 mt-2"},f9={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},b9=["disabled"],x9={class:"flex items-center space-x-1"},_9=["onClick"],w9=["disabled"];function v9(e,t,s,r,i,n){const d=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[25]||(t[25]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[24]||(t[24]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[27]||(t[27]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[26]||(t[26]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",e6,[(0,a.Lk)("div",t6,[(0,a.Lk)("div",s6,[t[28]||(t[28]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"deployed_code_history",-1)),t[29]||(t[29]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนลูกค้าที่มีแพ็คเกจทั้งหมด: ",-1)),(0,a.Lk)("span",o6,(0,l.v_)(n.filteredSaleRecords1standRenew.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[31]||(t[31]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",a6,[t[30]||(t[30]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",r6,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[32]||(t[32]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[33]||(t[33]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",l6,[(0,a.Lk)("ul",i6,[(0,a.Lk)("li",{onClick:t[4]||(t[4]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[34]||(t[34]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",n6,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[5]||(t[5]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[35]||(t[35]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",d6,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[6]||(t[6]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[36]||(t[36]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",c6,[(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[37]||(t[37]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1)),t[38]||(t[38]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isFilterDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",u6,[(0,a.Lk)("div",p6,[t[39]||(t[39]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",h6,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPackageTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=e=>i.selectedPackageType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,g6),[[o.lH,i.selectedPackageType]]),(0,a.Lk)("span",null,(0,l.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",m6,[(0,a.Lk)("li",{onClick:t[9]||(t[9]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[40]||(t[40]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",y6,[(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",k6,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[13]||(t[13]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[14]||(t[14]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",f6,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",b6,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left text-sm font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(i.filteredSaleRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",x6,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",_6,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",w6,(0,l.v_)(n.getPackageTypeName(e.package_type_id)),1),(0,a.Lk)("td",v6,(0,l.v_)(n.getProgramName(e.program_id)),1),(0,a.Lk)("td",L6,(0,l.v_)(n.getPackageName(e.package_id)),1),(0,a.Lk)("td",D6,[e.remaining_days<0?((0,a.uX)(),(0,a.CE)("span",P6," หมดอายุ ")):((0,a.uX)(),(0,a.CE)("span",C6,(0,l.v_)(e.remaining_days)+" วัน ",1))]),(0,a.Lk)("td",S6,(0,l.v_)(n.formatDate(e.expiry_date)),1),(0,a.Lk)("td",R6,[e.total_boxes<=0?((0,a.uX)(),(0,a.CE)("span",T6,(0,l.v_)(e.total_boxes),1)):((0,a.uX)(),(0,a.CE)("span",M6,(0,l.v_)(e.total_boxes),1))]),(0,a.Lk)("td",E6,[(0,a.bF)(d,{to:`/order-history-hhb/${e.customer_id}`,class:"flex items-center space-x-1 text-custom-orange hover:text-custom-orange-hover"},{default:(0,a.k6)((()=>t[41]||(t[41]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"history",-1),(0,a.Lk)("span",{class:"text-m"},"ประวัติการสั่งซื้อ",-1)]))),_:2},1032,["to"])])])))),128)):(0,a.Q3)("",!0),n.filteredSaleRecords1standRenew.length<6&&n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredSaleRecords1standRenew.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[42]||(t[42]=[(0,a.Lk)("td",{colspan:"9",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredSaleRecords1standRenew.length?((0,a.uX)(),(0,a.CE)("tr",F6,t[43]||(t[43]=[(0,a.Lk)("td",{colspan:"9",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",z6,[(0,a.Lk)("div",A6,[(0,a.Lk)("div",O6,[t[44]||(t[44]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,a.Lk)("div",N6,[(0,a.Lk)("span",{onClick:t[16]||(t[16]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",X6,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,s,o)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,l.C4)(["p-2 rounded-md",o%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},["zone1_id"===s?((0,a.uX)(),(0,a.CE)("div",V6,[(0,a.Lk)("div",Q6,[(0,a.Lk)("strong",I6,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",U6,[t[45]||(t[45]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone1_quantity),1)]),(0,a.Lk)("div",$6,[t[46]||(t[46]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id))),1)])])):"zone2_id"===s?((0,a.uX)(),(0,a.CE)("div",B6,[(0,a.Lk)("div",W6,[(0,a.Lk)("strong",q6,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Z6,[t[47]||(t[47]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone2_quantity),1)]),(0,a.Lk)("div",j6,[t[48]||(t[48]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id))),1)])])):"zone3_id"===s?((0,a.uX)(),(0,a.CE)("div",J6,[(0,a.Lk)("div",K6,[(0,a.Lk)("strong",H6,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Y6,[t[49]||(t[49]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone3_quantity),1)]),(0,a.Lk)("div",G6,[t[50]||(t[50]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id))),1)])])):"zone_outsource_id"===s?((0,a.uX)(),(0,a.CE)("div",e9,[(0,a.Lk)("div",t9,[(0,a.Lk)("strong",s9,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",o9,[t[51]||(t[51]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone_outsource_quantity),1)]),(0,a.Lk)("div",a9,[t[52]||(t[52]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id))),1)])])):((0,a.uX)(),(0,a.CE)(a.FK,{key:4},[(0,a.Lk)("strong",r9,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))],2)))),128))],512)])])):(0,a.Q3)("",!0),i.isHistoryModalOpen?((0,a.uX)(),(0,a.CE)("div",l9,[(0,a.Lk)("div",i9,[(0,a.Lk)("div",n9,[(0,a.Lk)("span",d9,"ประวัติการสั่งซื้อของลูกค้า "+(0,l.v_)(i.selectedCustomerId),1),(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeHistoryModal&&n.closeHistoryModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",c9,[i.loadingHistory?((0,a.uX)(),(0,a.CE)("div",u9,"กำลังโหลด...")):i.orderHistory.length>0?((0,a.uX)(),(0,a.CE)("table",p9,[t[53]||(t[53]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-gray-200"},[(0,a.Lk)("th",{class:"border border-gray-300 px-4 py-2"},"หมายเลขคำสั่งซื้อ"),(0,a.Lk)("th",{class:"border border-gray-300 px-4 py-2"},"วันที่สั่งซื้อ"),(0,a.Lk)("th",{class:"border border-gray-300 px-4 py-2"},"สถานะ"),(0,a.Lk)("th",{class:"border border-gray-300 px-4 py-2"},"จำนวน")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.orderHistory,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",h9,(0,l.v_)(e.id),1),(0,a.Lk)("td",g9,(0,l.v_)(e.order_date),1),(0,a.Lk)("td",m9,(0,l.v_)(e.status),1),(0,a.Lk)("td",y9,(0,l.v_)(e.quantity),1)])))),128))])])):((0,a.uX)(),(0,a.CE)("div",k9,"ไม่มีประวัติการสั่งซื้อ"))])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",f9,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,b9),(0,a.Lk)("div",x9,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[19]||(t[19]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[20]||(t[20]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,_9)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[21]||(t[21]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[22]||(t[22]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[23]||(t[23]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[55]||(t[55]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,w9)])])],64)}var L9={data(){return{headers:["#","Customer's Name","Package Type","Program","Package","วันคงเหลือของแพ็กเกจ","วันหมดอายุแพ็กเกจ","ยอดคงเหลือแพ็กเกจ",""],headerWidths:["5%","15%","10%","15%","15%","10%","10%","10%","15%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],isAddModalOpen:!1,saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:"",total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,free_credit:0,other_promotion_detail:""},isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,isHistoryModalOpen:!1,selectedCustomerId:null,orderHistory:[],loadingHistory:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.filteredSaleRecords1standRenew.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{name:this.selectedSaleRecord.customer.name,package:this.selectedSaleRecord.package.package_detail,promotion_detail:this.selectedSaleRecord.package.promotion_detail,receive_food:this.totalReceiveFood,start_date:this.formatDate(this.selectedSaleRecord.start_date),sellect_by:this.getSelectFood(this.selectedSaleRecord.select_food_id),delivery_date:this.selectedSaleRecord.customer.delivery_date,delivery:this.getDeliveryRoundName(this.selectedSaleRecord.delivery_round_id),package_price:this.formatPrice(this.selectedSaleRecord.package.price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),note:this.selectedSaleRecord.note}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{seller_name_id:this.getSellerName(this.selectedSaleRecord.seller_name_id),name:this.selectedSaleRecord.customer?.name||"",package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),promotion_type:this.getPromotionTypeName(this.selectedSaleRecord.promotion_type_id)||"",program:this.getProgramName(this.selectedSaleRecord.program_id),package:this.selectedSaleRecord.package?.name||"",package_price:this.formatPrice(this.selectedSaleRecord.package?.price),promotion_detail:this.selectedSaleRecord.package?.promotion_detail||"",other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||"",free_mad:this.selectedSaleRecord.free_mad,free_dessert:this.selectedSaleRecord.free_dessert,free_brittles:this.selectedSaleRecord.free_brittles,free_energy_balls:this.selectedSaleRecord.free_energy_balls,free_dressing:this.selectedSaleRecord.free_dressing,free_yoghurt:this.selectedSaleRecord.free_yoghurt,free_granola:this.selectedSaleRecord.free_granola,free_credit:this.selectedSaleRecord.free_credit,discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPercent(this.selectedSaleRecord.extra_charge),extra_charge_price:this.formatPrice(this.selectedSaleRecord.extra_charge_price),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),receive_food_id:this.getReceiveFoodName(this.selectedSaleRecord.receive_food_id),zone1_id:this.getZoneName(this.selectedSaleRecord.zone1_id),total_zone1_price:this.formatPrice(this.selectedSaleRecord.total_zone1_price),zone2_id:this.getZoneName(this.selectedSaleRecord.zone2_id),total_zone2_price:this.formatPrice(this.selectedSaleRecord.total_zone2_price),zone3_id:this.getZoneName(this.selectedSaleRecord.zone3_id),total_zone3_price:this.formatPrice(this.selectedSaleRecord.total_zone3_price),zone_outsource_id:this.getZoneName(this.selectedSaleRecord.zone_outsource_id),total_zone_outsource_price:this.formatPrice(this.selectedSaleRecord.total_zone_outsource_price),total_delivery_zone_price:this.formatPrice(this.selectedSaleRecord.total_delivery_zone_price),total_delivery_price:this.formatPrice(this.selectedSaleRecord.total_delivery_price),total_price:this.formatPrice(this.selectedSaleRecord.total_price),payment_status:this.getPaymentStatusText(this.selectedSaleRecord.payment_status),paid_date:this.formatDate(this.selectedSaleRecord.paid_date),payment_type_id:this.getPaymentTypeName(this.selectedSaleRecord.payment_type_id),start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),receive_date:this.formatDate(this.selectedSaleRecord.start_date),note:this.selectedSaleRecord.note||"",package_detail:this.selectedSaleRecord.package?.package_detail||"",mad:this.selectedSaleRecord.mad,dessert:this.selectedSaleRecord.dessert,brittles:this.selectedSaleRecord.brittles,energy_balls:this.selectedSaleRecord.energy_balls,dressing:this.selectedSaleRecord.dressing,yoghurt:this.selectedSaleRecord.yoghurt,granola:this.selectedSaleRecord.granola,credit:this.selectedSaleRecord.credit,delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",select_food_id:this.getSelectFood(this.selectedSaleRecord.select_food_id)}:{name:"",expiry_date:""}},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},totalReceiveFood(){let e=[];this.selectedSaleRecord.mad>0&&e.push(`${this.selectedSaleRecord.mad} x Main Dish`),this.selectedSaleRecord.dessert>0&&e.push(`${this.selectedSaleRecord.dessert} x Dessert`),this.selectedSaleRecord.brittles>0&&e.push(`${this.selectedSaleRecord.brittles} x Brittles`),this.selectedSaleRecord.energy_balls>0&&e.push(`${this.selectedSaleRecord.energy_balls} x Energy Balls`),this.selectedSaleRecord.dressing>0&&e.push(`${this.selectedSaleRecord.dressing} x Dressing`),this.selectedSaleRecord.yoghurt>0&&e.push(`${this.selectedSaleRecord.yoghurt} x Yoghurt`),this.selectedSaleRecord.granola>0&&e.push(`${this.selectedSaleRecord.granola} x Granola`);let t=e.length>0?e.join(" + "):"";return t},totalDeliveryPrice(){let e=[];null!==this.selectedSaleRecord.zone1_id&&this.selectedSaleRecord.zone1_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone1_id)} x ${this.selectedSaleRecord.zone1_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone2_id&&this.selectedSaleRecord.zone2_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone2_id)} x ${this.selectedSaleRecord.zone2_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone3_id&&this.selectedSaleRecord.zone3_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone3_id)} x ${this.selectedSaleRecord.zone3_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone_outsource_id&&this.selectedSaleRecord.zone_outsource_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone_outsource_id)} x ${this.selectedSaleRecord.zone_outsource_quantity} ครั้ง`);let t=e.length>0?`(${e.join(" + ")})`:"";return this.selectedSaleRecord.total_delivery_price>0?`${this.formatPrice(this.selectedSaleRecord.total_delivery_price)} ${t}`:""},filteredSaleRecords1standRenew(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t})).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id),o="paid"===e.payment_status;return t&&s&&o}))},filteredPackageTypes(){return this.packageTypes.filter((e=>!e.name.toLowerCase().includes("additional sales")&&!e.name.toLowerCase().includes("consignment")))},isConsignmentOrAdditional(){const e=this.saleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)}},methods:{resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.filteredSaleRecords1standRenew.slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.filteredSaleRecords1standRenew=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n,d,c,u,p]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers-hhb"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/zone-delivery-types"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types"),ke.A.get("http://127.0.0.1:3333/delivery-rounds"),ke.A.get("http://127.0.0.1:3333/receive-foods"),ke.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=r.data,this.zoneDeliveryTypes=l.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ke.A.get("http://127.0.0.1:3333/sale-records-hhb");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={seller_name_id:"ผู้ขาย",name:"ชื่อ-สกุลลูกค้า",package_type:"Package Type",promotion_type:"Promotion Type",program:"Program",package:"แพ็กเกจที่ซื้อ ",package_price:"ราคาแพ็กเกจ",promotion_detail:"รายละเอียดโปรโมชัน",other_promotion_detail:"รายละเอียดโปรโมชันเพิ่มเติม(นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",free_mad:"จำนวนกล่องที่แถม M or A or D",free_dessert:"จำนวนกล่องที่แถม Dessert",free_brittles:"จำนวนกล่องที่แถม Brittles",free_energy_balls:"จำนวนกล่องที่แถม Energy Balls",free_dressing:"จำนวนกล่องที่แถม Dressing",free_yoghurt:"จำนวนกล่องที่แถม Yoghurt",free_granola:"จำนวนกล่องที่แถม Granola",free_credit:"เครดิตที่แถม (บาท)",discount:"ส่วนลดเพิ่มเติมจากโปรฯ ประจำเดือน (ถ้ามี)",extra_charge:"Extra Charge (%)",extra_charge_price:"มูลค่า Extra Charge",total_package_price:"มูลค่าแพ็กเกจรวม",receive_food_id:"วิธีการรับอาหาร",zone1_id:"In-house Riders (ที่อยู่ 1)",total_zone1_price:"ค่าจัดส่งรวม (ที่อยู่ 1)",zone2_id:"In-house Riders (ที่อยู่ 2)",total_zone2_price:"ค่าจัดส่งรวม (ที่อยู่ 2)",zone3_id:"In-house Riders (ที่อยู่ 3)",total_zone3_price:"ค่าจัดส่งรวม (ที่อยู่ 3)",zone_outsource_id:"Outsource Riders",total_zone_outsource_price:"ค่าจัดส่งรวม Outsource",total_delivery_zone_price:"ค่าจัดส่งรวม In-house Riders",total_delivery_price:"รวมค่าจัดส่งทั้งหมด",total_price:"มูลค่าขายรวม",payment_status:"สถานะการชำระเงิน",paid_date:"วันที่ชำระเงิน",payment_type_id:"วิธีการชำระเงิน",receive_date:"วันเริ่มรับอาหารวันแรก",sellect_by:"เลือกอาหารโดย",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",note:"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",package_detail:"ข้อมูลแพ็กเกจ(สำหรับสรุปให้ลูกค้า)",mad:"M or A or D",dessert:"Dessert",brittles:"Brittles",energy_balls:"Energy Balls",dressing:"Dressing",yoghurt:"Yoghurt",granola:"Granola",credit:"Cash Credit ที่ได้รับ",delivery_date:"วันที่ต้องการรับอาหาร",select_food_id:"วิธีการเลือกอาหาร"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},clearNotAdditionalForm(){this.saleRecord.add_detail=null,this.saleRecord.additional_type_id=null,this.saleRecord.add_price=0},clearAdditionalForm(){this.saleRecord.promotion_type_id=null,this.saleRecord.program_id=null,this.saleRecord.package_id=null},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},async fetchOrderHistory(e){this.loadingHistory=!0;try{const t=await ke.A.get(`http://127.0.0.1:3333/orders/user/${e}`);this.orderHistory=t.data.orders}catch(t){console.error("เกิดข้อผิดพลาดในการดึงประวัติการสั่งซื้อ:",t)}finally{this.loadingHistory=!1}},openHistoryModal(e){this.selectedCustomerId=e,this.fetchOrderHistory(e),this.isHistoryModalOpen=!0},closeHistoryModal(){this.isHistoryModalOpen=!1},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.package_type_id":"checkPackageType","selectedSaleRecord.package_type_id":"checkEditPackageType",searchQuery(){this.updatePage()},currentPage(){this.updatePage()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const D9=(0,_e.A)(L9,[["render",v9]]);var P9=D9;const C9={class:"flex items-center space-x-3 py-2"},S9={class:"mt-4"},R9={class:"flex items-center"},T9={class:"text-xl text-custom-orange font-bold ml-2"},M9={key:0,class:"mt-4 text-center text-gray-600"},E9={key:1,class:"mt-4 bg-white rounded-md shadow-lg p-4 border border-gray-300 overflow-y-auto h-[650px]"},F9={class:"flex justify-between items-center"},z9={class:"font-semibold"},A9={class:"text-gray-600"},O9={class:"mt-2 text-gray-500"},N9={class:"flex items-center"},X9={class:"ml-2 text-black"},V9={class:"flex items-center"},Q9={key:2,class:"mt-4 bg-white rounded-md shadow-lg p-4 border border-gray-300 h-[650px] flex justify-center items-center"};function I9(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",C9,[(0,a.Lk)("div",{onClick:t[0]||(t[0]=t=>e.$router.back()),class:"flex items-center space-x-1 cursor-pointer text-custom-orange hover:text-custom-orange-hover"},t[5]||(t[5]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"arrow_back",-1),(0,a.Lk)("span",{class:"text font-bold"},"กลับ",-1)])),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>n.changeDate(-1)),class:"flex items-center"},t[6]||(t[6]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[7]||(t[7]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>n.changeDate(1)),class:"flex items-center"},t[8]||(t[8]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[9]||(t[9]=(0,a.Lk)("strong",{class:"text-gray-700"},"เลือกวันที่:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"singleDatepicker",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),(0,a.Lk)("div",S9,[(0,a.Lk)("div",R9,[t[10]||(t[10]=(0,a.Lk)("h1",{class:"text-xl font-bold"},"ประวัติการสั่งซื้อ: ",-1)),(0,a.Lk)("h1",T9,(0,l.v_)(n.getCustomerName(i.customerId)),1)]),i.loading?((0,a.uX)(),(0,a.CE)("div",M9,"กำลังโหลด...")):(0,a.Q3)("",!0),i.orders.length>0?((0,a.uX)(),(0,a.CE)("div",E9,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.orders,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.order_date,class:"border-b border-gray-200 py-4"},[(0,a.Lk)("div",F9,[(0,a.Lk)("div",z9,(0,l.v_)(n.getMenuEngName(e.menu_id))+" ("+(0,l.v_)(n.getMenuThaiName(e.menu_id))+")",1),(0,a.Lk)("div",A9,(0,l.v_)(n.formattedDate(e.order_date)),1)]),(0,a.Lk)("div",O9,[(0,a.Lk)("div",N9,[t[11]||(t[11]=(0,a.Lk)("p",null,"จำนวน:",-1)),(0,a.Lk)("strong",X9,(0,l.v_)(e.quantity),1)]),(0,a.Lk)("div",V9,[t[12]||(t[12]=(0,a.Lk)("p",null,"สถานะ: ",-1)),(0,a.Lk)("div",{class:(0,l.C4)([{"text-yellow-500 font-bold":"pending"===e.status,"text-green-500 font-bold":"confirm"===e.status},"ml-2"])},(0,l.v_)(n.getStatusText(e.status)),3)])])])))),128))])):(0,a.Q3)("",!0),0===i.orders.length?((0,a.uX)(),(0,a.CE)("div",Q9,t[13]||(t[13]=[(0,a.Lk)("div",{class:"flex items-center space-x-1 text-gray-500 font-bold text-center"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"history_off"),(0,a.Lk)("span",{class:"text-xl"},"ไม่มีประวัติการสั่งซื้อในวันนี้")],-1)]))):(0,a.Q3)("",!0)])])}var U9={data(){return{customerId:this.$route.params.customerId,orders:[],customers:[],menus:[],loading:!1,startDate:"",endDate:"",selectedDate:""}},computed:{formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""},groupedOrders(){const e=this.orders.reduce(((e,t)=>{e[t.order_date]||(e[t.order_date]=[]);const s=e[t.order_date].find((e=>e.menu_id===t.menu_id));return s?s.quantity+=t.quantity:e[t.order_date].push({menu_id:t.menu_id,quantity:t.quantity,menu_name:this.getMenuThaiName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),order_date:t.order_date,status:t.status,menu_type_id:t.menu_type_id}),e}),{});return Object.keys(e).flatMap((t=>e[t]))}},methods:{formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},async fetchOrders(e,t){this.loading=!0;try{const s=await ke.A.get(`http://127.0.0.1:3333/orders-hhb/user/${this.customerId}`,{params:{start_date:e,end_date:t}});this.orders=s.data.orders||[]}catch(s){this.orders=[]}finally{this.loading=!1}},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString(),this.endDate=t.toISOString())},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchOrdersData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchOrdersData()},fetchOrdersData(){this.startDate&&this.endDate&&this.fetchOrders(this.startDate,this.endDate)},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers-hhb"),ke.A.get("http://127.0.0.1:3333/menus")]);this.customers=e.data,this.menus=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id.toString()===e.toString()));return t?t.name:"ไม่พบข้อมูล"},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:"ไม่พบข้อมูล"},getMenuEngName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:"ไม่พบข้อมูล"},getStatusText(e){return"confirm"===e?"ยืนยันการสั่งซื้อแล้ว":"ยังไม่ได้ยืนยันการสั่งซื้อ"}},created(){this.fetchOrders(this.selectedDate),this.setToday(),this.fetchLookupData()},mounted(){this.fetchLookupData(),this.fetchOrders(this.selectedDate),this.setToday(),this.$nextTick((()=>{this.fetchOrdersData(),(0,Po.A)(this.$refs.singleDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.endDate=t,this.fetchOrdersData()}})}))}};const $9=(0,_e.A)(U9,[["render",I9]]);var B9=$9;const W9={class:"mt-[-20px]"},q9={class:"flex space-x-2 items-center relative"},Z9={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},j9={class:"text-m text-custom-orange font-bold"},J9={class:"ml-2"},K9={class:"sort relative inline-block",ref:"sortDropdown"},H9={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Y9={class:"list-none p-0 m-0"},G9={key:0,class:"material-symbols-outlined text-sm"},eee={key:0,class:"material-symbols-outlined text-sm"},tee={class:"flex w-[250px] relative"},see={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},oee={class:"bg-custom-orange text-white text-sm"},aee={class:"px-4 py-2 align-top pb-5"},ree={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},lee={class:"px-4 py-2 align-top pb-5"},iee={class:"flex items-center"},nee={class:"px-4 py-2 align-top pb-5"},dee=["onUpdate:modelValue"],cee={key:1},uee={class:"px-4 py-2 align-top pb-5"},pee=["onUpdate:modelValue"],hee={key:1},gee={class:"px-4 py-2 align-top pb-5"},mee=["onUpdate:modelValue"],yee={key:1},kee={class:"px-4 py-2 align-top pb-5"},fee=["onUpdate:modelValue"],bee={key:1},xee={class:"px-4 py-2 align-top pb-5"},_ee={class:"px-4 py-2 align-top pb-5"},wee={class:"px-4 py-2 align-top pb-5"},vee={class:"flex justify-end space-x-2"},Lee=["onClick"],Dee=["onClick"],Pee={key:2},Cee={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},See=["disabled"],Ree={class:"flex items-center space-x-1"},Tee=["onClick"],Mee=["disabled"],Eee={ref:"componentRef",class:"hidden-print p-4 relative"},Fee={class:"relative flex justify-between items-center"},zee={class:"flex flex-col"},Aee={class:"text-sm"},Oee={class:"report-content min-w-full table-auto mt-4 p-4"},Nee={class:"px-6 py-4 text-[12px] text-black border-b border-b-gray-300"},Xee={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},Vee={class:"flex items-center"},Qee={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},Iee={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},Uee={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},$ee={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},Bee={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},Wee={key:0,class:"list-disc pl-4"},qee={key:0},Zee={key:1},jee={key:2};function Jee(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[20]||(t[20]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[19]||(t[19]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[22]||(t[22]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[21]||(t[21]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",W9,[(0,a.Lk)("div",q9,[(0,a.Lk)("div",Z9,[t[23]||(t[23]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"delivery_truck_speed",-1)),t[24]||(t[24]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการจัดส่งอาหารทั้งหมด: ",-1)),(0,a.Lk)("span",j9,(0,l.v_)(n.filteredSaleRecordsPaid.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[26]||(t[26]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",J9,[t[25]||(t[25]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.handlePrint&&r.handlePrint(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[27]||(t[27]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"print",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Print",-1)])),(0,a.Lk)("div",K9,[(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[28]||(t[28]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[29]||(t[29]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",H9,[(0,a.Lk)("ul",Y9,[(0,a.Lk)("li",{onClick:t[5]||(t[5]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[30]||(t[30]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",G9,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[6]||(t[6]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[31]||(t[31]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",eee,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[7]||(t[7]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[32]||(t[32]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",tee,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[9]||(t[9]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[10]||(t[10]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",see,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",oee,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredSaleRecordsPaid.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(i.filteredSaleRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",aee,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",ree,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",lee,[(0,a.Lk)("div",iee,[t[33]||(t[33]=(0,a.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"phone",-1)),(0,a.eW)((0,l.v_)(n.getCustomerTel(e.customer_id)),1)])]),(0,a.Lk)("td",nee,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.bo)(((0,a.uX)(),(0,a.CE)("input",{key:0,"onUpdate:modelValue":t=>e.delivery_date=t,type:"time",class:"border px-2 py-1 rounded w-full"},null,8,dee)),[[o.Jo,e.delivery_date]]):((0,a.uX)(),(0,a.CE)("span",cee,(0,l.v_)(e.delivery_date),1))]),(0,a.Lk)("td",uee,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{key:0,"onUpdate:modelValue":t=>e.delivery_round=t,class:"border px-2 py-1 rounded w-full h-24"},null,8,pee)),[[o.Jo,e.delivery_round]]):((0,a.uX)(),(0,a.CE)("span",hee,(0,l.v_)(e.delivery_round),1))]),(0,a.Lk)("td",gee,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{key:0,"onUpdate:modelValue":t=>e.deliver=t,class:"border px-2 py-1 rounded w-full h-24"},null,8,mee)),[[o.Jo,e.deliver]]):((0,a.uX)(),(0,a.CE)("span",yee,(0,l.v_)(e.deliver),1))]),(0,a.Lk)("td",kee,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{key:0,"onUpdate:modelValue":t=>e.delivery_zone=t,class:"border px-2 py-1 rounded w-full h-24"},null,8,fee)),[[o.Jo,e.delivery_zone]]):((0,a.uX)(),(0,a.CE)("span",bee,(0,l.v_)(e.delivery_zone),1))]),(0,a.Lk)("td",xee,(0,l.v_)(n.getCustomerAddress1(e.customer_id)),1),(0,a.Lk)("td",_ee,(0,l.v_)(n.getCustomerAddress2(e.customer_id)),1),(0,a.Lk)("td",wee,(0,l.v_)(n.getCustomerAddress3(e.customer_id)),1),(0,a.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("div",vee,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t=>n.startEditing(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[34]||(t[34]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,Lee)),i.isEditing&&i.editingSaleRecordId===e.id?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t=>n.saveUpdatedDelivery(e),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-1"},t[35]||(t[35]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"check",-1),(0,a.Lk)("span",null,"บันทึก",-1)]),8,Dee)):(0,a.Q3)("",!0),i.isEditing&&i.editingSaleRecordId===e.id?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[12]||(t[12]=(...e)=>n.cancelEditing&&n.cancelEditing(...e)),class:"bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 flex items-center space-x-1"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1),(0,a.Lk)("span",null,"ยกเลิก",-1)]))):(0,a.Q3)("",!0)])],512)])))),128)):(0,a.Q3)("",!0),n.filteredSaleRecordsPaid.length<6&&n.filteredSaleRecordsPaid.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredSaleRecordsPaid.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[37]||(t[37]=[(0,a.Lk)("td",{colspan:"11",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredSaleRecordsPaid.length?((0,a.uX)(),(0,a.CE)("tr",Pee,t[38]||(t[38]=[(0,a.Lk)("td",{colspan:"11",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Cee,[(0,a.Lk)("button",{onClick:t[13]||(t[13]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[39]||(t[39]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,See),(0,a.Lk)("div",Ree,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[14]||(t[14]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[15]||(t[15]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,Tee)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[16]||(t[16]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[17]||(t[17]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[40]||(t[40]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Mee)]),(0,a.Lk)("div",Eee,[(0,a.Lk)("div",Fee,[(0,a.Lk)("div",zee,[t[41]||(t[41]=(0,a.Lk)("strong",{class:"text-xl"},"Delivery Report",-1)),(0,a.Lk)("span",Aee,"Date : "+(0,l.v_)(n.formattedDate),1)]),t[42]||(t[42]=(0,a.Lk)("div",{class:"flex items-center space-x-4"},[(0,a.Lk)("img",{src:Le,alt:"Logo",class:"w-48 h-18"})],-1))]),(0,a.Lk)("table",Oee,[t[43]||(t[43]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-gray-100 text-black text-[12px]"},[(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"20%"}},"ชื่อ"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"5%"}},"โทรศัพท์"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"6%"}},"เวลา"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"10%"}},"รอบ"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"10%"}},"ผู้จัดส่ง"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"10%"}},"โซน"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"30%"}},"ที่อยู่")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredSaleRecordsPaid,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:"bg-white border-b border-gray-300 hover:bg-gray-100"},[(0,a.Lk)("td",Nee,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",Xee,[(0,a.Lk)("div",Vee,(0,l.v_)(n.getCustomerTel(e.customer_id)),1)]),(0,a.Lk)("td",Qee,(0,l.v_)(e.delivery_date),1),(0,a.Lk)("td",Iee,(0,l.v_)(e.delivery_round),1),(0,a.Lk)("td",Uee,(0,l.v_)(e.deliver),1),(0,a.Lk)("td",$ee,(0,l.v_)(e.delivery_zone),1),(0,a.Lk)("td",Bee,[n.getCustomerAddress1(e.customer_id)||n.getCustomerAddress2(e.customer_id)||n.getCustomerAddress3(e.customer_id)?((0,a.uX)(),(0,a.CE)("ul",Wee,[n.getCustomerAddress1(e.customer_id)?((0,a.uX)(),(0,a.CE)("li",qee,(0,l.v_)(n.getCustomerAddress1(e.customer_id)),1)):(0,a.Q3)("",!0),n.getCustomerAddress2(e.customer_id)?((0,a.uX)(),(0,a.CE)("li",Zee,(0,l.v_)(n.getCustomerAddress2(e.customer_id)),1)):(0,a.Q3)("",!0),n.getCustomerAddress3(e.customer_id)?((0,a.uX)(),(0,a.CE)("li",jee,(0,l.v_)(n.getCustomerAddress3(e.customer_id)),1)):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])])))),128))])])],512)])],64)}var Kee={setup(){const e=(0,sz.KR)(),{handlePrint:t}=(0,tz.Iv)({content:e,documentTitle:"Delivery Report"});return{componentRef:e,handlePrint:t}},data(){return{headers:["#","ชื่อ/นามสกุล (ไทย)","โทร","เวลา","รอบ","ผู้ส่ง","โซนจัดส่งตามที่อยู่ตาม Routing","ที่อยู่ 1","ที่อยู่ 2","ที่อยู่ 3",""],headerWidths:["5%","10%","5%","6%","8%","8%","8%","12%","12%","12%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],selectedAddressType:{},saleRecord:[],customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:[],isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isEditing:!1,editingSaleRecordId:null}},computed:{totalPages(){return Math.ceil(this.filteredSaleRecordsPaid.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{name:this.selectedSaleRecord.customer.name,package:this.selectedSaleRecord.package.package_detail,promotion_detail:this.selectedSaleRecord.package.promotion_detail,receive_food:this.totalReceiveFood,start_date:this.formatDate(this.selectedSaleRecord.start_date),sellect_by:this.getSelectFood(this.selectedSaleRecord.select_food_id),delivery_date:this.selectedSaleRecord.customer.delivery_date,delivery:this.getDeliveryRoundName(this.selectedSaleRecord.delivery_round_id),package_price:this.formatPrice(this.selectedSaleRecord.package.price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),note:this.selectedSaleRecord.note}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{seller_name_id:this.getSellerName(this.selectedSaleRecord.seller_name_id),name:this.selectedSaleRecord.customer?.name||"",package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),promotion_type:this.getPromotionTypeName(this.selectedSaleRecord.promotion_type_id)||"",program:this.getProgramName(this.selectedSaleRecord.program_id),package:this.selectedSaleRecord.package?.name||"",package_price:this.formatPrice(this.selectedSaleRecord.package?.price),promotion_detail:this.selectedSaleRecord.package?.promotion_detail||"",other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||"",free_mad:this.selectedSaleRecord.free_mad,free_dessert:this.selectedSaleRecord.free_dessert,free_brittles:this.selectedSaleRecord.free_brittles,free_energy_balls:this.selectedSaleRecord.free_energy_balls,free_dressing:this.selectedSaleRecord.free_dressing,free_yoghurt:this.selectedSaleRecord.free_yoghurt,free_granola:this.selectedSaleRecord.free_granola,free_credit:this.selectedSaleRecord.free_credit,discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPercent(this.selectedSaleRecord.extra_charge),extra_charge_price:this.formatPrice(this.selectedSaleRecord.extra_charge_price),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),receive_food_id:this.getReceiveFoodName(this.selectedSaleRecord.receive_food_id),zone1_id:this.getZoneName(this.selectedSaleRecord.zone1_id),total_zone1_price:this.formatPrice(this.selectedSaleRecord.total_zone1_price),zone2_id:this.getZoneName(this.selectedSaleRecord.zone2_id),total_zone2_price:this.formatPrice(this.selectedSaleRecord.total_zone2_price),zone3_id:this.getZoneName(this.selectedSaleRecord.zone3_id),total_zone3_price:this.formatPrice(this.selectedSaleRecord.total_zone3_price),zone_outsource_id:this.getZoneName(this.selectedSaleRecord.zone_outsource_id),total_zone_outsource_price:this.formatPrice(this.selectedSaleRecord.total_zone_outsource_price),total_delivery_zone_price:this.formatPrice(this.selectedSaleRecord.total_delivery_zone_price),total_delivery_price:this.formatPrice(this.selectedSaleRecord.total_delivery_price),total_price:this.formatPrice(this.selectedSaleRecord.total_price),payment_status:this.getPaymentStatusText(this.selectedSaleRecord.payment_status),paid_date:this.formatDate(this.selectedSaleRecord.paid_date),payment_type_id:this.getPaymentTypeName(this.selectedSaleRecord.payment_type_id),start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),receive_date:this.formatDate(this.selectedSaleRecord.start_date),note:this.selectedSaleRecord.note||"",package_detail:this.selectedSaleRecord.package?.package_detail||"",mad:this.selectedSaleRecord.mad,dessert:this.selectedSaleRecord.dessert,brittles:this.selectedSaleRecord.brittles,energy_balls:this.selectedSaleRecord.energy_balls,dressing:this.selectedSaleRecord.dressing,yoghurt:this.selectedSaleRecord.yoghurt,granola:this.selectedSaleRecord.granola,credit:this.selectedSaleRecord.credit,delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",select_food_id:this.getSelectFood(this.selectedSaleRecord.select_food_id)}:{name:"",expiry_date:""}},formattedDate(){return(new Date).toLocaleDateString("en-UK",{year:"numeric",month:"numeric",day:"numeric"})},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},filteredSaleRecordsPaid(){return this.saleRecords.filter((e=>"paid"===e.payment_status)).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id),o=e.remaining_days>0,a=e.total_boxes>0;return t&&s&&o&&a}))},filteredPackageTypes(){return this.packageTypes.filter((e=>!e.name.toLowerCase().includes("additional sales")&&!e.name.toLowerCase().includes("consignment")))},filteredAdditionalTypes(){return this.additionalTypes.filter((e=>e.name.startsWith("AFF")))},filteredPrograms(){return this.programs.filter((e=>!e.name.startsWith("Happy")))},filteredInhouse(){return this.zoneDeliveries.filter((e=>e.name.startsWith("AFF")))},filteredOutsource(){return this.zoneDeliveries.filter((e=>!e.name.startsWith("AFF")))},...(0,Ze.L8)(["saleRecords"])},methods:{...(0,Ze.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.filteredSaleRecordsPaid.slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.filteredSaleRecordsPaid=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},filterEditPrograms(){this.selectedSaleRecord.promotion_type_id&&this.selectedSaleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.selectedSaleRecord.promotion_type_id.id)):this.programs=this.allPrograms},filterEditPackages(){this.selectedSaleRecord.program_id&&this.selectedSaleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.selectedSaleRecord.program_id.id)):this.packages=this.allPackages},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n,d,c,u,p]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/zone-delivery-types"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types"),ke.A.get("http://127.0.0.1:3333/delivery-rounds"),ke.A.get("http://127.0.0.1:3333/receive-foods"),ke.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=r.data,this.zoneDeliveryTypes=l.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ke.A.get("http://127.0.0.1:3333/sale-records");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},getCustomerAddress1(e){const t=this.customers.find((t=>t.id===e));return t?t.address_1:"ไม่พบข้อมูล"},getCustomerAddress2(e){const t=this.customers.find((t=>t.id===e));return t?t.address_2:"ไม่พบข้อมูล"},getCustomerAddress3(e){const t=this.customers.find((t=>t.id===e));return t?t.address_3:"ไม่พบข้อมูล"},startEditing(e){this.isEditing=!0,this.editingSaleRecordId=e.id},saveUpdatedDelivery(e){this.updateDelivery(e),this.isEditing=!1,this.editingSaleRecordId=null},cancelEditing(){this.fetchSaleRecords(),this.isEditing=!1,this.editingSaleRecordId=null},async updateDelivery(e){try{await ke.A.put(`http://127.0.0.1:3333/sale-records/${e.id}/delivery`,{delivery_round:e.delivery_round||"",deliver:e.deliver||"",delivery_zone:e.delivery_zone||"",delivery_date:e.delivery_date||""}),await this.fetchSaleRecords(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(t){console.error("เกิดข้อผิดพลาดในการอัปเดตข้อมูลการจัดส่ง:",t),this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไข!")}},getCustomerTel(e){const t=this.customers.find((t=>t.id===e));return t?t.tel:"ไม่พบข้อมูล"},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={seller_name_id:"ผู้ขาย",name:"ชื่อ-สกุลลูกค้า",package_type:"Package Type",promotion_type:"Promotion Type",program:"Program",package:"แพ็กเกจที่ซื้อ ",package_price:"ราคาแพ็กเกจ",promotion_detail:"รายละเอียดโปรโมชัน",other_promotion_detail:"รายละเอียดโปรโมชันเพิ่มเติม(นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",free_mad:"จำนวนกล่องที่แถม M or A or D",free_dessert:"จำนวนกล่องที่แถม Dessert",free_brittles:"จำนวนกล่องที่แถม Brittles",free_energy_balls:"จำนวนกล่องที่แถม Energy Balls",free_dressing:"จำนวนกล่องที่แถม Dressing",free_yoghurt:"จำนวนกล่องที่แถม Yoghurt",free_granola:"จำนวนกล่องที่แถม Granola",free_credit:"เครดิตที่แถม (บาท)",discount:"ส่วนลดเพิ่มเติมจากโปรฯ ประจำเดือน (ถ้ามี)",extra_charge:"Extra Charge (%)",extra_charge_price:"มูลค่า Extra Charge",total_package_price:"มูลค่าแพ็กเกจรวม",receive_food_id:"วิธีการรับอาหาร",zone1_id:"In-house Riders (ที่อยู่ 1)",total_zone1_price:"ค่าจัดส่งรวม (ที่อยู่ 1)",zone2_id:"In-house Riders (ที่อยู่ 2)",total_zone2_price:"ค่าจัดส่งรวม (ที่อยู่ 2)",zone3_id:"In-house Riders (ที่อยู่ 3)",total_zone3_price:"ค่าจัดส่งรวม (ที่อยู่ 3)",zone_outsource_id:"Outsource Riders",total_zone_outsource_price:"ค่าจัดส่งรวม Outsource",total_delivery_zone_price:"ค่าจัดส่งรวม In-house Riders",total_delivery_price:"รวมค่าจัดส่งทั้งหมด",total_price:"มูลค่าขายรวม",payment_status:"สถานะการชำระเงิน",paid_date:"วันที่ชำระเงิน",payment_type_id:"วิธีการชำระเงิน",receive_date:"วันเริ่มรับอาหารวันแรก",sellect_by:"เลือกอาหารโดย",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",note:"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",package_detail:"ข้อมูลแพ็กเกจ(สำหรับสรุปให้ลูกค้า)",mad:"M or A or D",dessert:"Dessert",brittles:"Brittles",energy_balls:"Energy Balls",dressing:"Dressing",yoghurt:"Yoghurt",granola:"Granola",credit:"Cash Credit ที่ได้รับ",delivery_date:"วันที่ต้องการรับอาหาร",select_food_id:"วิธีการเลือกอาหาร"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},onViewResultSaleRecord(e){this.selectedSaleRecord=e,this.isResultModalOpen=!0,this.moreOpenDropdownIndex=null},closeResultModal(){this.isResultModalOpen=!1},formatResultLabel(e){const t={name:"🏷 คุณ",package:"▶️ แพ็คเกจ",promotion_detail:"🔥",receive_food:"▶️ อาหารที่ได้รับ",start_date:"▶️ วันรับอาหารวันแรก",sellect_by:"▶️ เลือกอาหารโดย",delivery_date:"▶️ วันที่รับอาหาร",delivery:"▶️ จัดส่ง",package_price:"▶️ ราคาแพ็คเกจ",extra_charge:"▶️ Extra Chrage",discount:"▶️ ส่วนลด",total_delivery_price:"▶️ ค่าจัดส่ง",total_price:"▶️ ยอดชำระ",expiry_date:"▶️ วันหมดอายุแพ็คเกจ",note:"▶️ หมายเหตุ:"};return t[e]||e},copyResultModalContent(){let e=this.$refs.modalContent.innerText;if(e=e.replace(/\n\s*\n/g,"\n"),navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)})).catch((e=>{console.error("ไม่สามารถคัดลอกข้อความ:",e)}));else{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)}catch(t){console.error("ไม่สามารถคัดลอกข้อความ:",t)}finally{document.body.removeChild(s)}}},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},searchQuery(){this.updatePage()},currentPage(){this.updatePage()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Hee=(0,_e.A)(Kee,[["render",Jee]]);var Yee=Hee;const Gee={class:"mt-[-20px]"},ete={class:"flex space-x-2 items-center relative"},tte={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},ste={class:"text-m text-custom-orange font-bold"},ote={class:"ml-2"},ate={class:"sort relative inline-block",ref:"sortDropdown"},rte={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},lte={class:"list-none p-0 m-0"},ite={key:0,class:"material-symbols-outlined text-sm"},nte={key:0,class:"material-symbols-outlined text-sm"},dte={class:"flex w-[250px] relative"},cte={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},ute={class:"bg-custom-orange text-white text-sm"},pte={class:"px-4 py-2 align-top pb-5"},hte={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},gte={class:"px-4 py-2 align-top pb-5"},mte={class:"flex items-center"},yte={class:"px-4 py-2 align-top pb-5"},kte=["onUpdate:modelValue"],fte={key:1},bte={class:"px-4 py-2 align-top pb-5"},xte=["onUpdate:modelValue"],_te={key:1},wte={class:"px-4 py-2 align-top pb-5"},vte=["onUpdate:modelValue"],Lte={key:1},Dte={class:"px-4 py-2 align-top pb-5"},Pte={class:"px-4 py-2 align-top pb-5"},Cte={class:"px-4 py-2 align-top pb-5"},Ste={class:"flex justify-end space-x-2"},Rte=["onClick"],Tte=["onClick"],Mte={key:2},Ete={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Fte={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},zte={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Ate={class:"flex space-x-2"},Ote={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},Nte={key:0,class:"flex items-center space-x-4 pl-3 pr-3"},Xte={class:"flex-1"},Vte={class:"mr-2"},Qte={class:"flex-1"},Ite={class:"flex-1"},Ute={key:1,class:"flex items-center space-x-4 pl-3 pr-3"},$te={class:"flex-1"},Bte={class:"mr-2"},Wte={class:"flex-1"},qte={class:"flex-1"},Zte={key:2,class:"flex items-center space-x-4 pl-3 pr-3"},jte={class:"flex-1"},Jte={class:"mr-2"},Kte={class:"flex-1"},Hte={class:"flex-1"},Yte={key:3,class:"flex items-center space-x-4 pl-3 pr-3"},Gte={class:"flex-1"},ese={class:"mr-2"},tse={class:"flex-1"},sse={class:"flex-1"},ose={class:"mr-2 pl-3 pr-3"},ase={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},rse={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},lse={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},ise={class:"flex space-x-2"},nse={class:"p-6 space-y-4 overflow-y-auto flex-grow"},dse={key:1,class:"mt-4 p-4 border border-custom-orange rounded-md"},cse={class:"flex flex-wrap"},use={class:"md:w-1/2 lg:w-1/4"},pse={class:"md:w-1/2 lg:w-1/4"},hse={class:"md:w-1/2 lg:w-1/4"},gse={class:"md:w-1/2 lg:w-1/4"},mse={class:"md:w-1/2 lg:w-1/4"},yse={class:"md:w-1/2 lg:w-1/4"},kse={class:"md:w-1/2 lg:w-1/4"},fse={class:"md:w-1/2 lg:w-1/4"},bse={class:"space-y-4 overflow-y-auto flex-grow mt-4"},xse={class:"flex flex-wrap gap-4"},_se={class:"flex-1"},wse={class:"flex-1"},vse={class:"flex-1"},Lse={class:"flex-1"},Dse={class:"flex flex-wrap gap-4"},Pse={class:"flex-1"},Cse={class:"flex-1"},Sse={class:"flex-1"},Rse={class:"flex-1"},Tse={class:"flex space-x-4"},Mse={class:"flex-1"},Ese={class:"relative"},Fse={class:"flex-1"},zse={class:"relative"},Ase={key:0},Ose={class:"flex-1"},Nse={class:"block font-bold text-gray-700"},Xse={class:"text-gray-600"},Vse={class:"text-gray-600"},Qse={class:"text-gray-600"},Ise={class:"flex space-x-4"},Use={class:"flex-1"},$se={class:"flex-1"},Bse={key:1,class:"flex-1"},Wse={class:"block font-bold text-gray-700"},qse={class:"text-gray-600"},Zse={class:"flex space-x-4"},jse={class:"flex-1"},Jse={class:"flex-1"},Kse={key:2,class:"flex-2"},Hse={class:"block font-bold text-gray-700"},Yse={class:"text-gray-600"},Gse={class:"flex space-x-4"},eoe={class:"flex-1"},toe={class:"flex-1"},soe={key:3,class:"flex-1"},ooe={class:"block font-bold text-gray-700"},aoe={class:"text-gray-600"},roe={class:"flex space-x-4"},loe={class:"flex-1"},ioe={class:"flex-1"},noe={key:4,class:"flex-1"},doe={class:"block font-bold text-gray-700"},coe={class:"text-gray-600"},uoe={key:5,class:"flex-1"},poe={class:"block font-bold text-gray-700"},hoe={class:"text-gray-600"},goe={class:"text-gray-600"},moe={key:6,class:"flex-1"},yoe={class:"block font-bold text-custom-orange"},koe={class:"text-gray-600"},foe={class:"text-gray-600"},boe={class:"flex space-x-4"},xoe={class:"flex-1"},_oe={class:"flex-1"},woe={class:"flex space-x-4"},voe={class:"flex-1"},Loe={class:"flex-1"},Doe={class:"mb-4"},Poe={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Coe={class:"flex space-x-2"},Soe={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},Roe=["disabled"],Toe={class:"flex items-center space-x-1"},Moe=["onClick"],Eoe=["disabled"],Foe={ref:"componentRef",class:"hidden-print p-4 relative"},zoe={class:"relative flex justify-between items-center"},Aoe={class:"flex flex-col"},Ooe={class:"text-sm"},Noe={class:"report-content min-w-full table-auto mt-4 p-4"},Xoe={class:"px-6 py-4 text-[12px] text-black border-b border-b-gray-300"},Voe={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},Qoe={class:"flex items-center"},Ioe={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},Uoe={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},$oe={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},Boe={class:"px-6 py-4 text-[12px] border-b border-b-gray-300"},Woe={key:0,class:"list-disc pl-4"},qoe={key:0},Zoe={key:1},joe={key:2};function Joe(e,t,s,r,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[56]||(t[56]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[55]||(t[55]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[58]||(t[58]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Gee,[(0,a.Lk)("div",ete,[(0,a.Lk)("div",tte,[t[59]||(t[59]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"delivery_truck_speed",-1)),t[60]||(t[60]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการจัดส่งอาหารทั้งหมด: ",-1)),(0,a.Lk)("span",ste,(0,l.v_)(n.filteredSaleRecordsPaid.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[62]||(t[62]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",ote,[t[61]||(t[61]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,l.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.handlePrint&&r.handlePrint(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[63]||(t[63]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"print",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Print",-1)])),(0,a.Lk)("div",ate,[(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},[t[64]||(t[64]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1)),t[65]||(t[65]=(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1)),(0,a.Lk)("span",{class:(0,l.C4)([{"rotate-180":i.isSortDropdownOpen},"material-symbols-outlined text-white text-xl leading-none items-right ml-auto duration-300"])},"arrow_drop_down",2)]),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",rte,[(0,a.Lk)("ul",lte,[(0,a.Lk)("li",{onClick:t[5]||(t[5]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[66]||(t[66]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",ite,(0,l.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[6]||(t[6]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[67]||(t[67]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",nte,(0,l.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[7]||(t[7]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[68]||(t[68]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",dte,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[9]||(t[9]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[10]||(t[10]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",cte,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",ute,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,l.C4)(["px-4 py-2 text-left font-bold"]),style:(0,l.Tr)({width:i.headerWidths[t]})},(0,l.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredSaleRecordsPaid.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(i.filteredSaleRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",pte,(0,l.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",hte,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",gte,[(0,a.Lk)("div",mte,[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"phone",-1)),(0,a.eW)((0,l.v_)(n.getCustomerTel(e.customer_id)),1)])]),(0,a.Lk)("td",yte,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{key:0,"onUpdate:modelValue":t=>e.delivery_round=t,class:"border px-2 py-1 rounded w-full h-24"},null,8,kte)),[[o.Jo,e.delivery_round]]):((0,a.uX)(),(0,a.CE)("span",fte,(0,l.v_)(e.delivery_round),1))]),(0,a.Lk)("td",bte,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{key:0,"onUpdate:modelValue":t=>e.deliver=t,class:"border px-2 py-1 rounded w-full h-24"},null,8,xte)),[[o.Jo,e.deliver]]):((0,a.uX)(),(0,a.CE)("span",_te,(0,l.v_)(e.deliver),1))]),(0,a.Lk)("td",wte,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.bo)(((0,a.uX)(),(0,a.CE)("textarea",{key:0,"onUpdate:modelValue":t=>e.delivery_zone=t,class:"border px-2 py-1 rounded w-full h-24"},null,8,vte)),[[o.Jo,e.delivery_zone]]):((0,a.uX)(),(0,a.CE)("span",Lte,(0,l.v_)(e.delivery_zone),1))]),(0,a.Lk)("td",Dte,(0,l.v_)(n.getCustomerAddress1(e.customer_id)),1),(0,a.Lk)("td",Pte,(0,l.v_)(n.getCustomerAddress2(e.customer_id)),1),(0,a.Lk)("td",Cte,(0,l.v_)(n.getCustomerAddress3(e.customer_id)),1),(0,a.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("div",Ste,[i.isEditing&&i.editingSaleRecordId===e.id?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t=>n.startEditing(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[70]||(t[70]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,Rte)),i.isEditing&&i.editingSaleRecordId===e.id?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t=>n.saveUpdatedDelivery(e),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-1"},t[71]||(t[71]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"check",-1),(0,a.Lk)("span",null,"บันทึก",-1)]),8,Tte)):(0,a.Q3)("",!0),i.isEditing&&i.editingSaleRecordId===e.id?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[12]||(t[12]=(...e)=>n.cancelEditing&&n.cancelEditing(...e)),class:"bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1),(0,a.Lk)("span",null,"ยกเลิก",-1)]))):(0,a.Q3)("",!0)])],512)])))),128)):(0,a.Q3)("",!0),n.filteredSaleRecordsPaid.length<6&&n.filteredSaleRecordsPaid.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredSaleRecordsPaid.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[73]||(t[73]=[(0,a.Lk)("td",{colspan:"10",class:"py-16"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredSaleRecordsPaid.length?((0,a.uX)(),(0,a.CE)("tr",Mte,t[74]||(t[74]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",Ete,[(0,a.Lk)("div",Fte,[(0,a.Lk)("div",zte,[t[75]||(t[75]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,a.Lk)("div",Ate,[(0,a.Lk)("span",{onClick:t[13]||(t[13]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Ote,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,s,o)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,l.C4)(["p-2 rounded-md",o%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},["zone1_id"===s?((0,a.uX)(),(0,a.CE)("div",Nte,[(0,a.Lk)("div",Xte,[(0,a.Lk)("strong",Vte,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Qte,[t[76]||(t[76]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone1_quantity),1)]),(0,a.Lk)("div",Ite,[t[77]||(t[77]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id))),1)])])):"zone2_id"===s?((0,a.uX)(),(0,a.CE)("div",Ute,[(0,a.Lk)("div",$te,[(0,a.Lk)("strong",Bte,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Wte,[t[78]||(t[78]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone2_quantity),1)]),(0,a.Lk)("div",qte,[t[79]||(t[79]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id))),1)])])):"zone3_id"===s?((0,a.uX)(),(0,a.CE)("div",Zte,[(0,a.Lk)("div",jte,[(0,a.Lk)("strong",Jte,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",Kte,[t[80]||(t[80]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone3_quantity),1)]),(0,a.Lk)("div",Hte,[t[81]||(t[81]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id))),1)])])):"zone_outsource_id"===s?((0,a.uX)(),(0,a.CE)("div",Yte,[(0,a.Lk)("div",Gte,[(0,a.Lk)("strong",ese,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)]),(0,a.Lk)("div",tse,[t[82]||(t[82]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(this.selectedSaleRecord.zone_outsource_quantity),1)]),(0,a.Lk)("div",sse,[t[83]||(t[83]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id))),1)])])):((0,a.uX)(),(0,a.CE)(a.FK,{key:4},[(0,a.Lk)("strong",ose,(0,l.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,l.v_)(e),1)],64))],2)))),128))],512)])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",ase,[(0,a.Lk)("div",{class:(0,l.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[85]||(t[85]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[14]||(t[14]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[84]||(t[84]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",rse,[(0,a.Lk)("div",lse,[t[86]||(t[86]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขบันทึกการขาย",-1)),(0,a.Lk)("div",ise,[(0,a.Lk)("span",{onClick:t[15]||(t[15]=(...t)=>e.closeEditModal&&e.closeEditModal(...t)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",nse,[(0,a.Lk)("div",null,[t[87]||(t[87]=(0,a.Lk)("label",{for:"editCustomer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.customer_id,"onUpdate:modelValue":t[16]||(t[16]=e=>i.selectedSaleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editPackageType",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_type_id,"onUpdate:modelValue":t[17]||(t[17]=e=>i.selectedSaleRecord.package_type_id=e),options:n.filteredPackageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[89]||(t[89]=(0,a.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.promotion_type_id,"onUpdate:modelValue":t[18]||(t[18]=e=>i.selectedSaleRecord.promotion_type_id=e),options:i.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[90]||(t[90]=(0,a.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.program_id,"onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedSaleRecord.program_id=e),options:n.filteredPrograms,placeholder:"เลือก Program","track-by":"id",label:"name",disabled:!i.selectedSaleRecord.promotion_type_id||!i.selectedSaleRecord.promotion_type_id.id},null,8,["modelValue","options","disabled"])]),(0,a.Lk)("div",null,[t[108]||(t[108]=(0,a.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_id,"onUpdate:modelValue":t[20]||(t[20]=e=>i.selectedSaleRecord.package_id=e),options:i.packages,placeholder:"เลือก Package","track-by":"id",label:"displayLabel",disabled:!i.selectedSaleRecord.program_id||!i.selectedSaleRecord.program_id.id},null,8,["modelValue","options","disabled"]),i.selectedSaleRecord.package_id&&i.selectedSaleRecord.package_id.id?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[21]||(t[21]=(0,o.D$)((e=>n.togglePackageDetails(i.selectedSaleRecord.package_id)),["prevent"])),class:"mt-2 cursor-pointer text-custom-orange text-left hover:underline"},(0,l.v_)(i.isShowingPackageDetails?"ปิดรายละเอียด":"ดูรายละเอียดแพ็คเกจ"),1)):(0,a.Q3)("",!0),i.packageDetails?((0,a.uX)(),(0,a.CE)("div",dse,[t[107]||(t[107]=(0,a.Lk)("h3",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,a.Lk)("p",null,[t[91]||(t[91]=(0,a.Lk)("strong",null,"Package:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.name),1)]),(0,a.Lk)("p",null,[t[92]||(t[92]=(0,a.Lk)("strong",null,"ราคา:",-1)),(0,a.eW)(" "+(0,l.v_)(n.formatPrice(i.packageDetails.price)),1)]),(0,a.Lk)("p",null,[t[93]||(t[93]=(0,a.Lk)("strong",null,"Package Details for Purchase Summary:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_detail),1)]),(0,a.Lk)("p",null,[t[94]||(t[94]=(0,a.Lk)("strong",null,"Package Validity:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.package_validity)+" วัน ",1)]),(0,a.Lk)("p",null,[t[95]||(t[95]=(0,a.Lk)("strong",null,"Total Days:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_days)+" วัน ",1)]),(0,a.Lk)("p",null,[t[96]||(t[96]=(0,a.Lk)("strong",null,"# of Boxes/Day:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.boxes_per_day)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[97]||(t[97]=(0,a.Lk)("strong",null,"Total Boxes:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.total_boxes)+" กล่อง ",1)]),(0,a.Lk)("p",null,[t[98]||(t[98]=(0,a.Lk)("strong",null,"รายละเอียดโปรโมชัน:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.promotion_detail),1)]),(0,a.Lk)("div",cse,[(0,a.Lk)("div",use,[(0,a.Lk)("p",null,[t[99]||(t[99]=(0,a.Lk)("strong",null,"M or A or D:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_mad),1)])]),(0,a.Lk)("div",pse,[(0,a.Lk)("p",null,[t[100]||(t[100]=(0,a.Lk)("strong",null,"Dessert:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dessert),1)])]),(0,a.Lk)("div",hse,[(0,a.Lk)("p",null,[t[101]||(t[101]=(0,a.Lk)("strong",null,"Brittles:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_brittles),1)])]),(0,a.Lk)("div",gse,[(0,a.Lk)("p",null,[t[102]||(t[102]=(0,a.Lk)("strong",null,"Energy Balls:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_energy_balls),1)])]),(0,a.Lk)("div",mse,[(0,a.Lk)("p",null,[t[103]||(t[103]=(0,a.Lk)("strong",null,"Dressing:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_dressing),1)])]),(0,a.Lk)("div",yse,[(0,a.Lk)("p",null,[t[104]||(t[104]=(0,a.Lk)("strong",null,"Yoghurt:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_yoghurt),1)])]),(0,a.Lk)("div",kse,[(0,a.Lk)("p",null,[t[105]||(t[105]=(0,a.Lk)("strong",null,"Granola:",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_granola),1)])]),(0,a.Lk)("div",fse,[(0,a.Lk)("p",null,[t[106]||(t[106]=(0,a.Lk)("strong",null,"เครดิตที่แถม (บาท):",-1)),(0,a.eW)(" "+(0,l.v_)(i.packageDetails.free_credit),1)])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",null,[t[109]||(t[109]=(0,a.Lk)("label",{for:"other_promotion_detail",class:"block text-gray-700 font-bold"},"รายละเอียดโปรโมชันเพิ่มเติม (นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"other_promotion_detail","onUpdate:modelValue":t[22]||(t[22]=e=>i.selectedSaleRecord.other_promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชันเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.other_promotion_detail]])]),(0,a.Lk)("div",bse,[t[118]||(t[118]=(0,a.Lk)("strong",{class:"text-custom-orange text-lg"},"จำนวนที่แถม",-1)),(0,a.Lk)("div",xse,[(0,a.Lk)("div",_se,[t[110]||(t[110]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[23]||(t[23]=e=>i.selectedSaleRecord.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_mad]])]),(0,a.Lk)("div",wse,[t[111]||(t[111]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[24]||(t[24]=e=>i.selectedSaleRecord.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dessert]])]),(0,a.Lk)("div",vse,[t[112]||(t[112]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[25]||(t[25]=e=>i.selectedSaleRecord.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_brittles]])]),(0,a.Lk)("div",Lse,[t[113]||(t[113]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[26]||(t[26]=e=>i.selectedSaleRecord.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_energy_balls]])])]),(0,a.Lk)("div",Dse,[(0,a.Lk)("div",Pse,[t[114]||(t[114]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[27]||(t[27]=e=>i.selectedSaleRecord.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_dressing]])]),(0,a.Lk)("div",Cse,[t[115]||(t[115]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[28]||(t[28]=e=>i.selectedSaleRecord.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_yoghurt]])]),(0,a.Lk)("div",Sse,[t[116]||(t[116]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[29]||(t[29]=e=>i.selectedSaleRecord.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_granola]])]),(0,a.Lk)("div",Rse,[t[117]||(t[117]=(0,a.Lk)("label",{for:"freeCredit",class:"block font-bold text-gray-700"},"เครดิตที่แถม (บาท)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeCredit","onUpdate:modelValue":t[30]||(t[30]=e=>i.selectedSaleRecord.free_credit=e),type:"number",min:"0",step:"1",placeholder:"กรอกเครดิตที่แถม (บาท)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.free_credit]])])])]),(0,a.Lk)("div",Tse,[(0,a.Lk)("div",Mse,[t[120]||(t[120]=(0,a.Lk)("label",{for:"editDiscount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",Ese,[t[119]||(t[119]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[31]||(t[31]=e=>i.selectedSaleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.discount]])])]),(0,a.Lk)("div",Fse,[t[122]||(t[122]=(0,a.Lk)("label",{for:"editExtraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",zse,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[32]||(t[32]=e=>i.selectedSaleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.selectedSaleRecord.extra_charge]]),t[121]||(t[121]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),e.computedEditTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",Ase,[(0,a.Lk)("div",Ose,[(0,a.Lk)("label",Nse," มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(e.computedEditTotalPackagePrice)),1),(0,a.Lk)("p",Xse,"ราคาแพ็กเกจ: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.package_price)),1),(0,a.Lk)("p",Vse,"ส่วนลดเพิ่มเติม: "+(0,l.v_)(n.formatPrice(i.selectedSaleRecord.discount)),1),(0,a.Lk)("p",Qse,"มูลค่า Extra Charge: "+(0,l.v_)(n.formatPrice(e.computedEditExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[123]||(t[123]=(0,a.Lk)("label",{for:"editReceiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.receive_food_id,"onUpdate:modelValue":t[33]||(t[33]=e=>i.selectedSaleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Ise,[(0,a.Lk)("div",Use,[t[124]||(t[124]=(0,a.Lk)("label",{for:"editZone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone1_id,"onUpdate:modelValue":t[34]||(t[34]=e=>i.selectedSaleRecord.zone1_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",$se,[t[125]||(t[125]=(0,a.Lk)("label",{for:"editZone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[35]||(t[35]=e=>i.selectedSaleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone1_quantity]])])]),e.computedEditZone1Price>0?((0,a.uX)(),(0,a.CE)("div",Bse,[(0,a.Lk)("label",Wse,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,l.v_)(n.formatPrice(e.computedEditZone1Price)),1),(0,a.Lk)("p",qse,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Zse,[(0,a.Lk)("div",jse,[t[126]||(t[126]=(0,a.Lk)("label",{for:"editZone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone2_id,"onUpdate:modelValue":t[36]||(t[36]=e=>i.selectedSaleRecord.zone2_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Jse,[t[127]||(t[127]=(0,a.Lk)("label",{for:"editZone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[37]||(t[37]=e=>i.selectedSaleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone2_quantity]])])]),e.computedEditZone2Price>0?((0,a.uX)(),(0,a.CE)("div",Kse,[(0,a.Lk)("label",Hse,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,l.v_)(n.formatPrice(e.computedEditZone2Price)),1),(0,a.Lk)("p",Yse,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Gse,[(0,a.Lk)("div",eoe,[t[128]||(t[128]=(0,a.Lk)("label",{for:"editZone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone3_id,"onUpdate:modelValue":t[38]||(t[38]=e=>i.selectedSaleRecord.zone3_id=e),options:n.filteredInhouse,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",toe,[t[129]||(t[129]=(0,a.Lk)("label",{for:"editZone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[39]||(t[39]=e=>i.selectedSaleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone3_quantity]])])]),e.computedEditZone3Price>0?((0,a.uX)(),(0,a.CE)("div",soe,[(0,a.Lk)("label",ooe,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,l.v_)(n.formatPrice(e.computedEditZone3Price)),1),(0,a.Lk)("p",aoe,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",roe,[(0,a.Lk)("div",loe,[t[130]||(t[130]=(0,a.Lk)("label",{for:"editZone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone_outsource_id,"onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedSaleRecord.zone_outsource_id=e),options:n.filteredOutsource,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",ioe,[t[131]||(t[131]=(0,a.Lk)("label",{for:"editZone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedSaleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone_outsource_quantity]])])]),e.computedEditZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",noe,[(0,a.Lk)("label",doe,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(e.computedEditZoneOutsourcePrice)),1),(0,a.Lk)("p",coe,"ค่าจัดส่ง/ครั้ง: "+(0,l.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),e.computedEditTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",uoe,[(0,a.Lk)("label",poe,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(e.computedEditTotalDeliveryPrice)),1),(0,a.Lk)("p",hoe,"ค่าจัดส่งรวม In-house Riders: "+(0,l.v_)(n.formatPrice(e.computedEditTotalZonePrice)),1),(0,a.Lk)("p",goe,"ค่าจัดส่งรวม Outsource: "+(0,l.v_)(n.formatPrice(e.computedEditZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),e.computedEditTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",moe,[(0,a.Lk)("label",yoe,"มูลค่าขายรวม: "+(0,l.v_)(n.formatPrice(e.computedEditTotalPrice)),1),(0,a.Lk)("div",null,[(0,a.Lk)("p",koe,"มูลค่าแพ็กเกจรวม: "+(0,l.v_)(n.formatPrice(e.computedEditTotalPackagePrice)),1)]),(0,a.Lk)("p",foe,"รวมค่าจัดส่งทั้งหมด: "+(0,l.v_)(n.formatPrice(e.computedEditTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",boe,[(0,a.Lk)("div",xoe,[t[132]||(t[132]=(0,a.Lk)("label",{for:"editSellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.seller_name_id,"onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedSaleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",_oe,[t[133]||(t[133]=(0,a.Lk)("label",{for:"editStartDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[43]||(t[43]=e=>i.selectedSaleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.start_date]])])]),(0,a.Lk)("div",woe,[(0,a.Lk)("div",voe,[t[134]||(t[134]=(0,a.Lk)("label",{for:"editDeliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.delivery_round_id,"onUpdate:modelValue":t[44]||(t[44]=e=>i.selectedSaleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Loe,[t[135]||(t[135]=(0,a.Lk)("label",{for:"editSelectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.select_food_id,"onUpdate:modelValue":t[45]||(t[45]=e=>i.selectedSaleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",Doe,[t[136]||(t[136]=(0,a.Lk)("label",{for:"editNote",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[46]||(t[46]=e=>i.selectedSaleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.note]])])]),(0,a.Lk)("div",Poe,[(0,a.Lk)("div",Coe,[(0,a.Lk)("button",{onClick:t[47]||(t[47]=(...t)=>e.closeEditModal&&e.closeEditModal(...t)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...t)=>e.saveChanges&&e.saveChanges(...t)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Soe,[(0,a.Lk)("button",{onClick:t[49]||(t[49]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[137]||(t[137]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Roe),(0,a.Lk)("div",Toe,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[50]||(t[50]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[51]||(t[51]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,l.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,l.v_)(e),11,Moe)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[52]||(t[52]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[53]||(t[53]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,l.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[54]||(t[54]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[138]||(t[138]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Eoe)]),(0,a.Lk)("div",Foe,[(0,a.Lk)("div",zoe,[(0,a.Lk)("div",Aoe,[t[139]||(t[139]=(0,a.Lk)("strong",{class:"text-xl"},"Delivery Report",-1)),(0,a.Lk)("span",Ooe,"Date : "+(0,l.v_)(n.formattedDate),1)]),t[140]||(t[140]=(0,a.Lk)("div",{class:"flex items-center space-x-4"},[(0,a.Lk)("img",{src:Le,alt:"Logo",class:"w-48 h-18"})],-1))]),(0,a.Lk)("table",Noe,[t[141]||(t[141]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-gray-100 text-black text-[12px]"},[(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"20%"}},"ชื่อ"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"5%"}},"โทรศัพท์"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"12%"}},"รอบการจัดส่ง"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"12%"}},"ผู้จัดส่ง"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"12%"}},"โซนการจัดส่ง"),(0,a.Lk)("th",{class:"px-6 py-3 text-left font-bold border-b border-b-black",style:{width:"30%"}},"ที่อยู่")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredSaleRecordsPaid,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:"bg-white border-b border-gray-300 hover:bg-gray-100"},[(0,a.Lk)("td",Xoe,(0,l.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",Voe,[(0,a.Lk)("div",Qoe,(0,l.v_)(n.getCustomerTel(e.customer_id)),1)]),(0,a.Lk)("td",Ioe,(0,l.v_)(e.delivery_round),1),(0,a.Lk)("td",Uoe,(0,l.v_)(e.deliver),1),(0,a.Lk)("td",$oe,(0,l.v_)(e.delivery_zone),1),(0,a.Lk)("td",Boe,[n.getCustomerAddress1(e.customer_id)||n.getCustomerAddress2(e.customer_id)||n.getCustomerAddress3(e.customer_id)?((0,a.uX)(),(0,a.CE)("ul",Woe,[n.getCustomerAddress1(e.customer_id)?((0,a.uX)(),(0,a.CE)("li",qoe,(0,l.v_)(n.getCustomerAddress1(e.customer_id)),1)):(0,a.Q3)("",!0),n.getCustomerAddress2(e.customer_id)?((0,a.uX)(),(0,a.CE)("li",Zoe,(0,l.v_)(n.getCustomerAddress2(e.customer_id)),1)):(0,a.Q3)("",!0),n.getCustomerAddress3(e.customer_id)?((0,a.uX)(),(0,a.CE)("li",joe,(0,l.v_)(n.getCustomerAddress3(e.customer_id)),1)):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0)])])))),128))])])],512)])],64)}var Koe={setup(){const e=(0,sz.KR)(),{handlePrint:t}=(0,tz.Iv)({content:e,documentTitle:"Delivery Report"});return{componentRef:e,handlePrint:t}},components:{Multiselect:fp.Ay},data(){return{headers:["#","ชื่อ/นามสกุล (ไทย)","โทร","รอบ","ผู้ส่ง","โซนจัดส่งตามที่อยู่ตาม Routing","ที่อยู่ 1","ที่อยู่ 2","ที่อยู่ 3",""],headerWidths:["5%","10%","5%","10%","10%","10%","12%","12%","12%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],selectedAddressType:{},saleRecord:[],customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:[],isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isEditing:!1,editingSaleRecordId:null}},computed:{totalPages(){return Math.ceil(this.filteredSaleRecordsPaid.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{name:this.selectedSaleRecord.customer.name,package:this.selectedSaleRecord.package.package_detail,promotion_detail:this.selectedSaleRecord.package.promotion_detail,receive_food:this.totalReceiveFood,start_date:this.formatDate(this.selectedSaleRecord.start_date),sellect_by:this.getSelectFood(this.selectedSaleRecord.select_food_id),delivery_date:this.selectedSaleRecord.customer.delivery_date,delivery:this.getDeliveryRoundName(this.selectedSaleRecord.delivery_round_id),package_price:this.formatPrice(this.selectedSaleRecord.package.price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),note:this.selectedSaleRecord.note}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{seller_name_id:this.getSellerName(this.selectedSaleRecord.seller_name_id),name:this.selectedSaleRecord.customer?.name||"",package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),promotion_type:this.getPromotionTypeName(this.selectedSaleRecord.promotion_type_id)||"",program:this.getProgramName(this.selectedSaleRecord.program_id),package:this.selectedSaleRecord.package?.name||"",package_price:this.formatPrice(this.selectedSaleRecord.package?.price),promotion_detail:this.selectedSaleRecord.package?.promotion_detail||"",other_promotion_detail:this.selectedSaleRecord.other_promotion_detail||"",free_mad:this.selectedSaleRecord.free_mad,free_dessert:this.selectedSaleRecord.free_dessert,free_brittles:this.selectedSaleRecord.free_brittles,free_energy_balls:this.selectedSaleRecord.free_energy_balls,free_dressing:this.selectedSaleRecord.free_dressing,free_yoghurt:this.selectedSaleRecord.free_yoghurt,free_granola:this.selectedSaleRecord.free_granola,free_credit:this.selectedSaleRecord.free_credit,discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPercent(this.selectedSaleRecord.extra_charge),extra_charge_price:this.formatPrice(this.selectedSaleRecord.extra_charge_price),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),receive_food_id:this.getReceiveFoodName(this.selectedSaleRecord.receive_food_id),zone1_id:this.getZoneName(this.selectedSaleRecord.zone1_id),total_zone1_price:this.formatPrice(this.selectedSaleRecord.total_zone1_price),zone2_id:this.getZoneName(this.selectedSaleRecord.zone2_id),total_zone2_price:this.formatPrice(this.selectedSaleRecord.total_zone2_price),zone3_id:this.getZoneName(this.selectedSaleRecord.zone3_id),total_zone3_price:this.formatPrice(this.selectedSaleRecord.total_zone3_price),zone_outsource_id:this.getZoneName(this.selectedSaleRecord.zone_outsource_id),total_zone_outsource_price:this.formatPrice(this.selectedSaleRecord.total_zone_outsource_price),total_delivery_zone_price:this.formatPrice(this.selectedSaleRecord.total_delivery_zone_price),total_delivery_price:this.formatPrice(this.selectedSaleRecord.total_delivery_price),total_price:this.formatPrice(this.selectedSaleRecord.total_price),payment_status:this.getPaymentStatusText(this.selectedSaleRecord.payment_status),paid_date:this.formatDate(this.selectedSaleRecord.paid_date),payment_type_id:this.getPaymentTypeName(this.selectedSaleRecord.payment_type_id),start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),receive_date:this.formatDate(this.selectedSaleRecord.start_date),note:this.selectedSaleRecord.note||"",package_detail:this.selectedSaleRecord.package?.package_detail||"",mad:this.selectedSaleRecord.mad,dessert:this.selectedSaleRecord.dessert,brittles:this.selectedSaleRecord.brittles,energy_balls:this.selectedSaleRecord.energy_balls,dressing:this.selectedSaleRecord.dressing,yoghurt:this.selectedSaleRecord.yoghurt,granola:this.selectedSaleRecord.granola,credit:this.selectedSaleRecord.credit,delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",select_food_id:this.getSelectFood(this.selectedSaleRecord.select_food_id)}:{name:"",expiry_date:""}},formattedDate(){return(new Date).toLocaleDateString("en-UK",{year:"numeric",month:"numeric",day:"numeric"})},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},filteredSaleRecordsPaid(){return this.saleRecords.filter((e=>"paid"===e.payment_status)).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id),o=e.remaining_days>0,a=e.total_boxes>0;return t&&s&&o&&a}))},filteredPackageTypes(){return this.packageTypes.filter((e=>!e.name.toLowerCase().includes("additional sales")&&!e.name.toLowerCase().includes("consignment")))},filteredAdditionalTypes(){return this.additionalTypes.filter((e=>e.name.startsWith("AFF")))},filteredPrograms(){return this.programs.filter((e=>!e.name.startsWith("Happy")))},filteredInhouse(){return this.zoneDeliveries.filter((e=>e.name.startsWith("AFF")))},filteredOutsource(){return this.zoneDeliveries.filter((e=>!e.name.startsWith("AFF")))},...(0,Ze.L8)(["saleRecords"])},methods:{...(0,Ze.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.filteredSaleRecordsPaid.slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.filteredSaleRecordsPaid=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},filterEditPrograms(){this.selectedSaleRecord.promotion_type_id&&this.selectedSaleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.selectedSaleRecord.promotion_type_id.id)):this.programs=this.allPrograms},filterEditPackages(){this.selectedSaleRecord.program_id&&this.selectedSaleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.selectedSaleRecord.program_id.id)):this.packages=this.allPackages},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,o,a,r,l,i,n,d,c,u,p]=await Promise.all([ke.A.get("http://127.0.0.1:3333/customers-hhb"),ke.A.get("http://127.0.0.1:3333/promotion-types"),ke.A.get("http://127.0.0.1:3333/programs"),ke.A.get("http://127.0.0.1:3333/packages"),ke.A.get("http://127.0.0.1:3333/package-types"),ke.A.get("http://127.0.0.1:3333/zone-deliveries"),ke.A.get("http://127.0.0.1:3333/zone-delivery-types"),ke.A.get("http://127.0.0.1:3333/seller-names"),ke.A.get("http://127.0.0.1:3333/payment-types"),ke.A.get("http://127.0.0.1:3333/additional-types"),ke.A.get("http://127.0.0.1:3333/delivery-rounds"),ke.A.get("http://127.0.0.1:3333/receive-foods"),ke.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=r.data,this.zoneDeliveryTypes=l.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ke.A.get("http://127.0.0.1:3333/sale-records-hhb");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},getCustomerAddress1(e){const t=this.customers.find((t=>t.id===e));return t?t.address_1:"ไม่พบข้อมูล"},getCustomerAddress2(e){const t=this.customers.find((t=>t.id===e));return t?t.address_2:"ไม่พบข้อมูล"},getCustomerAddress3(e){const t=this.customers.find((t=>t.id===e));return t?t.address_3:"ไม่พบข้อมูล"},startEditing(e){this.isEditing=!0,this.editingSaleRecordId=e.id},saveUpdatedDelivery(e){this.updateDelivery(e),this.isEditing=!1,this.editingSaleRecordId=null},cancelEditing(){this.fetchSaleRecords(),this.isEditing=!1,this.editingSaleRecordId=null},async updateDelivery(e){try{await ke.A.put(`http://127.0.0.1:3333/sale-records-hhb/${e.id}/delivery`,{delivery_round:e.delivery_round||"",deliver:e.deliver||"",delivery_zone:e.delivery_zone||""}),await this.fetchSaleRecords(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(t){console.error("เกิดข้อผิดพลาดในการอัปเดตข้อมูลการจัดส่ง:",t),this.showErrorToastNotification("กิดข้อผิดพลาดในการแก้ไข!")}},getCustomerTel(e){const t=this.customers.find((t=>t.id===e));return t?t.tel:"ไม่พบข้อมูล"},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={seller_name_id:"ผู้ขาย",name:"ชื่อ-สกุลลูกค้า",package_type:"Package Type",promotion_type:"Promotion Type",program:"Program",package:"แพ็กเกจที่ซื้อ ",package_price:"ราคาแพ็กเกจ",promotion_detail:"รายละเอียดโปรโมชัน",other_promotion_detail:"รายละเอียดโปรโมชันเพิ่มเติม(นอกเหนือจากโปรฯ รายเดือนที่ต้องได้รับอนุมัติ)",free_mad:"จำนวนกล่องที่แถม M or A or D",free_dessert:"จำนวนกล่องที่แถม Dessert",free_brittles:"จำนวนกล่องที่แถม Brittles",free_energy_balls:"จำนวนกล่องที่แถม Energy Balls",free_dressing:"จำนวนกล่องที่แถม Dressing",free_yoghurt:"จำนวนกล่องที่แถม Yoghurt",free_granola:"จำนวนกล่องที่แถม Granola",free_credit:"เครดิตที่แถม (บาท)",discount:"ส่วนลดเพิ่มเติมจากโปรฯ ประจำเดือน (ถ้ามี)",extra_charge:"Extra Charge (%)",extra_charge_price:"มูลค่า Extra Charge",total_package_price:"มูลค่าแพ็กเกจรวม",receive_food_id:"วิธีการรับอาหาร",zone1_id:"In-house Riders (ที่อยู่ 1)",total_zone1_price:"ค่าจัดส่งรวม (ที่อยู่ 1)",zone2_id:"In-house Riders (ที่อยู่ 2)",total_zone2_price:"ค่าจัดส่งรวม (ที่อยู่ 2)",zone3_id:"In-house Riders (ที่อยู่ 3)",total_zone3_price:"ค่าจัดส่งรวม (ที่อยู่ 3)",zone_outsource_id:"Outsource Riders",total_zone_outsource_price:"ค่าจัดส่งรวม Outsource",total_delivery_zone_price:"ค่าจัดส่งรวม In-house Riders",total_delivery_price:"รวมค่าจัดส่งทั้งหมด",total_price:"มูลค่าขายรวม",payment_status:"สถานะการชำระเงิน",paid_date:"วันที่ชำระเงิน",payment_type_id:"วิธีการชำระเงิน",receive_date:"วันเริ่มรับอาหารวันแรก",sellect_by:"เลือกอาหารโดย",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",note:"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",package_detail:"ข้อมูลแพ็กเกจ(สำหรับสรุปให้ลูกค้า)",mad:"M or A or D",dessert:"Dessert",brittles:"Brittles",energy_balls:"Energy Balls",dressing:"Dressing",yoghurt:"Yoghurt",granola:"Granola",credit:"Cash Credit ที่ได้รับ",delivery_date:"วันที่ต้องการรับอาหาร",select_food_id:"วิธีการเลือกอาหาร"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},onViewResultSaleRecord(e){this.selectedSaleRecord=e,this.isResultModalOpen=!0,this.moreOpenDropdownIndex=null},closeResultModal(){this.isResultModalOpen=!1},formatResultLabel(e){const t={name:"🏷 คุณ",package:"▶️ แพ็คเกจ",promotion_detail:"🔥",receive_food:"▶️ อาหารที่ได้รับ",start_date:"▶️ วันรับอาหารวันแรก",sellect_by:"▶️ เลือกอาหารโดย",delivery_date:"▶️ วันที่รับอาหาร",delivery:"▶️ จัดส่ง",package_price:"▶️ ราคาแพ็คเกจ",extra_charge:"▶️ Extra Chrage",discount:"▶️ ส่วนลด",total_delivery_price:"▶️ ค่าจัดส่ง",total_price:"▶️ ยอดชำระ",expiry_date:"▶️ วันหมดอายุแพ็คเกจ",note:"▶️ หมายเหตุ:"};return t[e]||e},copyResultModalContent(){let e=this.$refs.modalContent.innerText;if(e=e.replace(/\n\s*\n/g,"\n"),navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)})).catch((e=>{console.error("ไม่สามารถคัดลอกข้อความ:",e)}));else{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)}catch(t){console.error("ไม่สามารถคัดลอกข้อความ:",t)}finally{document.body.removeChild(s)}}},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1),!this.$refs.filterDropdown||this.$refs.filterDropdown.contains(e.target)||e.target.closest(".filter")||(this.isFilterDropdownOpen=!1)},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},searchQuery(){this.updatePage()},currentPage(){this.updatePage()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Hoe=(0,_e.A)(Koe,[["render",Joe]]);var Yoe=Hoe;const Goe={class:"mt-4 flex"},eae={class:"w-1/5"},tae={class:"mb-4"},sae={class:"flex items-center space-x-3 py-2"},oae={class:"mb-4 space-y-2"},aae=["onClick"],rae={class:"w-4/5 p-4"},lae={class:"font-bold text-xl mb-4"},iae={key:0,class:"text-center text-gray-600"},nae={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3"},dae={class:"mb-4"},cae=["src"],uae={key:1,class:"bg-gray-100 w-full h-48 rounded-md flex items-center justify-center"},pae={class:"text-lg font-semibold block"},hae={class:"block"},gae={class:"block text-custom-orange font-bold"},mae={class:"text-gray-700 text-sm"},yae={class:"mr-2"},kae={class:"mr-2"},fae={class:"mr-2"},bae={class:"mr-2"},xae={class:"mt-auto flex w-full space-x-2"},_ae={class:"flex items-center justify-center w-1/2 space-x-2 p-2"},wae=["onClick"],vae=["onUpdate:modelValue"],Lae=["onClick"],Dae={class:"w-1/2 p-2 flex justify-end"},Pae=["onClick"];function Cae(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[i.showSuccessToast?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[10]||(t[10]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[9]||(t[9]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),i.showFailToast?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[12]||(t[12]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[11]||(t[11]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),i.showErrorToast?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,l.C4)(["fixed top-4 right-8 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[14]||(t[14]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[13]||(t[13]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),t[28]||(t[28]=(0,a.Lk)("h1",{class:"mt-4 font-bold text-custom-orange text-2xl mb-4 text-center"},"Premium Health",-1)),(0,a.Lk)("div",Goe,[(0,a.Lk)("div",eae,[(0,a.Lk)("div",tae,[(0,a.Lk)("div",sae,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>n.changeDate(-1)),class:"flex items-center"},t[15]||(t[15]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[16]||(t[16]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[5]||(t[5]=e=>n.changeDate(1)),class:"flex items-center"},t[17]||(t[17]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{type:"date",id:"menuDate","onUpdate:modelValue":t[6]||(t[6]=e=>i.selectedDate=e),class:"p-2 border rounded-md w-auto",onChange:t[7]||(t[7]=(...e)=>n.fetchMenusForSelectedDate&&n.fetchMenusForSelectedDate(...e))},null,544),[[o.Jo,i.selectedDate]])])]),t[18]||(t[18]=(0,a.Lk)("h1",{class:"font-bold text-xl mb-4"},"ฟิลเตอร์เมนู",-1)),(0,a.Lk)("div",oae,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=e=>i.selectedMealType=""),class:(0,l.C4)(["w-full text-left py-2 hover:text-custom-orange",""===i.selectedMealType?"text-custom-orange font-bold":"text-gray-600"])}," ทุกประเภท ",2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMealTypes,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e.id,onClick:t=>i.selectedMealType=e.id,class:(0,l.C4)(["w-full py-2 text-left hover:text-custom-orange",i.selectedMealType===e.id?"text-custom-orange font-bold":"text-gray-600"])},(0,l.v_)(e.name),11,aae)))),128))])]),(0,a.Lk)("div",rae,[(0,a.Lk)("h1",lae,"รายการอาหารประจำวันที่ "+(0,l.v_)(n.formatDate(i.selectedDate))+" ("+(0,l.v_)(n.formatDateEng(i.selectedDate))+")",1),0===i.todayMenus.length?((0,a.uX)(),(0,a.CE)("div",iae,t[19]||(t[19]=[(0,a.Lk)("strong",{class:"text-2xl"},"ไม่มีเมนู",-1)]))):(0,a.Q3)("",!0),(0,a.Lk)("div",nae,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMenus,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"p-4 border rounded-lg shadow-md bg-white flex flex-col h-full mb-6"},[(0,a.Lk)("div",dae,[n.getMenuImage(e.menu_id)?((0,a.uX)(),(0,a.CE)("img",{key:0,src:`http://127.0.0.1:3333/images/${n.getMenuImage(e.menu_id)}`,alt:"Menu Image",class:"min-h-48 max-h-48 w-full object-cover rounded"},null,8,cae)):((0,a.uX)(),(0,a.CE)("div",uae,t[20]||(t[20]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-4xl text-gray-500"}," hide_image ",-1)])))]),(0,a.Lk)("span",pae,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("span",hae,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("span",gae,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("div",mae,[(0,a.Lk)("span",yae,(0,l.v_)(n.getMenuCal(e.menu_id))+" Cal",1),(0,a.Lk)("span",kae,[t[21]||(t[21]=(0,a.eW)("|")),t[22]||(t[22]=(0,a.Lk)("strong",null," Protein: ",-1)),(0,a.eW)(" "+(0,l.v_)(n.getMenuProtein(e.menu_id))+" g",1)]),(0,a.Lk)("span",fae,[t[23]||(t[23]=(0,a.eW)("|")),t[24]||(t[24]=(0,a.Lk)("strong",null," Carbohydrate: ",-1)),(0,a.eW)((0,l.v_)(n.getMenuCarb(e.menu_id))+" g",1)]),(0,a.Lk)("span",bae,[t[25]||(t[25]=(0,a.eW)("|")),t[26]||(t[26]=(0,a.Lk)("strong",null," Fat: ",-1)),(0,a.eW)((0,l.v_)(n.getMenuFat(e.menu_id))+" g",1)])]),(0,a.Lk)("div",xae,[(0,a.Lk)("div",_ae,[(0,a.Lk)("button",{onClick:t=>n.adjustQuantity(e,-1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"-",8,wae),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,min:"0",placeholder:"จำนวน",class:"p-2 border rounded-md w-16 text-center input-no-spinner"},null,8,vae),[[o.Jo,e.quantity,void 0,{number:!0}]]),(0,a.Lk)("button",{onClick:t=>n.adjustQuantity(e,1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"+",8,Lae)]),(0,a.Lk)("div",Dae,[(0,a.Lk)("button",{onClick:t=>n.orderMenu(e),class:"px-4 py-2 w-full bg-custom-orange text-white rounded-md hover:bg-custom-orange-hover transition flex items-center space-x-2 justify-center"},t[27]||(t[27]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," shopping_cart ",-1),(0,a.Lk)("span",null,"สั่งซื้อ",-1)]),8,Pae)])])])))),128))])])])],64)}var Sae={data(){return{menus:[],todayMenus:[],meal_types:[],selectedDate:this.getTodayDate(),selectedMealType:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{filteredMenus(){return 0===this.todayMenus.length?[]:this.selectedMealType?this.todayMenus.filter((e=>this.getMealTypeID(e.menu_id)===this.selectedMealType)):this.todayMenus},filteredMealTypes(){const e=new Set(this.todayMenus.map((e=>this.getMealTypeID(e.menu_id))));return this.meal_types.filter((t=>e.has(t.id)))}},methods:{getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusForSelectedDate()},setToday(){this.selectedDate=this.getTodayDate(),this.fetchMenusForSelectedDate()},async fetchMenusForSelectedDate(){try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-ph/menus-by-day/${this.selectedDate}`);console.log("API Response:",e.data),e.data.menus&&e.data.menus.length>0?(this.todayMenus=e.data.menus,this.todayMenus.forEach((e=>{e.quantity=0})),console.log("Date",this.selectedDate)):this.todayMenus=[]}catch(e){this.todayMenus=[]}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},getMenuCal(e){const t=this.menus.find((t=>t.id===e));return t?t.cal:null},getMenuProtein(e){const t=this.menus.find((t=>t.id===e));return t?t.protein:null},getMenuFat(e){const t=this.menus.find((t=>t.id===e));return t?t.fat:null},getMenuCarb(e){const t=this.menus.find((t=>t.id===e));return t?t.carb:null},getMenuImage(e){const t=this.menus.find((t=>t.id===e));return t?t.image:null},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatDateEng(e){const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e).toLocaleDateString("en-US",t);return s},orderMenu(e){if(e.quantity&&e.quantity>0){const t=e.meal_type_id;ke.A.post("http://127.0.0.1:3333/order",{menu_id:e.menu_id,quantity:e.quantity,order_date:this.selectedDate,meal_type_id:t}).then((()=>{this.showSuccessToastNotification("Order successful!"),e.quantity=0})).catch((()=>{this.showErrorToastNotification("Please register before placing an order!!")}))}else this.showErrorToastNotification("Please specify the quantity!")},adjustQuantity(e,t){const s=e.quantity+t;s>=0&&(e.quantity=s)},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},mounted(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},watch:{selectedDate(){this.fetchMenusForSelectedDate()}}};const Rae=(0,_e.A)(Sae,[["render",Cae],["__scopeId","data-v-c1e1ad86"]]);var Tae=Rae;const Mae={class:"mt-4 flex"},Eae={class:"w-1/5"},Fae={class:"mb-4"},zae={class:"flex items-center space-x-3 py-2"},Aae={class:"mb-4 space-y-2"},Oae=["onClick"],Nae={class:"w-4/5 p-4"},Xae={class:"font-bold text-xl mb-4"},Vae={key:0,class:"text-center text-gray-600"},Qae={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3"},Iae={class:"mb-4"},Uae=["src"],$ae={key:1,class:"bg-gray-100 w-full h-48 rounded-md flex items-center justify-center"},Bae={class:"text-lg font-semibold block"},Wae={class:"block"},qae={class:"block text-custom-orange font-bold"},Zae={class:"text-gray-700 text-sm"},jae={class:"mr-2"},Jae={class:"mr-2"},Kae={class:"mr-2"},Hae={class:"mr-2"},Yae={class:"mt-auto flex w-full space-x-2"},Gae={class:"flex items-center justify-center w-1/2 space-x-2 p-2"},ere=["onClick"],tre=["onUpdate:modelValue"],sre=["onClick"],ore={class:"w-1/2 p-2 flex justify-end"},are=["onClick"];function rre(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[i.showSuccessToast?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[10]||(t[10]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[9]||(t[9]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),i.showFailToast?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[12]||(t[12]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[11]||(t[11]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),i.showErrorToast?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,l.C4)(["fixed top-4 right-8 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[14]||(t[14]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[13]||(t[13]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),t[28]||(t[28]=(0,a.Lk)("h1",{class:"mt-4 font-bold text-custom-orange text-2xl mb-4 text-center"},"Happy Healthy Box",-1)),(0,a.Lk)("div",Mae,[(0,a.Lk)("div",Eae,[(0,a.Lk)("div",Fae,[(0,a.Lk)("div",zae,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>n.changeDate(-1)),class:"flex items-center"},t[15]||(t[15]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[16]||(t[16]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[5]||(t[5]=e=>n.changeDate(1)),class:"flex items-center"},t[17]||(t[17]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{type:"date",id:"menuDate","onUpdate:modelValue":t[6]||(t[6]=e=>i.selectedDate=e),class:"p-2 border rounded-md w-auto",onChange:t[7]||(t[7]=(...e)=>n.fetchMenusForSelectedDate&&n.fetchMenusForSelectedDate(...e))},null,544),[[o.Jo,i.selectedDate]])])]),t[18]||(t[18]=(0,a.Lk)("h1",{class:"font-bold text-xl mb-4"},"ประเภทเมนู",-1)),(0,a.Lk)("div",Aae,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=e=>i.selectedMealType=""),class:(0,l.C4)(["w-full text-left py-2 hover:text-custom-orange",""===i.selectedMealType?"text-custom-orange font-bold":"text-gray-600"])}," ทุกประเภท ",2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMealTypes,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e.id,onClick:t=>i.selectedMealType=e.id,class:(0,l.C4)(["w-full py-2 text-left hover:text-custom-orange",i.selectedMealType===e.id?"text-custom-orange font-bold":"text-gray-600"])},(0,l.v_)(e.name),11,Oae)))),128))])]),(0,a.Lk)("div",Nae,[(0,a.Lk)("h1",Xae,"รายการอาหารประจำวันที่ "+(0,l.v_)(n.formatDate(i.selectedDate))+" ("+(0,l.v_)(n.formatDateEng(i.selectedDate))+")",1),0===i.todayMenus.length?((0,a.uX)(),(0,a.CE)("div",Vae,t[19]||(t[19]=[(0,a.Lk)("strong",{class:"text-2xl"},"ไม่มีเมนู",-1)]))):(0,a.Q3)("",!0),(0,a.Lk)("div",Qae,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMenus,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"p-4 border rounded-lg shadow-md bg-white flex flex-col h-full mb-6"},[(0,a.Lk)("div",Iae,[n.getMenuImage(e.menu_id)?((0,a.uX)(),(0,a.CE)("img",{key:0,src:`http://127.0.0.1:3333/images/${n.getMenuImage(e.menu_id)}`,alt:"Menu Image",class:"min-h-48 max-h-48 w-full object-cover rounded"},null,8,Uae)):((0,a.uX)(),(0,a.CE)("div",$ae,t[20]||(t[20]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-4xl text-gray-500"}," hide_image ",-1)])))]),(0,a.Lk)("span",Bae,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("span",Wae,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("span",qae,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("div",Zae,[(0,a.Lk)("span",jae,(0,l.v_)(n.getMenuCal(e.menu_id))+" Cal",1),(0,a.Lk)("span",Jae,[t[21]||(t[21]=(0,a.eW)("|")),t[22]||(t[22]=(0,a.Lk)("strong",null," Protein: ",-1)),(0,a.eW)(" "+(0,l.v_)(n.getMenuProtein(e.menu_id))+" g",1)]),(0,a.Lk)("span",Kae,[t[23]||(t[23]=(0,a.eW)("|")),t[24]||(t[24]=(0,a.Lk)("strong",null," Carbohydrate: ",-1)),(0,a.eW)((0,l.v_)(n.getMenuCarb(e.menu_id))+" g",1)]),(0,a.Lk)("span",Hae,[t[25]||(t[25]=(0,a.eW)("|")),t[26]||(t[26]=(0,a.Lk)("strong",null," Fat: ",-1)),(0,a.eW)((0,l.v_)(n.getMenuFat(e.menu_id))+" g",1)])]),(0,a.Lk)("div",Yae,[(0,a.Lk)("div",Gae,[(0,a.Lk)("button",{onClick:t=>n.adjustQuantity(e,-1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"-",8,ere),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,min:"0",placeholder:"จำนวน",class:"p-2 border rounded-md w-16 text-center input-no-spinner"},null,8,tre),[[o.Jo,e.quantity,void 0,{number:!0}]]),(0,a.Lk)("button",{onClick:t=>n.adjustQuantity(e,1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"+",8,sre)]),(0,a.Lk)("div",ore,[(0,a.Lk)("button",{onClick:t=>n.orderMenu(e),class:"px-4 py-2 w-full bg-custom-orange text-white rounded-md hover:bg-custom-orange-hover transition flex items-center space-x-2 justify-center"},t[27]||(t[27]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," shopping_cart ",-1),(0,a.Lk)("span",null,"สั่งซื้อ",-1)]),8,are)])])])))),128))])])])],64)}var lre={data(){return{menus:[],todayMenus:[],meal_types:[],selectedDate:this.getTodayDate(),selectedMealType:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{filteredMenus(){return 0===this.todayMenus.length?[]:this.selectedMealType?this.todayMenus.filter((e=>this.getMealTypeID(e.menu_id)===this.selectedMealType)):this.todayMenus},filteredMealTypes(){const e=new Set(this.todayMenus.map((e=>this.getMealTypeID(e.menu_id))));return this.meal_types.filter((t=>e.has(t.id)))}},methods:{getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusForSelectedDate()},setToday(){this.selectedDate=this.getTodayDate(),this.fetchMenusForSelectedDate()},async fetchMenusForSelectedDate(){try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-hhb/menus-by-day/${this.selectedDate}`);console.log("API Response:",e.data),e.data.menus&&e.data.menus.length>0?(this.todayMenus=e.data.menus,this.todayMenus.forEach((e=>{e.quantity=0})),console.log("Date",this.selectedDate)):this.todayMenus=[]}catch(e){this.todayMenus=[]}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},getMenuCal(e){const t=this.menus.find((t=>t.id===e));return t?t.cal:null},getMenuProtein(e){const t=this.menus.find((t=>t.id===e));return t?t.protein:null},getMenuFat(e){const t=this.menus.find((t=>t.id===e));return t?t.fat:null},getMenuCarb(e){const t=this.menus.find((t=>t.id===e));return t?t.carb:null},getMenuImage(e){const t=this.menus.find((t=>t.id===e));return t?t.image:null},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatDateEng(e){const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e).toLocaleDateString("en-US",t);return s},orderMenu(e){if(e.quantity&&e.quantity>0){const t=e.meal_type_id;ke.A.post("http://127.0.0.1:3333/order-hhb",{menu_id:e.menu_id,quantity:e.quantity,order_date:this.selectedDate,meal_type_id:t}).then((()=>{this.showSuccessToastNotification("Order successful!"),e.quantity=0})).catch((()=>{this.showErrorToastNotification("Please register before placing an order!!")}))}else this.showErrorToastNotification("Please specify the quantity!")},adjustQuantity(e,t){const s=e.quantity+t;s>=0&&(e.quantity=s)},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},mounted(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},watch:{selectedDate(){this.fetchMenusForSelectedDate()}}};const ire=(0,_e.A)(lre,[["render",rre],["__scopeId","data-v-0c8d97f8"]]);var nre=ire;const dre={class:"mt-4 flex"},cre={class:"w-1/5"},ure={class:"mb-4"},pre={class:"flex items-center space-x-3 py-2"},hre={class:"mb-4 space-y-2"},gre=["onClick"],mre={class:"w-4/5 p-4"},yre={class:"font-bold text-xl mb-4"},kre={key:0,class:"text-center text-gray-600"},fre={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3"},bre={class:"mb-4"},xre=["src"],_re={key:1,class:"bg-gray-100 w-full h-48 rounded-md flex items-center justify-center"},wre={class:"text-lg font-semibold block"},vre={class:"block"},Lre={class:"block text-custom-orange font-bold"},Dre={class:"text-gray-700 text-sm"},Pre={class:"mr-2"},Cre={class:"mr-2"},Sre={class:"mr-2"},Rre={class:"mr-2"},Tre={class:"mt-auto flex w-full space-x-2"},Mre={class:"flex items-center justify-center w-1/2 space-x-2 p-2"},Ere=["onClick"],Fre=["onUpdate:modelValue"],zre=["onClick"],Are={class:"w-1/2 p-2 flex justify-end"},Ore=["onClick"];function Nre(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[i.showSuccessToast?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[10]||(t[10]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[9]||(t[9]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),i.showFailToast?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[12]||(t[12]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[11]||(t[11]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),i.showErrorToast?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,l.C4)(["fixed top-4 right-8 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[14]||(t[14]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[13]||(t[13]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),t[28]||(t[28]=(0,a.Lk)("h1",{class:"mt-4 font-bold text-custom-orange text-2xl mb-4 text-center"},"Premium Health",-1)),(0,a.Lk)("div",dre,[(0,a.Lk)("div",cre,[(0,a.Lk)("div",ure,[(0,a.Lk)("div",pre,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>n.changeDate(-1)),class:"flex items-center"},t[15]||(t[15]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[16]||(t[16]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[5]||(t[5]=e=>n.changeDate(1)),class:"flex items-center"},t[17]||(t[17]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{type:"date",id:"menuDate","onUpdate:modelValue":t[6]||(t[6]=e=>i.selectedDate=e),class:"p-2 border rounded-md w-auto",onChange:t[7]||(t[7]=(...e)=>n.fetchMenusForSelectedDate&&n.fetchMenusForSelectedDate(...e))},null,544),[[o.Jo,i.selectedDate]])])]),t[18]||(t[18]=(0,a.Lk)("h1",{class:"font-bold text-xl mb-4"},"ฟิลเตอร์เมนู",-1)),(0,a.Lk)("div",hre,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=e=>i.selectedMealType=""),class:(0,l.C4)(["w-full text-left py-2 hover:text-custom-orange",""===i.selectedMealType?"text-custom-orange font-bold":"text-gray-600"])}," ทุกประเภท ",2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMealTypes,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e.id,onClick:t=>i.selectedMealType=e.id,class:(0,l.C4)(["w-full py-2 text-left hover:text-custom-orange",i.selectedMealType===e.id?"text-custom-orange font-bold":"text-gray-600"])},(0,l.v_)(e.name),11,gre)))),128))])]),(0,a.Lk)("div",mre,[(0,a.Lk)("h1",yre,"รายการอาหารประจำวันที่ "+(0,l.v_)(n.formatDate(i.selectedDate))+" ("+(0,l.v_)(n.formatDateEng(i.selectedDate))+")",1),0===i.todayMenus.length?((0,a.uX)(),(0,a.CE)("div",kre,t[19]||(t[19]=[(0,a.Lk)("strong",{class:"text-2xl"},"ไม่มีเมนู",-1)]))):(0,a.Q3)("",!0),(0,a.Lk)("div",fre,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMenus,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"p-4 border rounded-lg shadow-md bg-white flex flex-col h-full mb-6"},[(0,a.Lk)("div",bre,[n.getMenuImage(e.menu_id)?((0,a.uX)(),(0,a.CE)("img",{key:0,src:`http://127.0.0.1:3333/images/${n.getMenuImage(e.menu_id)}`,alt:"Menu Image",class:"min-h-48 max-h-48 w-full object-cover rounded"},null,8,xre)):((0,a.uX)(),(0,a.CE)("div",_re,t[20]||(t[20]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-4xl text-gray-500"}," hide_image ",-1)])))]),(0,a.Lk)("span",wre,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("span",vre,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("span",Lre,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("div",Dre,[(0,a.Lk)("span",Pre,(0,l.v_)(n.getMenuCal(e.menu_id))+" Cal",1),(0,a.Lk)("span",Cre,[t[21]||(t[21]=(0,a.eW)("|")),t[22]||(t[22]=(0,a.Lk)("strong",null," Protein: ",-1)),(0,a.eW)(" "+(0,l.v_)(n.getMenuProtein(e.menu_id))+" g",1)]),(0,a.Lk)("span",Sre,[t[23]||(t[23]=(0,a.eW)("|")),t[24]||(t[24]=(0,a.Lk)("strong",null," Carbohydrate: ",-1)),(0,a.eW)((0,l.v_)(n.getMenuCarb(e.menu_id))+" g",1)]),(0,a.Lk)("span",Rre,[t[25]||(t[25]=(0,a.eW)("|")),t[26]||(t[26]=(0,a.Lk)("strong",null," Fat: ",-1)),(0,a.eW)((0,l.v_)(n.getMenuFat(e.menu_id))+" g",1)])]),(0,a.Lk)("div",Tre,[(0,a.Lk)("div",Mre,[(0,a.Lk)("button",{onClick:t=>n.adjustQuantity(e,-1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"-",8,Ere),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,min:"0",placeholder:"จำนวน",class:"p-2 border rounded-md w-16 text-center input-no-spinner"},null,8,Fre),[[o.Jo,e.quantity,void 0,{number:!0}]]),(0,a.Lk)("button",{onClick:t=>n.adjustQuantity(e,1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"+",8,zre)]),(0,a.Lk)("div",Are,[(0,a.Lk)("button",{onClick:t=>n.orderMenu(e),class:"px-4 py-2 w-full bg-custom-orange text-white rounded-md hover:bg-custom-orange-hover transition flex items-center space-x-2 justify-center"},t[27]||(t[27]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," shopping_cart ",-1),(0,a.Lk)("span",null,"สั่งซื้อ",-1)]),8,Ore)])])])))),128))])])])],64)}var Xre={data(){return{menus:[],todayMenus:[],meal_types:[],selectedDate:this.getTodayDate(),selectedMealType:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{filteredMenus(){return 0===this.todayMenus.length?[]:this.selectedMealType?this.todayMenus.filter((e=>this.getMealTypeID(e.menu_id)===this.selectedMealType)):this.todayMenus},filteredMealTypes(){const e=new Set(this.todayMenus.map((e=>this.getMealTypeID(e.menu_id))));return this.meal_types.filter((t=>e.has(t.id)))}},methods:{getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusForSelectedDate()},setToday(){this.selectedDate=this.getTodayDate(),this.fetchMenusForSelectedDate()},async fetchMenusForSelectedDate(){try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-lc/menus-by-day/${this.selectedDate}`);console.log("API Response:",e.data),e.data.menus&&e.data.menus.length>0?(this.todayMenus=e.data.menus,this.todayMenus.forEach((e=>{e.quantity=0})),console.log("Date",this.selectedDate)):this.todayMenus=[]}catch(e){this.todayMenus=[]}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},getMenuCal(e){const t=this.menus.find((t=>t.id===e));return t?t.cal:null},getMenuProtein(e){const t=this.menus.find((t=>t.id===e));return t?t.protein:null},getMenuFat(e){const t=this.menus.find((t=>t.id===e));return t?t.fat:null},getMenuCarb(e){const t=this.menus.find((t=>t.id===e));return t?t.carb:null},getMenuImage(e){const t=this.menus.find((t=>t.id===e));return t?t.image:null},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatDateEng(e){const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e).toLocaleDateString("en-US",t);return s},orderMenu(e){if(e.quantity&&e.quantity>0){const t=e.meal_type_id;ke.A.post("http://127.0.0.1:3333/order",{menu_id:e.menu_id,quantity:e.quantity,order_date:this.selectedDate,meal_type_id:t}).then((()=>{this.showSuccessToastNotification("Order successful!"),e.quantity=0})).catch((()=>{this.showErrorToastNotification("Please register before placing an order!!")}))}else this.showErrorToastNotification("Please specify the quantity!")},adjustQuantity(e,t){const s=e.quantity+t;s>=0&&(e.quantity=s)},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},mounted(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},watch:{selectedDate(){this.fetchMenusForSelectedDate()}}};const Vre=(0,_e.A)(Xre,[["render",Nre],["__scopeId","data-v-3a45358e"]]);var Qre=Vre;const Ire={class:"mt-4 flex"},Ure={class:"w-1/5"},$re={class:"mb-4"},Bre={class:"flex items-center space-x-3 py-2"},Wre={class:"mb-4 space-y-2"},qre=["onClick"],Zre={class:"w-4/5 p-4"},jre={class:"font-bold text-xl mb-4"},Jre={key:0,class:"text-center text-gray-600"},Kre={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3"},Hre={class:"mb-4"},Yre=["src"],Gre={key:1,class:"bg-gray-100 w-full h-48 rounded-md flex items-center justify-center"},ele={class:"text-lg font-semibold block"},tle={class:"block"},sle={class:"block text-custom-orange font-bold"},ole={class:"text-gray-700 text-sm"},ale={class:"mr-2"},rle={class:"mr-2"},lle={class:"mr-2"},ile={class:"mr-2"},nle={class:"mt-auto flex w-full space-x-2"},dle={class:"flex items-center justify-center w-1/2 space-x-2 p-2"},cle=["onClick"],ule=["onUpdate:modelValue"],ple=["onClick"],hle={class:"w-1/2 p-2 flex justify-end"},gle=["onClick"];function mle(e,t,s,r,i,n){return(0,a.uX)(),(0,a.CE)(a.FK,null,[i.showSuccessToast?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[10]||(t[10]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[9]||(t[9]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),i.showFailToast?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,l.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[12]||(t[12]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[11]||(t[11]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),i.showErrorToast?((0,a.uX)(),(0,a.CE)("div",{key:2,class:(0,l.C4)(["fixed top-4 right-8 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[14]||(t[14]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,l.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[13]||(t[13]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2)):(0,a.Q3)("",!0),t[28]||(t[28]=(0,a.Lk)("h1",{class:"mt-4 font-bold text-custom-orange text-2xl mb-4 text-center"},"Premium Health",-1)),(0,a.Lk)("div",Ire,[(0,a.Lk)("div",Ure,[(0,a.Lk)("div",$re,[(0,a.Lk)("div",Bre,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>n.changeDate(-1)),class:"flex items-center"},t[15]||(t[15]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[16]||(t[16]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[5]||(t[5]=e=>n.changeDate(1)),class:"flex items-center"},t[17]||(t[17]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{type:"date",id:"menuDate","onUpdate:modelValue":t[6]||(t[6]=e=>i.selectedDate=e),class:"p-2 border rounded-md w-auto",onChange:t[7]||(t[7]=(...e)=>n.fetchMenusForSelectedDate&&n.fetchMenusForSelectedDate(...e))},null,544),[[o.Jo,i.selectedDate]])])]),t[18]||(t[18]=(0,a.Lk)("h1",{class:"font-bold text-xl mb-4"},"ฟิลเตอร์เมนู",-1)),(0,a.Lk)("div",Wre,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=e=>i.selectedMealType=""),class:(0,l.C4)(["w-full text-left py-2 hover:text-custom-orange",""===i.selectedMealType?"text-custom-orange font-bold":"text-gray-600"])}," ทุกประเภท ",2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMealTypes,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e.id,onClick:t=>i.selectedMealType=e.id,class:(0,l.C4)(["w-full py-2 text-left hover:text-custom-orange",i.selectedMealType===e.id?"text-custom-orange font-bold":"text-gray-600"])},(0,l.v_)(e.name),11,qre)))),128))])]),(0,a.Lk)("div",Zre,[(0,a.Lk)("h1",jre,"รายการอาหารประจำวันที่ "+(0,l.v_)(n.formatDate(i.selectedDate))+" ("+(0,l.v_)(n.formatDateEng(i.selectedDate))+")",1),0===i.todayMenus.length?((0,a.uX)(),(0,a.CE)("div",Jre,t[19]||(t[19]=[(0,a.Lk)("strong",{class:"text-2xl"},"ไม่มีเมนู",-1)]))):(0,a.Q3)("",!0),(0,a.Lk)("div",Kre,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMenus,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"p-4 border rounded-lg shadow-md bg-white flex flex-col h-full mb-6"},[(0,a.Lk)("div",Hre,[n.getMenuImage(e.menu_id)?((0,a.uX)(),(0,a.CE)("img",{key:0,src:`http://127.0.0.1:3333/images/${n.getMenuImage(e.menu_id)}`,alt:"Menu Image",class:"min-h-48 max-h-48 w-full object-cover rounded"},null,8,Yre)):((0,a.uX)(),(0,a.CE)("div",Gre,t[20]||(t[20]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-4xl text-gray-500"}," hide_image ",-1)])))]),(0,a.Lk)("span",ele,(0,l.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("span",tle,(0,l.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("span",sle,(0,l.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("div",ole,[(0,a.Lk)("span",ale,(0,l.v_)(n.getMenuCal(e.menu_id))+" Cal",1),(0,a.Lk)("span",rle,[t[21]||(t[21]=(0,a.eW)("|")),t[22]||(t[22]=(0,a.Lk)("strong",null," Protein: ",-1)),(0,a.eW)(" "+(0,l.v_)(n.getMenuProtein(e.menu_id))+" g",1)]),(0,a.Lk)("span",lle,[t[23]||(t[23]=(0,a.eW)("|")),t[24]||(t[24]=(0,a.Lk)("strong",null," Carbohydrate: ",-1)),(0,a.eW)((0,l.v_)(n.getMenuCarb(e.menu_id))+" g",1)]),(0,a.Lk)("span",ile,[t[25]||(t[25]=(0,a.eW)("|")),t[26]||(t[26]=(0,a.Lk)("strong",null," Fat: ",-1)),(0,a.eW)((0,l.v_)(n.getMenuFat(e.menu_id))+" g",1)])]),(0,a.Lk)("div",nle,[(0,a.Lk)("div",dle,[(0,a.Lk)("button",{onClick:t=>n.adjustQuantity(e,-1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"-",8,cle),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,min:"0",placeholder:"จำนวน",class:"p-2 border rounded-md w-16 text-center input-no-spinner"},null,8,ule),[[o.Jo,e.quantity,void 0,{number:!0}]]),(0,a.Lk)("button",{onClick:t=>n.adjustQuantity(e,1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"+",8,ple)]),(0,a.Lk)("div",hle,[(0,a.Lk)("button",{onClick:t=>n.orderMenu(e),class:"px-4 py-2 w-full bg-custom-orange text-white rounded-md hover:bg-custom-orange-hover transition flex items-center space-x-2 justify-center"},t[27]||(t[27]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," shopping_cart ",-1),(0,a.Lk)("span",null,"สั่งซื้อ",-1)]),8,gle)])])])))),128))])])])],64)}var yle={data(){return{menus:[],todayMenus:[],meal_types:[],selectedDate:this.getTodayDate(),selectedMealType:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{filteredMenus(){return 0===this.todayMenus.length?[]:this.selectedMealType?this.todayMenus.filter((e=>this.getMealTypeID(e.menu_id)===this.selectedMealType)):this.todayMenus},filteredMealTypes(){const e=new Set(this.todayMenus.map((e=>this.getMealTypeID(e.menu_id))));return this.meal_types.filter((t=>e.has(t.id)))}},methods:{getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusForSelectedDate()},setToday(){this.selectedDate=this.getTodayDate(),this.fetchMenusForSelectedDate()},async fetchMenusForSelectedDate(){try{const e=await ke.A.get(`http://127.0.0.1:3333/setup-menu-fl/menus-by-day/${this.selectedDate}`);console.log("API Response:",e.data),e.data.menus&&e.data.menus.length>0?(this.todayMenus=e.data.menus,this.todayMenus.forEach((e=>{e.quantity=0})),console.log("Date",this.selectedDate)):this.todayMenus=[]}catch(e){this.todayMenus=[]}},async fetchLookupData(){try{const[e,t]=await Promise.all([ke.A.get("http://127.0.0.1:3333/menus"),ke.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},getMenuCal(e){const t=this.menus.find((t=>t.id===e));return t?t.cal:null},getMenuProtein(e){const t=this.menus.find((t=>t.id===e));return t?t.protein:null},getMenuFat(e){const t=this.menus.find((t=>t.id===e));return t?t.fat:null},getMenuCarb(e){const t=this.menus.find((t=>t.id===e));return t?t.carb:null},getMenuImage(e){const t=this.menus.find((t=>t.id===e));return t?t.image:null},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],r=s.getFullYear();return`${o} ${a} ${r}`},formatDateEng(e){const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e).toLocaleDateString("en-US",t);return s},orderMenu(e){if(e.quantity&&e.quantity>0){const t=e.meal_type_id;ke.A.post("http://127.0.0.1:3333/order",{menu_id:e.menu_id,quantity:e.quantity,order_date:this.selectedDate,meal_type_id:t}).then((()=>{this.showSuccessToastNotification("Order successful!"),e.quantity=0})).catch((()=>{this.showErrorToastNotification("Please register before placing an order!!")}))}else this.showErrorToastNotification("Please specify the quantity!")},adjustQuantity(e,t){const s=e.quantity+t;s>=0&&(e.quantity=s)},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},mounted(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},watch:{selectedDate(){this.fetchMenusForSelectedDate()}}};const kle=(0,_e.A)(yle,[["render",mle],["__scopeId","data-v-5af14edf"]]);var fle=kle;const ble=[{path:"/login",name:"login",component:it,meta:{title:"เข้าสู่ระบบ - Absolute FitFood",layout:"BlankLayout"}},{path:"/register",name:"register",component:ft,meta:{title:"สมัครสมาชิก - Absolute FitFood",layout:"BlankLayout"}},{path:"/profile",name:"profile",component:Ls,meta:{title:"Profile - Absolute FitFood",layout:"SimpleLayout"}},{path:"/register-aff",name:"register-aff",component:Ws,meta:{title:"สมัครสมาชิก AFF - Absolute FitFood",layout:"SimpleLayout"}},{path:"/register-hhb",name:"register-hhb",component:co,meta:{title:"สมัครสมาชิก HHB - Absolute FitFood",layout:"SimpleLayout"}},{path:"/order-history-user/:customerId",name:"ประวัติการสั่งซื้อ User",component:Ro,meta:{title:"ประวัติการสั่งซื้อ - Absolute FitFood",layout:"SimpleLayout"}},{path:"/order-history-hhb-user/:customerId",name:"ประวัติการสั่งซื้อ User HHB",component:Zo,meta:{title:"ประวัติการสั่งซื้อ - Absolute FitFood",layout:"SimpleLayout"}},{path:"/users",name:"ข้อมูลผู้ใช้งาน",component:Qa,meta:{title:"ข้อมูลผู้ใช้งาน  - Absolute FitFood"}},{path:"/master",name:"Home",component:tl,meta:{title:"หน้าแรก - Absolute FitFood"}},{path:"/master-hhb",name:"Home HHB",component:yi,meta:{title:"หน้าแรก - Absolute FitFood"}},{path:"/customers",name:"ข้อมูลลูกค้า",component:oM,meta:{title:"ข้อมูลลูกค้า - Absolute FitFood",requiresAdmin:!0}},{path:"/customers-hhb",name:"ข้อมูลลูกค้าHHB",component:GA,meta:{title:"ข้อมูลลูกค้า - Absolute FitFood"}},{path:"/sale-records",name:"บันทึกการขาย",component:_p,meta:{title:"บันทึกการขาย - Absolute FitFood"}},{path:"/sale-records-additional",name:"บันทึกการขาย Additional",component:hk,meta:{title:"บันทึกการขาย - Absolute FitFood"}},{path:"/sale-records-hhb",name:"บันทึกการขาย HHB",component:kw,meta:{title:"บันทึกการขาย - Absolute FitFood"}},{path:"/sale-records-additional-hhb",name:"บันทึกการขาย Additional HHB",component:dC,meta:{title:"บันทึกการขาย - Absolute FitFood"}},{path:"/daily-sale",name:"ยอดขายประจำวัน",component:DS,meta:{title:"ยอดขายประจำวัน - Absolute FitFood"}},{path:"/daily-sale-hhb",name:"ยอดขายประจำวัน HHB",component:IR,meta:{title:"ยอดขายประจำวัน Happy Healthy Box - Absolute FitFood"}},{path:"/setup-menu-ph",name:"Setup Menu Premium Health",component:Zj,meta:{title:"Setup Menu Premium Health - Absolute FitFood"}},{path:"/setup-menu-hhb",name:"Setup Menu Happy Healthy Box",component:cK,meta:{title:"Setup Menu Happy Healthy Box - Absolute FitFood"}},{path:"/setup-menu-lc",name:"Setup Menu Low Carb",component:CH,meta:{title:"Setup Menu Low Carb - Absolute FitFood"}},{path:"/setup-menu-fl",name:"Setup Menu Fat Loss",component:BY,meta:{title:"Setup Menu Fat Loss - Absolute FitFood",requiresAdmin:!0}},{path:"/setup-menu-bpd",name:"Setup Menu โรคความดัน",component:i0,meta:{title:"Setup Menu โรคความดัน - Absolute FitFood"}},{path:"/setup-menu-diabete",name:"Setup Menu โรคเบาหวาน",component:I2,meta:{title:"Setup Menu โรคเบาหวาน - Absolute FitFood"}},{path:"/setup-menu-fat-disease",name:"Setup Menu โรคไขมัน",component:L1,meta:{title:"Setup Menu โรคไขมัน - Absolute FitFood"}},{path:"/result-orders",name:"รายการอาหารประจำวันของลูกค้า",component:V3,meta:{title:"รายการอาหารประจำวันของลูกค้า - Absolute FitFood"}},{path:"/result-orders-hhb",name:"รายการอาหารประจำวันของลูกค้า HHB",component:T4,meta:{title:"รายการอาหารประจำวันของลูกค้า - Absolute FitFood"}},{path:"/remaining-packages",name:"แพ็คเกจคงเหลือของลูกค้า",component:A8,meta:{title:"แพ็คเกจคงเหลือของลูกค้า - Absolute FitFood"}},{path:"/order-history/:customerId",name:"ประวัติการสั่งซื้อ",component:G8,meta:{title:"ประวัติการสั่งซื้อ - Absolute FitFood"}},{path:"/remaining-packages-hhb",name:"แพ็คเกจคงเหลือของลูกค้า HHB",component:P9,meta:{title:"แพ็คเกจคงเหลือของลูกค้า - Absolute FitFood"}},{path:"/order-history-hhb/:customerId",name:"ประวัติการสั่งซื้อ HHB",component:B9,meta:{title:"ประวัติการสั่งซื้อ - Absolute FitFood"}},{path:"/kitchen-orders",name:"Kitchen Orders",component:b5,meta:{title:"Kitchen Orders - Absolute FitFood"}},{path:"/kitchen-orders-hhb",name:"Kitchen Orders HHB",component:n7,meta:{title:"Kitchen Orders - Absolute FitFood"}},{path:"/delivery",name:"การจัดส่งอาหารประจำวัน",component:Yee,meta:{title:"การจัดส่งอาหารประจำวัน - Absolute FitFood"}},{path:"/delivery-hhb",name:"การจัดส่งอาหารประจำวัน HHB",component:Yoe,meta:{title:"การจัดส่งอาหารประจำวัน - Absolute FitFood"}},{path:"/test",name:"test",component:rz,meta:{title:"test - Absolute FitFood"}},{path:"/test2",name:"test2",component:Nz,meta:{title:"test2 - Absolute FitFood",layout:"SimpleLayout"}},{path:"/test3",name:"test3",component:Iz,meta:{title:"test3 - Absolute FitFood",layout:"SimpleLayout"}},{path:"/promotion-types",name:"ข้อมูลประเภทโปรโมชั่น",component:jO,meta:{title:"Promotion Types - Absolute FitFood"}},{path:"/programs",name:"ข้อมูลโปรแกรม",component:HN,meta:{title:"ข้อมูลโปรแกรม - Absolute FitFood"}},{path:"/packages",name:"ข้อมูลแพ็คเกจ",component:tQ,meta:{title:"ข้อมูลแพ็คเกจ - Absolute FitFood"}},{path:"/package-types",name:"ข้อมูลประเภทแพ็คเกจ",component:KQ,meta:{title:"ข้อมูลประเภทแพ็คเกจ - Absolute FitFood"}},{path:"/additional-types",name:"ข้อมูล Sales Type (Additional Sales)",component:WI,meta:{title:"ข้อมูล Sales Type (Additional Sales) - Absolute FitFood"}},{path:"/zone-delivery-types",name:"ข้อมูลประเภทโซนการจัดส่ง",component:QU,meta:{title:"ข้อมูลประเภทโซนการจัดส่ง - Absolute FitFood"}},{path:"/zone-deliveries",name:"ข้อมูลโซนการจัดส่ง",component:H$,meta:{title:"ข้อมูลโซนการจัดส่ง - Absolute FitFood"}},{path:"/menu-types",name:"ข้อมูลโปรแกรมเมนู",component:qB,meta:{title:"ข้อมูลโปรแกรมเมนู - Absolute FitFood"}},{path:"/meal-types",name:"ข้อมูลประเภทเมนู",component:jW,meta:{title:"ข้อมูลประเภทเมนู - Absolute FitFood"}},{path:"/menus",name:"ข้อมูลเมนู",component:TZ,meta:{title:"ข้อมูลเมนู - Absolute FitFood"}},{path:"/premium-health",name:"premium health",component:Tae,alias:"/",meta:{title:"premium health - Absolute FitFood",layout:"SimpleLayout"}},{path:"/happy-healthy-box",name:"happy healthy box",component:nre,meta:{title:"happy healthy box - Absolute FitFood",layout:"SimpleLayout"}},{path:"/low-carb",name:"low carb",component:Qre,meta:{title:"Low Carb - Absolute FitFood",layout:"SimpleLayout"}},{path:"/fat-loss",name:"fat loss",component:fle,meta:{title:"Fat Loss - Absolute FitFood",layout:"SimpleLayout"}}],xle=(0,Ke.aE)({history:(0,Ke.LA)(),routes:ble});xle.beforeEach(((e,t,s)=>{e.meta.title&&(document.title=e.meta.title);const o=Je.getters.getUserRole;if(console.log("Current user role:",o),e.meta.requiresAdmin&&"admin"!==o)return s({name:"login"});s()}));var _le=xle;const wle=(0,o.Ef)(qe);wle.use(Je),wle.use(_le),wle.mount("#app")}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,r){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],r=e[c][2];for(var i=!0,n=0;n<o.length;n++)(!1&r||l>=r)&&Object.keys(s.O).every((function(e){return s.O[e](o[n])}))?o.splice(n--,1):(i=!1,r<l&&(l=r));if(i){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,a,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,l=o[0],i=o[1],n=o[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(n)var c=n(s)}for(t&&t(o);d<l.length;d++)r=l[d],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(c)},o=self["webpackChunkfitfood_frontend"]=self["webpackChunkfitfood_frontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(2693)}));o=s.O(o)})();
//# sourceMappingURL=app.7ba42ae8.js.map