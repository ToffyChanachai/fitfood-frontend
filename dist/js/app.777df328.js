(function(){"use strict";var e={5786:function(e,t,s){var o=s(5130),a=s(6768);function l(e,t,s,o,l,r){const i=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",null,[((0,a.uX)(),(0,a.Wv)((0,a.$y)(r.layoutComponent),null,{default:(0,a.k6)((()=>[(0,a.bF)(i)])),_:1}))])}var r=s(4232),i=s.p+"img/fitfood_logo.489e1b18.png";const n={class:"flex h-screen"},d={class:"p-4 flex justify-between items-center"},c={class:"flex items-center space-x-2"},u={key:0,src:i,alt:"Logo",class:"w-10 h-10 rounded-full shadow-md"},p={key:1,class:"text-black text-[16px] font-bold"},g={key:2,class:"text-[16px] font-bold"},h={key:0,class:"material-symbols-outlined text-3xl"},m={key:1,class:"material-symbols-outlined text-3xl"},y={class:"flex-1 font-bold"},k={class:"hover:bg-custom-orange-hover"},b={key:0},x={class:"hover:bg-custom-orange-hover"},f={key:0},_={class:"hover:bg-custom-orange-hover"},v={key:0},w={class:"hover:bg-custom-orange-hover"},L={key:0},P={class:"hover:bg-custom-orange-hover"},C={key:0},D={class:"hover:bg-custom-orange-hover"},T={key:0},M={key:0,class:"relative"},S={class:"space-y-2 px-4 font-normal"},E={class:"hover:bg-custom-orange-hover"},R={key:0},A={class:"hover:bg-custom-orange-hover"},z={key:0},F={class:"hover:bg-custom-orange-hover"},X={key:0},O={class:"flex-1 p-4 bg-gray-100 relative"},Q={class:"bg-white p-4 shadow-md fixed top-0 left-0 right-0 z-10 flex justify-between items-center flex-shrink-0"},V={class:"flex items-center space-x-3"},N={class:"material-symbols-outlined text-gray-600 text-3xl"},j={class:"text-xl text-gray-600 font-bold"},U={key:0,class:"pt-16 p-4 flex items-left space-x-6 text-m font-bold"},I={key:1,class:"pt-16 p-4 flex items-left space-x-6 text-m font-bold"},$={key:2,class:"pt-16 p-4 flex items-left space-x-6 text-m font-bold"},Z={key:3,class:"pt-16 p-4 flex items-left space-x-6 text-m font-bold"},q={class:"pt-16"};function J(e,t,s,l,i,J){const W=(0,a.g2)("router-link"),B=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("aside",{style:(0,r.Tr)({width:i.isExpanded?"300px":"64px"}),class:"bg-custom-orange text-white flex flex-col transition-all duration-300"},[(0,a.Lk)("div",d,[(0,a.Lk)("div",c,[i.isExpanded?((0,a.uX)(),(0,a.CE)("img",u)):(0,a.Q3)("",!0),i.isExpanded?((0,a.uX)(),(0,a.CE)("h2",p,"ABSOLUTE")):(0,a.Q3)("",!0),i.isExpanded?((0,a.uX)(),(0,a.CE)("h2",g,"FITFOOD")):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>J.toggleSidebar&&J.toggleSidebar(...e)),class:"text-white focus:outline-none"},[i.isExpanded?((0,a.uX)(),(0,a.CE)("span",h,"menu_open")):((0,a.uX)(),(0,a.CE)("span",m,"menu"))])]),(0,a.Lk)("nav",y,[(0,a.Lk)("ul",null,[(0,a.Lk)("li",k,[(0,a.bF)(W,{to:"/",class:"block py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[2]||(t[2]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"home",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",b,"หน้าแรก")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",x,[(0,a.bF)(W,{to:"/customers",class:"block py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[3]||(t[3]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"groups",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",f,"ข้อมูลลูกค้า")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",_,[(0,a.bF)(W,{to:"/sale-records",class:"block py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[4]||(t[4]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"contact_page",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",v,"บันทึกการขาย")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",w,[(0,a.bF)(W,{to:"/daily-sale",class:"block py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[5]||(t[5]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"calendar_month",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",L,"ยอดขายประจำวัน")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",P,[(0,a.bF)(W,{to:"/setup-menu-ph",class:"block py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[6]||(t[6]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"menu_book",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",C,"Setup Menu Premium Health")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",D,[(0,a.bF)(W,{to:"/test",class:"block py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[t[7]||(t[7]=(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"fullscreen",-1)),i.isExpanded?((0,a.uX)(),(0,a.CE)("span",T,"test")):(0,a.Q3)("",!0)])),_:1})]),i.isExpanded?((0,a.uX)(),(0,a.CE)("li",M,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>J.toggleSubMenu&&J.toggleSubMenu(...e)),class:"block py-2 px-4 flex items-center space-x-2 w-full text-left"},t[8]||(t[8]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"folder",-1),(0,a.Lk)("span",null,"ข้อมูลทั้งหมด",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"},"expand_more",-1)])),(0,a.bo)((0,a.Lk)("ul",S,[(0,a.Lk)("li",E,[(0,a.bF)(W,{to:"/packages",class:"block py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[i.isExpanded?((0,a.uX)(),(0,a.CE)("span",R,"ข้อมูลแพ็คเกจ")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",A,[(0,a.bF)(W,{to:"/zone-deliveries",class:"block py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[i.isExpanded?((0,a.uX)(),(0,a.CE)("span",z,"ข้อมูลโซนการจัดส่ง")):(0,a.Q3)("",!0)])),_:1})]),(0,a.Lk)("li",F,[(0,a.bF)(W,{to:"/menus",class:"block py-2 px-4 flex items-center space-x-2"},{default:(0,a.k6)((()=>[i.isExpanded?((0,a.uX)(),(0,a.CE)("span",X,"ข้อมูลเมนู")):(0,a.Q3)("",!0)])),_:1})])],512),[[o.aG,i.isSubMenuOpen]])])):(0,a.Q3)("",!0)])])],4),(0,a.Lk)("main",O,[(0,a.Lk)("header",Q,[(0,a.Lk)("div",V,[(0,a.Lk)("span",N,(0,r.v_)(i.pageIcon),1),(0,a.Lk)("h1",j,(0,r.v_)(i.pageTitle),1)])]),"/customers"===e.$route.path||"/customers-hhb"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",U,[(0,a.bF)(W,{to:"customers",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/customers"===e.$route.path}])},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.eW)(" ข้อมูลลูกค้า AFF ")]))),_:1},8,["class"]),(0,a.bF)(W,{to:"/customers-hhb",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/customers-hhb"===e.$route.path}])},{default:(0,a.k6)((()=>t[10]||(t[10]=[(0,a.eW)(" ข้อมูลลูกค้า HHB ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/packages"===e.$route.path||"/programs"===e.$route.path||"/promotion-types"===e.$route.path||"/package-types"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",I,[(0,a.bF)(W,{to:"packages",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/packages"===e.$route.path}])},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.eW)(" ข้อมูลแพ็คเกจ ")]))),_:1},8,["class"]),(0,a.bF)(W,{to:"/programs",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/programs"===e.$route.path}])},{default:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.eW)(" ข้อมูลโปรแกรม ")]))),_:1},8,["class"]),(0,a.bF)(W,{to:"/promotion-types",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/promotion-types"===e.$route.path}])},{default:(0,a.k6)((()=>t[13]||(t[13]=[(0,a.eW)(" ข้อมูลประเภทโปรโมชัน ")]))),_:1},8,["class"]),(0,a.bF)(W,{to:"/package-types",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/package-types"===e.$route.path}])},{default:(0,a.k6)((()=>t[14]||(t[14]=[(0,a.eW)(" ข้อมูลประเภทแพ็คเกจ ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/zone-deliveries"===e.$route.path||"/zone-delivery-types"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",$,[(0,a.bF)(W,{to:"/zone-deliveries",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/zone-deliveries"===e.$route.path}])},{default:(0,a.k6)((()=>t[15]||(t[15]=[(0,a.eW)(" ข้อมูลโซนการจัดส่ง ")]))),_:1},8,["class"]),(0,a.bF)(W,{to:"/zone-delivery-types",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/zone-delivery-types"===e.$route.path}])},{default:(0,a.k6)((()=>t[16]||(t[16]=[(0,a.eW)(" ข้อมูลประเภทโซนการจัดส่ง ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),"/menus"===e.$route.path||"/meal-types"===e.$route.path||"/menu-types"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",Z,[(0,a.bF)(W,{to:"menus",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/menus"===e.$route.path}])},{default:(0,a.k6)((()=>t[17]||(t[17]=[(0,a.eW)(" ข้อมูลเมนู ")]))),_:1},8,["class"]),(0,a.bF)(W,{to:"/meal-types",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/meal-types"===e.$route.path}])},{default:(0,a.k6)((()=>t[18]||(t[18]=[(0,a.eW)(" ข้อมูลประเภทเมนู ")]))),_:1},8,["class"]),(0,a.bF)(W,{to:"/menu-types",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/menu-types"===e.$route.path}])},{default:(0,a.k6)((()=>t[19]||(t[19]=[(0,a.eW)(" ข้อมูลประเภทโปรแกรมเมนู ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),(0,a.Lk)("div",q,[(0,a.bF)(B)])])])}var W={name:"MainLayout",data(){return{isExpanded:!1,pageTitle:"",pageIcon:"",isSubMenuOpen:!1}},methods:{toggleSidebar(){this.isExpanded=!this.isExpanded},toggleSubMenu(){this.isSubMenuOpen=!this.isSubMenuOpen},setPageIcon(e){switch(e){case"Home":this.pageIcon="home";break;case"ข้อมูลลูกค้า":this.pageIcon="groups";break;case"ข้อมูลลูกค้าHHB":this.pageIcon="groups",this.pageTitle="ข้อมูลลูกค้า";break;case"บันทึกการขาย":this.pageIcon="contact_page";break;case"ยอดขายประจำวัน":this.pageIcon="calendar_month";break;case"Setup Menu Premium Health":this.pageIcon="menu_book";break;default:this.pageIcon=""}}},watch:{$route(e){e.name&&(this.pageTitle=e.name,this.setPageIcon(e.name))}},created(){this.$route.name&&(this.pageTitle=this.$route.name,this.setPageIcon(this.$route.name))}},B=s(1241);const K=(0,B.A)(W,[["render",J],["__scopeId","data-v-657b6118"]]);var Y=K;s(4114);const H={class:"flex justify-between items-center p-4 px-32 bg-white text-white shadow-lg"},G={key:0,class:"flex items-center space-x-4"},ee={class:"relative flex items-center space-x-4"},te={class:"text-black"},se={class:"text-custom-orange"},oe={class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border"},ae={class:"list-none p-0 m-0"},le={key:1,class:"flex items-center space-x-2"},re={class:"flex-1 p-4 px-32 bg-gray-100 h-screen relative"};function ie(e,t,s,l,n,d){const c=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("header",H,[(0,a.Lk)("div",{class:"flex justify-center items-center cursor-pointer",onClick:t[0]||(t[0]=(...e)=>d.goToTest2&&d.goToTest2(...e))},t[6]||(t[6]=[(0,a.Lk)("img",{src:i,alt:"Logo",class:"w-12 h-12"},null,-1),(0,a.Lk)("div",{class:"leading-none ml-2"},[(0,a.Lk)("p",{class:"text-lg font-bold text-black"},"ABSOLUTE"),(0,a.Lk)("p",{class:"text-lg font-bold text-custom-orange -mt-3"},"FITFOOD")],-1)])),n.isLoggedIn?((0,a.uX)(),(0,a.CE)("div",G,[(0,a.Lk)("div",ee,[n.isUserRegistered?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("span",{key:0,class:"cursor-pointer text-custom-orange font-bold",onClick:t[1]||(t[1]=t=>e.$router.push("/register-aff"))}," Register Aff ")),(0,a.Lk)("span",{onClick:t[2]||(t[2]=(...e)=>d.toggleMenu&&d.toggleMenu(...e)),class:"cursor-pointer flex items-center space-x-2"},[(0,a.Lk)("span",te,[t[7]||(t[7]=(0,a.eW)("Welcome, ")),(0,a.Lk)("strong",se,(0,r.v_)(n.username),1)]),(0,a.Lk)("span",{class:(0,r.C4)([{"rotate-180":n.isMenuOpen},"material-symbols-outlined text-black transition-transform duration-300"])}," arrow_drop_down ",2)]),(0,a.bo)((0,a.Lk)("div",oe,[(0,a.Lk)("ul",ae,[(0,a.Lk)("li",{class:"px-4 py-3 cursor-pointer hover:bg-gray-100 hover:text-custom-orange hover:font-bold hover:rounded-t-md border-b flex items-center justify-between",onClick:t[3]||(t[3]=(...e)=>d.goToProfile&&d.goToProfile(...e))},t[8]||(t[8]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," person ",-1),(0,a.Lk)("span",null,"Profile",-1)])),(0,a.Lk)("li",{class:"px-4 py-3 cursor-pointer hover:bg-gray-100 hover:text-red-500 hover:font-bold hover:rounded-b-md border-b flex items-center justify-between",onClick:t[4]||(t[4]=(...e)=>d.logout&&d.logout(...e))},t[9]||(t[9]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," logout ",-1),(0,a.Lk)("span",null,"Logout",-1)]))])],512),[[o.aG,n.isMenuOpen]])])])):((0,a.uX)(),(0,a.CE)("div",le,[(0,a.Lk)("span",{class:"text-black cursor-pointer flex items-center space-x-2 font-bold hover:text-custom-orange-hover",onClick:t[5]||(t[5]=(...e)=>d.goToLogin&&d.goToLogin(...e))},t[10]||(t[10]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," account_circle ",-1),(0,a.Lk)("span",null,"Login",-1)]))]))]),(0,a.Lk)("main",re,[(0,a.bF)(c)])])}var ne=s(4373);const de="http://127.0.0.1:3333";ne.A.defaults.withCredentials=!0;var ce={async register(e,t,s,o,a){try{const l=await ne.A.post(`${de}/register`,{firstname:e,lastname:t,username:s,email:o,password:a});return l.data}catch(l){throw l.response.data}},async login(e,t){try{const s=await ne.A.post(`${de}/login`,{identifier:e,password:t}),o=s.data.token;if(!o)throw new Error("Token is undefined or invalid");return localStorage.setItem("token",o),ne.A.defaults.headers.common["Authorization"]=`Bearer ${o}`,s.data}catch(s){throw console.error("Login error:",s),s.response?s.response.data:s.message}},async logout(){try{return localStorage.removeItem("token"),delete ne.A.defaults.headers.common["Authorization"],!0}catch(e){throw e.response?e.response.data:e.message}},async getProfile(){try{const e=localStorage.getItem("token");if(!e)throw new Error("No token found");console.log("Sending token:",e),ne.A.defaults.headers.common["Authorization"]=`Bearer ${e}`;const t=await ne.A.get(`${de}/profile`);return t.data}catch(e){throw console.error("Error fetching profile:",e.response?e.response.data:e.message),e.response?e.response.data:e.message}},async changePassword(e,t){try{const s=await ne.A.put(`${de}/users/update-password`,{oldPassword:e,newPassword:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return s.data}catch(s){throw console.error("Error changing password:",s.response?s.response.data:s.message),s.response?s.response.data:s.message}}},ue={data(){return{username:"",isLoggedIn:!1,isMenuOpen:!1,isUserRegistered:!1}},created(){this.checkLoginStatus()},methods:{checkLoginStatus(){const e=localStorage.getItem("token");e&&(this.isLoggedIn=!0,this.getUserProfile())},async getUserProfile(){try{const e=await ce.getProfile();this.username=e.username}catch(e){console.log("Error fetching profile:",e)}},goToLogin(){this.$router.push("/login")},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},goToTest2(){this.$router.push("/test2")},goToProfile(){this.$router.push("/profile")},logout(){localStorage.removeItem("token"),this.isLoggedIn=!1,this.username="",this.$router.push("/test2")}},async mounted(){try{const e=await ne.A.get("http://127.0.0.1:3333/check-user-registration");e.data.isRegistered&&(this.isUserRegistered=!0)}catch(e){console.error("Error checking user registration",e)}},watch:{$route(){this.checkLoginStatus()}}};const pe=(0,B.A)(ue,[["render",ie]]);var ge=pe;function he(e,t,s,o,l,r){const i=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(i)])}var me={name:"BlankLayout"};const ye=(0,B.A)(me,[["render",he],["__scopeId","data-v-28df8f6e"]]);var ke=ye,be={computed:{layoutComponent(){return"BlankLayout"===this.$route.meta.layout?ke:"SimpleLayout"===this.$route.meta.layout?ge:Y}}};const xe=(0,B.A)(be,[["render",l]]);var fe=xe,_e=s(1387);const ve={class:"flex items-center justify-center min-h-screen fixed inset-0 bg-gradient-to-r from-custom-orange to-custom-orange-hover"},we={class:"flex flex-col items-center"},Le={class:"bg-white bg-opacity-60 backdrop-blur-md w-full max-w-md p-8 rounded-b-lg shadow-lg border"},Pe={key:0,class:"mb-4 text-red-500 text-center font-bold"},Ce={class:"flex items-center justify-between"},De={class:"flex items-center"},Te={class:"mt-4 text-center text-gray-700"};function Me(e,t,s,l,n,d){return(0,a.uX)(),(0,a.CE)("div",ve,[(0,a.Lk)("div",we,[t[9]||(t[9]=(0,a.Fv)('<div class="w-full max-w-md bg-white px-4 py-3 rounded-t-lg shadow-lg flex justify-center items-center relative"><img src="'+i+'" alt="Logo" class="w-12 h-12"><div class="leading-none ml-2"><p class="text-lg font-bold">ABSOLUTE</p><p class="text-lg font-bold text-custom-orange -mt-3">FITFOOD</p></div></div>',1)),(0,a.Lk)("div",Le,[t[8]||(t[8]=(0,a.Lk)("h2",{class:"text-2xl font-bold text-center text-gray-700 mb-4"},"Login",-1)),n.error?((0,a.uX)(),(0,a.CE)("p",Pe,(0,r.v_)(n.error),1)):(0,a.Q3)("",!0),(0,a.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>d.login&&d.login(...e)),["prevent"])),class:"space-y-4"},[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.identifier=e),placeholder:"Email or Username",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.identifier]]),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),placeholder:"Password",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.password]]),(0,a.Lk)("div",Ce,[(0,a.Lk)("div",De,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox",id:"rememberMe","onUpdate:modelValue":t[2]||(t[2]=e=>n.rememberMe=e),class:"w-4 h-4 accent-custom-orange focus:ring-0"},null,512),[[o.lH,n.rememberMe]]),t[5]||(t[5]=(0,a.Lk)("label",{for:"rememberMe",class:"ml-2 text-gray-700 text-sm"},"Remember Me",-1))])]),t[6]||(t[6]=(0,a.Lk)("button",{type:"submit",class:"w-full bg-custom-orange text-white py-2 rounded-md hover:bg-custom-orange-hover transition"}," Login ",-1))],32),(0,a.Lk)("p",Te,[t[7]||(t[7]=(0,a.eW)(" Don't have an account? ")),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>d.goToRegister&&d.goToRegister(...e)),class:"text-custom-orange hover:underline font-bold"}," Register ")])])])])}var Se={data(){return{identifier:localStorage.getItem("rememberedIdentifier")||"",password:localStorage.getItem("rememberedPassword")||"",rememberMe:"true"===localStorage.getItem("rememberMe"),error:null}},methods:{async login(){try{await ce.login(this.identifier,this.password),this.rememberMe?(localStorage.setItem("rememberedIdentifier",this.identifier),localStorage.setItem("rememberedPassword",this.password),localStorage.setItem("rememberMe","true")):(localStorage.removeItem("rememberedIdentifier"),localStorage.removeItem("rememberedPassword"),localStorage.removeItem("rememberMe")),this.$router.push("/test2")}catch(e){this.error="Login failed"}},goToRegister(){this.$router.push("/register")}}};const Ee=(0,B.A)(Se,[["render",Me]]);var Re=Ee;const Ae={class:"flex items-center justify-center min-h-screen fixed inset-0 bg-gradient-to-r from-custom-orange to-custom-orange-hover"},ze={class:"flex flex-col items-center"},Fe={class:"bg-white bg-opacity-60 backdrop-blur-md w-full max-w-md p-8 rounded-b-lg shadow-lg border"},Xe={key:0,class:"mb-4 text-green-500 text-center font-bold"},Oe={key:1,class:"mb-4 text-red-500 text-center font-bold"},Qe={class:"flex space-x-4"},Ve={class:"text-center text-gray-600 mt-4"};function Ne(e,t,s,l,n,d){const c=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",Ae,[(0,a.Lk)("div",ze,[t[11]||(t[11]=(0,a.Fv)('<div class="w-full max-w-md bg-white px-4 py-3 rounded-t-lg shadow-lg flex justify-center items-center"><img src="'+i+'" alt="Logo" class="w-12 h-12"><div class="leading-none ml-2"><p class="text-lg font-bold">ABSOLUTE</p><p class="text-lg font-bold text-custom-orange -mt-3">FITFOOD</p></div></div>',1)),(0,a.Lk)("div",Fe,[t[10]||(t[10]=(0,a.Lk)("h2",{class:"text-2xl font-bold text-center text-gray-700 mb-4"},"Register",-1)),n.success?((0,a.uX)(),(0,a.CE)("p",Xe,(0,r.v_)(n.success),1)):(0,a.Q3)("",!0),!n.success&&n.error?((0,a.uX)(),(0,a.CE)("p",Oe,(0,r.v_)(n.error),1)):(0,a.Q3)("",!0),(0,a.Lk)("form",{onSubmit:t[6]||(t[6]=(0,o.D$)(((...e)=>d.register&&d.register(...e)),["prevent"])),class:"space-y-4"},[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),placeholder:"Username",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.username]]),(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),placeholder:"Email",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.email]]),(0,a.Lk)("div",Qe,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.firstname=e),placeholder:"First Name",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.firstname]]),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.lastname=e),placeholder:"Last Name",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.lastname]])]),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=e=>n.password=e),placeholder:"Password",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.password]]),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":t[5]||(t[5]=e=>n.confirmPassword=e),placeholder:"Confirm Password",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,n.confirmPassword]]),t[7]||(t[7]=(0,a.Lk)("button",{type:"submit",class:"w-full bg-custom-orange text-white py-2 rounded-md hover:bg-custom-orange-hover transition"}," Register ",-1))],32),(0,a.Lk)("p",Ve,[t[9]||(t[9]=(0,a.eW)(" Already have an account? ")),(0,a.bF)(c,{to:"/login",class:"text-custom-orange hover:underline font-bold"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.eW)("Login")]))),_:1})])])])])}var je={data(){return{firstname:"",lastname:"",username:"",email:"",password:"",confirmPassword:"",error:null,success:null}},methods:{async register(){if(this.password===this.confirmPassword)try{await ce.register(this.firstname,this.lastname,this.username,this.email,this.password),this.success="Registration successful! Please login to continue.",this.firstname="",this.lastname="",this.username="",this.email="",this.password="",this.confirmPassword=""}catch(e){this.error="Email or Username already exists"}else this.error="Passwords do not match!"}}};const Ue=(0,B.A)(je,[["render",Ne]]);var Ie=Ue;const $e={key:0,class:"text-red-500"},Ze={key:1,class:"text-gray-500"},qe={key:2,class:"profile-info flex space-x-8"},Je={key:0,class:"w-1/4 bg-white shadow-lg p-4 rounded-md text-center"},We={key:0,class:"w-16 h-16 rounded-full overflow-hidden mb-4 mx-auto"},Be=["src"],Ke={key:1,class:"w-16 h-16 rounded-full bg-gray-300 text-white flex items-center justify-center mb-4 mx-auto"},Ye={class:"text-xl font-bold"},He={class:"text-lg"},Ge={class:"text-gray-700 pb-3"},et={class:"w-3/4 bg-white shadow-lg p-4 rounded-md"},tt={key:3,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50"},st={class:"bg-white p-6 rounded-md shadow-lg w-96"},ot={class:"mb-4"},at={class:"mb-4"},lt={class:"mb-4"},rt={key:0,class:"text-red-500 mb-4"},it={key:1,class:"text-green-500 mb-4"},nt={class:"flex space-x-4"};function dt(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[t[22]||(t[22]=(0,a.Lk)("h2",null,"Your Profile",-1)),i.error?((0,a.uX)(),(0,a.CE)("div",$e,(0,r.v_)(i.error),1)):(0,a.Q3)("",!0),i.loading?((0,a.uX)(),(0,a.CE)("div",Ze,"Loading...")):(0,a.Q3)("",!0),i.customer?((0,a.uX)(),(0,a.CE)("div",qe,[i.user?((0,a.uX)(),(0,a.CE)("div",Je,[i.user.profilePicture?((0,a.uX)(),(0,a.CE)("div",We,[(0,a.Lk)("img",{src:i.user.profilePicture,alt:"Profile Picture",class:"w-full h-full object-cover"},null,8,Be)])):((0,a.uX)(),(0,a.CE)("div",Ke,[(0,a.Lk)("span",Ye,(0,r.v_)(i.user.firstname&&i.user.lastname?i.user.firstname.charAt(0)+i.user.lastname.charAt(0):"N/A"),1)])),(0,a.Lk)("strong",He,(0,r.v_)(i.user.firstname||"N/A")+" "+(0,r.v_)(i.user.lastname||"N/A"),1),(0,a.Lk)("p",Ge,(0,r.v_)(i.user.email||"No email provided"),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.logout&&n.logout(...e)),class:"w-full border text-red-500 font-bold py-2 rounded-md mt-2 hover:bg-gray-100 transition-colors"}," Logout "),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.openChangePasswordModal&&n.openChangePasswordModal(...e)),class:"w-full border py-2 rounded-md mt-2 hover:bg-gray-100 transition-colors"}," Change Password ")])):(0,a.Q3)("",!0),(0,a.Lk)("div",et,[(0,a.Lk)("p",null,[t[7]||(t[7]=(0,a.Lk)("strong",null,"Name:",-1)),(0,a.eW)(" "+(0,r.v_)(i.customer.name),1)]),(0,a.Lk)("p",null,[t[8]||(t[8]=(0,a.Lk)("strong",null,"Email:",-1)),(0,a.eW)(" "+(0,r.v_)(i.customer.email),1)]),(0,a.Lk)("p",null,[t[9]||(t[9]=(0,a.Lk)("strong",null,"Gender:",-1)),(0,a.eW)(" "+(0,r.v_)(i.customer.gender),1)]),(0,a.Lk)("p",null,[t[10]||(t[10]=(0,a.Lk)("strong",null,"Phone Number:",-1)),(0,a.eW)(" "+(0,r.v_)(i.customer.tel),1)]),(0,a.Lk)("p",null,[t[11]||(t[11]=(0,a.Lk)("strong",null,"Line ID:",-1)),(0,a.eW)(" "+(0,r.v_)(i.customer.line_id),1)]),(0,a.Lk)("p",null,[t[12]||(t[12]=(0,a.Lk)("strong",null,"Food Allergies:",-1)),(0,a.eW)(" "+(0,r.v_)(i.customer.food_allergies),1)]),(0,a.Lk)("p",null,[t[13]||(t[13]=(0,a.Lk)("strong",null,"Delivery Date:",-1)),(0,a.eW)(" "+(0,r.v_)(i.customer.delivery_date),1)]),(0,a.Lk)("p",null,[t[14]||(t[14]=(0,a.Lk)("strong",null,"Address 1:",-1)),(0,a.eW)(" "+(0,r.v_)(i.customer.address_1),1)]),(0,a.Lk)("p",null,[t[15]||(t[15]=(0,a.Lk)("strong",null,"Address 2:",-1)),(0,a.eW)(" "+(0,r.v_)(i.customer.address_2),1)]),(0,a.Lk)("p",null,[t[16]||(t[16]=(0,a.Lk)("strong",null,"Address 3:",-1)),(0,a.eW)(" "+(0,r.v_)(i.customer.address_3),1)])])])):(0,a.Q3)("",!0),i.isModalOpen?((0,a.uX)(),(0,a.CE)("div",tt,[(0,a.Lk)("div",st,[t[21]||(t[21]=(0,a.Lk)("h3",{class:"text-lg font-semibold mb-4"},"Change Password",-1)),(0,a.Lk)("form",{onSubmit:t[6]||(t[6]=(0,o.D$)(((...e)=>n.changePassword&&n.changePassword(...e)),["prevent"]))},[(0,a.Lk)("div",ot,[t[17]||(t[17]=(0,a.Lk)("label",{for:"oldPassword",class:"block text-sm font-medium text-gray-700"},"Old Password",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.oldPassword=e),type:"password",id:"oldPassword",class:"w-full p-2 border border-gray-300 rounded-md",required:""},null,512),[[o.Jo,i.oldPassword]])]),(0,a.Lk)("div",at,[t[18]||(t[18]=(0,a.Lk)("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700"},"New Password",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.newPassword=e),type:"password",id:"newPassword",class:"w-full p-2 border border-gray-300 rounded-md",required:""},null,512),[[o.Jo,i.newPassword]])]),(0,a.Lk)("div",lt,[t[19]||(t[19]=(0,a.Lk)("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700"},"Confirm New Password",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.confirmPassword=e),type:"password",id:"confirmPassword",class:"w-full p-2 border border-gray-300 rounded-md",required:""},null,512),[[o.Jo,i.confirmPassword]])]),i.errorMessage?((0,a.uX)(),(0,a.CE)("div",rt,(0,r.v_)(i.errorMessage),1)):(0,a.Q3)("",!0),i.successMessage?((0,a.uX)(),(0,a.CE)("div",it,(0,r.v_)(i.successMessage),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",nt,[t[20]||(t[20]=(0,a.Lk)("button",{type:"submit",class:"w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600 transition-colors"}," Save ",-1)),(0,a.Lk)("button",{type:"button",onClick:t[5]||(t[5]=(...e)=>n.closeChangePasswordModal&&n.closeChangePasswordModal(...e)),class:"w-full bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition-colors"}," Cancel ")])],32)])])):(0,a.Q3)("",!0)])}var ct={data(){return{customer:null,error:null,loading:!1,user:{},isModalOpen:!1,oldPassword:"",newPassword:"",confirmPassword:"",errorMessage:"",successMessage:""}},created(){this.fetchCustomerData(),this.fetchProfile()},methods:{async fetchCustomerData(){this.loading=!0;try{const e=await ne.A.get("http://127.0.0.1:3333/customer/profile");this.customer=e.data.customer}catch(e){this.error="Failed to fetch customer data"}finally{this.loading=!1}},async fetchProfile(){try{this.user=await ce.getProfile()}catch(e){this.error=e.message||"Failed to fetch profile"}},logout(){localStorage.removeItem("token"),this.isLoggedIn=!1,this.username="",this.$router.push("/test2")},openChangePasswordModal(){this.isModalOpen=!0},closeChangePasswordModal(){this.isModalOpen=!1,this.errorMessage="",this.successMessage="",this.oldPassword="",this.newPassword="",this.confirmPassword=""},async changePassword(){if(this.newPassword===this.confirmPassword)try{const e=await ce.changePassword(this.oldPassword,this.newPassword);this.successMessage=e.message,this.errorMessage="",this.closeChangePasswordModal()}catch(e){this.errorMessage=e.message||"An error occurred.",this.successMessage=""}else this.errorMessage="New password and confirmation do not match."}}};const ut=(0,B.A)(ct,[["render",dt],["__scopeId","data-v-282d7834"]]);var pt=ut;const gt={class:"flex items-center justify-center inset-0"},ht={class:"flex flex-col items-center"},mt={class:"bg-gray-100 bg-opacity-50 backdrop-blur-md w-full h-auto max-h-[800px] p-8 rounded-lg shadow-lg border flex flex-col"},yt={key:0,class:"text-red-500 text-center mb-4"},kt={key:1,class:"text-green-500 text-center mb-4"},bt={class:"p-6 space-y-4 overflow-y-auto flex-grow"},xt={class:"flex space-x-4"},ft={class:"w-1/2"},_t={class:"w-1/2"},vt={class:"flex space-x-4"},wt={class:"flex space-x-4"},Lt={class:"w-1/2"},Pt={class:"w-1/2"},Ct={class:"flex space-x-4"},Dt={key:0};function Tt(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",gt,[(0,a.Lk)("div",ht,[(0,a.Lk)("div",mt,[t[34]||(t[34]=(0,a.Lk)("h2",{class:"text-2xl font-bold text-center mb-6"},"ลงทะเบียนข้อมูลลูกค้า",-1)),i.error?((0,a.uX)(),(0,a.CE)("p",yt,(0,r.v_)(i.error),1)):(0,a.Q3)("",!0),i.success?((0,a.uX)(),(0,a.CE)("p",kt,(0,r.v_)(i.success),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",bt,[(0,a.Lk)("form",{onSubmit:t[15]||(t[15]=(0,o.D$)(((...e)=>n.submitAddress&&n.submitAddress(...e)),["prevent"])),class:"space-y-4"},[(0,a.Lk)("div",xt,[(0,a.Lk)("div",ft,[t[16]||(t[16]=(0,a.Lk)("label",{for:"firstname",class:"block font-medium text-gray-700"},"First Name",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.firstname=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.firstname]])]),(0,a.Lk)("div",_t,[t[17]||(t[17]=(0,a.Lk)("label",{for:"lastname",class:"block font-medium text-gray-700"},"Last Name",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>i.lastname=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.lastname]])])]),(0,a.Lk)("div",null,[t[18]||(t[18]=(0,a.Lk)("label",{for:"email",class:"block font-medium text-gray-700"},"Email",-1)),(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>i.email=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.email]])]),(0,a.Lk)("div",null,[t[19]||(t[19]=(0,a.Lk)("label",{for:"customer_id",class:"block font-medium text-gray-700"},"รหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>i.customer_id=e),placeholder:"กรอกรหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.customer_id]])]),(0,a.Lk)("div",null,[t[22]||(t[22]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"Gender",-1)),(0,a.Lk)("div",vt,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=e=>i.gender=e),value:"female",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.gender]]),t[20]||(t[20]=(0,a.eW)(" ผู้หญิง / Female "))]),(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=e=>i.gender=e),value:"male",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.gender]]),t[21]||(t[21]=(0,a.eW)(" ผู้ชาย / Male "))])])]),(0,a.Lk)("div",wt,[(0,a.Lk)("div",Lt,[t[23]||(t[23]=(0,a.Lk)("label",{for:"tel",class:"block font-medium text-gray-700"},"Phone Number",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>i.tel=e),maxlength:"10",placeholder:"กรอกหมายเลขโทรศัพท์",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.tel]])]),(0,a.Lk)("div",Pt,[t[24]||(t[24]=(0,a.Lk)("label",{for:"line_id",class:"block font-medium text-gray-700"},"Line ID (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>i.line_id=e),placeholder:"กรอก line id",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.line_id]])])]),(0,a.Lk)("div",null,[t[27]||(t[27]=(0,a.Lk)("label",{class:"block font-medium text-gray-700"},"คุณแพ้อาหารชนิดใดหรือไม่?",-1)),(0,a.Lk)("div",Ct,[(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=e=>i.food_allergies=e),value:"ไม่ No",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.food_allergies]]),t[25]||(t[25]=(0,a.eW)(" ไม่ / No "))]),(0,a.Lk)("label",null,[(0,a.bo)((0,a.Lk)("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=e=>i.food_allergies=e),value:"ใช่ Yes, ",class:"focus:ring-custom-orange"},null,512),[[o.XL,i.food_allergies]]),t[26]||(t[26]=(0,a.eW)(" ใช่ / Yes "))])])]),"ใช่ Yes, "===i.food_allergies?((0,a.uX)(),(0,a.CE)("div",Dt,[t[28]||(t[28]=(0,a.Lk)("label",{for:"food_allergies_detail",class:"block font-medium text-gray-700"},"โปรดระบุประเภทอาหารที่คุณมีอาการแพ้ในบรรทัดด้านล่าง",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"food_allergies_detail","onUpdate:modelValue":t[10]||(t[10]=e=>i.food_allergies_detail=e),placeholder:"Enter details here",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.food_allergies_detail]])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[29]||(t[29]=(0,a.Lk)("label",{for:"delivery_date",class:"block font-medium text-gray-700"},"โปรดระบุวันที่คุณต้องการรับอาหาร",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>i.delivery_date=e),placeholder:"กรอกโปรดระบุวันที่คุณต้องการรับอาหาร",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.delivery_date]])]),(0,a.Lk)("div",null,[t[30]||(t[30]=(0,a.Lk)("label",{for:"address_1",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 1",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address","onUpdate:modelValue":t[12]||(t[12]=e=>i.address_1=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.address_1]])]),(0,a.Lk)("div",null,[t[31]||(t[31]=(0,a.Lk)("label",{for:"address_2",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 2 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_2","onUpdate:modelValue":t[13]||(t[13]=e=>i.address_2=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.address_2]])]),(0,a.Lk)("div",null,[t[32]||(t[32]=(0,a.Lk)("label",{for:"address_3",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 3 (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"address_3","onUpdate:modelValue":t[14]||(t[14]=e=>i.address_3=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[o.Jo,i.address_3]])]),t[33]||(t[33]=(0,a.Lk)("button",{type:"submit",class:"w-full bg-custom-orange text-white py-2 rounded-md hover:bg-custom-orange-hover"}," Submit Address ",-1))],32)])])])])}var Mt={data(){return{firstname:"",lastname:"",email:"",line_id:"",address_1:"",address_2:"",address_3:"",gender:"",tel:"",food_allergies:"",food_allergies_detail:"",delivery_date:"",customer_id:"",error:null,success:null}},created(){this.fetchUserData()},methods:{async fetchUserData(){try{const e=await ne.A.get("http://127.0.0.1:3333/profile");this.firstname=e.data.firstname,this.lastname=e.data.lastname,this.email=e.data.email}catch(e){this.error=e.response.data.message||"Failed to fetch user data"}},async submitAddress(){try{const e=await ne.A.post("http://127.0.0.1:3333/customer",{address_1:this.address_1,address_2:this.address_2,address_3:this.address_3,gender:this.gender,customer_id:this.customer_id,name:`${this.firstname} ${this.lastname}`,email:this.email,line_id:this.line_id,tel:this.tel,food_allergies:this.food_allergies+this.food_allergies_detail,delivery_date:this.delivery_date});this.success=e.data.message,this.address=""}catch(e){this.error=e.response.data.message||"Failed to add address"}}}};const St=(0,B.A)(Mt,[["render",Tt],["__scopeId","data-v-27ba5a7d"]]);var Et=St;const Rt={class:"flex space-x-5"},At={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},zt={class:"text-center"},Ft={class:"text-3xl font-bold text-custom-orange"},Xt={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},Ot={class:"text-center"},Qt={class:"text-3xl font-bold text-custom-orange"},Vt={class:"text-sm text-gray-600 mt-4"},Nt={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},jt={class:"text-center"},Ut={class:"text-3xl font-bold text-custom-orange"};function It(e,t,s,o,l,i){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",Rt,[(0,a.Lk)("div",At,[t[1]||(t[1]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",zt,[(0,a.Lk)("p",Ft,(0,r.v_)(i.formatPrice(l.allTotalSales)),1),t[0]||(t[0]=(0,a.Lk)("p",{class:"text-sm text-gray-600 mt-4"},"ยอดขายทั้งหมด",-1))])]),(0,a.Lk)("div",Xt,[t[3]||(t[3]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",Ot,[(0,a.Lk)("p",Qt,(0,r.v_)(i.formatPrice(l.totalSales)),1),(0,a.Lk)("p",Vt,[t[2]||(t[2]=(0,a.eW)("ยอดประจำวันที่ ")),(0,a.Lk)("strong",null,(0,r.v_)(i.formatDate(l.endDate)),1)])])]),(0,a.Lk)("div",Nt,[t[5]||(t[5]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," person ")],-1)),(0,a.Lk)("div",jt,[(0,a.Lk)("p",Ut,(0,r.v_)(i.formatNumber(l.customers.length)),1),t[4]||(t[4]=(0,a.Lk)("p",{class:"text-sm text-gray-600 mt-4"},"ลูกค้าทั้งหมด (AFF)",-1))])])])])}var $t={name:"HomePage",data(){return{allDailySales:[],allTotalSales:0,DailySales:[],totalSales:0,startDate:"",endDate:"",customers:[]}},computed:{},methods:{async fetchAllDailySales(){try{const e=await ne.A.get("http://127.0.0.1:3333/sales/all-daily",{});this.allDailySales=e.data.data.allDailySales,this.allTotalSales=e.data.data.totalSales}catch(e){console.error("Error fetching sales data in range:",e)}},async fetchDailySales(e,t){try{const s=await ne.A.get("http://127.0.0.1:3333/sales/daily",{params:{startDate:e,endDate:t}});this.dailySales=s.data.data.dailySales,this.totalSales=s.data.data.totalSales}catch(s){console.error("Error fetching sales data in range:",s)}},async fetchLookupData(){try{const[e,t,s,o,a,l,r,i,n]=await Promise.all([ne.A.get("http://127.0.0.1:3333/customers"),ne.A.get("http://127.0.0.1:3333/promotion-types"),ne.A.get("http://127.0.0.1:3333/programs"),ne.A.get("http://127.0.0.1:3333/packages"),ne.A.get("http://127.0.0.1:3333/package-types"),ne.A.get("http://127.0.0.1:3333/zone-deliveries"),ne.A.get("http://127.0.0.1:3333/seller-names"),ne.A.get("http://127.0.0.1:3333/payment-types"),ne.A.get("http://127.0.0.1:3333/additional-types")]);this.customers=e.data,this.promotion_types=t.data,this.allPrograms=s.data||[],this.packages=o.data,this.package_types=a.data,this.zoneDeliveries=l.data,this.seller_names=r.data,this.payment_types=i.data.data,this.additional_types=n.data,this.updatePage,console.log("Fetched payment types:",i.data),console.log(this.paymentTypes)}catch(e){console.error("Error fetching lookup data:",e)}},formatDate(e){return e?new Intl.DateTimeFormat("en-UK",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e)):"-"},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatNumber(e){return new Intl.NumberFormat("th-TH",{}).format(e)}},created(){this.fetchAllDailySales(),this.fetchDailySales(),this.fetchLookupData();const e=new Date,t=e.toISOString().split("T")[0];this.endDate=t},mounted(){this.fetchAllDailySales(),this.fetchDailySales(),this.fetchLookupData()},beforeUnmount(){}};const Zt=(0,B.A)($t,[["render",It],["__scopeId","data-v-c29e753a"]]);var qt=Zt;const Jt={class:"flex space-x-2 items-center relative"},Wt={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Bt={class:"text-m text-custom-orange font-bold"},Kt={class:"ml-2"},Yt={class:"add relative inline-block"},Ht={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Gt={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},es={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},ts={class:"p-6 space-y-4 overflow-y-auto flex-grow"},ss={key:0},os={class:"flex-1"},as={class:"relative"},ls={key:1},rs={key:1,class:"mt-4 p-4 border border-custom-orange rounded-md"},is={class:"flex space-x-4"},ns={class:"flex-1"},ds={class:"relative"},cs={class:"flex-1"},us={class:"relative"},ps={key:2},gs={class:"flex-1"},hs={class:"block font-bold text-gray-700"},ms={class:"text-gray-600"},ys={class:"text-gray-600"},ks={class:"text-gray-600"},bs={key:3},xs={class:"block font-bold text-gray-700"},fs={class:"text-gray-600"},_s={class:"text-gray-600"},vs={class:"text-gray-600"},ws={key:4,class:"mt-4 p-4 border border-custom-orange rounded-md"},Ls={key:0},Ps={key:1},Cs={key:2},Ds={class:"flex-1"},Ts={class:"flex space-x-4"},Ms={class:"flex-1"},Ss={class:"flex-1"},Es={key:5,class:"flex-1"},Rs={class:"block font-bold text-gray-700"},As={class:"text-gray-600"},zs={class:"flex space-x-4"},Fs={class:"flex-1"},Xs={class:"flex-1"},Os={key:6,class:"flex-1"},Qs={class:"block font-bold text-gray-700"},Vs={class:"text-gray-600"},Ns={class:"flex space-x-4"},js={class:"flex-1"},Us={class:"flex-1"},Is={key:7,class:"flex-1"},$s={class:"block font-bold text-gray-700"},Zs={class:"text-gray-600"},qs={class:"flex space-x-4"},Js={class:"flex-1"},Ws={class:"flex-1"},Bs={key:8,class:"flex-1"},Ks={class:"block font-bold text-gray-700"},Ys={class:"text-gray-600"},Hs={key:9,class:"flex-1"},Gs={class:"block font-bold text-gray-700"},eo={class:"text-gray-600"},to={class:"text-gray-600"},so={key:10,class:"flex-1"},oo={class:"block font-bold text-custom-orange"},ao={key:0},lo={class:"text-gray-600"},ro={key:1},io={class:"text-gray-600"},no={class:"text-gray-600"},co={class:"flex space-x-4"},uo={class:"flex-1"},po={class:"flex-1"},go={class:"flex space-x-4"},ho={class:"flex-1"},mo={class:"flex-1"},yo={class:"mb-4"},ko={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},bo={class:"flex space-x-2"},xo={class:"filter relative inline-block",ref:"filterDropdown"},fo={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},_o={class:"p-4 w-[500px] list-none"},vo={class:"grid grid-cols-3 gap-4"},wo=["value"],Lo={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Po={class:"flex space-x-2"},Co={class:"sort relative inline-block",ref:"sortDropdown"},Do={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},To={class:"list-none p-0 m-0"},Mo={key:0,class:"material-symbols-outlined text-sm"},So={key:0,class:"material-symbols-outlined text-sm"},Eo={class:"flex w-[250px] relative"},Ro={key:0,class:"p-4 flex items-left space-x-6 text-m font-bold"},Ao={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},zo={class:"bg-custom-orange text-white"},Fo={class:"px-4 py-2 align-top pb-5"},Xo={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},Oo={class:"px-4 py-2 align-top pb-5 font-bold"},Qo={class:"px-4 py-2 align-top pb-5"},Vo={class:"px-4 py-2 align-top pb-5"},No={class:"px-4 py-2 align-top pb-5"},jo={key:0,class:"text-red-500 font-bold"},Uo={key:1},Io={class:"px-4 py-2 align-top pb-5"},$o={class:"px-4 py-2 align-top font-bold pb-5"},Zo=["onClick"],qo={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},Jo={class:"bg-white rounded-md w-1/3 max-w-lg"},Wo={class:"font-bold"},Bo={class:"p-6 space-y-4"},Ko={class:"text-gray-700"},Yo={key:0},Ho={key:1,class:"mt-4"},Go={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},ea=["onClick"],ta={key:0},sa={class:"list-none p-0 m-0"},oa=["onClick"],aa=["onClick"],la=["onClick"],ra=["onClick"],ia={key:1},na={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},da={class:"list-none p-0 m-0"},ca=["onClick"],ua=["onClick"],pa=["onClick"],ga=["onClick"],ha={key:2},ma={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},ya={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},ka={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},ba={class:"flex space-x-2"},xa={class:"p-6",ref:"modalContent"},fa={key:0},_a={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},va={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},wa={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},La={class:"flex space-x-2"},Pa={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},Ca={key:0,class:"flex items-center space-x-4 pl-3 pr-3"},Da={class:"flex-1"},Ta={class:"mr-2"},Ma={class:"flex-1"},Sa={class:"flex-1"},Ea={key:1,class:"flex items-center space-x-4 pl-3 pr-3"},Ra={class:"flex-1"},Aa={class:"mr-2"},za={class:"flex-1"},Fa={class:"flex-1"},Xa={key:2,class:"flex items-center space-x-4 pl-3 pr-3"},Oa={class:"flex-1"},Qa={class:"mr-2"},Va={class:"flex-1"},Na={class:"flex-1"},ja={key:3,class:"flex items-center space-x-4 pl-3 pr-3"},Ua={class:"flex-1"},Ia={class:"mr-2"},$a={class:"flex-1"},Za={class:"flex-1"},qa={class:"mr-2 pl-3 pr-3"},Ja={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Wa={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Ba={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Ka={class:"flex space-x-2"},Ya={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Ha={class:"flex space-x-4"},Ga={class:"flex-1"},el={class:"relative"},tl={class:"flex-1"},sl={class:"relative"},ol={key:0},al={class:"flex-1"},ll={class:"block font-bold text-gray-700"},rl={class:"text-gray-600"},il={class:"text-gray-600"},nl={class:"text-gray-600"},dl={class:"flex space-x-4"},cl={class:"flex-1"},ul={class:"flex-1"},pl={key:1,class:"flex-1"},gl={class:"block font-bold text-gray-700"},hl={class:"text-gray-600"},ml={class:"flex space-x-4"},yl={class:"flex-1"},kl={class:"flex-1"},bl={key:2,class:"flex-2"},xl={class:"block font-bold text-gray-700"},fl={class:"text-gray-600"},_l={class:"flex space-x-4"},vl={class:"flex-1"},wl={class:"flex-1"},Ll={key:3,class:"flex-1"},Pl={class:"block font-bold text-gray-700"},Cl={class:"text-gray-600"},Dl={class:"flex space-x-4"},Tl={class:"flex-1"},Ml={class:"flex-1"},Sl={key:4,class:"flex-1"},El={class:"block font-bold text-gray-700"},Rl={class:"text-gray-600"},Al={key:5,class:"flex-1"},zl={class:"block font-bold text-gray-700"},Fl={class:"text-gray-600"},Xl={class:"text-gray-600"},Ol={key:6,class:"flex-1"},Ql={class:"block font-bold text-custom-orange"},Vl={class:"text-gray-600"},Nl={class:"text-gray-600"},jl={class:"flex space-x-4"},Ul={class:"flex-1"},Il={class:"flex-1"},$l={class:"flex space-x-4"},Zl={class:"flex-1"},ql={class:"flex-1"},Jl={class:"mb-4"},Wl={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Bl={class:"flex space-x-2"},Kl={key:3,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Yl={class:"bg-white rounded-lg shadow-md w-1/3"},Hl={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Gl={class:"flex justify-end space-x-2 p-4 border-t"},er={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},tr=["disabled"],sr={class:"flex items-center space-x-1"},or=["onClick"],ar=["disabled"];function lr(e,t,s,l,i,n){const d=(0,a.g2)("multiselect"),c=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[92]||(t[92]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[94]||(t[94]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[93]||(t[93]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Jt,[(0,a.Lk)("div",Wt,[t[95]||(t[95]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"contact_page",-1)),t[96]||(t[96]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการบันทึกการขายทั้งหมด: ",-1)),(0,a.Lk)("span",Bt,(0,r.v_)(i.saleRecords.length)+" รายการ",1)]),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[98]||(t[98]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",Kt,[t[97]||(t[97]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedPackageType.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,r.v_)(i.selectedPackageType.length)+") ",1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Yt,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[99]||(t[99]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มบันทึกการขาย",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",Ht,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[101]||(t[101]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[100]||(t[100]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Gt,[(0,a.Lk)("div",es,[t[102]||(t[102]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",ts,[(0,a.Lk)("div",null,[t[103]||(t[103]=(0,a.Lk)("label",{for:"customer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.customer_id,"onUpdate:modelValue":t[6]||(t[6]=e=>i.saleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[104]||(t[104]=(0,a.Lk)("label",{for:"package_type",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.saleRecord.package_type_id=e),options:i.packageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),i.saleRecord.package_type_id&&"additional sales"===i.saleRecord.package_type_id.name.toLowerCase()||i.saleRecord.package_type_id&&"consignment"===i.saleRecord.package_type_id.name.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",ss,[(0,a.Lk)("div",null,[t[105]||(t[105]=(0,a.Lk)("label",{for:"additional_type",class:"block font-bold text-gray-700"},"ประเภทรายการ",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.additional_type_id,"onUpdate:modelValue":t[8]||(t[8]=e=>i.saleRecord.additional_type_id=e),options:i.additionalTypes,placeholder:"เลือกประเภทรายการ","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[106]||(t[106]=(0,a.Lk)("label",{for:"add_detail",class:"block text-gray-700 font-bold"},"รายละเอียดการขาย",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"add_detail","onUpdate:modelValue":t[9]||(t[9]=e=>i.saleRecord.add_detail=e),placeholder:"กรอกรายละเอียดการขาย",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.add_detail]])]),(0,a.Lk)("div",os,[t[108]||(t[108]=(0,a.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,a.Lk)("div",as,[t[107]||(t[107]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.saleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.add_price]])])])])):(0,a.Q3)("",!0),"additional sales"!==i.saleRecord.package_type_id?.name?.toLowerCase()&&"consignment"!==i.saleRecord.package_type_id?.name?.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",ls,[(0,a.Lk)("div",null,[t[109]||(t[109]=(0,a.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.promotion_type_id,"onUpdate:modelValue":t[11]||(t[11]=e=>i.saleRecord.promotion_type_id=e),options:i.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[110]||(t[110]=(0,a.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.program_id,"onUpdate:modelValue":t[12]||(t[12]=e=>i.saleRecord.program_id=e),options:i.programs,placeholder:"เลือก Program","track-by":"id",label:"name",disabled:!i.saleRecord.promotion_type_id||!i.saleRecord.promotion_type_id.id},null,8,["modelValue","options","disabled"])]),(0,a.Lk)("div",null,[t[116]||(t[116]=(0,a.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_id,"onUpdate:modelValue":t[13]||(t[13]=e=>i.saleRecord.package_id=e),options:i.packages,placeholder:"เลือก Package","track-by":"id",label:"displayLabel",disabled:!i.saleRecord.program_id||!i.saleRecord.program_id.id},null,8,["modelValue","options","disabled"]),i.saleRecord.package_id&&i.saleRecord.package_id.id?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[14]||(t[14]=(0,o.D$)((e=>n.togglePackageDetails(i.saleRecord.package_id)),["prevent"])),class:"mt-2 cursor-pointer text-custom-orange text-left hover:underline"},(0,r.v_)(i.isShowingPackageDetails?"ปิดรายละเอียด":"ดูรายละเอียดแพ็คเกจ"),1)):(0,a.Q3)("",!0),i.packageDetails?((0,a.uX)(),(0,a.CE)("div",rs,[t[115]||(t[115]=(0,a.Lk)("h3",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,a.Lk)("p",null,[t[111]||(t[111]=(0,a.Lk)("strong",null,"ชื่อแพ็คเกจ:",-1)),(0,a.eW)(" "+(0,r.v_)(i.packageDetails.name),1)]),(0,a.Lk)("p",null,[t[112]||(t[112]=(0,a.Lk)("strong",null,"ราคา:",-1)),(0,a.eW)(" "+(0,r.v_)(i.packageDetails.price)+" บาท",1)]),(0,a.Lk)("p",null,[t[113]||(t[113]=(0,a.Lk)("strong",null,"รายละเอียด:",-1)),(0,a.eW)(" "+(0,r.v_)(i.packageDetails.package_detail),1)]),(0,a.Lk)("p",null,[t[114]||(t[114]=(0,a.Lk)("strong",null,"อายุการใช้งาน:",-1)),(0,a.eW)(" "+(0,r.v_)(i.packageDetails.total_days)+" วัน ",1)])])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",is,[(0,a.Lk)("div",ns,[t[118]||(t[118]=(0,a.Lk)("label",{for:"discount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",ds,[t[117]||(t[117]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.saleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.discount]])])]),(0,a.Lk)("div",cs,[t[120]||(t[120]=(0,a.Lk)("label",{for:"extraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",us,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>i.saleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.saleRecord.extra_charge]]),t[119]||(t[119]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),!n.isConsignmentOrAdditional&&n.computedTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",ps,[(0,a.Lk)("div",gs,[(0,a.Lk)("label",hs," มูลค่าแพ็กเกจรวม: "+(0,r.v_)(n.formatPrice(n.computedTotalPackagePrice)),1),(0,a.Lk)("p",ms,"ราคาแพ็กเกจ: "+(0,r.v_)(n.formatPrice(i.saleRecord.package_price)),1),(0,a.Lk)("p",ys,"ส่วนลดเพิ่มเติม: "+(0,r.v_)(n.formatPrice(i.saleRecord.discount)),1),(0,a.Lk)("p",ks,"มูลค่า Extra Charge: "+(0,r.v_)(n.formatPrice(n.computedExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),n.isConsignmentOrAdditional&&n.computedTotalAdditionalPrice>0?((0,a.uX)(),(0,a.CE)("div",bs,[(0,a.Lk)("label",xs," มูลค่าขาย: "+(0,r.v_)(n.formatPrice(n.computedTotalAdditionalPrice)),1),(0,a.Lk)("p",fs,"มูลค่าขาย: "+(0,r.v_)(n.formatPrice(i.saleRecord.add_price)),1),(0,a.Lk)("p",_s,"ส่วนลดเพิ่มเติม: "+(0,r.v_)(n.formatPrice(i.saleRecord.discount)),1),(0,a.Lk)("p",vs,"มูลค่า Extra Charge: "+(0,r.v_)(n.formatPrice(n.computedExtraChargeAdditionalPrice)),1)])):(0,a.Q3)("",!0),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",ws,[t[124]||(t[124]=(0,a.Lk)("h3",{class:"font-bold"},"ที่อยู่ลูกค้า",-1)),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",Ls,[(0,a.Lk)("p",null,[t[121]||(t[121]=(0,a.Lk)("strong",null,"ที่อยู่ 1:",-1)),(0,a.eW)(" "+(0,r.v_)(i.saleRecord.address_1),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_2?((0,a.uX)(),(0,a.CE)("div",Ps,[(0,a.Lk)("p",null,[t[122]||(t[122]=(0,a.Lk)("strong",null,"ที่อยู่ 2:",-1)),(0,a.eW)(" "+(0,r.v_)(i.saleRecord.address_2),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_3?((0,a.uX)(),(0,a.CE)("div",Cs,[(0,a.Lk)("p",null,[t[123]||(t[123]=(0,a.Lk)("strong",null,"ที่อยู่ 3:",-1)),(0,a.eW)(" "+(0,r.v_)(i.saleRecord.address_3),1)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Ds,[t[125]||(t[125]=(0,a.Lk)("label",{for:"receiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.receive_food_id,"onUpdate:modelValue":t[17]||(t[17]=e=>i.saleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Ts,[(0,a.Lk)("div",Ms,[t[126]||(t[126]=(0,a.Lk)("label",{for:"zone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone1_id,"onUpdate:modelValue":t[18]||(t[18]=e=>i.saleRecord.zone1_id=e),options:i.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Ss,[t[127]||(t[127]=(0,a.Lk)("label",{for:"zone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>i.saleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone1_quantity]])])]),n.computedZone1Price>0?((0,a.uX)(),(0,a.CE)("div",Es,[(0,a.Lk)("label",Rs,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,r.v_)(n.formatPrice(n.computedZone1Price)),1),(0,a.Lk)("p",As,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",zs,[(0,a.Lk)("div",Fs,[t[128]||(t[128]=(0,a.Lk)("label",{for:"zone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone2_id,"onUpdate:modelValue":t[20]||(t[20]=e=>i.saleRecord.zone2_id=e),options:i.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Xs,[t[129]||(t[129]=(0,a.Lk)("label",{for:"zone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>i.saleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone2_quantity]])])]),n.computedZone2Price>0?((0,a.uX)(),(0,a.CE)("div",Os,[(0,a.Lk)("label",Qs,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,r.v_)(n.formatPrice(n.computedZone2Price)),1),(0,a.Lk)("p",Vs,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Ns,[(0,a.Lk)("div",js,[t[130]||(t[130]=(0,a.Lk)("label",{for:"zone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone3_id,"onUpdate:modelValue":t[22]||(t[22]=e=>i.saleRecord.zone3_id=e),options:i.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Us,[t[131]||(t[131]=(0,a.Lk)("label",{for:"zone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[23]||(t[23]=e=>i.saleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone3_quantity]])])]),n.computedZone3Price>0?((0,a.uX)(),(0,a.CE)("div",Is,[(0,a.Lk)("label",$s,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,r.v_)(n.formatPrice(n.computedZone3Price)),1),(0,a.Lk)("p",Zs,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",qs,[(0,a.Lk)("div",Js,[t[132]||(t[132]=(0,a.Lk)("label",{for:"zone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone_outsource_id,"onUpdate:modelValue":t[24]||(t[24]=e=>i.saleRecord.zone_outsource_id=e),options:i.zoneDeliveries,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Ws,[t[133]||(t[133]=(0,a.Lk)("label",{for:"zone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>i.saleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone_outsource_quantity]])])]),n.computedZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",Bs,[(0,a.Lk)("label",Ks,"ค่าจัดส่งรวม Outsource: "+(0,r.v_)(n.formatPrice(n.computedZoneOutsourcePrice)),1),(0,a.Lk)("p",Ys,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.saleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),n.computedTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",Hs,[(0,a.Lk)("label",Gs,"รวมค่าจัดส่งทั้งหมด: "+(0,r.v_)(n.formatPrice(n.computedTotalDeliveryPrice)),1),(0,a.Lk)("p",eo,"ค่าจัดส่งรวม In-house Riders: "+(0,r.v_)(n.formatPrice(n.computedTotalZonePrice)),1),(0,a.Lk)("p",to,"ค่าจัดส่งรวม Outsource: "+(0,r.v_)(n.formatPrice(n.computedZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),n.computedTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",so,[(0,a.Lk)("label",oo,"มูลค่าขายรวม: "+(0,r.v_)(n.formatPrice(n.computedTotalPrice)),1),n.computedTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",ao,[(0,a.Lk)("p",lo,"มูลค่าแพ็กเกจรวม: "+(0,r.v_)(n.formatPrice(n.computedTotalPackagePrice)),1)])):(0,a.Q3)("",!0),n.computedTotalAdditionalPrice>0?((0,a.uX)(),(0,a.CE)("div",ro,[(0,a.Lk)("p",io,"มูลค่าขาย: "+(0,r.v_)(n.formatPrice(n.computedTotalAdditionalPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("p",no,"รวมค่าจัดส่งทั้งหมด: "+(0,r.v_)(n.formatPrice(n.computedTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",co,[(0,a.Lk)("div",uo,[t[134]||(t[134]=(0,a.Lk)("label",{for:"sellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.seller_name_id,"onUpdate:modelValue":t[26]||(t[26]=e=>i.saleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",po,[t[135]||(t[135]=(0,a.Lk)("label",{for:"startDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[27]||(t[27]=e=>i.saleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.start_date]])])]),(0,a.Lk)("div",go,[(0,a.Lk)("div",ho,[t[136]||(t[136]=(0,a.Lk)("label",{for:"deliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.delivery_round_id,"onUpdate:modelValue":t[28]||(t[28]=e=>i.saleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",mo,[t[137]||(t[137]=(0,a.Lk)("label",{for:"selectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.select_food_id,"onUpdate:modelValue":t[29]||(t[29]=e=>i.saleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",yo,[t[138]||(t[138]=(0,a.Lk)("label",{for:"note",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[30]||(t[30]=e=>i.saleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.saleRecord.note]])])]),(0,a.Lk)("div",ko,[(0,a.Lk)("li",{onClick:t[31]||(t[31]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[139]||(t[139]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",bo,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[33]||(t[33]=(...e)=>n.addSaleRecord&&n.addSaleRecord(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",xo,[(0,a.Lk)("button",{onClick:t[34]||(t[34]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[140]||(t[140]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",fo,[(0,a.Lk)("div",_o,[t[141]||(t[141]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,a.Lk)("div",vo,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredPackageTypes,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[35]||(t[35]=e=>i.selectedPackageType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,wo),[[o.lH,i.selectedPackageType]]),(0,a.Lk)("span",null,(0,r.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",Lo,[(0,a.Lk)("li",{onClick:t[36]||(t[36]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[142]||(t[142]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",Po,[(0,a.Lk)("button",{onClick:t[37]||(t[37]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[38]||(t[38]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Co,[(0,a.Lk)("button",{onClick:t[39]||(t[39]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[143]||(t[143]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",Do,[(0,a.Lk)("ul",To,[(0,a.Lk)("li",{onClick:t[40]||(t[40]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[144]||(t[144]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",Mo,(0,r.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[41]||(t[41]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[145]||(t[145]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",So,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[42]||(t[42]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[146]||(t[146]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Eo,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[43]||(t[43]=e=>i.searchQuery=e),placeholder:"ค้นหาชื่อลูกค้า..",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[44]||(t[44]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[45]||(t[45]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[46]||(t[46]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),"/sale-records"===e.$route.path||"/sale-records-additional"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",Ro,[(0,a.bF)(c,{to:"sale-records",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records"===e.$route.path}])},{default:(0,a.k6)((()=>t[147]||(t[147]=[(0,a.eW)(" บันทึกการขาย 1st Timer, Package Renewal ")]))),_:1},8,["class"]),(0,a.bF)(c,{to:"sale-records-additional",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records-additional"===e.$route.path}])},{default:(0,a.k6)((()=>t[148]||(t[148]=[(0,a.eW)(" บันทึกการขาย Additional Sales ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),(0,a.Lk)("table",Ao,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",zo,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(n.filteredSaleRecords1standRenew,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",Fo,(0,r.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",Xo,(0,r.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",Oo,(0,r.v_)(n.getPackageTypeName(e.package_type_id)),1),(0,a.Lk)("td",Qo,(0,r.v_)(n.getProgramName(e.program_id)),1),(0,a.Lk)("td",Vo,(0,r.v_)(n.getPackageName(e.package_id)),1),(0,a.Lk)("td",No,[e.remaining_days<0?((0,a.uX)(),(0,a.CE)("span",jo," หมดอายุ ")):((0,a.uX)(),(0,a.CE)("span",Uo,(0,r.v_)(e.remaining_days)+" วัน ",1))]),(0,a.Lk)("td",Io,(0,r.v_)(n.formatDate(e.expiry_date)),1),(0,a.Lk)("td",$o,[(0,a.Lk)("button",{onClick:t=>n.openConfirmPaymentModal(e),class:(0,r.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none hover:text-gray-200",n.getPaymentStatusClass(e.payment_status)])},(0,r.v_)(n.getPaymentStatusText(e.payment_status)),11,Zo),i.isConfirmPaymentModalOpen?((0,a.uX)(),(0,a.CE)("div",qo,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[150]||(t[150]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[47]||(t[47]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[149]||(t[149]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Jo,[(0,a.Lk)("div",{class:(0,r.C4)([{"bg-green-500":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500":"paid"===i.selectedSaleRecord.payment_status},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,a.Lk)("span",Wo,(0,r.v_)("paid"===i.selectedSaleRecord.payment_status?"เปลี่ยนสถานะเป็นยังไม่ได้ชำระเงิน":"ยืนยันการชำระเงิน"),1),(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"text-white hover:text-gray-200"},t[151]||(t[151]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,a.Lk)("div",Bo,[(0,a.Lk)("p",Ko,(0,r.v_)("paid"===i.selectedSaleRecord.payment_status?'คุณต้องการเปลี่ยนสถานะเป็น "ยังไม่ได้ชำระเงิน" หรือไม่?':"กรุณาเลือกวันที่ชำระเงิน:"),1),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",Yo,[(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[49]||(t[49]=e=>i.selectedPaidDate=e),class:"border border-gray-300 rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPaidDate]])])):(0,a.Q3)("",!0),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",Ho,[t[152]||(t[152]=(0,a.Lk)("label",{for:"payment_types",class:"block text-gray-700"},"เลือกประเภทการชำระเงิน:",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.payment_type_id,"onUpdate:modelValue":t[50]||(t[50]=e=>i.selectedSaleRecord.payment_type_id=e),options:i.paymentTypes,label:"name","track-by":"id",placeholder:"เลือกประเภทการชำระเงิน"},null,8,["modelValue","options"])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Go,[(0,a.Lk)("button",{onClick:t[51]||(t[51]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[52]||(t[52]=(...e)=>n.confirmPayment&&n.confirmPayment(...e)),class:(0,r.C4)([{"bg-green-500 hover:bg-green-600":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500 hover:bg-red-600":"paid"===i.selectedSaleRecord.payment_status},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(s)},t[153]||(t[153]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,ea),n.filteredSaleRecords1standRenew.length>4?((0,a.uX)(),(0,a.CE)("div",ta,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,r.C4)([n.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",sa,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,oa),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,aa),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,la),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,ra)])],2)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",ia,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",na,[(0,a.Lk)("ul",da,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,ca),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,ua),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,pa),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,ga)])])):(0,a.Q3)("",!0)]))],512)])))),128)):(0,a.Q3)("",!0),n.filteredSaleRecords1standRenew.length<6&&n.filteredSaleRecords1standRenew.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(6-n.filteredSaleRecords1standRenew.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[154]||(t[154]=[(0,a.Lk)("td",{colspan:"8",class:"py-20"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.filteredSaleRecords1standRenew.length?((0,a.uX)(),(0,a.CE)("tr",ha,t[155]||(t[155]=[(0,a.Lk)("td",{colspan:"9",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isResultModalOpen?((0,a.uX)(),(0,a.CE)("div",ma,[(0,a.Lk)("div",ya,[(0,a.Lk)("div",ka,[t[156]||(t[156]=(0,a.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,a.Lk)("div",ba,[(0,a.Lk)("span",{onClick:t[53]||(t[53]=(...e)=>n.copyResultModalContent&&n.copyResultModalContent(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},(0,r.v_)(i.isCopied?"check_circle":"content_copy"),1),(0,a.Lk)("span",{onClick:t[54]||(t[54]=(...e)=>n.closeResultModal&&n.closeResultModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",xa,[t[157]||(t[157]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 ขออนุญาตสรุปยอดนะคะ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredResultSaleRecord,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-2"},[(0,a.Lk)("p",null,["name"===t?((0,a.uX)(),(0,a.CE)("strong",fa,[(0,a.eW)((0,r.v_)(n.formatResultLabel(t)),1),(0,a.Lk)("span",null,(0,r.v_)(e),1)])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Lk)("strong",null,(0,r.v_)(n.formatResultLabel(t)),1),(0,a.eW)(" "+(0,r.v_)(e),1)],64))])])))),128)),t[158]||(t[158]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1))],512)])])):(0,a.Q3)("",!0),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",_a,[(0,a.Lk)("div",va,[(0,a.Lk)("div",wa,[t[159]||(t[159]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,a.Lk)("div",La,[(0,a.Lk)("span",{onClick:t[55]||(t[55]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Pa,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,s,o)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,r.C4)(["p-2 rounded-md",o%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},["zone1_id"===s?((0,a.uX)(),(0,a.CE)("div",Ca,[(0,a.Lk)("div",Da,[(0,a.Lk)("strong",Ta,(0,r.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,r.v_)(e),1)]),(0,a.Lk)("div",Ma,[t[160]||(t[160]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,r.v_)(this.selectedSaleRecord.zone1_quantity),1)]),(0,a.Lk)("div",Sa,[t[161]||(t[161]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id))),1)])])):"zone2_id"===s?((0,a.uX)(),(0,a.CE)("div",Ea,[(0,a.Lk)("div",Ra,[(0,a.Lk)("strong",Aa,(0,r.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,r.v_)(e),1)]),(0,a.Lk)("div",za,[t[162]||(t[162]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,r.v_)(this.selectedSaleRecord.zone2_quantity),1)]),(0,a.Lk)("div",Fa,[t[163]||(t[163]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id))),1)])])):"zone3_id"===s?((0,a.uX)(),(0,a.CE)("div",Xa,[(0,a.Lk)("div",Oa,[(0,a.Lk)("strong",Qa,(0,r.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,r.v_)(e),1)]),(0,a.Lk)("div",Va,[t[164]||(t[164]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,r.v_)(this.selectedSaleRecord.zone3_quantity),1)]),(0,a.Lk)("div",Na,[t[165]||(t[165]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id))),1)])])):"zone_outsource_id"===s?((0,a.uX)(),(0,a.CE)("div",ja,[(0,a.Lk)("div",Ua,[(0,a.Lk)("strong",Ia,(0,r.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,r.v_)(e),1)]),(0,a.Lk)("div",$a,[t[166]||(t[166]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,a.eW)(" "+(0,r.v_)(this.selectedSaleRecord.zone_outsource_quantity),1)]),(0,a.Lk)("div",Za,[t[167]||(t[167]=(0,a.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,a.eW)(" "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id))),1)])])):((0,a.uX)(),(0,a.CE)(a.FK,{key:4},[(0,a.Lk)("strong",qa,(0,r.v_)(n.formatDetailLabel(s))+":",1),(0,a.eW)(" "+(0,r.v_)(e),1)],64))],2)))),128))],512)])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",Ja,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[169]||(t[169]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[56]||(t[56]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[168]||(t[168]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Wa,[(0,a.Lk)("div",Ba,[t[170]||(t[170]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขบันทึกการขาย",-1)),(0,a.Lk)("div",Ka,[(0,a.Lk)("span",{onClick:t[57]||(t[57]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Ya,[(0,a.Lk)("div",null,[t[171]||(t[171]=(0,a.Lk)("label",{for:"editCustomer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.customer_id,"onUpdate:modelValue":t[58]||(t[58]=e=>i.selectedSaleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[172]||(t[172]=(0,a.Lk)("label",{for:"editPackageType",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_type_id,"onUpdate:modelValue":t[59]||(t[59]=e=>i.selectedSaleRecord.package_type_id=e),options:n.filteredPackageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[173]||(t[173]=(0,a.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.promotion_type_id,"onUpdate:modelValue":t[60]||(t[60]=e=>i.selectedSaleRecord.promotion_type_id=e),options:i.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[174]||(t[174]=(0,a.Lk)("label",{for:"editProgram",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.program_id,"onUpdate:modelValue":t[61]||(t[61]=e=>i.selectedSaleRecord.program_id=e),options:i.programs,placeholder:"เลือก Programs","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[175]||(t[175]=(0,a.Lk)("label",{for:"editPackage",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.package_id,"onUpdate:modelValue":t[62]||(t[62]=e=>i.selectedSaleRecord.package_id=e),options:i.packages,placeholder:"เลือก Package","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Ha,[(0,a.Lk)("div",Ga,[t[177]||(t[177]=(0,a.Lk)("label",{for:"editDiscount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",el,[t[176]||(t[176]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[63]||(t[63]=e=>i.selectedSaleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.discount]])])]),(0,a.Lk)("div",tl,[t[179]||(t[179]=(0,a.Lk)("label",{for:"editExtraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",sl,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[64]||(t[64]=e=>i.selectedSaleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.selectedSaleRecord.extra_charge]]),t[178]||(t[178]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),n.computedEditTotalPackagePrice>0?((0,a.uX)(),(0,a.CE)("div",ol,[(0,a.Lk)("div",al,[(0,a.Lk)("label",ll," มูลค่าแพ็กเกจรวม: "+(0,r.v_)(n.formatPrice(n.computedEditTotalPackagePrice)),1),(0,a.Lk)("p",rl,"ราคาแพ็กเกจ: "+(0,r.v_)(n.formatPrice(i.selectedSaleRecord.package_price)),1),(0,a.Lk)("p",il,"ส่วนลดเพิ่มเติม: "+(0,r.v_)(n.formatPrice(i.selectedSaleRecord.discount)),1),(0,a.Lk)("p",nl,"มูลค่า Extra Charge: "+(0,r.v_)(n.formatPrice(n.computedEditExtraChargePackagePrice)),1)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",null,[t[180]||(t[180]=(0,a.Lk)("label",{for:"editReceiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.receive_food_id,"onUpdate:modelValue":t[65]||(t[65]=e=>i.selectedSaleRecord.receive_food_id=e),options:i.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",dl,[(0,a.Lk)("div",cl,[t[181]||(t[181]=(0,a.Lk)("label",{for:"editZone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone1_id,"onUpdate:modelValue":t[66]||(t[66]=e=>i.selectedSaleRecord.zone1_id=e),options:i.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",ul,[t[182]||(t[182]=(0,a.Lk)("label",{for:"editZone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[67]||(t[67]=e=>i.selectedSaleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone1_quantity]])])]),n.computedEditZone1Price>0?((0,a.uX)(),(0,a.CE)("div",pl,[(0,a.Lk)("label",gl,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,r.v_)(n.formatPrice(n.computedEditZone1Price)),1),(0,a.Lk)("p",hl,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone1_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",ml,[(0,a.Lk)("div",yl,[t[183]||(t[183]=(0,a.Lk)("label",{for:"editZone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone2_id,"onUpdate:modelValue":t[68]||(t[68]=e=>i.selectedSaleRecord.zone2_id=e),options:i.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",kl,[t[184]||(t[184]=(0,a.Lk)("label",{for:"editZone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[69]||(t[69]=e=>i.selectedSaleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone2_quantity]])])]),n.computedEditZone2Price>0?((0,a.uX)(),(0,a.CE)("div",bl,[(0,a.Lk)("label",xl,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,r.v_)(n.formatPrice(n.computedEditZone2Price)),1),(0,a.Lk)("p",fl,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone2_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",_l,[(0,a.Lk)("div",vl,[t[185]||(t[185]=(0,a.Lk)("label",{for:"editZone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone3_id,"onUpdate:modelValue":t[70]||(t[70]=e=>i.selectedSaleRecord.zone3_id=e),options:i.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",wl,[t[186]||(t[186]=(0,a.Lk)("label",{for:"editZone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[71]||(t[71]=e=>i.selectedSaleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone3_quantity]])])]),n.computedEditZone3Price>0?((0,a.uX)(),(0,a.CE)("div",Ll,[(0,a.Lk)("label",Pl,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,r.v_)(n.formatPrice(n.computedEditZone3Price)),1),(0,a.Lk)("p",Cl,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone3_id.id))),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Dl,[(0,a.Lk)("div",Tl,[t[187]||(t[187]=(0,a.Lk)("label",{for:"editZone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.zone_outsource_id,"onUpdate:modelValue":t[72]||(t[72]=e=>i.selectedSaleRecord.zone_outsource_id=e),options:i.zoneDeliveries,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Ml,[t[188]||(t[188]=(0,a.Lk)("label",{for:"editZone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[73]||(t[73]=e=>i.selectedSaleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.zone_outsource_quantity]])])]),n.computedEditZoneOutsourcePrice>0?((0,a.uX)(),(0,a.CE)("div",Sl,[(0,a.Lk)("label",El,"ค่าจัดส่งรวม Outsource: "+(0,r.v_)(n.formatPrice(n.computedEditZoneOutsourcePrice)),1),(0,a.Lk)("p",Rl,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(n.formatPrice(n.getZonePrice(i.selectedSaleRecord.zone_outsource_id.id))),1)])):(0,a.Q3)("",!0),n.computedEditTotalDeliveryPrice>0?((0,a.uX)(),(0,a.CE)("div",Al,[(0,a.Lk)("label",zl,"รวมค่าจัดส่งทั้งหมด: "+(0,r.v_)(n.formatPrice(n.computedEditTotalDeliveryPrice)),1),(0,a.Lk)("p",Fl,"ค่าจัดส่งรวม In-house Riders: "+(0,r.v_)(n.formatPrice(n.computedEditTotalZonePrice)),1),(0,a.Lk)("p",Xl,"ค่าจัดส่งรวม Outsource: "+(0,r.v_)(n.formatPrice(n.computedEditZoneOutsourcePrice)),1)])):(0,a.Q3)("",!0),n.computedEditTotalPrice>0?((0,a.uX)(),(0,a.CE)("div",Ol,[(0,a.Lk)("label",Ql,"มูลค่าขายรวม: "+(0,r.v_)(n.formatPrice(n.computedEditTotalPrice)),1),(0,a.Lk)("div",null,[(0,a.Lk)("p",Vl,"มูลค่าแพ็กเกจรวม: "+(0,r.v_)(n.formatPrice(n.computedEditTotalPackagePrice)),1)]),(0,a.Lk)("p",Nl,"รวมค่าจัดส่งทั้งหมด: "+(0,r.v_)(n.formatPrice(n.computedEditTotalDeliveryPrice)),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",jl,[(0,a.Lk)("div",Ul,[t[189]||(t[189]=(0,a.Lk)("label",{for:"editSellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.seller_name_id,"onUpdate:modelValue":t[74]||(t[74]=e=>i.selectedSaleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Il,[t[190]||(t[190]=(0,a.Lk)("label",{for:"editStartDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[75]||(t[75]=e=>i.selectedSaleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSaleRecord.start_date]])])]),(0,a.Lk)("div",$l,[(0,a.Lk)("div",Zl,[t[191]||(t[191]=(0,a.Lk)("label",{for:"editDeliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.delivery_round_id,"onUpdate:modelValue":t[76]||(t[76]=e=>i.selectedSaleRecord.delivery_round_id=e),options:i.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",ql,[t[192]||(t[192]=(0,a.Lk)("label",{for:"editSelectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.select_food_id,"onUpdate:modelValue":t[77]||(t[77]=e=>i.selectedSaleRecord.select_food_id=e),options:i.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",Jl,[t[193]||(t[193]=(0,a.Lk)("label",{for:"editNote",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"note","onUpdate:modelValue":t[78]||(t[78]=e=>i.selectedSaleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedSaleRecord.note]])])]),(0,a.Lk)("div",Wl,[(0,a.Lk)("div",Bl,[(0,a.Lk)("button",{onClick:t[79]||(t[79]=e=>i.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[80]||(t[80]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",Kl,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[195]||(t[195]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[81]||(t[81]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[194]||(t[194]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Yl,[(0,a.Lk)("div",Hl,[t[196]||(t[196]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[82]||(t[82]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[197]||(t[197]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,a.Lk)("div",Gl,[(0,a.Lk)("button",{onClick:t[83]||(t[83]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[84]||(t[84]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",er,[(0,a.Lk)("button",{onClick:t[85]||(t[85]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[198]||(t[198]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,tr),(0,a.Lk)("div",sr,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[86]||(t[86]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[87]||(t[87]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,or)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[88]||(t[88]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[89]||(t[89]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[90]||(t[90]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[199]||(t[199]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,ar)])])}s(8992),s(4520),s(2577);var rr=s(8074),ir=s(782),nr={components:{Multiselect:rr.Ay},data(){return{headers:["#","Customer's Name","Package Type","Program","Package","วันคงเหลือของแพ็กเกจ","วันหมดอายุแพ็กเกจ","สถานะการชำระเงิน",""],headerWidths:["5%","15%","10%","12%","13%","15%","13%","12%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],isAddModalOpen:!1,saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:"",total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:""},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:""},isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.filteredSaleRecords1standRenew.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{name:this.selectedSaleRecord.customer.name,package:this.selectedSaleRecord.package.package_detail,promotion_detail:this.selectedSaleRecord.package.promotion_detail,receive_food:this.totalReceiveFood,start_date:this.formatDate(this.selectedSaleRecord.start_date),sellect_by:this.getSelectFood(this.selectedSaleRecord.select_food_id),delivery_date:this.selectedSaleRecord.customer.delivery_date,delivery:this.getDeliveryRoundName(this.selectedSaleRecord.delivery_round_id),package_price:this.formatPrice(this.selectedSaleRecord.package.price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),note:this.selectedSaleRecord.note}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{seller_name_id:this.getSellerName(this.selectedSaleRecord.seller_name_id),name:this.selectedSaleRecord.customer?.name||"",package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),promotion_type:this.getPromotionTypeName(this.selectedSaleRecord.promotion_type_id)||"",program:this.getProgramName(this.selectedSaleRecord.program_id),package:this.selectedSaleRecord.package?.name||"",package_price:this.formatPrice(this.selectedSaleRecord.package?.price),promotion_detail:this.selectedSaleRecord.package?.promotion_detail||"",discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPercent(this.selectedSaleRecord.extra_charge),extra_charge_price:this.formatPrice(this.selectedSaleRecord.extra_charge_price),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),receive_food_id:this.getReceiveFoodName(this.selectedSaleRecord.receive_food_id),zone1_id:this.getZoneName(this.selectedSaleRecord.zone1_id),total_zone1_price:this.formatPrice(this.selectedSaleRecord.total_zone1_price),zone2_id:this.getZoneName(this.selectedSaleRecord.zone2_id),total_zone2_price:this.formatPrice(this.selectedSaleRecord.total_zone2_price),zone3_id:this.getZoneName(this.selectedSaleRecord.zone3_id),total_zone3_price:this.formatPrice(this.selectedSaleRecord.total_zone3_price),zone_outsource_id:this.getZoneName(this.selectedSaleRecord.zone_outsource_id),total_zone_outsource_price:this.formatPrice(this.selectedSaleRecord.total_zone_outsource_price),total_delivery_zone_price:this.formatPrice(this.selectedSaleRecord.total_delivery_zone_price),total_delivery_price:this.formatPrice(this.selectedSaleRecord.total_delivery_price),total_price:this.formatPrice(this.selectedSaleRecord.total_price),payment_status:this.getPaymentStatusText(this.selectedSaleRecord.payment_status),paid_date:this.formatDate(this.selectedSaleRecord.paid_date),payment_type_id:this.getPaymentTypeName(this.selectedSaleRecord.payment_type_id),start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),receive_date:this.formatDate(this.selectedSaleRecord.start_date),note:this.selectedSaleRecord.note||"",package_detail:this.selectedSaleRecord.package?.package_detail||"",delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",select_food_id:this.getSelectFood(this.selectedSaleRecord.select_food_id)}:{name:"",expiry_date:""}},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},totalReceiveFood(){let e=[];this.selectedSaleRecord.package.free_mad>0&&e.push(`${this.selectedSaleRecord.package.free_mad} x Main Dish`),this.selectedSaleRecord.package.free_dessert>0&&e.push(`${this.selectedSaleRecord.package.free_dessert} x Dessert`),this.selectedSaleRecord.package.free_brittles>0&&e.push(`${this.selectedSaleRecord.package.free_brittles} x Brittles`),this.selectedSaleRecord.package.free_energy_balls>0&&e.push(`${this.selectedSaleRecord.package.free_energy_balls} x Energy Balls`),this.selectedSaleRecord.package.free_dressing>0&&e.push(`${this.selectedSaleRecord.package.free_dressing} x Dressing`),this.selectedSaleRecord.package.free_yoghurt>0&&e.push(`${this.selectedSaleRecord.package.free_yoghurt} x Yoghurt`),this.selectedSaleRecord.package.free_granola>0&&e.push(`${this.selectedSaleRecord.package.free_granola} x Granola`);let t=e.length>0?e.join(" + "):"";return t},totalDeliveryPrice(){let e=[];null!==this.selectedSaleRecord.zone1_id&&this.selectedSaleRecord.zone1_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone1_id)} x ${this.selectedSaleRecord.zone1_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone2_id&&this.selectedSaleRecord.zone2_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone2_id)} x ${this.selectedSaleRecord.zone2_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone3_id&&this.selectedSaleRecord.zone3_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone3_id)} x ${this.selectedSaleRecord.zone3_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone_outsource_id&&this.selectedSaleRecord.zone_outsource_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone_outsource_id)} x ${this.selectedSaleRecord.zone_outsource_quantity} ครั้ง`);let t=e.length>0?`(${e.join(" + ")})`:"";return this.selectedSaleRecord.total_delivery_price>0?`${this.formatPrice(this.selectedSaleRecord.total_delivery_price)} ${t}`:""},filteredSaleRecords1standRenew(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t})).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}))},filteredPackageTypes(){return this.packageTypes.filter((e=>!e.name.toLowerCase().includes("additional sales")&&!e.name.toLowerCase().includes("consignment")))},isConsignmentOrAdditional(){const e=this.saleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedExtraChargePackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalPackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargePackagePrice;return e+s-t},computedExtraChargeAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargeAdditionalPrice;return e+s-t},computedZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));return e&&this.saleRecord.zone1_quantity?e.price*this.saleRecord.zone1_quantity:0},computedZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));return e&&this.saleRecord.zone2_quantity?e.price*this.saleRecord.zone2_quantity:0},computedZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));return e&&this.saleRecord.zone3_quantity?e.price*this.saleRecord.zone3_quantity:0},computedTotalZonePrice(){return this.computedZone1Price+this.computedZone2Price+this.computedZone3Price},computedZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));return e&&this.saleRecord.zone_outsource_quantity?e.price*this.saleRecord.zone_outsource_quantity:0},computedTotalDeliveryPrice(){return this.computedTotalZonePrice+this.computedZoneOutsourcePrice},computedTotalPrice(){return this.computedTotalPackagePrice+this.computedTotalAdditionalPrice+this.computedTotalDeliveryPrice},isEditConsignmentOrAdditional(){const e=this.selectedSaleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedEditExtraChargePackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.extra_charge)||0;return e*t/100},computedEditTotalPackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.discount)||0,s=this.computedEditExtraChargePackagePrice;return e+s-t},computedEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));return e&&this.selectedSaleRecord.zone1_quantity?e.price*this.selectedSaleRecord.zone1_quantity:0},computedEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));return e&&this.selectedSaleRecord.zone2_quantity?e.price*this.selectedSaleRecord.zone2_quantity:0},computedEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));return e&&this.selectedSaleRecord.zone3_quantity?e.price*this.selectedSaleRecord.zone3_quantity:0},computedEditTotalZonePrice(){return this.computedEditZone1Price+this.computedEditZone2Price+this.computedEditZone3Price},computedEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));return e&&this.selectedSaleRecord.zone_outsource_quantity?e.price*this.selectedSaleRecord.zone_outsource_quantity:0},computedEditTotalDeliveryPrice(){return this.computedEditTotalZonePrice+this.computedEditZoneOutsourcePrice},computedEditTotalPrice(){return this.computedEditTotalPackagePrice+this.computedEditTotalDeliveryPrice},...(0,ir.L8)(["saleRecords"])},methods:{...(0,ir.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],l=s.getFullYear();return`${o} ${a} ${l}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.filteredSaleRecords1standRenew.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s})).slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.filteredSaleRecords=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},openAddModal(){this.isAddModalOpen=!0},async addSaleRecord(){if(this.saleRecord.customer_id)try{const e=await ne.A.post("http://127.0.0.1:3333/sale-records",{customer_id:this.saleRecord.customer_id?.id||null,promotion_type_id:this.saleRecord.promotion_type_id?.id||null,program_id:this.saleRecord.program_id?.id||null,package_id:this.saleRecord.package_id?.id||null,package_type_id:this.saleRecord.package_type_id?.id||null,seller_name_id:this.saleRecord.seller_name_id?.id||null,delivery:this.saleRecord.delivery||"",discount:this.saleRecord.discount||0,extra_charge:this.saleRecord.extra_charge||0,payment_status:this.saleRecord.payment_status||"unpaid",paid_date:this.saleRecord.paid_date||null,payment_type_id:this.saleRecord.payment_type_id?.id||null,start_date:this.saleRecord.start_date||null,zone1_id:this.saleRecord.zone1_id?.id||null,zone1_quantity:this.saleRecord.zone1_quantity||0,zone2_id:this.saleRecord.zone2_id?.id||null,zone2_quantity:this.saleRecord.zone2_quantity||0,zone3_id:this.saleRecord.zone3_id?.id||null,zone3_quantity:this.saleRecord.zone3_quantity||0,zone_outsource_id:this.saleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.saleRecord.zone_outsource_quantity||0,additional_type_id:this.saleRecord.additional_type_id?.id||null,add_detail:this.saleRecord.add_detail||null,add_price:this.saleRecord.add_price||0,delivery_round_id:this.saleRecord.delivery_round_id?.id||null,select_food_id:this.saleRecord.select_food_id?.id||null,receive_food_id:this.saleRecord.receive_food_id?.id||null,note:this.saleRecord.note||null});this.saleRecords.push(e.data),this.closeAddModal(),this.filterPrograms(),this.filterPackages(),await this.fetchSaleRecords(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){console.error("Error adding sale record:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการเพิ่มข้อมูล!"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},clearForm(){this.saleRecord={customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:""},this.packageDetails=null,this.isShowingPackageDetails=!1,this.customerAddress=null,this.filterPrograms(),this.filterPackages()},openEditModal(e){const t=e=>{if(!e)return null;const t=new Date(e);return t.toLocaleDateString("en-CA")};this.selectedSaleRecord={...e,start_date:t(e.start_date),customer_id:this.customers.find((t=>t.id===e.customer_id))||null,package_type_id:this.packageTypes.find((t=>t.id===e.package_type_id))||null,promotion_type_id:this.promotionTypes.find((t=>t.id===e.promotion_type_id))||null,program_id:this.programs.find((t=>t.id===e.program_id))||null,package_id:this.packages.find((t=>t.id===e.package_id))||null,receive_food_id:this.receiveFoods.find((t=>t.id===e.receive_food_id))||null,zone1_id:this.zoneDeliveries.find((t=>t.id===e.zone1_id))||null,zone2_id:this.zoneDeliveries.find((t=>t.id===e.zone2_id))||null,zone3_id:this.zoneDeliveries.find((t=>t.id===e.zone3_id))||null,zone_outsource_id:this.zoneDeliveries.find((t=>t.id===e.zone_outsource_id))||null,seller_name_id:this.zoneDeliveries.find((t=>t.id===e.seller_name_id))||null,delivery_round_id:this.deliveryRounds.find((t=>t.id===e.delivery_round_id))||null,select_food_id:this.selectFoods.find((t=>t.id===e.select_food_id))||null,paid_date:t(e.paid_date),payment_type_id:this.paymentTypes.find((t=>t.id===e.payment_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){if(this.selectedSaleRecord.customer_id)try{const e=await ne.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}`,{customer_id:this.selectedSaleRecord.customer_id?.id||null,promotion_type_id:this.selectedSaleRecord.promotion_type_id?.id||null,program_id:this.selectedSaleRecord.program_id?.id||null,package_id:this.selectedSaleRecord.package_id?.id||null,package_type_id:this.selectedSaleRecord.package_type_id?.id||null,seller_name_id:this.selectedSaleRecord.seller_name_id?.id||null,delivery:this.selectedSaleRecord.delivery||"",discount:this.selectedSaleRecord.discount||0,extra_charge:this.selectedSaleRecord.extra_charge||0,start_date:this.selectedSaleRecord.start_date||null,zone1_id:this.selectedSaleRecord.zone1_id?.id||null,zone1_quantity:this.selectedSaleRecord.zone1_quantity||0,zone2_id:this.selectedSaleRecord.zone2_id?.id||null,zone2_quantity:this.selectedSaleRecord.zone2_quantity||0,zone3_id:this.selectedSaleRecord.zone3_id?.id||null,zone3_quantity:this.selectedSaleRecord.zone3_quantity||0,zone_outsource_id:this.selectedSaleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.selectedSaleRecord.zone_outsource_quantity||0,additional_type_id:this.selectedSaleRecord.additional_type_id?.id||null,add_detail:this.selectedSaleRecord.add_detail||null,add_price:this.selectedSaleRecord.add_price||0,delivery_round_id:this.selectedSaleRecord.delivery_round_id?.id||null,select_food_id:this.selectedSaleRecord.select_food_id?.id||null,receive_food_id:this.selectedSaleRecord.receive_food_id?.id||null,note:this.selectedSaleRecord.note||null}),t=this.saleRecords.findIndex((e=>e.id===this.selectedSaleRecord.id));-1!==t&&(this.saleRecords[t]=e.data),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.isEditModalOpen=!1,await this.fetchSaleRecords()}catch(e){console.error("Error saving changes:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeEditModal(){this.isEditModalOpen=!1,this.selectedSaleRecord={}},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,o,a,l,r,i,n,d,c,u,p]=await Promise.all([ne.A.get("http://127.0.0.1:3333/customers"),ne.A.get("http://127.0.0.1:3333/promotion-types"),ne.A.get("http://127.0.0.1:3333/programs"),ne.A.get("http://127.0.0.1:3333/packages"),ne.A.get("http://127.0.0.1:3333/package-types"),ne.A.get("http://127.0.0.1:3333/zone-deliveries"),ne.A.get("http://127.0.0.1:3333/zone-delivery-types"),ne.A.get("http://127.0.0.1:3333/seller-names"),ne.A.get("http://127.0.0.1:3333/payment-types"),ne.A.get("http://127.0.0.1:3333/additional-types"),ne.A.get("http://127.0.0.1:3333/delivery-rounds"),ne.A.get("http://127.0.0.1:3333/receive-foods"),ne.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),o=t.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[t.getMonth()],a=t.getFullYear();return e.displayLabel=`${e.name} (${o} ${a})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=l.data,this.zoneDeliveryTypes=r.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ne.A.get("http://127.0.0.1:3333/sale-records");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),o=e.getMonth();if(o===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],o=s[e.getMonth()],a=e.getFullYear();return`${t.name} (${o} ${a})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/sale-records/${this.itemToDelete}`),this.saleRecords=this.saleRecords.filter((e=>e.id!==this.itemToDelete)),this.showFailToastNotification("ลบข้อมูลสำเร็จ!"),this.closeDeleteModal(),this.updatePage()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={seller_name_id:"ผู้ขาย",name:"ชื่อ-สกุลลูกค้า",package_type:"Package Type",promotion_type:"Promotion Type",program:"Program",package:"แพ็กเกจที่ซื้อ ",package_price:"ราคาแพ็กเกจ",promotion_detail:"รายละเอียดโปรโมชัน",discount:"ส่วนลดเพิ่มเติมจากโปรฯ ประจำเดือน (ถ้ามี)",extra_charge:"Extra Charge (%)",extra_charge_price:"มูลค่า Extra Charge",total_package_price:"มูลค่าแพ็กเกจรวม",receive_food_id:"วิธีการรับอาหาร",zone1_id:"In-house Riders (ที่อยู่ 1)",total_zone1_price:"ค่าจัดส่งรวม (ที่อยู่ 1)",zone2_id:"In-house Riders (ที่อยู่ 2)",total_zone2_price:"ค่าจัดส่งรวม (ที่อยู่ 2)",zone3_id:"In-house Riders (ที่อยู่ 3)",total_zone3_price:"ค่าจัดส่งรวม (ที่อยู่ 3)",zone_outsource_id:"Outsource Riders",total_zone_outsource_price:"ค่าจัดส่งรวม Outsource",total_delivery_zone_price:"ค่าจัดส่งรวม In-house Riders",total_delivery_price:"รวมค่าจัดส่งทั้งหมด",total_price:"มูลค่าขายรวม",payment_status:"สถานะการชำระเงิน",paid_date:"วันที่ชำระเงิน",payment_type_id:"วิธีการชำระเงิน",receive_date:"วันเริ่มรับอาหารวันแรก",sellect_by:"เลือกอาหารโดย",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",note:"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",package_detail:"ข้อมูลแพ็กเกจ(สำหรับสรุปให้ลูกค้า)",delivery_date:"วันที่ต้องการรับอาหาร",select_food_id:"วิธีการเลือกอาหาร"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},onViewResultSaleRecord(e){this.selectedSaleRecord=e,this.isResultModalOpen=!0,this.moreOpenDropdownIndex=null},closeResultModal(){this.isResultModalOpen=!1},formatResultLabel(e){const t={name:"🏷 คุณ",package:"▶️ แพ็คเกจ",promotion_detail:"🔥",receive_food:"▶️ อาหารที่ได้รับ",start_date:"▶️ วันรับอาหารวันแรก",sellect_by:"▶️ เลือกอาหารโดย",delivery_date:"▶️ วันที่รับอาหาร",delivery:"▶️ จัดส่ง",package_price:"▶️ ราคาแพ็คเกจ",extra_charge:"▶️ Extra Chrage",discount:"▶️ ส่วนลด",total_delivery_price:"▶️ ค่าจัดส่ง",total_price:"▶️ ยอดชำระ",expiry_date:"▶️ วันหมดอายุแพ็คเกจ",note:"▶️ หมายเหตุ:"};return t[e]||e},copyResultModalContent(){let e=this.$refs.modalContent.innerText;if(e=e.replace(/\n\s*\n/g,"\n"),navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)})).catch((e=>{console.error("ไม่สามารถคัดลอกข้อความ:",e)}));else{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)}catch(t){console.error("ไม่สามารถคัดลอกข้อความ:",t)}finally{document.body.removeChild(s)}}},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1)},calculateTotalPrice(){if(!this.saleRecord.package_id)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.saleRecord.package_id.id));if(!e)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.saleRecord.extra_charge)||0,o=parseFloat(this.saleRecord.discount)||0,a=t*s/100;this.saleRecord.extra_charge_price=a,this.saleRecord.package_price=t,this.saleRecord.total_package_price=t+a-o},calculateZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));e&&this.saleRecord.zone1_quantity&&(this.computedZone1Price=e.price*this.saleRecord.zone1_quantity)},calculateZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));e&&this.saleRecord.zone2_quantity&&(this.computedZone2Price=e.price*this.saleRecord.zone2_quantity)},calculateZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));e&&this.saleRecord.zone3_quantity&&(this.computedZone3Price=e.price*this.saleRecord.zone3_quantity)},calculateZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));e&&this.saleRecord.zone_outsource_quantity&&(this.computedZoneOutsourcePrice=e.price*this.saleRecord.zone_outsource_quantity)},calculateEditTotalPrice(){if(!this.selectedSaleRecord.package_id)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.selectedSaleRecord.package_id?.id));if(!e)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.selectedSaleRecord.extra_charge)||0,o=parseFloat(this.selectedSaleRecord.discount)||0,a=t*s/100;this.selectedSaleRecord.extra_charge_price=a,this.selectedSaleRecord.package_price=t,this.selectedSaleRecord.total_package_price=t+a-o},calculateEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));e&&this.selectedSaleRecord.zone1_quantity&&(this.computedEditZone1Price=e.price*this.selectedSaleRecord.zone1_quantity)},calculateEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));e&&this.selectedSaleRecord.zone2_quantity&&(this.computedEditZone2Price=e.price*this.selectedSaleRecord.zone2_quantity)},calculateEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));e&&this.selectedSaleRecord.zone3_quantity&&(this.computedEditZone3Price=e.price*this.selectedSaleRecord.zone3_quantity)},calculateEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));e&&this.selectedSaleRecord.zone_outsource_quantity&&(this.computedEditZoneOutsourcePrice=e.price*this.selectedSaleRecord.zone_outsource_quantity)},clearNotAdditionalForm(){this.saleRecord.add_detail=null,this.saleRecord.additional_type_id=null,this.saleRecord.add_price=0},clearAdditionalForm(){this.saleRecord.promotion_type_id=null,this.saleRecord.program_id=null,this.saleRecord.package_id=null},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},openConfirmPaymentModal(e){this.selectedSaleRecord=e,this.selectedPaidDate=e.paid_date||"",this.isConfirmPaymentModalOpen=!0},closeConfirmPaymentModal(){this.isConfirmPaymentModalOpen=!1,this.selectedPaidDate=""},async confirmPayment(){try{const e="paid"===this.selectedSaleRecord.payment_status?"unpaid":"paid",t="paid"===e?this.selectedPaidDate:null,s="paid"===e?this.selectedSaleRecord.payment_type_id?.id:null;if("paid"===e&&(!this.selectedPaidDate||!s))return void this.showErrorToastNotification("กรุณาเลือกข้อมูลให้ครบ!");const o={payment_status:e,paid_date:t,payment_type_id:s},a=await ne.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}/payment-status`,o);if(await this.fetchSaleRecords(),200!==a.status)throw new Error("Unexpected response status");{const e=a.data.data,t=this.saleRecords.findIndex((t=>t.id===e.id));-1!==t&&(this.saleRecords[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error updating payment status:",e),console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmPaymentModal()},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.promotion_type_id":function(){this.filterPrograms()},"saleRecord.program_id":function(){this.filterPackages()},"saleRecord.package_id"(){this.calculateTotalPrice()},"saleRecord.discount"(){this.calculateTotalPrice()},"saleRecord.extra_charge"(){this.calculateTotalPrice()},"saleRecord.zone1_id"(){this.calculateZone1Price()},"saleRecord.zone1_quantity"(){this.calculateZone1Price()},"saleRecord.zone2_id"(){this.calculateZone2Price()},"saleRecord.zone2_quantity"(){this.calculateZone2Price()},"saleRecord.zone3_id"(){this.calculateZone3Price()},"saleRecord.zone3_quantity"(){this.calculateZone3Price()},"saleRecord.zone_outsource_id"(){this.calculateZoneOutsourcePrice()},"saleRecord.zone_outsource_quantity"(){this.calculateZoneOutsourcePrice()},"saleRecord.package_type_id":"checkPackageType","selectedSaleRecord.package_id"(){this.calculateEditTotalPrice()},"selectedSaleRecord.discount"(){this.calculateEditTotalPrice()},"selectedSaleRecord.extra_charge"(){this.calculateEditTotalPrice()},"selectedSaleRecord.zone1_id"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone1_quantity"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone2_id"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone2_quantity"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone3_id"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone3_quantity"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone_outsource_id"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.zone_outsource_quantity"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.package_type_id":"checkEditPackageType"},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const dr=(0,B.A)(nr,[["render",lr]]);var cr=dr;const ur={class:"flex space-x-2 items-center relative"},pr={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},gr={class:"text-m text-custom-orange font-bold"},hr={class:"add relative inline-block"},mr={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},yr={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},kr={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},br={class:"p-6 space-y-4 overflow-y-auto flex-grow"},xr={key:0},fr={class:"flex-1"},_r={class:"relative"},vr={key:1},wr={class:"flex-1"},Lr={class:"relative"},Pr={key:2},Cr={class:"flex space-x-4"},Dr={class:"flex-1"},Tr={class:"relative"},Mr={class:"flex-1"},Sr={class:"relative"},Er={key:3,class:"mt-4 p-4 border border-custom-orange rounded-md"},Rr={key:0},Ar={key:1},zr={key:2},Fr={class:"flex space-x-4"},Xr={class:"flex-1"},Or={class:"flex-1"},Qr={class:"flex space-x-4"},Vr={class:"flex-1"},Nr={class:"flex-1"},jr={class:"flex space-x-4"},Ur={class:"flex-1"},Ir={class:"flex-1"},$r={class:"flex space-x-4"},Zr={class:"flex-1"},qr={class:"flex-1"},Jr={class:"flex space-x-4"},Wr={class:"flex-1"},Br={class:"flex-1"},Kr={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Yr={class:"flex space-x-2"},Hr={class:"sort relative inline-block",ref:"sortDropdown"},Gr={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},ei={class:"list-none p-0 m-0"},ti={key:0,class:"material-symbols-outlined text-sm"},si={key:0,class:"material-symbols-outlined text-sm"},oi={class:"flex w-[250px] relative"},ai={key:0,class:"p-4 flex items-left space-x-6 text-m font-bold"},li={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},ri={class:"bg-custom-orange text-white"},ii={class:"px-4 py-2 align-top pb-5"},ni={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},di={class:"px-4 py-2 align-top pb-5"},ci={class:"px-4 py-2 align-top pb-5"},ui={class:"px-4 py-2 align-top pb-5"},pi={class:"px-4 py-2 align-top pb-5"},gi={class:"px-4 py-2 align-top font-bold pb-5"},hi=["onClick"],mi={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},yi={class:"bg-white rounded-md w-1/3 max-w-lg"},ki={class:"font-bold"},bi={class:"p-6 space-y-4"},xi={class:"text-gray-700"},fi={key:0},_i={key:1,class:"mt-4"},vi={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},wi=["onClick"],Li={key:0},Pi={class:"list-none p-0 m-0"},Ci=["onClick"],Di=["onClick"],Ti=["onClick"],Mi=["onClick"],Si={key:1},Ei={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},Ri={class:"list-none p-0 m-0"},Ai=["onClick"],zi=["onClick"],Fi=["onClick"],Xi=["onClick"],Oi={key:2},Qi={key:0,class:"modal fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-10 z-50"},Vi={class:"bg-white rounded-md shadow-lg w-1000"},Ni={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},ji={class:"flex space-x-2"},Ui={class:"p-6",ref:"modalContent"},Ii={key:1,class:"modal fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-10 z-50"},$i={class:"bg-white rounded-md shadow-lg w-1000"},Zi={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},qi={class:"flex space-x-2"},Ji={class:"p-6",ref:"modalContent"},Wi={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Bi={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Ki={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Yi={class:"flex space-x-2"},Hi={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Gi={class:"mb-4"},en={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},tn={class:"flex space-x-2"},sn={key:3,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},on={class:"bg-white rounded-lg shadow-md w-1/3"},an={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},ln={class:"flex justify-end space-x-2 p-4"},rn={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1 border-t border-t-gray-200"},nn=["disabled"],dn={class:"flex items-center space-x-1"},cn=["onClick"],un=["disabled"];function pn(e,t,s,l,i,n){const d=(0,a.g2)("multiselect"),c=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[63]||(t[63]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[62]||(t[62]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[65]||(t[65]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[64]||(t[64]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",ur,[(0,a.Lk)("div",pr,[t[66]||(t[66]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการบันทึกการขายทั้งหมด: ",-1)),(0,a.Lk)("span",gr,(0,r.v_)(i.saleRecords.length)+" รายการ",1)]),(0,a.Lk)("div",hr,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[67]||(t[67]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มบันทึกการขาย",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",mr,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",yr,[(0,a.Lk)("div",kr,[t[70]||(t[70]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,a.Lk)("span",{onClick:t[4]||(t[4]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",br,[(0,a.Lk)("div",null,[t[71]||(t[71]=(0,a.Lk)("label",{for:"customer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.customer_id,"onUpdate:modelValue":t[5]||(t[5]=e=>i.saleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[72]||(t[72]=(0,a.Lk)("label",{for:"package_type",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_type_id,"onUpdate:modelValue":t[6]||(t[6]=e=>i.saleRecord.package_type_id=e),options:i.packageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),i.saleRecord.package_type_id&&"additional sales"===i.saleRecord.package_type_id.name.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",xr,[(0,a.Lk)("div",null,[t[73]||(t[73]=(0,a.Lk)("label",{for:"additional_type",class:"block font-bold text-gray-700"},"ประเภทรายการ",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.additional_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.saleRecord.additional_type_id=e),options:i.additionalTypes,placeholder:"เลือกประเภทรายการ","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[74]||(t[74]=(0,a.Lk)("label",{for:"add_detail",class:"block font-bold text-gray-700"},"รายละเอียดการขาย",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.saleRecord.add_detail=e),id:"add_detail",type:"text",placeholder:"กรอกรายละเอียดการขาย",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.add_detail]])]),(0,a.Lk)("div",fr,[t[76]||(t[76]=(0,a.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,a.Lk)("div",_r,[t[75]||(t[75]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.saleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.add_price]])])])])):(0,a.Q3)("",!0),i.saleRecord.package_type_id&&"consignment"===i.saleRecord.package_type_id.name.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",vr,[(0,a.Lk)("div",null,[t[77]||(t[77]=(0,a.Lk)("label",{for:"consignment_detail",class:"block font-bold text-gray-700"},"รายละเอียดสำหรับ Consignment",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.saleRecord.add_detail=e),id:"consignment_detail",type:"text",placeholder:"กรอกรายละเอียด Consignment",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.add_detail]])]),(0,a.Lk)("div",wr,[t[79]||(t[79]=(0,a.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,a.Lk)("div",Lr,[t[78]||(t[78]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.saleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.add_price]])])])])):(0,a.Q3)("",!0),"additional sales"!==i.saleRecord.package_type_id?.name?.toLowerCase()&&"consignment"!==i.saleRecord.package_type_id?.name?.toLowerCase()?((0,a.uX)(),(0,a.CE)("div",Pr,[(0,a.Lk)("div",null,[t[80]||(t[80]=(0,a.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.promotion_type_id,"onUpdate:modelValue":t[12]||(t[12]=e=>i.saleRecord.promotion_type_id=e),options:i.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[81]||(t[81]=(0,a.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.program_id,"onUpdate:modelValue":t[13]||(t[13]=e=>i.saleRecord.program_id=e),options:i.programs,placeholder:"เลือก Program","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[82]||(t[82]=(0,a.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.package_id,"onUpdate:modelValue":t[14]||(t[14]=e=>i.saleRecord.package_id=e),options:i.packages,placeholder:"เลือก Package","track-by":"id",label:"name"},null,8,["modelValue","options"])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Cr,[(0,a.Lk)("div",Dr,[t[84]||(t[84]=(0,a.Lk)("label",{for:"discount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,a.Lk)("div",Tr,[t[83]||(t[83]=(0,a.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.saleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.discount]])])]),(0,a.Lk)("div",Mr,[t[86]||(t[86]=(0,a.Lk)("label",{for:"extraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,a.Lk)("div",Sr,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>i.saleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[o.Jo,i.saleRecord.extra_charge]]),t[85]||(t[85]=(0,a.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",Er,[t[90]||(t[90]=(0,a.Lk)("h3",{class:"font-bold"},"ที่อยู่ลูกค้า",-1)),i.saleRecord.address_1?((0,a.uX)(),(0,a.CE)("div",Rr,[(0,a.Lk)("p",null,[t[87]||(t[87]=(0,a.Lk)("strong",null,"ที่อยู่ 1:",-1)),(0,a.eW)(" "+(0,r.v_)(i.saleRecord.address_1),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_2?((0,a.uX)(),(0,a.CE)("div",Ar,[(0,a.Lk)("p",null,[t[88]||(t[88]=(0,a.Lk)("strong",null,"ที่อยู่ 2:",-1)),(0,a.eW)(" "+(0,r.v_)(i.saleRecord.address_2),1)])])):(0,a.Q3)("",!0),i.saleRecord.address_3?((0,a.uX)(),(0,a.CE)("div",zr,[(0,a.Lk)("p",null,[t[89]||(t[89]=(0,a.Lk)("strong",null,"ที่อยู่ 3:",-1)),(0,a.eW)(" "+(0,r.v_)(i.saleRecord.address_3),1)])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,a.Lk)("div",Fr,[(0,a.Lk)("div",Xr,[t[91]||(t[91]=(0,a.Lk)("label",{for:"zone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone1_id,"onUpdate:modelValue":t[17]||(t[17]=e=>i.saleRecord.zone1_id=e),options:i.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Or,[t[92]||(t[92]=(0,a.Lk)("label",{for:"zone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>i.saleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone1_quantity]])])]),(0,a.Lk)("div",Qr,[(0,a.Lk)("div",Vr,[t[93]||(t[93]=(0,a.Lk)("label",{for:"zone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone2_id,"onUpdate:modelValue":t[19]||(t[19]=e=>i.saleRecord.zone2_id=e),options:i.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Nr,[t[94]||(t[94]=(0,a.Lk)("label",{for:"zone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>i.saleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone2_quantity]])])]),(0,a.Lk)("div",jr,[(0,a.Lk)("div",Ur,[t[95]||(t[95]=(0,a.Lk)("label",{for:"zone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone3_id,"onUpdate:modelValue":t[21]||(t[21]=e=>i.saleRecord.zone3_id=e),options:i.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Ir,[t[96]||(t[96]=(0,a.Lk)("label",{for:"zone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>i.saleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone3_quantity]])])]),(0,a.Lk)("div",$r,[(0,a.Lk)("div",Zr,[t[97]||(t[97]=(0,a.Lk)("label",{for:"zone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.zone_outsource_id,"onUpdate:modelValue":t[23]||(t[23]=e=>i.saleRecord.zone_outsource_id=e),options:i.zoneDeliveries,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",qr,[t[98]||(t[98]=(0,a.Lk)("label",{for:"zone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[24]||(t[24]=e=>i.saleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.zone3_quantity]])])]),(0,a.Lk)("div",Jr,[(0,a.Lk)("div",Wr,[t[99]||(t[99]=(0,a.Lk)("label",{for:"sellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,a.bF)(d,{modelValue:i.saleRecord.seller_name_id,"onUpdate:modelValue":t[25]||(t[25]=e=>i.saleRecord.seller_name_id=e),options:i.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Br,[t[100]||(t[100]=(0,a.Lk)("label",{for:"startDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>i.saleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.saleRecord.start_date]])])])]),(0,a.Lk)("div",Kr,[(0,a.Lk)("li",{onClick:t[27]||(t[27]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[101]||(t[101]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",Yr,[(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[29]||(t[29]=(...e)=>n.addSaleRecord&&n.addSaleRecord(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Hr,[(0,a.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[102]||(t[102]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",Gr,[(0,a.Lk)("ul",ei,[(0,a.Lk)("li",{onClick:t[31]||(t[31]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[103]||(t[103]=(0,a.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",ti,(0,r.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[32]||(t[32]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[104]||(t[104]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",si,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[33]||(t[33]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[105]||(t[105]=[(0,a.Lk)("span",null,"Clear Sort",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",oi,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[34]||(t[34]=e=>i.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[35]||(t[35]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[36]||(t[36]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[37]||(t[37]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),"/sale-records"===e.$route.path||"/sale-records-additional"===e.$route.path?((0,a.uX)(),(0,a.CE)("div",ai,[(0,a.bF)(c,{to:"sale-records",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records"===e.$route.path}])},{default:(0,a.k6)((()=>t[106]||(t[106]=[(0,a.eW)(" บันทึกการขาย 1stTimer, PackageRenewal ")]))),_:1},8,["class"]),(0,a.bF)(c,{to:"sale-records-additional",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records-additional"===e.$route.path}])},{default:(0,a.k6)((()=>t[107]||(t[107]=[(0,a.eW)(" บันทึกการขาย AdditionalSales ")]))),_:1},8,["class"])])):(0,a.Q3)("",!0),(0,a.Lk)("table",li,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",ri,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[n.additionalSalesRecords.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(n.additionalSalesRecords,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",ii,(0,r.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",ni,(0,r.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",di,(0,r.v_)(n.getPackageTypeName(e.package_type_id)),1),(0,a.Lk)("td",ci,(0,r.v_)(e.additional_type_id),1),(0,a.Lk)("td",ui,(0,r.v_)(e.add_detail),1),(0,a.Lk)("td",pi,(0,r.v_)(n.formatPrice(e.add_price)),1),(0,a.Lk)("td",gi,[(0,a.Lk)("button",{onClick:t=>n.openConfirmPaymentModal(e),class:(0,r.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none",n.getPaymentStatusClass(e.payment_status)])},(0,r.v_)(n.getPaymentStatusText(e.payment_status)),11,hi),i.isConfirmPaymentModalOpen?((0,a.uX)(),(0,a.CE)("div",mi,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[109]||(t[109]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[38]||(t[38]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[108]||(t[108]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",yi,[(0,a.Lk)("div",{class:(0,r.C4)([{"bg-green-500":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500":"paid"===i.selectedSaleRecord.payment_status},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,a.Lk)("span",ki,(0,r.v_)("paid"===i.selectedSaleRecord.payment_status?"เปลี่ยนสถานะเป็นยังไม่ได้ชำระเงิน":"ยืนยันการชำระเงิน"),1),(0,a.Lk)("button",{onClick:t[39]||(t[39]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"text-white hover:text-gray-200"},t[110]||(t[110]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,a.Lk)("div",bi,[(0,a.Lk)("p",xi,(0,r.v_)("paid"===i.selectedSaleRecord.payment_status?'คุณต้องการเปลี่ยนสถานะเป็น "ยังไม่ได้ชำระเงิน" หรือไม่?':"กรุณาเลือกวันที่ชำระเงิน:"),1),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",fi,[(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedPaidDate=e),class:"border border-gray-300 rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPaidDate]])])):(0,a.Q3)("",!0),"paid"!==i.selectedSaleRecord.payment_status?((0,a.uX)(),(0,a.CE)("div",_i,[t[111]||(t[111]=(0,a.Lk)("label",{for:"payment_types",class:"block text-gray-700"},"เลือกประเภทการชำระเงิน:",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.payment_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedSaleRecord.payment_type_id=e),options:i.paymentTypes,label:"name","track-by":"id",placeholder:"เลือกประเภทการชำระเงิน"},null,8,["modelValue","options"])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",vi,[(0,a.Lk)("button",{onClick:t[42]||(t[42]=(...e)=>n.closeConfirmPaymentModal&&n.closeConfirmPaymentModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[43]||(t[43]=(...e)=>n.confirmPayment&&n.confirmPayment(...e)),class:(0,r.C4)([{"bg-green-500 hover:bg-green-600":"unpaid"===i.selectedSaleRecord.payment_status,"bg-red-500 hover:bg-red-600":"paid"===i.selectedSaleRecord.payment_status},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(s)},t[112]||(t[112]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,wi),n.additionalSalesRecords.length>4?((0,a.uX)(),(0,a.CE)("div",Li,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,r.C4)([n.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",Pi,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,Ci),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,Di),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,Ti),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,Mi)])],2)):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",Si,[i.moreOpenDropdownIndex===s?((0,a.uX)(),(0,a.CE)("div",Ei,[(0,a.Lk)("ul",Ri,[(0,a.Lk)("li",{onClick:t=>n.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,Ai),(0,a.Lk)("li",{onClick:t=>n.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,zi),(0,a.Lk)("li",{onClick:t=>n.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,Fi),(0,a.Lk)("li",{onClick:t=>n.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,Xi)])])):(0,a.Q3)("",!0)]))],512)])))),128)):(0,a.Q3)("",!0),n.additionalSalesRecords.length<5&&n.additionalSalesRecords.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(5-n.additionalSalesRecords.length,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[113]||(t[113]=[(0,a.Lk)("td",{colspan:"8",class:"py-20"},null,-1)]))))),128)):(0,a.Q3)("",!0),0===n.additionalSalesRecords.length?((0,a.uX)(),(0,a.CE)("tr",Oi,t[114]||(t[114]=[(0,a.Lk)("td",{colspan:"8",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isResultModalOpen?((0,a.uX)(),(0,a.CE)("div",Qi,[(0,a.Lk)("div",Vi,[(0,a.Lk)("div",Ni,[t[115]||(t[115]=(0,a.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,a.Lk)("div",ji,[(0,a.Lk)("span",{onClick:t[44]||(t[44]=(...e)=>n.copyResultModalContent&&n.copyResultModalContent(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},(0,r.v_)(i.isCopied?"check_circle":"content_copy"),1),(0,a.Lk)("span",{onClick:t[45]||(t[45]=(...e)=>n.closeResultModal&&n.closeResultModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Ui,[t[116]||(t[116]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 ขออนุญาตสรุปยอดนะคะ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredResultSaleRecord,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-2"},[(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,(0,r.v_)(n.formatResultLabel(t))+":",1),(0,a.eW)(" "+(0,r.v_)(e),1)])])))),128)),t[117]||(t[117]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"📌 กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1))],512)])])):(0,a.Q3)("",!0),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",Ii,[(0,a.Lk)("div",$i,[(0,a.Lk)("div",Zi,[t[118]||(t[118]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,a.Lk)("div",qi,[(0,a.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Ji,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetailSaleRecord,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-2"},[(0,a.Lk)("p",null,[(0,a.Lk)("strong",{class:(0,r.C4)(n.getLabelClass(t))},(0,r.v_)(n.formatDetialLabel(t))+":",3),(0,a.Lk)("span",{class:(0,r.C4)(["ml-1",n.getValueClass(t)])},(0,r.v_)(e),3)])])))),128))],512)])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",Wi,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[120]||(t[120]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[47]||(t[47]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[119]||(t[119]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Bi,[(0,a.Lk)("div",Ki,[t[121]||(t[121]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขโปรแกรม",-1)),(0,a.Lk)("div",Yi,[(0,a.Lk)("span",{onClick:t[48]||(t[48]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Hi,[(0,a.Lk)("div",Gi,[t[122]||(t[122]=(0,a.Lk)("label",{for:"editCustomer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,a.bF)(d,{modelValue:i.selectedSaleRecord.customer_id,"onUpdate:modelValue":t[49]||(t[49]=e=>i.selectedSaleRecord.customer_id=e),options:i.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",en,[(0,a.Lk)("div",tn,[(0,a.Lk)("button",{onClick:t[50]||(t[50]=e=>i.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[51]||(t[51]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[123]||(t[123]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,a.eW)("บันทึก ")]))])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",sn,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[125]||(t[125]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[52]||(t[52]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[124]||(t[124]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",on,[(0,a.Lk)("div",an,[t[126]||(t[126]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[53]||(t[53]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[127]||(t[127]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",ln,[(0,a.Lk)("button",{onClick:t[54]||(t[54]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[55]||(t[55]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",rn,[(0,a.Lk)("button",{onClick:t[56]||(t[56]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[128]||(t[128]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,nn),(0,a.Lk)("div",dn,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[57]||(t[57]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[58]||(t[58]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,cn)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[59]||(t[59]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[60]||(t[60]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[61]||(t[61]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[129]||(t[129]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,un)])])}var gn={components:{Multiselect:rr.Ay},data(){return{headers:["#","Customer's Name","Sales Type","ประเภทรายการ","รายละเอียดการขาย","มูลค่าขาย","สถานะการชำระเงิน",""],headerWidths:["5%","15%","15%","15%","25%","10%","15%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],isAddModalOpen:!1,saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0},isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.additionalSalesRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase();return t.includes(this.searchQuery.toLowerCase())})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{name:this.selectedSaleRecord.customer.name,package:this.selectedSaleRecord.package.package_detail,start_date:this.formatDate(this.selectedSaleRecord.start_date),sellect_by:this.getSelectByText(this.selectedSaleRecord.customer.select_by),delivery_date:this.selectedSaleRecord.customer.delivery_date,delivery:this.selectedSaleRecord.delivery,package_price:this.formatPrice(this.selectedSaleRecord.package.price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date)}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{customer_id:this.selectedSaleRecord.customer.customer_id,name:this.selectedSaleRecord.customer.name,package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),package:this.selectedSaleRecord.package.package_detail,promotion_type:this.selectedSaleRecord.promotionType.name,program:this.getProgramName(this.selectedSaleRecord.program_id),package_price:this.formatPrice(this.selectedSaleRecord.package.price),discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),sellect_by:this.selectedSaleRecord.customer.sellect_by,delivery_date:this.selectedSaleRecord.customer.delivery_date,start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),note_customer:this.selectedSaleRecord.customer.other_detail||"-"}:{name:"",expiry_date:""}},zone1Name(){return this.selectedSaleRecord.customer.zone1?this.selectedSaleRecord.customer.zone1.name:"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.customer.zone2?this.selectedSaleRecord.customer.zone2.name:"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.customer.zone3?this.selectedSaleRecord.customer.zone3.name:"ไม่พบข้อมูล"},totalDeliveryPrice(){let e=[];null!==this.selectedSaleRecord.customer.zone_1&&this.selectedSaleRecord.zone1_quantity>0&&e.push(`${this.selectedSaleRecord.customer.zone1.name} x ${this.selectedSaleRecord.zone1_quantity} ครั้ง`),null!==this.selectedSaleRecord.customer.zone_2&&this.selectedSaleRecord.zone2_quantity>0&&e.push(`${this.selectedSaleRecord.customer.zone2.name} x ${this.selectedSaleRecord.zone2_quantity} ครั้ง`),null!==this.selectedSaleRecord.customer.zone_3&&this.selectedSaleRecord.zone3_quantity>0&&e.push(`${this.selectedSaleRecord.customer.zone3.name} x ${this.selectedSaleRecord.zone3_quantity} ครั้ง`);let t=e.length>0?`(${e.join(" + ")})`:"";return this.selectedSaleRecord.total_delivery_price>0?`${this.formatPrice(this.selectedSaleRecord.total_delivery_price)} ${t}`:""},additionalSalesRecords(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"===t||"consignment"===t}))},...(0,ir.L8)(["saleRecords"])},methods:{...(0,ir.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),getFilteredSaleRecords(){return this.filteredSaleRecords1standRenew},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],l=s.getFullYear();return`${o} ${a} ${l}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase();return t.includes(this.searchQuery)})).slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase();return t.includes(this.searchQuery)}));this.currentPage=1,this.filteredSaleRecords=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let o,a;return"name"===e?(o=this.getCustomerName(t.customer_id),a=this.getCustomerName(s.customer_id)):(o=t[e],a=s[e]),o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.additionalSalesRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},openAddModal(){this.isAddModalOpen=!0},async addSaleRecord(){if(this.saleRecord.customer_id){console.log("ข้อมูลที่ส่งไปยัง backend:",this.saleRecord);try{const e=await ne.A.post("http://127.0.0.1:3333/sale-records",{customer_id:this.saleRecord.customer_id?.id||null,promotion_type_id:this.saleRecord.promotion_type_id?.id||null,program_id:this.saleRecord.program_id?.id||null,package_id:this.saleRecord.package_id?.id||null,package_type_id:this.saleRecord.package_type_id?.id||null,seller_name_id:this.saleRecord.seller_name_id?.id||null,delivery:this.saleRecord.delivery||"",discount:this.saleRecord.discount||0,extra_charge:this.saleRecord.extra_charge||0,payment_status:this.saleRecord.payment_status||"unpaid",paid_date:this.saleRecord.paid_date||null,payment_type_id:this.saleRecord.payment_type_id?.id||null,start_date:this.saleRecord.start_date||null,zone1_id:this.saleRecord.zone1_id?.id||null,zone1_quantity:this.saleRecord.zone1_quantity||0,zone2_id:this.saleRecord.zone2_id?.id||null,zone2_quantity:this.saleRecord.zone2_quantity||0,zone3_id:this.saleRecord.zone3_id?.id||null,zone3_quantity:this.saleRecord.zone3_quantity||0,zone_outsource_id:this.saleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.saleRecord.zone_outsource_quantity||0,additional_type_id:this.saleRecord.additional_type_id.id||null,add_detail:this.saleRecord.add_detail||null,add_price:this.saleRecord.add_price||0});this.saleRecords.push(e.data),this.closeAddModal(),this.filterPrograms(),this.filterPackages(),await this.fetchSaleRecords(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){console.error("Error adding sale record:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการเพิ่มข้อมูล!"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},clearForm(){this.saleRecord={customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0},this.packageDetails=null,this.isShowingPackageDetails=!1,this.customerAddress=null,this.filterPrograms(),this.filterPackages()},openEditModal(e){const t=this.customers.find((t=>t.id===e.customer_id));this.selectedSaleRecord={...e,customer_id:t||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSaleRecord.customer_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=await ne.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}`,{customer_id:this.selectedSaleRecord.customer_id.id}),t=this.saleRecords.findIndex((e=>e.id===this.selectedSaleRecord.id));-1!==t&&(this.saleRecords[t]={...e.data}),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.isEditModalOpen=!1,this.updatePage()}catch(e){console.error("Error saving changes:",e),alert("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSaleRecord={}},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,o,a,l,r,i,n,d]=await Promise.all([ne.A.get("http://127.0.0.1:3333/customers"),ne.A.get("http://127.0.0.1:3333/promotion-types"),ne.A.get("http://127.0.0.1:3333/programs"),ne.A.get("http://127.0.0.1:3333/packages"),ne.A.get("http://127.0.0.1:3333/package-types"),ne.A.get("http://127.0.0.1:3333/zone-deliveries"),ne.A.get("http://127.0.0.1:3333/zone-delivery-types"),ne.A.get("http://127.0.0.1:3333/seller-names"),ne.A.get("http://127.0.0.1:3333/payment-types"),ne.A.get("http://127.0.0.1:3333/additional-types")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=o.data||[],this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=a.data,this.zoneDeliveries=l.data,this.zoneDeliveryTypes=r.data,this.sellerNames=i.data,this.paymentTypes=n.data.data,this.additionalTypes=d.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await ne.A.get("http://127.0.0.1:3333/sale-records");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));return t?t.package_detail:"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectByText(){const e=this.selectedSaleRecord.customer.select_by;return"customer"===e?"ลูกค้า":"aff"===e?"นักโภชนาการของ AFF":"ไม่มี"},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/sale-records/${this.itemToDelete}`),this.saleRecords=this.saleRecords.filter((e=>e.id!==this.itemToDelete)),this.showFailToastNotification("ลบข้อมูลสำเร็จ!"),this.closeDeleteModal(),this.updatePage()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedSaleRecord=null},formatDetialLabel(e){const t={customer_id:"รหัส",name:"ชื่อ",package_type:"ประเภทแพ็คเกจ",package:"แพ็คเกจ",promotion_type:"ประเภทโปรโมชัน",program:"โปรแกรม",package_price:"ราคาแพ็คเกจ",discount:"ส่วนลดเพิ่มเติม",extra_charge:"Extra Chrage",total_package_price:"มูลค่าแพ็กเกจทั้งหมด",sellect_by:"เลือกอาหารโดย",delivery_date:"วันที่รับอาหาร",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",note_customer:"Note ของลูกค้า"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},onViewResultSaleRecord(e){this.selectedSaleRecord=e,this.isResultModalOpen=!0,this.moreOpenDropdownIndex=null},closeResultModal(){this.isResultModalOpen=!1,this.selectedSaleRecord=null},formatResultLabel(e){const t={name:"ชื่อ",package:"แพ็คเกจ",start_date:"▶️ วันรับอาหารวันแรก",sellect_by:"เลือกอาหารโดย",delivery_date:"วันที่รับอาหาร",delivery:"จัดส่ง",package_price:"ราคาแพ็คเกจ",extra_charge:"Extra Chrage",discount:"ส่วนลด",total_delivery_price:"▶️ ค่าจัดส่ง",total_price:"▶️ ยอดชำระ",expiry_date:"วันหมดอายุแพ็คเกจ"};return t[e]||e},copyResultModalContent(){let e=this.$refs.modalContent.innerText;if(e=e.replace(/\n\s*\n/g,"\n"),navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)})).catch((e=>{console.error("ไม่สามารถคัดลอกข้อความ:",e)}));else{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)}catch(t){console.error("ไม่สามารถคัดลอกข้อความ:",t)}finally{document.body.removeChild(s)}}},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1)},openConfirmPaymentModal(e){this.selectedSaleRecord=e,this.selectedPaidDate=e.paid_date||"",this.isConfirmPaymentModalOpen=!0},closeConfirmPaymentModal(){this.isConfirmPaymentModalOpen=!1,this.selectedSaleRecord=null,this.selectedPaidDate=""},async confirmPayment(){try{const e="paid"===this.selectedSaleRecord.payment_status?"unpaid":"paid",t="paid"===e?this.selectedPaidDate:null,s="paid"===e?this.selectedSaleRecord.payment_type_id?.id:null;if("paid"===e&&!this.selectedPaidDate&&!this.selectedPaymentTypeId)return void this.showErrorToastNotification("กรุณาเลือกข้อมูลให้ครบ!");const o={payment_status:e,paid_date:t,payment_type_id:s},a=await ne.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}/payment-status`,o);if(await this.fetchSaleRecords(),200!==a.status)throw new Error("Unexpected response status");{const e=a.data.data,t=this.saleRecords.findIndex((t=>t.id===e.id));-1!==t&&(this.saleRecords[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error updating payment status:",e),console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmPaymentModal()},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.promotion_type_id":function(){this.filterPrograms()},"saleRecord.program_id":function(){this.filterPackages()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const hn=(0,B.A)(gn,[["render",pn]]);var mn=hn;const yn={class:"flex items-center space-x-3 py-2"},kn={class:"flex space-x-5"},bn={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},xn={class:"text-center"},fn={class:"text-3xl font-bold text-custom-orange"},_n={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},vn={class:"text-center"},wn={class:"text-3xl font-bold text-custom-orange"},Ln={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},Pn={class:"text-center"},Cn={class:"text-3xl font-bold text-custom-orange"},Dn={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},Tn={class:"text-center"},Mn={class:"text-3xl font-bold text-custom-orange"},Sn={class:"flex justify-end items-center space-x-2 relative"},En={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Rn={class:"text-m text-custom-orange font-bold"},An={class:"flex space-x-4"},zn={class:"min-w-[45%] table-auto rounded-2xl overflow-hidden mt-4"},Fn={key:0},Xn={key:0,class:"px-4 py-2 align-top font-bold"},On={key:1,class:"px-4 py-2 align-top"},Qn={class:"px-4 py-2 align-top pb-5"},Vn={class:"px-4 py-2 align-top"},Nn={class:"px-4 py-2 align-top"},jn={class:"bg-purple-100",style:{height:"50px"}},Un={colspan:"4",class:"px-4 py-2 text-right"},In={class:"min-w-[45%] table-auto rounded-2xl overflow-hidden mt-4"},$n={class:"px-4 py-2 align-top font-bold pb-5"},Zn={class:"px-4 py-2 align-top"},qn={class:"px-4 py-2 align-top"},Jn={key:0},Wn={class:"min-w-full table-auto rounded-2xl overflow-hidden mt-4"},Bn={key:0},Kn={key:0,class:"px-4 py-2 align-top font-bold pb-5"},Yn={key:1,class:"px-4 py-2 align-top"},Hn={class:"px-4 py-2 align-top pb-5"},Gn={class:"px-4 py-2 align-top"},ed={class:"px-4 py-2 align-top"},td={key:0,class:"bg-pink-100"},sd={colspan:"4",class:"px-4 py-2 text-right"},od={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},ad={class:"bg-custom-orange text-white"},ld=["onClick"],rd={key:0,class:"ml-2 items-center"},id={class:"material-symbols-outlined text-sm"},nd={class:"px-4 py-2 align-top pb-5"},dd={class:"px-4 py-2 align-top font-bold text-custom-orange"},cd={class:"px-4 py-2 align-top"},ud={class:"px-4 py-2 align-top"},pd={class:"px-4 py-2 align-top"},gd={class:"px-4 py-2 align-top"},hd={class:"px-4 py-2 align-top"},md={class:"px-4 py-2 align-top"},yd={class:"px-4 py-2 align-top"},kd={class:"px-4 py-2 align-top text-right list-none"},bd=["onClick"],xd={key:0},fd={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},_d={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},vd={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},wd={class:"flex space-x-2"},Ld={class:"pb-2 pt-2"},Pd={class:"pl-3 pr-3"},Cd={class:"mr-2"},Dd={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},Td=["disabled"],Md={class:"flex items-center space-x-1"},Sd=["onClick"],Ed=["disabled"];function Rd(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",yn,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>n.changeDate(-1)),class:"flex items-center"},t[14]||(t[14]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[15]||(t[15]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>n.changeDate(1)),class:"flex items-center"},t[16]||(t[16]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[17]||(t[17]=(0,a.Lk)("strong",{class:"text-gray-700"},"Start Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"startDatepicker",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.formattedStartDate=e),onInput:t[4]||(t[4]=(...e)=>n.onStartDateChange&&n.onStartDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่เริ่มต้น"},null,544),[[o.Jo,n.formattedStartDate]]),t[18]||(t[18]=(0,a.Lk)("strong",{class:"text-gray-700"},"End Date:",-1)),(0,a.bo)((0,a.Lk)("input",{ref:"endDatepicker",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.formattedEndDate=e),onInput:t[6]||(t[6]=(...e)=>n.onEndDateChange&&n.onEndDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่สิ้นสุด"},null,544),[[o.Jo,n.formattedEndDate]])]),(0,a.Lk)("div",kn,[(0,a.Lk)("div",bn,[t[20]||(t[20]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",xn,[(0,a.Lk)("p",fn,(0,r.v_)(n.formatPrice(i.totalSales)),1),t[19]||(t[19]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายทั้งหมด",-1))])]),(0,a.Lk)("div",_n,[t[22]||(t[22]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,a.Lk)("div",vn,[(0,a.Lk)("p",wn,(0,r.v_)(n.formatPrice(i.totalSalesBeforeVAT)),1),t[21]||(t[21]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายทั้งหมดก่อน VAT",-1))])]),(0,a.Lk)("div",Ln,[t[24]||(t[24]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," package_2 ")],-1)),(0,a.Lk)("div",Pn,[(0,a.Lk)("p",Cn,(0,r.v_)(n.formatPrice(i.totalPackageBeforeVAT)),1),t[23]||(t[23]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายสินค้าก่อน VAT",-1))])]),(0,a.Lk)("div",Dn,[t[26]||(t[26]=(0,a.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl"}," local_shipping ")],-1)),(0,a.Lk)("div",Tn,[(0,a.Lk)("p",Mn,(0,r.v_)(n.formatPrice(i.totalDeliveryBeforeVAT)),1),t[25]||(t[25]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายค่าส่งก่อน VAT",-1))])])]),(0,a.Lk)("div",Sn,[(0,a.Lk)("div",En,[t[27]||(t[27]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"calendar_month",-1)),t[28]||(t[28]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการยอดขายประจำวันทั้งหมด: ",-1)),(0,a.Lk)("span",Rn,(0,r.v_)(i.dailySales.length)+" รายการ",1)])]),(0,a.Lk)("div",An,[(0,a.Lk)("table",zn,[t[33]||(t[33]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-purple-500 text-white"},[(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ผู้ขาย"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"Package Type"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,a.Lk)("tbody",null,[0===n.filteredSalesBySellerAddit.length?((0,a.uX)(),(0,a.CE)("tr",Fn,t[29]||(t[29]=[(0,a.Lk)("td",{colspan:"4",class:"bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขาย ",-1)]))):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredSalesBySellerAddit,((e,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.sales,((t,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[0===s?((0,a.uX)(),(0,a.CE)("td",Xn,(0,r.v_)(n.getSellerName(e.sellerId)),1)):((0,a.uX)(),(0,a.CE)("td",On)),(0,a.Lk)("td",Qn,(0,r.v_)(n.getPackageTypeName(t.package_type_id)),1),(0,a.Lk)("td",Vn,(0,r.v_)(n.formatPrice(t.total_sales)),1),(0,a.Lk)("td",Nn,(0,r.v_)(n.formatPrice(t.pre_vat)),1)])))),128)),(0,a.Lk)("tr",jn,[(0,a.Lk)("td",Un,[t[30]||(t[30]=(0,a.Lk)("span",{class:"font-bold mr-2"},"ยอดขายรวมทั้งหมด:",-1)),(0,a.eW)(" "+(0,r.v_)(n.formatPrice(e.totalSales))+" ",1),t[31]||(t[31]=(0,a.Lk)("span",{class:"ml-4"},"|",-1)),t[32]||(t[32]=(0,a.Lk)("span",{class:"font-bold ml-4 mr-2"},"ยอดขายรวมทั้งหมดก่อน VAT:",-1)),(0,a.eW)(" "+(0,r.v_)(n.formatPrice(e.totalPreVat)),1)])])],64)))),128))])]),(0,a.Lk)("table",In,[t[35]||(t[35]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-green-500 text-white"},[(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"วิธีการชำระเงิน"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.salesByPaymentType,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t,class:"bg-white relative border-b border-b-gray-200"},[(0,a.Lk)("td",$n,(0,r.v_)(n.getPaymentTypeName(e.payment_type_id)),1),(0,a.Lk)("td",Zn,(0,r.v_)(n.formatPrice(e.total_sales)),1),(0,a.Lk)("td",qn,(0,r.v_)(n.formatPrice(e.pre_vat)),1)])))),128)),0===i.salesByPaymentType.length?((0,a.uX)(),(0,a.CE)("tr",Jn,t[34]||(t[34]=[(0,a.Lk)("td",{colspan:"3",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขายตามประเภทการชำระเงิน ",-1)]))):(0,a.Q3)("",!0)])])]),(0,a.Lk)("table",Wn,[t[39]||(t[39]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"bg-pink-500 text-white"},[(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ผู้ขาย"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"Package Type"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,a.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,a.Lk)("tbody",null,[0===n.filteredSalesBySeller.length?((0,a.uX)(),(0,a.CE)("tr",Bn,t[36]||(t[36]=[(0,a.Lk)("td",{colspan:"4",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขาย ",-1)]))):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredSalesBySeller,((e,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.sales,((t,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"border-b border-b-gray-200 bg-white relative"},[0===s?((0,a.uX)(),(0,a.CE)("td",Kn,(0,r.v_)(n.getSellerName(e.sellerId)),1)):((0,a.uX)(),(0,a.CE)("td",Yn)),(0,a.Lk)("td",Hn,(0,r.v_)(n.getPackageTypeName(t.package_type_id)),1),(0,a.Lk)("td",Gn,(0,r.v_)(n.formatPrice(t.total_sales)),1),(0,a.Lk)("td",ed,(0,r.v_)(n.formatPrice(t.pre_vat)),1)])))),128)),e.sales.length>0?((0,a.uX)(),(0,a.CE)("tr",td,[(0,a.Lk)("td",sd,[t[37]||(t[37]=(0,a.Lk)("span",{class:"font-bold mr-2"},"ยอดขายรวมทั้งหมด:",-1)),(0,a.eW)(" "+(0,r.v_)(n.formatPrice(e.totalSales))+" ",1),t[38]||(t[38]=(0,a.Lk)("span",{class:"font-bold ml-14 mr-2"},"ยอดขายรวมทั้งหมดก่อน VAT:",-1)),(0,a.eW)(" "+(0,r.v_)(n.formatPrice(e.totalPreVat)),1)])])):(0,a.Q3)("",!0)],64)))),128))])]),(0,a.Lk)("table",od,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",ad,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)([["px-4 py-2 text-left font-bold"],"items-center hover:text-gray-200"]),style:(0,r.Tr)({width:i.headerWidths[t],cursor:"pointer"}),onClick:t=>n.sortColumn(e)},[(0,a.Lk)("span",null,(0,r.v_)(e),1),"Transaction Date"===e?((0,a.uX)(),(0,a.CE)("span",rd,[(0,a.Lk)("span",id,(0,r.v_)(i.sortIcon),1)])):(0,a.Q3)("",!0)],12,ld)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredDailySales,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",nd,(0,r.v_)(n.formatDate(e.paid_date)),1),(0,a.Lk)("td",dd,(0,r.v_)(n.getCustomerName(e.customer_id)),1),(0,a.Lk)("td",cd,(0,r.v_)(n.getPackageTypeName(e.package_type_id)),1),(0,a.Lk)("td",ud,(0,r.v_)(n.getPromotionTypeName(e.promotion_type_id)),1),(0,a.Lk)("td",pd,(0,r.v_)(n.getPackageName(e.package_id)||n.getAdditionalTypeName(e.additional_type_id)),1),(0,a.Lk)("td",gd,(0,r.v_)(n.getPromotionDetail(e.package_id)||e.add_detail),1),(0,a.Lk)("td",hd,(0,r.v_)(n.formatPrice(e.total_price)),1),(0,a.Lk)("td",md,(0,r.v_)(n.getPaymentTypeName(e.payment_type_id)),1),(0,a.Lk)("td",yd,(0,r.v_)(n.getSellerName(e.seller_name_id)),1),(0,a.Lk)("td",kd,[(0,a.Lk)("li",{onClick:t=>n.onViewDetails(e),class:"px-2 py-1 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[40]||(t[40]=[(0,a.Lk)("span",null,"รายละเอียด",-1)]),8,bd)])])))),128)),0===i.filteredDailySales.length?((0,a.uX)(),(0,a.CE)("tr",xd,t[41]||(t[41]=[(0,a.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูลที่ค้นหา",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",fd,[(0,a.Lk)("div",_d,[(0,a.Lk)("div",vd,[t[42]||(t[42]=(0,a.Lk)("span",{class:"font-bold"},[(0,a.Lk)("h2",null,"รายละเอียดยอดขายประจำวัน")],-1)),(0,a.Lk)("div",wd,[(0,a.Lk)("span",{onClick:t[7]||(t[7]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Ld,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetail,((e,t,s)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,r.C4)([s%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none","p-2 rounded-md"])},[(0,a.Lk)("p",Pd,[(0,a.Lk)("strong",Cd,(0,r.v_)(n.formatLabel(t))+":",1),(0,a.eW)(" "+(0,r.v_)(e),1)])],2)))),128))])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Dd,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[43]||(t[43]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Td),(0,a.Lk)("div",Md,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[9]||(t[9]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[10]||(t[10]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Sd)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[11]||(t[11]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[12]||(t[12]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[13]||(t[13]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[44]||(t[44]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Ed)])])}s(1454),s(8872);var Ad=s(2689),zd={data(){return{headers:["Transaction Date","Customer's Name","Package Type","Sales Category","Package/Purchase Details","Details","ยอดขายรวม","วิธีการชำระเงิน","Sales Rep"," "],headerWidths:["10%","12%","10%","10%","13%","12%","8%","10%","7%","8%"],sortDirection:"asc",sortIcon:"arrow_downward",filteredDailySales:[],selectedDate:"",dailySales:[],totalSales:0,totalSalesBeforeVAT:0,totalPackageBeforeVAT:0,totalDeliveryBeforeVAT:0,salesByPaymentType:[],customers:[],packages:[],promotion_types:[],seller_names:[],payment_types:[],package_types:[],selectedPackageTypeId:"",additional_types:[],isPaymentTableVisible:!1,selectedSeller:"",salesBySellerAndPackageType:[],sellers:[],groupedsalesBySellerAndPackageType:null,currentPage:1,itemsPerPage:10,startDate:"",endDate:"",isDetailModalOpen:!1,selectedDailySaleDetail:{}}},computed:{totalPages(){return Math.ceil(this.dailySales.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},totalSalesSum(){return this.groupedsalesBySellerAndPackageType?Object.values(this.groupedsalesBySellerAndPackageType).flat().reduce(((e,t)=>{const s=parseFloat(t.total_sales)||0;return e+s}),0):0},totalPreVatSum(){return this.groupedsalesBySellerAndPackageType?Object.values(this.groupedsalesBySellerAndPackageType).flat().reduce(((e,t)=>{const s=parseFloat(t.pre_vat)||0;return e+s}),0):0},filteredSalesBySellerAddit(){return Object.keys(this.salesBySellerAndPackageType).map((e=>{const t=this.salesBySellerAndPackageType[e].sales.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"===t||"consignment"===t}));return{sellerId:e,sales:t,totalSales:t.reduce(((e,t)=>e+parseFloat(t.total_sales)),0),totalPreVat:t.reduce(((e,t)=>e+parseFloat(t.pre_vat)),0)}})).filter((e=>e.sales.length>0))},filteredSalesBySeller(){return Object.keys(this.salesBySellerAndPackageType).map((e=>{const t=this.salesBySellerAndPackageType[e].sales.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t}));return{sellerId:e,sales:t,totalSales:t.reduce(((e,t)=>e+parseFloat(t.total_sales)),0),totalPreVat:t.reduce(((e,t)=>e+parseFloat(t.pre_vat)),0)}})).filter((e=>e.sales.length>0))},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""},filteredDetail(){return{paid_date:this.formatDate(this.selectedDailySaleDetail.paid_date),customer_id:this.getCustomerName(this.selectedDailySaleDetail.customer_id),package_type_id:this.getPackageTypeName(this.selectedDailySaleDetail.package_type_id),package_id:this.getPackageName(this.selectedDailySaleDetail.package_id)||this.getAdditionalTypeName(this.selectedDailySaleDetail.additional_type_id),promotion_type_id:this.getPromotionTypeName(this.selectedDailySaleDetail.promotion_type_id),package_price:this.formatPrice(this.getPackagePrice(this.selectedDailySaleDetail.package_id)),package_detail:this.getPromotionDetail(this.selectedDailySaleDetail.package_id)||this.selectedDailySaleDetail.add_detail,discount:this.formatPrice(this.selectedDailySaleDetail.discount),extra_charge:this.formatPercent(this.selectedDailySaleDetail.extra_charge),extra_charge_price:this.formatPrice(this.selectedDailySaleDetail.extra_charge_price),total_package_price:this.formatPrice(this.selectedDailySaleDetail.total_package_price),total_delivery_price:this.formatPrice(this.selectedDailySaleDetail.total_delivery_price),total_price:this.formatPrice(this.selectedDailySaleDetail.total_price),payment_type_id:this.getPaymentTypeName(this.selectedDailySaleDetail.payment_type_id),seller_name_id:this.getSellerName(this.selectedDailySaleDetail.seller_name_id)}}},methods:{goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],l=s.getFullYear();return`${o} ${a} ${l}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},togglePaymentTableVisibility(){this.isPaymentTableVisible=!this.isPaymentTableVisible},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString())},onEndDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.endDate=t.toISOString())},sortColumn(e){"Transaction Date"===e&&(this.sortDirection="asc"===this.sortDirection?"desc":"asc",this.sortIcon="asc"===this.sortDirection?"arrow_downward":"arrow_upward",this.filteredDailySales.sort(((e,t)=>{const s=new Date(e.paid_date),o=new Date(t.paid_date);return"asc"===this.sortDirection?s-o:o-s})))},async fetchDailySales(e,t){try{const s=await ne.A.get("http://127.0.0.1:3333/sales/daily",{params:{startDate:e,endDate:t}});this.dailySales=s.data.data.dailySales,this.filteredDailySales=this.dailySales,this.totalSales=s.data.data.totalSales,this.totalSalesBeforeVAT=s.data.data.totalSalesBeforeVAT,this.totalPackageBeforeVAT=s.data.data.totalPackageBeforeVAT,this.totalDeliveryBeforeVAT=s.data.data.totalDeliveryBeforeVAT,this.salesByPaymentType=s.data.data.salesByPaymentType,this.salesBySellerAndPackageType=s.data.data.salesBySellerAndPackageType,this.sellers=this.seller_names.map((e=>({id:e.id,name:e.name}))),this.filteredDailySales=this.dailySales.sort(((e,t)=>{const s=new Date(e.paid_date),o=new Date(t.paid_date);return s-o})),this.filterSalesBySeller()}catch(s){console.error("Error fetching sales data in range:",s)}},selectSeller(e){this.selectedSeller=e,this.filterSalesBySeller()},filterSalesBySeller(){let e=this.salesBySellerAndPackageType;this.selectedSeller&&this.selectedSeller.id&&(e=this.salesBySellerAndPackageType.filter((e=>e.seller_name_id===this.selectedSeller.id))),this.groupedsalesBySellerAndPackageType=this.groupBySeller(e)},groupBySeller(e){return e.reduce(((e,t)=>(e[t.seller_name_id]||(e[t.seller_name_id]=[]),e[t.seller_name_id].push(t),e)),{})},clearSelectedSeller(){this.selectedSeller=null},async fetchLookupData(){try{const[e,t,s,o,a,l,r,i,n]=await Promise.all([ne.A.get("http://127.0.0.1:3333/customers"),ne.A.get("http://127.0.0.1:3333/promotion-types"),ne.A.get("http://127.0.0.1:3333/programs"),ne.A.get("http://127.0.0.1:3333/packages"),ne.A.get("http://127.0.0.1:3333/package-types"),ne.A.get("http://127.0.0.1:3333/zone-deliveries"),ne.A.get("http://127.0.0.1:3333/seller-names"),ne.A.get("http://127.0.0.1:3333/payment-types"),ne.A.get("http://127.0.0.1:3333/additional-types")]);this.customers=e.data,this.promotion_types=t.data,this.allPrograms=s.data||[],this.packages=o.data,this.package_types=a.data,this.zoneDeliveries=l.data,this.seller_names=r.data,this.payment_types=i.data.data,this.additional_types=n.data,this.updatePage,console.log("Fetched payment types:",i.data),console.log(this.paymentTypes)}catch(e){console.error("Error fetching lookup data:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:null},getPackageName(e){const t=this.packages.find((t=>t.id===e));return t?t.name:null},getPromotionTypeName(e){const t=this.promotion_types.find((t=>t.id===e));return t?t.name:null},getPaymentTypeName(e){const t=this.payment_types.find((t=>t.id===e));return t?t.name:null},getSellerName(e){const t=this.seller_names.find((t=>t.id===parseInt(e)));return t?t.name:null},getPackageTypeName(e){const t=this.package_types.find((t=>t.id===e));return t?t.name:null},getPromotionDetail(e){const t=this.packages.find((t=>t.id===e));return t?t.promotion_detail:null},getPackagePrice(e){const t=this.packages.find((t=>t.id===e));return t?t.price:"-"},getAdditionalTypeName(e){const t=this.additional_types.find((t=>t.id===e));return t?t.name:null},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchSalesData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchSalesData()},fetchSalesData(){this.startDate&&this.endDate&&this.fetchDailySales(this.startDate,this.endDate)},onViewDetails(e){this.selectedDailySaleDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedDailySaleDetail={}},formatLabel(e){const t={paid_date:"Transaction Date",customer_id:"Customer's Name",package_type_id:"Package Type",package_id:"Package/Purchase Details",promotion_type_id:"Sales Category",package_price:"Package Price",package_detail:"Details",discount:"Additional Discount",extra_charge:"% Extra Charge",extra_charge_price:"Extra Charge Value",total_package_price:"Purchase Value",total_delivery_price:"ค่าจัดส่งรวม",total_price:"ยอดขายรวม",payment_type_id:"วิธีการชำระเงิน",seller_name_id:"Sales Rep"};return t[e]||e}},created(){this.filteredDailySales=this.dailySales,this.fetchLookupData(),this.fetchDailySales(this.selectedDate)},mounted(){this.fetchLookupData(),this.fetchDailySales(this.selectedDate),this.setToday(),this.$nextTick((()=>{(0,Ad.A)(this.$refs.startDatepicker,{dateFormat:"Y-m-d",todayButton:!0,onChange:(e,t)=>{this.startDate=t,this.fetchSalesData()}}),(0,Ad.A)(this.$refs.endDatepicker,{dateFormat:"Y-m-d",todayButton:!0,onChange:(e,t)=>{this.endDate=t,this.fetchSalesData()}})}))}};const Fd=(0,B.A)(zd,[["render",Rd],["__scopeId","data-v-26183e52"]]);var Xd=Fd;const Od={class:"flex space-x-2 items-center relative"},Qd={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Vd={class:"text-m text-custom-orange font-bold"},Nd={class:"sort relative inline-block",ref:"sortDropdown"},jd={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Ud={class:"list-none p-0 m-0"},Id={key:0,class:"material-symbols-outlined text-sm"},$d={key:0,class:"material-symbols-outlined text-sm"},Zd={class:"flex w-[250px] relative"},qd={class:"min-w-full table-fixed border-collapse mt-4"},Jd={class:"bg-custom-orange text-white"},Wd={class:"px-4 py-2 align-top"},Bd={class:"px-4 py-2 align-top font-bold text-custom-orange"},Kd={class:"px-4 py-2 align-top"},Yd={class:"flex items-center"},Hd={class:"flex items-center"},Gd={class:"px-4 py-2 align-top"},ec={class:"px-4 py-2 align-top"},tc={class:"px-4 py-2 text-right relative"},sc=["onClick"],oc={class:"list-none p-0 m-0"},ac=["onClick"],lc=["onClick"],rc=["onClick"],ic={key:0,class:"modal fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-10 z-50"},nc={class:"bg-white rounded-md shadow-lg w-1000"},dc={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},cc={class:"flex space-x-2"},uc={class:"p-6"},pc={key:0},gc={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},hc={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},mc={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},yc={class:"flex space-x-2"},kc={class:"p-6 space-y-4 overflow-y-auto flex-grow"},bc={class:"mb-4"},xc={class:"mb-4"},fc={class:"mb-4"},_c={class:"mb-4"},vc={class:"mb-4"},wc={class:"mb-4"},Lc={class:"mb-4"},Pc={class:"mb-4"},Cc={class:"mb-4"},Dc={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Tc={class:"flex space-x-2"},Mc={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},Sc=["disabled"],Ec={class:"flex items-center space-x-1"},Rc=["onClick"],Ac=["disabled"];function zc(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",Od,[(0,a.Lk)("div",Qd,[t[27]||(t[27]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"person",-1)),t[28]||(t[28]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนลูกค้าทั้งหมด: ",-1)),(0,a.Lk)("span",Vd,(0,r.v_)(i.customers.length)+" คน",1)]),(0,a.Lk)("div",Nd,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[29]||(t[29]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",jd,[(0,a.Lk)("ul",Ud,[(0,a.Lk)("li",{onClick:t[1]||(t[1]=e=>n.sortData("customer_id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[30]||(t[30]=(0,a.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"customer_id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",Id,(0,r.v_)(1===i.sortDirection["customer_id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[2]||(t[2]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[31]||(t[31]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",$d,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[3]||(t[3]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[32]||(t[32]=[(0,a.Lk)("span",null,"Clear Sort",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Zd,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>i.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[5]||(t[5]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[6]||(t[6]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",qd,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Jd,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredCustomers,((s,o)=>((0,a.uX)(),(0,a.CE)("tr",{key:o,class:"customers-data bg-white relative"},[(0,a.Lk)("td",Wd,(0,r.v_)(s.customer_id),1),(0,a.Lk)("td",Bd,(0,r.v_)(s.name),1),(0,a.Lk)("td",Kd,[(0,a.Lk)("div",Yd,[t[33]||(t[33]=(0,a.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"mail",-1)),(0,a.eW)((0,r.v_)(s.email),1)]),(0,a.Lk)("div",Hd,[t[34]||(t[34]=(0,a.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"phone",-1)),(0,a.eW)((0,r.v_)(s.tel),1)])]),(0,a.Lk)("td",Gd,(0,r.v_)(s.address_1),1),(0,a.Lk)("td",ec,(0,r.v_)(s.food_allergies),1),(0,a.Lk)("td",tc,[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(o)},t[35]||(t[35]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,sc),i.moreOpenDropdownIndex===o?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,r.C4)([n.moreDropdownPositionClass(o),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",oc,[(0,a.Lk)("li",{onClick:e=>n.onViewDetails(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,ac),(0,a.Lk)("li",{onClick:e=>n.onEdit(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,lc),(0,a.Lk)("li",{onClick:e=>n.onDelete(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,rc)])],2)):(0,a.Q3)("",!0)]),e.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",ic,[(0,a.Lk)("div",nc,[(0,a.Lk)("div",dc,[t[37]||(t[37]=(0,a.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,a.Lk)("div",cc,[t[36]||(t[36]=(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," edit ",-1)),(0,a.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",uc,[t[38]||(t[38]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"ขออนุญาตสรุปยอดนะคะ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredResultCustomer,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-2"},[(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,(0,r.v_)(n.formatLabel(t))+":",1),(0,a.eW)(" "+(0,r.v_)(e),1)])])))),128)),t[39]||(t[39]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1))])])])):(0,a.Q3)("",!0)])))),128)),0===i.filteredCustomers.length?((0,a.uX)(),(0,a.CE)("tr",pc,t[40]||(t[40]=[(0,a.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",gc,[(0,a.Lk)("div",hc,[(0,a.Lk)("div",mc,[t[41]||(t[41]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขข้อมูลลูกค้า",-1)),(0,a.Lk)("div",yc,[(0,a.Lk)("span",{onClick:t[9]||(t[9]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",kc,[(0,a.Lk)("div",bc,[t[42]||(t[42]=(0,a.Lk)("label",{for:"editCustomerName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.selectedCustomer.name=e),id:"editCustomerName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.name]])]),(0,a.Lk)("div",xc,[t[43]||(t[43]=(0,a.Lk)("label",{for:"editCustomerEmail",class:"block text-gray-700 font-medium"},"อีเมล",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.selectedCustomer.email=e),id:"editCustomerEmail",type:"email",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.email]])]),(0,a.Lk)("div",fc,[t[45]||(t[45]=(0,a.Lk)("label",{for:"editCustomerGender",class:"block font-bold text-gray-700"},"เพศ",-1)),(0,a.bo)((0,a.Lk)("select",{id:"editCustomerGender","onUpdate:modelValue":t[12]||(t[12]=e=>i.selectedCustomer.gender=e),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},t[44]||(t[44]=[(0,a.Lk)("option",{value:"",disabled:""},"เลือกเพศ",-1),(0,a.Lk)("option",{value:"male"},"ชาย",-1),(0,a.Lk)("option",{value:"female"},"หญิง",-1)]),512),[[o.u1,i.selectedCustomer.gender]])]),(0,a.Lk)("div",_c,[t[46]||(t[46]=(0,a.Lk)("label",{for:"editCustomerTel",class:"block text-gray-700 font-medium"},"เบอร์โทรศัพท์",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>i.selectedCustomer.tel=e),id:"editCustomerTel",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.tel]])]),(0,a.Lk)("div",vc,[t[47]||(t[47]=(0,a.Lk)("label",{for:"editFoodAllergies",class:"block text-gray-700 font-medium"},"แพ้อาหาร",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"editFoodAllergies","onUpdate:modelValue":t[14]||(t[14]=e=>i.selectedCustomer.food_allergies=e),placeholder:"กรอกข้อมูลการแพ้อาหาร",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedCustomer.food_allergies]])]),(0,a.Lk)("div",wc,[t[48]||(t[48]=(0,a.Lk)("label",{for:"editDeliveryDate",class:"block text-gray-700 font-medium"},"วันที่จัดส่ง",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.selectedCustomer.delivery_date=e),id:"editDeliveryDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedCustomer.delivery_date]])]),(0,a.Lk)("div",Lc,[t[49]||(t[49]=(0,a.Lk)("label",{for:"editAddressMonToFri",class:"block text-gray-700 font-medium"},"ที่อยู่ (จันทร์-ศุกร์)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"editAddressMonToFri","onUpdate:modelValue":t[16]||(t[16]=e=>i.selectedCustomer.address_mon_to_fri=e),placeholder:"กรอกที่อยู่สำหรับวันจันทร์ถึงวันศุกร์",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedCustomer.address_mon_to_fri]])]),(0,a.Lk)("div",Pc,[t[50]||(t[50]=(0,a.Lk)("label",{for:"editRecipientMonToFri",class:"block text-gray-700 font-medium"},"ผู้รับ (จันทร์-ศุกร์)",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"editRecipientMonToFri","onUpdate:modelValue":t[17]||(t[17]=e=>i.selectedCustomer.recipient_mon_to_fri=e),placeholder:"กรอกชื่อผู้รับสำหรับวันจันทร์ถึงวันศุกร์",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedCustomer.recipient_mon_to_fri]])]),(0,a.Lk)("div",Cc,[t[51]||(t[51]=(0,a.Lk)("label",{for:"editOtherDetail",class:"block text-gray-700 font-medium"},"รายละเอียดเพิ่มเติม",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"editOtherDetail","onUpdate:modelValue":t[18]||(t[18]=e=>i.selectedCustomer.other_detail=e),placeholder:"กรอกข้อมูลเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedCustomer.other_detail]])])]),(0,a.Lk)("div",Dc,[(0,a.Lk)("div",Tc,[(0,a.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[20]||(t[20]=(...t)=>e.saveCustomerChanges&&e.saveCustomerChanges(...t)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[52]||(t[52]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,a.eW)("บันทึก ")]))])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Mc,[(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Sc),(0,a.Lk)("div",Ec,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Rc)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Ac)])])}var Fc={name:"Test2Page",data(){return{headers:["รหัสลูกค้า","ชื่อ","ช่องทางการติดต่อ","ที่อยู่","ข้อมูลแพ้อาหาร",""],headerWidths:["10%","15%","20%","30%","20%","5%"],searchQuery:"",filteredCustomers:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",customers:[],currentPage:1,itemsPerPage:10,selectedCustomer:{id:null,email:"",customer_id:"",name:"",customer_gender:"",customer_tel:"",customer_line_id:"",food_allergies:"",delivery_date:"",address_mon_to_fri:"",recipient_mon_to_fri:"",address_sat_to_sun:"",recipient_sat_to_sun:"",other_detail:"",note:"",seller_name_id:null,select_by:"",address_1:"",zone_1:null,address_2:"",zone_2:null,address_3:"",zone_3:null,created_at:null,updated_at:null},moreOpenDropdownIndex:null,isEditModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultCustomer(){return{name:this.selectedCustomer.name,address:this.selectedCustomer.address}}},methods:{async fetchCustomers(){try{const e=await ne.A.get("http://127.0.0.1:3333/customers");this.filteredCustomers=e.data,this.customers=e.data,this.updatePage()}catch(e){console.error("Error fetching customers:",e)}},search(){const e=this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t}));this.currentPage=1,this.filteredCustomers=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredCustomers=this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.customers.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.customers.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null)},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredCustomers.length-2?"dropdown-up":"dropdown-down"},onViewDetails(e){this.selectedCustomer=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedCustomer={}},onEdit(e){this.selectedCustomer={...e},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedCustomer.name||!this.selectedCustomer.email)return void alert("กรุณากรอกข้อมูลให้ครบถ้วน");const e=await ne.A.put(`http://127.0.0.1:3333/customers/${this.selectedCustomer.id}`,{email:this.selectedCustomer.email,customer_id:this.selectedCustomer.customer_id,name:this.selectedCustomer.name,gender:this.selectedCustomer.gender,tel:this.selectedCustomer.tel,line_id:this.selectedCustomer.line_id,food_allergies:this.selectedCustomer.food_allergies,delivery_date:this.selectedCustomer.delivery_date,address_mon_to_fri:this.selectedCustomer.address_mon_to_fri,recipient_mon_to_fri:this.selectedCustomer.recipient_mon_to_fri,address_sat_to_sun:this.selectedCustomer.address_sat_to_sun,recipient_sat_to_sun:this.selectedCustomer.recipient_sat_to_sun,other_detail:this.selectedCustomer.other_detail,note:this.selectedCustomer.note,seller_name_id:this.selectedCustomer.seller_name_id,select_by:this.selectedCustomer.select_by,address_1:this.selectedCustomer.address_1,zone_1:this.selectedCustomer.zone_1,address_2:this.selectedCustomer.address_2,zone_2:this.selectedCustomer.zone_2,address_3:this.selectedCustomer.address_3,zone_3:this.selectedCustomer.zone_3});console.log("Customer updated:",e.data);const t=this.customers.findIndex((e=>e.id===this.selectedCustomer.id));-1!==t&&(this.customers[t]=e.data),this.isEditModalOpen=!1,this.updatePage()}catch(e){console.error("Error saving changes:",e),alert("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedCustomer={}},onDelete(e){alert(`ลบข้อมูล: ${e.name}`)},formatLabel(e){const t={name:"ชื่อ",address:"muj"};return t[e]||e}},created(){this.filteredCustomers=this.customers,this.sortData("id"),this.fetchCustomers(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchCustomers(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Xc=(0,B.A)(Fc,[["render",zc],["__scopeId","data-v-8357b2aa"]]);var Oc=Xc;const Qc={key:0};function Vc(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>n.login&&n.login(...e)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>i.email=e),placeholder:"Email",required:""},null,512),[[o.Jo,i.email]]),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),placeholder:"Password",required:""},null,512),[[o.Jo,i.password]]),t[3]||(t[3]=(0,a.Lk)("button",{type:"submit"},"Login",-1))],32),i.error?((0,a.uX)(),(0,a.CE)("p",Qc,(0,r.v_)(i.error),1)):(0,a.Q3)("",!0)])}var Nc={data(){return{email:"",password:"",error:null}},methods:{async login(){try{await ce.login(this.email,this.password),this.$router.push("/test3")}catch(e){this.error=e.message||"Login failed"}}}};const jc=(0,B.A)(Nc,[["render",Vc]]);var Uc=jc;const Ic={class:"mt-4 flex"},$c={class:"w-1/4 p-4"},Zc={class:"mb-4"},qc={class:"flex items-center space-x-3 py-2"},Jc={class:"mb-4 space-y-2"},Wc=["onClick"],Bc={class:"w-3/4 p-4"},Kc={class:"font-bold text-xl mb-4"},Yc={key:0,class:"text-center text-gray-600"},Hc={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3"},Gc={class:"text-lg font-semibold block"},eu={class:"block"},tu={class:"block text-custom-orange font-bold"},su={class:"text-gray-700 text-sm"},ou={class:"mr-2"},au={class:"mr-2"},lu={class:"mr-2"},ru={class:"mr-2"},iu={class:"mt-auto flex w-full space-x-2"},nu={class:"flex items-center justify-center w-1/2 space-x-2 p-2"},du=["onClick"],cu=["onUpdate:modelValue"],uu=["onClick"],pu={class:"w-1/2 p-2 flex justify-end"},gu=["onClick"];function hu(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",Ic,[(0,a.Lk)("div",$c,[(0,a.Lk)("div",Zc,[(0,a.Lk)("div",qc,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>n.changeDate(-1)),class:"flex items-center"},t[6]||(t[6]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[7]||(t[7]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>n.changeDate(1)),class:"flex items-center"},t[8]||(t[8]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{type:"date",id:"menuDate","onUpdate:modelValue":t[3]||(t[3]=e=>i.selectedDate=e),class:"p-2 border rounded-md w-auto",onChange:t[4]||(t[4]=(...e)=>n.fetchMenusForSelectedDate&&n.fetchMenusForSelectedDate(...e))},null,544),[[o.Jo,i.selectedDate]])])]),t[9]||(t[9]=(0,a.Lk)("h1",{class:"font-bold text-xl mb-4"},"ฟิลเตอร์เมนู",-1)),(0,a.Lk)("div",Jc,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=e=>i.selectedMealType=""),class:(0,r.C4)(["w-full text-left py-2 hover:text-custom-orange",""===i.selectedMealType?"text-custom-orange font-bold":"text-gray-600"])}," ทุกประเภท ",2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMealTypes,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e.id,onClick:t=>i.selectedMealType=e.id,class:(0,r.C4)(["w-full py-2 text-left hover:text-custom-orange",i.selectedMealType===e.id?"text-custom-orange font-bold":"text-gray-600"])},(0,r.v_)(e.name),11,Wc)))),128))])]),(0,a.Lk)("div",Bc,[(0,a.Lk)("h1",Kc,"รายการอาหารประจำวันที่ "+(0,r.v_)(n.formatDate(i.selectedDate))+" ("+(0,r.v_)(n.formatDateEng(i.selectedDate))+")",1),0===i.todayMenus.length?((0,a.uX)(),(0,a.CE)("div",Yc,t[10]||(t[10]=[(0,a.Lk)("p",null,"ไม่มีเมนูในวันนี้",-1)]))):(0,a.Q3)("",!0),(0,a.Lk)("div",Hc,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredMenus,(s=>((0,a.uX)(),(0,a.CE)("div",{key:s.id,class:"p-4 border rounded-lg shadow-md bg-white flex flex-col h-full mb-6"},[t[18]||(t[18]=(0,a.Lk)("div",{class:"mb-4"},[(0,a.Lk)("div",{class:"bg-black w-full h-48 object-cover rounded-md"})],-1)),(0,a.Lk)("span",Gc,(0,r.v_)(n.getMenuEnglishName(s.menu_id)),1),(0,a.Lk)("span",eu,(0,r.v_)(n.getMenuThaiName(s.menu_id)),1),(0,a.Lk)("span",tu,(0,r.v_)(n.getMealTypeName(n.getMealTypeID(s.menu_id))),1),(0,a.Lk)("div",su,[(0,a.Lk)("span",ou,(0,r.v_)(n.getMenuCal(s.menu_id))+" Cal",1),(0,a.Lk)("span",au,[t[11]||(t[11]=(0,a.eW)("|")),t[12]||(t[12]=(0,a.Lk)("strong",null," Protein: ",-1)),(0,a.eW)(" "+(0,r.v_)(n.getMenuProtein(s.menu_id))+" g",1)]),(0,a.Lk)("span",lu,[t[13]||(t[13]=(0,a.eW)("|")),t[14]||(t[14]=(0,a.Lk)("strong",null," Carbohydrate: ",-1)),(0,a.eW)((0,r.v_)(n.getMenuCarb(s.menu_id))+" g",1)]),(0,a.Lk)("span",ru,[t[15]||(t[15]=(0,a.eW)("|")),t[16]||(t[16]=(0,a.Lk)("strong",null," Fat: ",-1)),(0,a.eW)((0,r.v_)(n.getMenuFat(s.menu_id))+" g",1)])]),(0,a.Lk)("div",iu,[(0,a.Lk)("div",nu,[(0,a.Lk)("button",{onClick:e=>n.adjustQuantity(s,-1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"-",8,du),(0,a.bo)((0,a.Lk)("input",{type:"number","onUpdate:modelValue":e=>s.quantity=e,min:"0",placeholder:"จำนวน",class:"p-2 border rounded-md w-16 text-center input-no-spinner"},null,8,cu),[[o.Jo,s.quantity,void 0,{number:!0}]]),(0,a.Lk)("button",{onClick:e=>n.adjustQuantity(s,1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"+",8,uu)]),(0,a.Lk)("div",pu,[(0,a.Lk)("button",{onClick:t=>e.orderMenu(s),class:"px-4 py-2 w-full bg-custom-orange text-white rounded-md hover:bg-custom-orange-hover transition flex items-center space-x-2 justify-center"},t[17]||(t[17]=[(0,a.Lk)("span",{class:"material-symbols-outlined"}," shopping_cart ",-1),(0,a.Lk)("span",null,"สั่งซื้อ",-1)]),8,gu)])])])))),128))])])])}s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698),s(3949);var mu={data(){return{menus:[],todayMenus:[],meal_types:[],selectedDate:this.getTodayDate(),selectedMealType:"",cart:[]}},computed:{filteredMenus(){return 0===this.todayMenus.length?[]:this.selectedMealType?this.todayMenus.filter((e=>this.getMealTypeID(e.menu_id)===this.selectedMealType)):this.todayMenus},filteredMealTypes(){const e=new Set(this.todayMenus.map((e=>this.getMealTypeID(e.menu_id))));return this.meal_types.filter((t=>e.has(t.id)))}},methods:{getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusForSelectedDate()},setToday(){this.selectedDate=this.getTodayDate(),this.fetchMenusForSelectedDate()},async fetchMenusForSelectedDate(){try{const e=await ne.A.get(`http://127.0.0.1:3333/setup-menu-ph/menus-by-day/${this.selectedDate}`);console.log("API Response:",e.data),e.data.menus&&e.data.menus.length>0?(this.todayMenus=e.data.menus,this.todayMenus.forEach((e=>{e.quantity=0})),console.log("Date",this.selectedDate)):this.todayMenus=[]}catch(e){this.todayMenus=[]}},async fetchLookupData(){try{const[e,t]=await Promise.all([ne.A.get("http://127.0.0.1:3333/menus"),ne.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},getMenuCal(e){const t=this.menus.find((t=>t.id===e));return t?t.cal:null},getMenuProtein(e){const t=this.menus.find((t=>t.id===e));return t?t.protein:null},getMenuFat(e){const t=this.menus.find((t=>t.id===e));return t?t.fat:null},getMenuCarb(e){const t=this.menus.find((t=>t.id===e));return t?t.carb:null},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),o=s.getDate(),a=t[s.getMonth()],l=s.getFullYear();return`${o} ${a} ${l}`},formatDateEng(e){const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e).toLocaleDateString("en-US",t);return s},adjustQuantity(e,t){const s=e.quantity+t;s>=0&&(e.quantity=s)},addToCart(e){if(e.quantity&&e.quantity>0){const t=this.cart.find((t=>t.menu_id===e.menu_id));t?t.quantity+=e.quantity:this.cart.push({menu_id:e.menu_id,quantity:e.quantity})}else alert("กรุณาระบุจำนวนที่ต้องการ")},async orderAllMenus(){if(this.cart.length>0)try{const e=this.cart.map((e=>({menu_id:e.menu_id,quantity:e.quantity,date:this.selectedDate}))),t=await ne.A.post("http://127.0.0.1:3333/order-ph/bulk",{orders:e});console.log("Order Success:",t.data),alert("สั่งซื้อทั้งหมดเรียบร้อยแล้ว"),this.cart=[],this.todayMenus.forEach((e=>{e.quantity=0}))}catch(e){console.error("Order Error:",e),alert("เกิดข้อผิดพลาดในการสั่งซื้อ")}else alert("กรุณาเลือกเมนูที่จะสั่ง")}},created(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},mounted(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},watch:{selectedDate(){this.fetchMenusForSelectedDate()}}};const yu=(0,B.A)(mu,[["render",hu],["__scopeId","data-v-7f0a8116"]]);var ku=yu;function bu(e,t,s,o,l,i){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("h1",null,"Welcome, "+(0,r.v_)(l.user.username),1),(0,a.Lk)("p",null,"Email: "+(0,r.v_)(l.user.email),1),(0,a.Lk)("p",null,"Name: "+(0,r.v_)(l.user.fullname),1)])}var xu={data(){return{user:{},error:null}},created(){this.fetchProfile()},methods:{async fetchProfile(){try{this.user=await ce.getProfile()}catch(e){this.error=e.message||"Failed to fetch profile"}},async logout(){try{await ce.logout(),this.$router.push("/test")}catch(e){this.error=e.message||"Logout failed"}}}};const fu=(0,B.A)(xu,[["render",bu]]);var _u=fu;const vu={class:"flex space-x-2 items-center relative"},wu={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Lu={class:"text-m text-custom-orange font-bold"},Pu={class:"sort relative inline-block",ref:"sortDropdown"},Cu={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Du={class:"list-none p-0 m-0"},Tu={key:0,class:"material-symbols-outlined text-sm"},Mu={key:0,class:"material-symbols-outlined text-sm"},Su={class:"flex w-[250px] relative"},Eu={class:"min-w-full table-fixed border-collapse mt-4"},Ru={class:"bg-custom-orange text-white"},Au={class:"px-4 py-2 align-top"},zu={class:"px-4 py-2 align-top font-bold text-custom-orange"},Fu={class:"px-4 py-2 align-top"},Xu={class:"flex items-center"},Ou={class:"flex items-center"},Qu={class:"px-4 py-2 align-top"},Vu={class:"px-4 py-2 align-top font-bold"},Nu={class:"px-4 py-2 text-right relative"},ju=["onClick"],Uu={class:"list-none p-0 m-0"},Iu=["onClick"],$u=["onClick"],Zu=["onClick"],qu={key:0,class:"modal fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-10 z-50"},Ju={class:"bg-white rounded-md shadow-lg w-1000"},Wu={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Bu={class:"flex space-x-2"},Ku={class:"p-6"},Yu={key:0},Hu={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},Gu=["disabled"],ep={class:"flex items-center space-x-1"},tp=["onClick"],sp=["disabled"];function op(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",vu,[(0,a.Lk)("div",wu,[t[15]||(t[15]=(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"person",-1)),t[16]||(t[16]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนลูกค้าทั้งหมด: ",-1)),(0,a.Lk)("span",Lu,(0,r.v_)(i.customers.length)+" คน",1)]),(0,a.Lk)("div",Pu,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[17]||(t[17]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",Cu,[(0,a.Lk)("ul",Du,[(0,a.Lk)("li",{onClick:t[1]||(t[1]=e=>n.sortData("customer_id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[18]||(t[18]=(0,a.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"customer_id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",Tu,(0,r.v_)(1===i.sortDirection["customer_id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[2]||(t[2]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[19]||(t[19]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",Mu,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[3]||(t[3]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[20]||(t[20]=[(0,a.Lk)("span",null,"Clear Sort",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Su,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>i.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[5]||(t[5]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[6]||(t[6]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",Eu,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Ru,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredCustomers,((s,o)=>((0,a.uX)(),(0,a.CE)("tr",{key:o,class:"customers-data bg-white relative"},[(0,a.Lk)("td",Au,(0,r.v_)(s.customer_id),1),(0,a.Lk)("td",zu,(0,r.v_)(s.name),1),(0,a.Lk)("td",Fu,[(0,a.Lk)("div",Xu,[t[21]||(t[21]=(0,a.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"mail",-1)),(0,a.eW)((0,r.v_)(s.email),1)]),(0,a.Lk)("div",Ou,[t[22]||(t[22]=(0,a.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"phone",-1)),(0,a.eW)((0,r.v_)(s.tel),1)])]),(0,a.Lk)("td",Qu,(0,r.v_)(s.address),1),(0,a.Lk)("td",Vu,(0,r.v_)(s.package),1),(0,a.Lk)("td",Nu,[(0,a.Lk)("button",{onClick:e=>n.toggleMoreDropdown(o)},t[23]||(t[23]=[(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,ju),i.moreOpenDropdownIndex===o?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,r.C4)([n.moreDropdownPositionClass(o),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,a.Lk)("ul",Uu,[(0,a.Lk)("li",{onClick:e=>n.onViewDetails(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,Iu),(0,a.Lk)("li",{onClick:e=>n.onEdit(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,$u),(0,a.Lk)("li",{onClick:e=>n.onDelete(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,Zu)])],2)):(0,a.Q3)("",!0)]),e.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",qu,[(0,a.Lk)("div",Ju,[(0,a.Lk)("div",Wu,[t[25]||(t[25]=(0,a.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,a.Lk)("div",Bu,[t[24]||(t[24]=(0,a.Lk)("span",{class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," edit ",-1)),(0,a.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Ku,[t[26]||(t[26]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"ขออนุญาตสรุปยอดนะคะ")],-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredResultCustomer,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-2"},[(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,(0,r.v_)(n.formatLabel(t))+":",1),(0,a.eW)(" "+(0,r.v_)(e),1)])])))),128)),t[27]||(t[27]=(0,a.Lk)("p",{class:"text-gray-500"},[(0,a.Lk)("strong",null,"กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1))])])])):(0,a.Q3)("",!0)])))),128)),0===i.filteredCustomers.length?((0,a.uX)(),(0,a.CE)("tr",Yu,t[28]||(t[28]=[(0,a.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Hu,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[29]||(t[29]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Gu),(0,a.Lk)("div",ep,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[10]||(t[10]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[11]||(t[11]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,tp)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[12]||(t[12]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[13]||(t[13]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[14]||(t[14]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[30]||(t[30]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,sp)])])}var ap={name:"Test2Page",data(){return{headers:["รหัสลูกค้า","ชื่อ","ช่องทางการติดต่อ","ที่อยู่","แพ็กเกจที่เลือก",""],headerWidths:["10%","15%","20%","40%","10%","5%"],searchQuery:"",filteredCustomers:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",openDropdownIndex:null,customers:[],currentPage:1,itemsPerPage:10,selectedCustomer:{},moreOpenDropdownIndex:null}},computed:{totalPages(){return Math.ceil(this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredResultCustomer(){return{name:this.selectedCustomer.name,address:this.selectedCustomer.address}}},methods:{async fetchCustomers(){try{const e=await ne.A.get("http://127.0.0.1:3333/customers-hhb");this.filteredCustomers=e.data,console.log("Customers loaded: ",this.customers),this.customers=e.data,this.updatePage()}catch(e){console.error("Error fetching customers:",e)}},search(){const e=this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t}));this.currentPage=1,this.filteredCustomers=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredCustomers=this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.customers.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.customers.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null)},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredCustomers.length-2?"dropdown-up":"dropdown-down"},onViewDetails(e){this.selectedCustomer=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedCustomer={}},onEdit(e){alert(`แก้ไขข้อมูล: ${e.name}`)},onDelete(e){alert(`ลบข้อมูล: ${e.name}`)},formatLabel(e){const t={name:"ชื่อ",address:"muj"};return t[e]||e}},created(){this.filteredCustomers=this.customers,this.sortData("id"),this.fetchCustomers(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchCustomers(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const lp=(0,B.A)(ap,[["render",op],["__scopeId","data-v-b0310cc4"]]);var rp=lp;const ip={class:"flex space-x-2 items-center relative"},np={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},dp={class:"text-m text-custom-orange font-bold"},cp={class:"add relative inline-block"},up={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},pp={class:"bg-white rounded-md shadow-lg w-1000"},gp={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},hp={class:"flex space-x-2"},mp={class:"bg-white rounded-lg p-6 w-[400px]"},yp={class:"mb-4"},kp={class:"flex justify-end space-x-2"},bp={class:"sort relative inline-block",ref:"sortDropdown"},xp={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},fp={class:"list-none p-0 m-0"},_p={key:0,class:"material-symbols-outlined text-sm"},vp={key:0,class:"material-symbols-outlined text-sm"},wp={class:"flex w-[250px] relative"},Lp={class:"min-w-full table-fixed border-collapse mt-4"},Pp={class:"bg-custom-orange text-white"},Cp={class:"px-4 py-2 align-top"},Dp={class:"px-4 py-2 align-top font-bold text-custom-orange"},Tp={class:"px-4 py-2 align-top text-right"},Mp={class:"flex justify-end space-x-2"},Sp=["onClick"],Ep=["onClick"],Rp={key:0},Ap={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},zp={class:"bg-white rounded-md shadow-lg w-1000"},Fp={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Xp={class:"flex space-x-2"},Op={class:"bg-white rounded-lg shadow-lg p-6 w-96"},Qp={class:"mb-4"},Vp={class:"flex justify-end space-x-2"},Np={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},jp={class:"bg-white rounded-lg shadow-md w-1/3"},Up={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Ip={class:"flex justify-end space-x-2 p-4"},$p={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},Zp=["disabled"],qp={class:"flex items-center space-x-1"},Jp=["onClick"],Wp=["disabled"];function Bp(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",ip,[(0,a.Lk)("div",np,[t[26]||(t[26]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภทโปรโมชันทั้งหมด: ",-1)),(0,a.Lk)("span",dp,(0,r.v_)(i.promotion_types.length)+" รายการ",1)]),(0,a.Lk)("div",cp,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[27]||(t[27]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มข้อมูล",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",up,[(0,a.Lk)("div",pp,[(0,a.Lk)("div",gp,[t[28]||(t[28]=(0,a.Lk)("div",{class:"flex-1 flex items-left"},[(0,a.Lk)("span",{class:"text-xl font-bold"},"เพิ่มข้อมูลใหม่")],-1)),(0,a.Lk)("div",hp,[(0,a.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",mp,[(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,o.D$)(((...e)=>n.addPromotionType&&n.addPromotionType(...e)),["prevent"]))},[(0,a.Lk)("div",yp,[t[29]||(t[29]=(0,a.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อโปรโมชั่น",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>i.newPromotionType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[o.Jo,i.newPromotionType.name]])]),(0,a.Lk)("div",kp,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"},"ยกเลิก"),t[30]||(t[30]=(0,a.Lk)("button",{type:"submit",class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},[(0,a.Lk)("span",{class:"material-symbols-outlined"},"save"),(0,a.eW)("บันทึก")],-1))])],32)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",bp,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[31]||(t[31]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",xp,[(0,a.Lk)("ul",fp,[(0,a.Lk)("li",{onClick:t[6]||(t[6]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[32]||(t[32]=(0,a.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",_p,(0,r.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[7]||(t[7]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[33]||(t[33]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",vp,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[8]||(t[8]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[34]||(t[34]=[(0,a.Lk)("span",null,"Clear Sort",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",wp,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>i.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[10]||(t[10]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[11]||(t[11]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",Lp,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Pp,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredPromotionType,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,a.Lk)("td",Cp,(0,r.v_)(e.id),1),(0,a.Lk)("td",Dp,(0,r.v_)(e.name),1),(0,a.Lk)("td",Tp,[(0,a.Lk)("div",Mp,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[35]||(t[35]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,Sp),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,Ep)])])])))),128)),0===i.filteredPromotionType.length?((0,a.uX)(),(0,a.CE)("tr",Rp,t[37]||(t[37]=[(0,a.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",Ap,[(0,a.Lk)("div",zp,[(0,a.Lk)("div",Fp,[t[38]||(t[38]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข Promotion Type",-1)),(0,a.Lk)("div",Xp,[(0,a.Lk)("span",{onClick:t[13]||(t[13]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Op,[(0,a.Lk)("div",Qp,[t[39]||(t[39]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>i.selectedPromotionType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPromotionType.name]])]),(0,a.Lk)("div",Vp,[(0,a.Lk)("button",{onClick:t[15]||(t[15]=e=>i.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[40]||(t[40]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,a.eW)("บันทึก ")]))])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",Np,[(0,a.Lk)("div",jp,[(0,a.Lk)("div",Up,[t[41]||(t[41]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[42]||(t[42]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",Ip,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",$p,[(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[43]||(t[43]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Zp),(0,a.Lk)("div",qp,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[21]||(t[21]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[22]||(t[22]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Jp)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[25]||(t[25]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[44]||(t[44]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Wp)])])}var Kp={name:"PromotionTypePage",data(){return{headers:["รหัส","ชื่อ",""],headerWidths:["10%","85%","5%"],searchQuery:"",filteredPromotionType:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",promotion_types:[],currentPage:1,itemsPerPage:10,selectedPromotionType:{},isEditModalOpen:!1,isAddModalOpen:!1,newPromotionType:{name:""},isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}}},methods:{async fetchPromotionTypes(){try{const e=await ne.A.get("http://127.0.0.1:3333/promotion-types");this.filteredPromotionType=e.data,console.log("Response data:",e.data),this.promotion_types=e.data,this.updatePage()}catch(e){console.error("Error fetching promotion_type:",e)}},search(){const e=this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t}));this.currentPage=1,this.filteredPromotionType=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredPromotionType=this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.promotion_types.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.promotion_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedPromotionType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await ne.A.put(`http://127.0.0.1:3333/promotion-types/${this.selectedPromotionType.id}`,{name:this.selectedPromotionType.name});const e=this.promotion_types.findIndex((e=>e.id===this.selectedPromotionType.id));-1!==e&&(this.promotion_types[e]={...this.selectedPromotionType},this.updatePage()),this.isEditModalOpen=!1}catch(e){console.error("Error updating promotion type:",e)}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPromotionType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/promotion-types/${this.itemToDelete}`),this.promotion_types=this.promotion_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0,this.newPromotionType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addPromotionType(){if(this.newPromotionType.name.trim())try{const e=await ne.A.post("http://127.0.0.1:3333/promotion-types",this.newPromotionType);this.promotion_types.push(e.data),this.updatePage(),this.closeAddModal()}catch(e){console.error("Error adding promotion type:",e),alert("เกิดข้อผิดพลาดในการเพิ่มข้อมูล")}else alert("กรุณากรอกชื่อโปรโมชั่น")}},created(){this.filteredPromotionType=this.promotion_types,this.sortData("id"),this.fetchPromotionTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPromotionTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Yp=(0,B.A)(Kp,[["render",Bp],["__scopeId","data-v-c67208be"]]);var Hp=Yp;const Gp={class:"flex space-x-2 items-center relative"},eg={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},tg={class:"text-m text-custom-orange font-bold"},sg={class:"add relative inline-block"},og={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},ag={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[500px] flex flex-col"},lg={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},rg={class:"p-6 space-y-4 overflow-y-auto flex-grow"},ig=["value"],ng={class:"flex justify-end space-x-4 p-4 bg-gray-100 rounded-b-md"},dg={class:"sort relative inline-block",ref:"sortDropdown"},cg={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},ug={class:"list-none p-0 m-0"},pg={key:0,class:"material-symbols-outlined text-sm"},gg={key:0,class:"material-symbols-outlined text-sm"},hg={class:"filter relative inline-block",ref:"filterDropdown"},mg={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},yg={class:"p-4 w-[500px] list-none"},kg={class:"grid grid-cols-3 gap-4"},bg=["value"],xg={class:"flex justify-between mt-4 border-t pt-2"},fg={class:"flex space-x-2"},_g={class:"flex w-[250px] relative"},vg={class:"min-w-full table-fixed border-collapse mt-4"},wg={class:"bg-custom-orange text-white"},Lg={class:"px-4 py-2 align-top"},Pg={class:"px-4 py-2 align-top font-bold text-custom-orange"},Cg={class:"px-4 py-2 align-top"},Dg={class:"px-4 py-2 align-top text-right"},Tg={class:"flex justify-end space-x-2"},Mg=["onClick"],Sg=["onClick"],Eg={key:0},Rg={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},Ag={class:"bg-white rounded-md shadow-lg w-1000"},zg={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Fg={class:"flex space-x-2"},Xg={class:"bg-white rounded-lg shadow-lg p-6 w-96"},Og={class:"mb-4"},Qg={class:"mb-4"},Vg=["value"],Ng={class:"flex justify-end space-x-2"},jg={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},Ug={class:"bg-white rounded-lg shadow-md w-1/3"},Ig={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},$g={class:"flex justify-end space-x-2 p-4"},Zg={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},qg=["disabled"],Jg={class:"flex items-center space-x-1"},Wg=["onClick"],Bg=["disabled"];function Kg(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",Gp,[(0,a.Lk)("div",eg,[t[33]||(t[33]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนโปรแกรมทั้งหมด: ",-1)),(0,a.Lk)("span",tg,(0,r.v_)(i.programs.length)+" รายการ",1)]),(0,a.Lk)("div",sg,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[34]||(t[34]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มโปรแกรม",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",og,[(0,a.Lk)("div",ag,[(0,a.Lk)("div",lg,[t[35]||(t[35]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มโปรแกรมเข้า",-1)),(0,a.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",rg,[(0,a.Lk)("div",null,[t[36]||(t[36]=(0,a.Lk)("label",{for:"programName",class:"block font-bold text-gray-700"},"ชื่อโปรแกรม",-1)),(0,a.bo)((0,a.Lk)("input",{id:"programName","onUpdate:modelValue":t[2]||(t[2]=e=>i.newProgram.name=e),type:"text",placeholder:"กรอกชื่อโปรแกรม",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newProgram.name]])]),(0,a.Lk)("div",null,[t[38]||(t[38]=(0,a.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"ประเภทโปรโมชั่น",-1)),(0,a.bo)((0,a.Lk)("select",{id:"promotionType","onUpdate:modelValue":t[3]||(t[3]=e=>i.newProgram.promotion_type_id=e),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},[t[37]||(t[37]=(0,a.Lk)("option",{value:"",disabled:""},"เลือกประเภทโปรโมชั่น",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.promotion_types,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,ig)))),128))],512),[[o.u1,i.newProgram.promotion_type_id]])])]),(0,a.Lk)("div",ng,[(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.addProgram&&n.addProgram(...e)),class:"px-4 py-2 rounded bg-green-500 text-white hover:bg-green-600"}," บันทึก ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",dg,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[39]||(t[39]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",cg,[(0,a.Lk)("ul",ug,[(0,a.Lk)("li",{onClick:t[7]||(t[7]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[40]||(t[40]=(0,a.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",pg,(0,r.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[8]||(t[8]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[41]||(t[41]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",gg,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[9]||(t[9]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[42]||(t[42]=[(0,a.Lk)("span",null,"Clear Sort",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",hg,[(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[43]||(t[43]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Filter",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",mg,[(0,a.Lk)("div",yg,[t[45]||(t[45]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยประเภทโปรโมชัน",-1)),(0,a.Lk)("div",kg,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.promotion_types,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=e=>i.selectedPromotionType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,bg),[[o.lH,i.selectedPromotionType]]),(0,a.Lk)("span",null,(0,r.v_)(e.name),1)])))),128))]),(0,a.Lk)("div",xg,[(0,a.Lk)("li",{onClick:t[12]||(t[12]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[44]||(t[44]=[(0,a.Lk)("span",null,"Clear Filter",-1)])),(0,a.Lk)("div",fg,[(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง "),(0,a.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 bg-gray-400 hover:bg-gray-600 text-white rounded-md"}," ยกเลิก ")])])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",_g,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=e=>i.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[16]||(t[16]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[17]||(t[17]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",vg,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",wg,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredProgram,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,a.Lk)("td",Lg,(0,r.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",Pg,(0,r.v_)(e.name),1),(0,a.Lk)("td",Cg,(0,r.v_)(n.getPromotionTypeName(e.promotion_type_id)),1),(0,a.Lk)("td",Dg,[(0,a.Lk)("div",Tg,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[46]||(t[46]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,Mg),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[47]||(t[47]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,Sg)])])])))),128)),0===i.filteredProgram.length?((0,a.uX)(),(0,a.CE)("tr",Eg,t[48]||(t[48]=[(0,a.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",Rg,[(0,a.Lk)("div",Ag,[(0,a.Lk)("div",zg,[t[49]||(t[49]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขโปรแกรม",-1)),(0,a.Lk)("div",Fg,[(0,a.Lk)("span",{onClick:t[19]||(t[19]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Xg,[(0,a.Lk)("div",Og,[t[50]||(t[50]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>i.selectedProgram.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedProgram.name]])]),(0,a.Lk)("div",Qg,[t[52]||(t[52]=(0,a.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"ประเภทโปรโมชั่น",-1)),(0,a.bo)((0,a.Lk)("select",{id:"editPromotionType","onUpdate:modelValue":t[21]||(t[21]=e=>i.selectedProgram.promotion_type_id=e),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},[t[51]||(t[51]=(0,a.Lk)("option",{value:"",disabled:""},"เลือกประเภทโปรโมชั่น",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.promotion_types,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,Vg)))),128))],512),[[o.u1,i.selectedProgram.promotion_type_id]])]),(0,a.Lk)("div",Ng,[(0,a.Lk)("button",{onClick:t[22]||(t[22]=e=>i.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,a.eW)("บันทึก ")]))])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",jg,[(0,a.Lk)("div",Ug,[(0,a.Lk)("div",Ig,[t[54]||(t[54]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[24]||(t[24]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[55]||(t[55]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",$g,[(0,a.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Zg,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[56]||(t[56]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,qg),(0,a.Lk)("div",Jg,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[28]||(t[28]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[29]||(t[29]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Wg)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[30]||(t[30]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[31]||(t[31]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Bg)])])}var Yg={name:"ProgramPage",data(){return{headers:["#","ชื่อ","ประเภทโปรโมชัน",""],headerWidths:["10%","50%","35%","5%"],searchQuery:"",filteredProgram:[],selectedPromotionType:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",programs:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newProgram:{name:"",promotion_type_id:""},selectedProgram:{id:"",name:"",promotion_type_id:""},promotion_types:[],isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.programs.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedPromotionType.length||this.selectedPromotionType.includes(e.promotion_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}}},methods:{async fetchPrograms(){try{const e=await ne.A.get("http://127.0.0.1:3333/programs");this.filteredProgram=e.data,console.log("Response data:",e.data),this.programs=e.data,this.updatePage()}catch(e){console.error("Error fetching program:",e)}},search(){const e=this.programs.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedPromotionType.length||this.selectedPromotionType.includes(e.promotion_type_id);return t&&s}));this.currentPage=1,this.filteredProgram=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredProgram=this.programs.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedPromotionType.length||this.selectedPromotionType.includes(e.promotion_type_id);return t&&s})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.programs.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.programs.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPromotionType.length>0?this.filteredProgram=this.programs.filter((e=>this.selectedPromotionType.includes(e.promotion_type_id))):this.filteredProgram=this.programs,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPromotionType=[],this.filteredProgram=this.programs,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getPromotionTypeName(e){const t=this.promotion_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){this.selectedProgram={...e},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedProgram.name||!this.selectedProgram.promotion_type_id)return void alert("กรุณากรอกข้อมูลให้ครบถ้วน");const e=await ne.A.put(`http://127.0.0.1:3333/programs/${this.selectedProgram.id}`,{name:this.selectedProgram.name,promotion_type_id:this.selectedProgram.promotion_type_id});console.log("Program updated:",e.data);const t=this.programs.findIndex((e=>e.id===this.selectedProgram.id));-1!==t&&(this.programs[t]=e.data),this.isEditModalOpen=!1,this.updatePage()}catch(e){console.error("Error saving changes:",e),alert("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedProgram={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/programs/${this.itemToDelete}`),this.programs=this.programs.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewProgram()},resetNewProgram(){this.newProgram={name:"",promotion_type_id:""}},async addProgram(){if(this.newProgram.name&&this.newProgram.promotion_type_id)try{const e=await ne.A.post("http://127.0.0.1:3333/programs",{name:this.newProgram.name,promotion_type_id:this.newProgram.promotion_type_id});console.log("Added Program:",e.data),this.programs.push(e.data),this.closeAddModal(),this.updatePage()}catch(e){console.error("Error adding program:",e),alert("เกิดข้อผิดพลาดในการเพิ่มข้อมูล")}else alert("กรุณากรอกข้อมูลให้ครบถ้วน")},async fetchPromotionTypes(){try{const e=await ne.A.get("http://127.0.0.1:3333/promotion-types");this.promotion_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}}},created(){this.filteredProgram=this.programs,this.sortData("id"),this.fetchPrograms(),this.fetchPromotionTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPrograms(),this.fetchPromotionTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Hg=(0,B.A)(Yg,[["render",Kg],["__scopeId","data-v-2f961f14"]]);var Gg=Hg;const eh={class:"flex space-x-2 items-center relative"},th={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},sh={class:"text-m text-custom-orange font-bold"},oh={class:"ml-2"},ah={key:0},lh={class:"add relative inline-block"},rh={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},ih={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},nh={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},dh={class:"p-6 space-y-4 overflow-y-auto flex-grow"},ch={class:"flex flex-wrap gap-4"},uh={class:"flex-1"},ph={class:"flex-1"},gh={class:"flex-1"},hh={class:"flex-1"},mh={class:"flex gap-4"},yh={class:"flex-1"},kh={class:"flex-1"},bh={class:"space-y-4 overflow-y-auto flex-grow"},xh={class:"flex flex-wrap gap-4"},fh={class:"flex-1"},_h={class:"flex-1"},vh={class:"flex-1"},wh={class:"flex-1"},Lh={class:"flex flex-wrap gap-4"},Ph={class:"flex-1"},Ch={class:"flex-1"},Dh={class:"flex-1"},Th={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Mh={class:"flex space-x-2"},Sh={class:"sort relative inline-block",ref:"sortDropdown"},Eh={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Rh={class:"list-none p-0 m-0"},Ah={key:0,class:"material-symbols-outlined text-sm"},zh={key:0,class:"material-symbols-outlined text-sm"},Fh={class:"filter relative inline-block",ref:"filterDropdown"},Xh={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},Oh={class:"p-4 w-[500px] list-none"},Qh={class:"flex justify-between items-center"},Vh={class:"font-semibold mb-2 text-custom-orange"},Nh=["onClick"],jh={class:"grid grid-cols-2 gap-4"},Uh=["value"],Ih={class:"break-words"},$h={class:"mb-4"},Zh={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},qh={class:"flex space-x-2"},Jh={class:"flex w-[250px] relative"},Wh={class:"min-w-full table-fixed border-collapse mt-4"},Bh={class:"bg-custom-orange text-white"},Kh={class:"px-4 py-2 align-top"},Yh={class:"px-4 py-2 align-top"},Hh={class:"px-4 py-2 align-top"},Gh={class:"px-4 py-2 align-top font-bold text-custom-orange"},em={key:0},tm={class:"px-4 py-2 align-top"},sm={class:"px-4 py-2 align-top"},om={class:"px-4 py-2 align-top"},am={class:"px-4 py-2 align-top text-right"},lm={class:"flex justify-end space-x-2 list-none"},rm=["onClick"],im=["onClick"],nm=["onClick"],dm={key:0},cm={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},um={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},pm={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},gm={class:"flex space-x-2"},hm={class:"p-6"},mm={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},ym={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},km={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},bm={class:"flex space-x-2"},xm={class:"p-6 space-y-4 overflow-y-auto flex-grow"},fm={class:"mb-4"},_m={class:"mb-4"},vm={class:"mb-4"},wm={class:"flex flex-wrap gap-4"},Lm={class:"flex-1"},Pm={class:"flex-1"},Cm={class:"flex-1"},Dm={class:"flex-1"},Tm={class:"flex gap-4"},Mm={class:"flex-1"},Sm={class:"flex-1"},Em={class:"mb-4"},Rm={class:"space-y-4 overflow-y-auto flex-grow"},Am={class:"flex flex-wrap gap-4"},zm={class:"flex-1"},Fm={class:"flex-1"},Xm={class:"flex-1"},Om={class:"flex-1"},Qm={class:"flex flex-wrap gap-4"},Vm={class:"flex-1"},Nm={class:"flex-1"},jm={class:"flex-1"},Um={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Im={class:"flex space-x-2"},$m={key:2,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},Zm={class:"bg-white rounded-lg shadow-md w-1/3"},qm={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Jm={class:"flex justify-end space-x-2 p-4"},Wm={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},Bm=["disabled"],Km={class:"flex items-center space-x-1"},Ym=["onClick"],Hm=["disabled"];function Gm(e,t,s,l,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[75]||(t[75]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[74]||(t[74]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[77]||(t[77]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[76]||(t[76]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",eh,[(0,a.Lk)("div",th,[t[78]||(t[78]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนแพ็คเกจทั้งหมด: ",-1)),(0,a.Lk)("span",sh,(0,r.v_)(i.packages.length)+" รายการ",1)]),i.selectedProgram.length>0||e.selectedMonthYear?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[80]||(t[80]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",oh,[t[79]||(t[79]=(0,a.eW)(" รีเซ็ตตัวกรอง ")),i.selectedProgram.length>0?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)(" ("+(0,r.v_)(i.selectedProgram.length)+") ",1)],64)):(0,a.Q3)("",!0),e.selectedMonthYear?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[i.selectedProgram.length>0?((0,a.uX)(),(0,a.CE)("span",ah,", ")):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,r.v_)(n.formattedStartDate(e.selectedMonthYear)),1)],64)):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",lh,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มแพ็คเกจ",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",rh,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[83]||(t[83]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[82]||(t[82]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",ih,[(0,a.Lk)("div",nh,[t[84]||(t[84]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มแพ็คเกจ",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",dh,[(0,a.Lk)("div",null,[t[85]||(t[85]=(0,a.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.selectedPromotionType,"onUpdate:modelValue":t[6]||(t[6]=e=>i.selectedPromotionType=e),options:i.promotion_types,"custom-label":e.customLabel,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options","custom-label"])]),(0,a.Lk)("div",null,[t[86]||(t[86]=(0,a.Lk)("label",{for:"programType",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.newPackage.program_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.newPackage.program_id=e),options:n.filteredPrograms,"track-by":"id",label:"name",placeholder:"เลือกประเภทโปรแกรม"},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[t[87]||(t[87]=(0,a.Lk)("label",{for:"packageName",class:"block font-bold text-gray-700"},"Package",-1)),(0,a.bo)((0,a.Lk)("input",{id:"packageName","onUpdate:modelValue":t[8]||(t[8]=e=>i.newPackage.name=e),type:"text",placeholder:"กรอกชื่อแพ็คเกจ",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.name]])]),(0,a.Lk)("div",null,[t[88]||(t[88]=(0,a.Lk)("label",{for:"packageDetail",class:"block font-bold text-gray-700"},"Package Details for Purchase Summary",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"packageDetail","onUpdate:modelValue":t[9]||(t[9]=e=>i.newPackage.package_detail=e),placeholder:"กรอกรายละเอียดแพ็คเกจ",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.newPackage.package_detail]])]),(0,a.Lk)("div",ch,[(0,a.Lk)("div",uh,[t[89]||(t[89]=(0,a.Lk)("label",{for:"packageValidity",class:"block font-bold text-gray-700"},"Package Validity",-1)),(0,a.bo)((0,a.Lk)("input",{id:"packageValidity","onUpdate:modelValue":t[10]||(t[10]=e=>i.newPackage.package_validity=e),type:"number",step:"1",min:"0",placeholder:"กรอก Package Validity",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.package_validity]])]),(0,a.Lk)("div",ph,[t[90]||(t[90]=(0,a.Lk)("label",{for:"totalDays",class:"block font-bold text-gray-700"},"Total Days",-1)),(0,a.bo)((0,a.Lk)("input",{id:"totalDays","onUpdate:modelValue":t[11]||(t[11]=e=>i.newPackage.total_days=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Days",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.total_days]])]),(0,a.Lk)("div",gh,[t[91]||(t[91]=(0,a.Lk)("label",{for:"boxesPerDay",class:"block font-bold text-gray-700"},"# of Boxes/Day",-1)),(0,a.bo)((0,a.Lk)("input",{id:"boxesPerDay","onUpdate:modelValue":t[12]||(t[12]=e=>i.newPackage.boxes_per_day=e),type:"number",step:"1",min:"0",placeholder:"กรอก # of Boxes/Day",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.boxes_per_day]])]),(0,a.Lk)("div",hh,[t[92]||(t[92]=(0,a.Lk)("label",{for:"totalBoxes",class:"block font-bold text-gray-700"},"Total Boxes",-1)),(0,a.bo)((0,a.Lk)("input",{id:"totalBoxes","onUpdate:modelValue":t[13]||(t[13]=e=>i.newPackage.total_boxes=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Boxes",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.total_boxes]])])]),(0,a.Lk)("div",mh,[(0,a.Lk)("div",yh,[t[93]||(t[93]=(0,a.Lk)("label",{for:"packagePrice",class:"block font-bold text-gray-700"},"ราคา",-1)),(0,a.bo)((0,a.Lk)("input",{id:"packagePrice","onUpdate:modelValue":t[14]||(t[14]=e=>i.newPackage.price=e),type:"number",step:"1",min:"0",placeholder:"กรอกราคา",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.price]])]),(0,a.Lk)("div",kh,[t[94]||(t[94]=(0,a.Lk)("label",{for:"startMonth",class:"block font-bold text-gray-700"},"เลือกเดือนเริ่มต้น (เฉพาะ Flash Sale)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"startMonth","onUpdate:modelValue":t[15]||(t[15]=e=>i.newPackage.start_date=e),type:"month",placeholder:"เลือกเดือนเริ่มต้น",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.start_date]])])]),(0,a.Lk)("div",null,[t[95]||(t[95]=(0,a.Lk)("label",{for:"promotionDetail",class:"block font-bold text-gray-700"},"รายละเอียดโปรโมชัน",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"promotionDetail","onUpdate:modelValue":t[16]||(t[16]=e=>i.newPackage.promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชัน",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.newPackage.promotion_detail]])]),(0,a.Lk)("div",bh,[(0,a.Lk)("div",xh,[(0,a.Lk)("div",fh,[t[96]||(t[96]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[17]||(t[17]=e=>i.newPackage.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_mad]])]),(0,a.Lk)("div",_h,[t[97]||(t[97]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[18]||(t[18]=e=>i.newPackage.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_dessert]])]),(0,a.Lk)("div",vh,[t[98]||(t[98]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[19]||(t[19]=e=>i.newPackage.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_brittles]])]),(0,a.Lk)("div",wh,[t[99]||(t[99]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[20]||(t[20]=e=>i.newPackage.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_energy_balls]])])]),(0,a.Lk)("div",Lh,[(0,a.Lk)("div",Ph,[t[100]||(t[100]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[21]||(t[21]=e=>i.newPackage.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_dressing]])]),(0,a.Lk)("div",Ch,[t[101]||(t[101]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[22]||(t[22]=e=>i.newPackage.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_yoghurt]])]),(0,a.Lk)("div",Dh,[t[102]||(t[102]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[23]||(t[23]=e=>i.newPackage.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newPackage.free_granola]])])])])]),(0,a.Lk)("div",Th,[(0,a.Lk)("li",{onClick:t[24]||(t[24]=(...e)=>n.clearAdd&&n.clearAdd(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[103]||(t[103]=[(0,a.Lk)("span",null,"รีเซ็คข้อมูล",-1)])),(0,a.Lk)("div",Mh,[(0,a.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>n.addPackage&&n.addPackage(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Sh,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[104]||(t[104]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",Eh,[(0,a.Lk)("ul",Rh,[(0,a.Lk)("li",{onClick:t[28]||(t[28]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[105]||(t[105]=(0,a.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",Ah,(0,r.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[29]||(t[29]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[106]||(t[106]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",zh,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[30]||(t[30]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[107]||(t[107]=[(0,a.Lk)("span",null,"Clear Sort",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Fh,[(0,a.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[108]||(t[108]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Filter",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",Xh,[(0,a.Lk)("div",Oh,[t[110]||(t[110]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยโปรแกรม",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.groupedPrograms,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"mb-4"},[(0,a.Lk)("div",Qh,[(0,a.Lk)("h4",Vh,(0,r.v_)(s),1),(0,a.Lk)("button",{onClick:e=>n.toggleSelectPromotionAll(s),class:"text-custom-orange hover:text-custom-orange-hover text-sm"},(0,r.v_)(i.selectAllProgramState[s]?"ยกเลิกเลือกทั้งหมด":"เลือกทั้งหมด"),9,Nh)]),(0,a.Lk)("div",jh,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[32]||(t[32]=e=>i.selectedProgram=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent flex-shrink-0"},null,8,Uh),[[o.lH,i.selectedProgram]]),(0,a.Lk)("span",Ih,(0,r.v_)(e.name),1)])))),128))])])))),128)),(0,a.Lk)("div",$h,[t[109]||(t[109]=(0,a.Lk)("label",{for:"startMonth",class:"block font-semibold mb-2 text-custom-orange"},"กรองตามเดือนและปี",-1)),(0,a.bo)((0,a.Lk)("input",{id:"startMonth","onUpdate:modelValue":t[33]||(t[33]=t=>e.selectedMonthYear=t),type:"month",class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,e.selectedMonthYear]])])]),(0,a.Lk)("div",Zh,[(0,a.Lk)("li",{onClick:t[34]||(t[34]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[111]||(t[111]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",qh,[(0,a.Lk)("button",{onClick:t[35]||(t[35]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[36]||(t[36]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Jh,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[37]||(t[37]=e=>i.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[38]||(t[38]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[39]||(t[39]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[40]||(t[40]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",Wh,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Bh,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredPackage,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,a.Lk)("td",Kh,(0,r.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",Yh,(0,r.v_)(e.program&&e.program.promotionType?e.program.promotionType.name:"N/A"),1),(0,a.Lk)("td",Hh,(0,r.v_)(n.getProgramName(e.program_id)),1),(0,a.Lk)("td",Gh,[(0,a.eW)((0,r.v_)(e.name)+" ",1),e.start_date?((0,a.uX)(),(0,a.CE)("span",em,"( "+(0,r.v_)(n.formattedStartDate(e.start_date))+" )",1)):(0,a.Q3)("",!0)]),(0,a.Lk)("td",tm,(0,r.v_)(e.package_validity)+" วัน",1),(0,a.Lk)("td",sm,(0,r.v_)(e.total_days)+" วัน",1),(0,a.Lk)("td",om,(0,r.v_)(parseFloat(e.price).toLocaleString("th-TH",{minimumFractionDigits:2}))+" บาท ",1),(0,a.Lk)("td",am,[(0,a.Lk)("div",lm,[(0,a.Lk)("li",{onClick:t=>n.onViewDetails(e),class:"px-2 py-1 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[112]||(t[112]=[(0,a.Lk)("span",null,"ดูรายละเอียด",-1)]),8,rm),(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[113]||(t[113]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,im),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[114]||(t[114]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,nm)])])])))),128)),0===i.filteredPackage.length?((0,a.uX)(),(0,a.CE)("tr",dm,t[115]||(t[115]=[(0,a.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isDetailModalOpen?((0,a.uX)(),(0,a.CE)("div",cm,[(0,a.Lk)("div",um,[(0,a.Lk)("div",pm,[t[116]||(t[116]=(0,a.Lk)("span",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,a.Lk)("div",gm,[(0,a.Lk)("span",{onClick:t[41]||(t[41]=(...e)=>n.closeDetailModal&&n.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",hm,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.filteredDetail,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"mb-2"},[(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,(0,r.v_)(n.formatLabel(t))+":",1),(0,a.eW)(" "+(0,r.v_)(e),1)])])))),128))])])])):(0,a.Q3)("",!0),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",mm,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[118]||(t[118]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[42]||(t[42]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[117]||(t[117]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",ym,[(0,a.Lk)("div",km,[t[119]||(t[119]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขโปรแกรม",-1)),(0,a.Lk)("div",bm,[(0,a.Lk)("span",{onClick:t[43]||(t[43]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",xm,[(0,a.Lk)("div",null,[t[120]||(t[120]=(0,a.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,a.bF)(d,{modelValue:i.selectedPackage.program.promotionType,"onUpdate:modelValue":t[44]||(t[44]=e=>i.selectedPackage.program.promotionType=e),options:i.promotion_types,"custom-label":e.customLabel,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options","custom-label"])]),(0,a.Lk)("div",fm,[t[121]||(t[121]=(0,a.Lk)("label",{for:"editProgramType",class:"block font-bold text-gray-700"},"Program",-1)),(0,a.bF)(d,{modelValue:i.selectedPackage.program_id,"onUpdate:modelValue":t[45]||(t[45]=e=>i.selectedPackage.program_id=e),options:n.filteredEditPrograms,placeholder:"เลือกประเภทโปรแกรม","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,a.Lk)("div",_m,[t[122]||(t[122]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-bold"},"Package",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[46]||(t[46]=e=>i.selectedPackage.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.name]])]),(0,a.Lk)("div",vm,[t[123]||(t[123]=(0,a.Lk)("label",{for:"editPackageDetail",class:"block text-gray-700 font-bold"},"Package Details for Purchase Summary",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"editPackageDetail","onUpdate:modelValue":t[47]||(t[47]=e=>i.selectedPackage.package_detail=e),placeholder:"กรอก Package Details for Purchase Summary",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedPackage.package_detail]])]),(0,a.Lk)("div",wm,[(0,a.Lk)("div",Lm,[t[124]||(t[124]=(0,a.Lk)("label",{for:"packageValidity",class:"block font-bold text-gray-700"},"Package Validity",-1)),(0,a.bo)((0,a.Lk)("input",{id:"packageValidity","onUpdate:modelValue":t[48]||(t[48]=e=>i.selectedPackage.package_validity=e),type:"number",step:"1",min:"0",placeholder:"กรอก Package Validity",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.package_validity]])]),(0,a.Lk)("div",Pm,[t[125]||(t[125]=(0,a.Lk)("label",{for:"totalDays",class:"block font-bold text-gray-700"},"Total Days",-1)),(0,a.bo)((0,a.Lk)("input",{id:"totalDays","onUpdate:modelValue":t[49]||(t[49]=e=>i.selectedPackage.total_days=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Days",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.total_days]])]),(0,a.Lk)("div",Cm,[t[126]||(t[126]=(0,a.Lk)("label",{for:"boxesPerDay",class:"block font-bold text-gray-700"},"# of Boxes/Day",-1)),(0,a.bo)((0,a.Lk)("input",{id:"boxesPerDay","onUpdate:modelValue":t[50]||(t[50]=e=>i.selectedPackage.boxes_per_day=e),type:"number",step:"1",min:"0",placeholder:"กรอก # of Boxes/Day",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.boxes_per_day]])]),(0,a.Lk)("div",Dm,[t[127]||(t[127]=(0,a.Lk)("label",{for:"totalBoxes",class:"block font-bold text-gray-700"},"Total Boxes",-1)),(0,a.bo)((0,a.Lk)("input",{id:"totalBoxes","onUpdate:modelValue":t[51]||(t[51]=e=>i.selectedPackage.total_boxes=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Boxes",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.total_boxes]])])]),(0,a.Lk)("div",Tm,[(0,a.Lk)("div",Mm,[t[128]||(t[128]=(0,a.Lk)("label",{for:"packagePrice",class:"block font-bold text-gray-700"},"ราคา",-1)),(0,a.bo)((0,a.Lk)("input",{id:"packagePrice","onUpdate:modelValue":t[52]||(t[52]=e=>i.selectedPackage.price=e),type:"number",step:"1",min:"0",placeholder:"กรอกราคา",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.price]])]),(0,a.Lk)("div",Sm,[t[129]||(t[129]=(0,a.Lk)("label",{for:"startMonth",class:"block font-bold text-gray-700"},"เลือกเดือนเริ่มต้น (เฉพาะ Flash Sale)",-1)),(0,a.bo)((0,a.Lk)("input",{id:"startMonth","onUpdate:modelValue":t[53]||(t[53]=e=>i.selectedPackage.start_date=e),type:"month",placeholder:"เลือกเดือนเริ่มต้น",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.start_date]])])]),(0,a.Lk)("div",Em,[t[130]||(t[130]=(0,a.Lk)("label",{for:"editPromotionDetail",class:"block text-gray-700 font-bold"},"รายละเอียดโปรโมชัน",-1)),(0,a.bo)((0,a.Lk)("textarea",{id:"editPromotionDetail","onUpdate:modelValue":t[54]||(t[54]=e=>i.selectedPackage.promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชัน",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[o.Jo,i.selectedPackage.promotion_detail]])]),(0,a.Lk)("div",Rm,[(0,a.Lk)("div",Am,[(0,a.Lk)("div",zm,[t[131]||(t[131]=(0,a.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[55]||(t[55]=e=>i.selectedPackage.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_mad]])]),(0,a.Lk)("div",Fm,[t[132]||(t[132]=(0,a.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[56]||(t[56]=e=>i.selectedPackage.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_dessert]])]),(0,a.Lk)("div",Xm,[t[133]||(t[133]=(0,a.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[57]||(t[57]=e=>i.selectedPackage.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_brittles]])]),(0,a.Lk)("div",Om,[t[134]||(t[134]=(0,a.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[58]||(t[58]=e=>i.selectedPackage.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_energy_balls]])])]),(0,a.Lk)("div",Qm,[(0,a.Lk)("div",Vm,[t[135]||(t[135]=(0,a.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[59]||(t[59]=e=>i.selectedPackage.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_dressing]])]),(0,a.Lk)("div",Nm,[t[136]||(t[136]=(0,a.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[60]||(t[60]=e=>i.selectedPackage.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_yoghurt]])]),(0,a.Lk)("div",jm,[t[137]||(t[137]=(0,a.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,a.bo)((0,a.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[61]||(t[61]=e=>i.selectedPackage.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedPackage.free_granola]])])])])]),(0,a.Lk)("div",Um,[(0,a.Lk)("div",Im,[(0,a.Lk)("button",{onClick:t[62]||(t[62]=e=>i.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[63]||(t[63]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[138]||(t[138]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,a.eW)("บันทึก ")]))])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",$m,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[140]||(t[140]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[64]||(t[64]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[139]||(t[139]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Zm,[(0,a.Lk)("div",qm,[t[141]||(t[141]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[65]||(t[65]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[142]||(t[142]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",Jm,[(0,a.Lk)("button",{onClick:t[66]||(t[66]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[67]||(t[67]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Wm,[(0,a.Lk)("button",{onClick:t[68]||(t[68]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[143]||(t[143]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Bm),(0,a.Lk)("div",Km,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[69]||(t[69]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[70]||(t[70]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Ym)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[71]||(t[71]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[72]||(t[72]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[73]||(t[73]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[144]||(t[144]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Hm)])])}s(7550);var ey={name:"PackagePage",data(){return{headers:["#","Promotion Type","Program","Package","Package Validity","Total Days","ราคา",""],headerWidths:["5%","10%","10%","15%","10%","10%","10%","15%","15%"],searchQuery:"",filteredPackage:[],selectedProgram:[],isFilterDropdownOpen:!1,selectAllProgramState:{},isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",packages:[],currentPage:1,itemsPerPage:10,isDetailModalOpen:!1,selectedPackageDetail:{},isEditModalOpen:!1,isAddModalOpen:!1,newPackage:{name:"",program_id:"",package_detail:"",package_validity:0,total_days:0,boxes_per_day:0,total_boxes:0,price:0,promotion_detail:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,start_date:null},selectedPackage:{id:"",name:"",program_id:"",package_detail:"",package_validity:0,total_days:0,boxes_per_day:0,total_boxes:0,price:0,promotion_detail:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,start_date:null},programs:[],promotion_types:[],selectedPromotionType:"",isDeleteModalOpen:!1,itemToDelete:null,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},components:{Multiselect:rr.Ay},computed:{totalPages(){return Math.ceil(this.packages.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedProgram.length||this.selectedProgram.includes(e.program_id),o=!this.selectedMonthYear||new Date(e.start_date).toISOString().slice(0,7)===this.selectedMonthYear;return t&&s&&o})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},filteredDetail(){return{name:this.selectedPackageDetail.name,program:this.selectedPackageDetail.program.name,package_detail:this.selectedPackageDetail.package_detail,package_validity:this.selectedPackageDetail.package_validity,total_days:this.selectedPackageDetail.total_days,boxes_per_day:this.selectedPackageDetail.boxes_per_day,total_boxes:this.selectedPackageDetail.total_boxes,price:this.selectedPackageDetail.price,promotion_detail:this.selectedPackageDetail.promotion_detail}},filteredPrograms(){return this.selectedPromotionType&&this.selectedPromotionType.id?this.programs.filter((e=>e.promotion_type_id===this.selectedPromotionType.id)):[]},filteredEditPrograms(){return this.selectedPackage.program&&this.selectedPackage.program.promotionType?this.programs.filter((e=>e.promotion_type_id===this.selectedPackage.program.promotionType.id)):[]},groupedPrograms(){return this.programs.reduce(((e,t)=>{const s=t.promotionType?t.promotionType.name:"ไม่มีข้อมูล";return e[s]||(e[s]=[]),e[s].push(t),e}),{})},...(0,ir.L8)(["packages"])},methods:{...(0,ir.i0)(["fetchPackages","fetchPrograms","fetchPromotionTypes"]),formattedStartDate(e){if(!e)return"";const t=new Date(e),s=t.getMonth(),o=t.getFullYear(),a=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"];return`${a[s]} ${o}`},async fetchPackages(){try{const e=await ne.A.get("http://127.0.0.1:3333/packages");this.filteredPackage=e.data,this.packages=e.data,this.updatePage()}catch(e){console.error("Error fetching program:",e)}},search(){const e=this.packages.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedProgram.length||this.selectedProgram.includes(e.program_id),o=!this.selectedMonthYear||new Date(e.start_date).toISOString().slice(0,7)===this.selectedMonthYear;return t&&s&&o}));this.currentPage=1,this.filteredPackage=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredPackage=this.packages.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedProgram.length||this.selectedProgram.includes(e.program_id),o=!this.selectedMonthYear||new Date(e.start_date).toISOString().slice(0,7)===this.selectedMonthYear;return t&&s&&o})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.packages.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.packages.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){if(this.selectedProgram.length>0?this.filteredPackage=this.packages.filter((e=>this.selectedProgram.includes(e.program_id))):this.filteredPackage=this.packages,this.selectedMonthYear){const[e,t]=this.selectedMonthYear.split("-").map(Number);this.filteredPackage=this.filteredPackage.filter((s=>{const o=new Date(s.start_date);return o.getFullYear()===e&&o.getMonth()+1===t}))}this.isFilterDropdownOpen=!1,this.currentPage=1,this.updatePage()},toggleSelectPromotionAll(e){if(this.selectAllProgramState[e])this.selectedProgram=this.selectedProgram.filter((t=>!this.groupedPrograms[e].some((e=>e.id===t))));else{const t=this.groupedPrograms[e].map((e=>e.id));this.selectedProgram=[...new Set([...this.selectedProgram,...t])]}this.selectAllProgramState[e]=!this.selectAllProgramState[e]},clearFilter(){this.selectedProgram=[],this.selectedMonthYear="",this.filteredPackage=this.packages,Object.keys(this.selectAllProgramState).forEach((e=>{this.selectAllProgramState[e]=!1})),this.updatePage(),this.applyFilter()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getProgramName(e){const t=this.programs.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},onViewDetails(e){this.selectedPackageDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedPackageDetail={}},formatLabel(e){const t={name:"ชื่อ",program:"ประเภทโปรแกรม",package_detail:"รายละเอียดแพ็คเกจ",package_validity:"จำนวน",total_days:"จำนวนวันหมดอายุ",boxes_per_day:"จำนวนกล่องต่อวัน",total_boxes:"จำนวนกล่อง",price:"ราคา",promotion_detail:"รายละเอียดโปรโมชั่น"};return t[e]||e},openEditModal(e){const t=this.programs.find((t=>t.id===e.program_id));this.selectedPackage={...e,program_id:t?{id:t.id,name:`${t.name}`}:null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedPackage.name||!this.selectedPackage.program_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=await ne.A.put(`http://127.0.0.1:3333/packages/${this.selectedPackage.id}`,{name:this.selectedPackage.name,program_id:this.selectedPackage.program_id.id,package_detail:this.selectedPackage.package_detail,package_validity:this.selectedPackage.package_validity,total_days:this.selectedPackage.total_days,boxes_per_day:this.selectedPackage.boxes_per_day,total_boxes:this.selectedPackage.total_boxes,price:this.selectedPackage.price,promotion_detail:this.selectedPackage.promotion_detail,free_mad:this.selectedPackage.free_mad,free_dessert:this.selectedPackage.free_dessert,free_brittles:this.selectedPackage.free_brittles,free_energy_balls:this.selectedPackage.free_energy_balls,free_dressing:this.selectedPackage.free_dressing,free_yoghurt:this.selectedPackage.free_yoghurt,free_granola:this.selectedPackage.free_granola,start_date:this.selectedPackage.start_date}),t=this.packages.findIndex((e=>e.id===this.selectedPackage.id));-1!==t&&(this.packages[t]={...e.data,promotionType:this.promotion_types.find((t=>t.id===e.data.promotion_type_id))||{}}),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.isEditModalOpen=!1,this.updatePage()}catch(e){console.error("Error saving changes:",e),alert("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPackage={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/packages/${this.itemToDelete}`),this.packages=this.packages.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.clearAdd()},clearAdd(){this.newPackage={name:"",program_id:"",package_detail:"",package_validity:0,total_days:0,boxes_per_day:0,total_boxes:0,price:0,promotion_detail:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,start_date:null},this.selectedPromotionType=null},async addPackage(){if(this.newPackage.name)try{const e=await ne.A.post("http://127.0.0.1:3333/packages",{name:this.newPackage.name,program_id:this.newPackage.program_id.id,package_detail:this.newPackage.package_detail,package_validity:this.newPackage.package_validity,total_days:this.newPackage.total_days,boxes_per_day:this.newPackage.boxes_per_day,total_boxes:this.newPackage.total_boxes,price:this.newPackage.price,promotion_detail:this.newPackage.promotion_detail,start_date:this.newPackage.start_date,free_mad:this.newPackage.free_mad,free_dessert:this.newPackage.free_dessert,free_brittles:this.newPackage.free_brittles,free_energy_balls:this.newPackage.free_energy_balls,free_dressing:this.newPackage.free_dressing,free_yoghurt:this.newPackage.free_yoghurt,free_granola:this.newPackage.free_granola});e.data&&e.data.promotionType&&e.data.program.promotionType&&this.packages.push(e.data),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!"),this.closeAddModal(),this.updatePage()}catch(e){console.error("Error adding program:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},async fetchPrograms(){try{const e=await ne.A.get("http://127.0.0.1:3333/programs");this.programs=e.data}catch(e){console.error("Error fetching promotion types:",e)}},async fetchPromotionTypes(){try{const e=await ne.A.get("http://127.0.0.1:3333/promotion-types");this.promotion_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredPackage=this.programs,this.sortData("id"),this.fetchPackages(),this.fetchPrograms(),this.fetchPromotionTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPackages(),this.fetchPrograms(),this.fetchPromotionTypes(),this.updatePage(),(0,Ad.A)("#startMonth",{dateFormat:"Y-m",altInput:!0,altFormat:"F Y",allowInput:!0})},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const ty=(0,B.A)(ey,[["render",Gm],["__scopeId","data-v-04aba597"]]);var sy=ty;const oy={class:"flex space-x-2 items-center relative"},ay={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},ly={class:"text-m text-custom-orange font-bold"},ry={class:"add relative inline-block"},iy={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ny={class:"bg-white rounded-md shadow-lg w-1000"},dy={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},cy={class:"flex space-x-2"},uy={class:"bg-white rounded-lg p-6 w-[400px]"},py={class:"mb-4"},gy={class:"flex justify-end space-x-2"},hy={class:"sort relative inline-block",ref:"sortDropdown"},my={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},yy={class:"list-none p-0 m-0"},ky={key:0,class:"material-symbols-outlined text-sm"},by={key:0,class:"material-symbols-outlined text-sm"},xy={class:"flex w-[250px] relative"},fy={class:"min-w-full table-fixed border-collapse mt-4"},_y={class:"bg-custom-orange text-white"},vy={class:"px-4 py-2 align-top"},wy={class:"px-4 py-2 align-top font-bold text-custom-orange"},Ly={class:"px-4 py-2 align-top text-right"},Py={class:"flex justify-end space-x-2"},Cy=["onClick"],Dy=["onClick"],Ty={key:0},My={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},Sy={class:"bg-white rounded-md shadow-lg w-1000"},Ey={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Ry={class:"flex space-x-2"},Ay={class:"bg-white rounded-lg shadow-lg p-6 w-96"},zy={class:"mb-4"},Fy={class:"flex justify-end space-x-2"},Xy={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},Oy={class:"bg-white rounded-lg shadow-md w-1/3"},Qy={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Vy={class:"flex justify-end space-x-2 p-4"},Ny={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},jy=["disabled"],Uy={class:"flex items-center space-x-1"},Iy=["onClick"],$y=["disabled"];function Zy(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",oy,[(0,a.Lk)("div",ay,[t[26]||(t[26]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภทโปรโมชันทั้งหมด: ",-1)),(0,a.Lk)("span",ly,(0,r.v_)(i.promotion_types.length)+" รายการ",1)]),(0,a.Lk)("div",ry,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[27]||(t[27]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มประเภทแพ็คเกจ",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",iy,[(0,a.Lk)("div",ny,[(0,a.Lk)("div",dy,[t[28]||(t[28]=(0,a.Lk)("div",{class:"flex-1 flex items-left"},[(0,a.Lk)("span",{class:"text-xl font-bold"},"เพิ่มประเภทแพ็คเกจ")],-1)),(0,a.Lk)("div",cy,[(0,a.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",uy,[(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,o.D$)(((...e)=>n.addPromotionType&&n.addPromotionType(...e)),["prevent"]))},[(0,a.Lk)("div",py,[t[29]||(t[29]=(0,a.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อประเภทแพ็คเกจ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>i.newPromotionType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[o.Jo,i.newPromotionType.name]])]),(0,a.Lk)("div",gy,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"},"ยกเลิก"),t[30]||(t[30]=(0,a.Lk)("button",{type:"submit",class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},[(0,a.Lk)("span",{class:"material-symbols-outlined"},"save"),(0,a.eW)("บันทึก")],-1))])],32)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",hy,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[31]||(t[31]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",my,[(0,a.Lk)("ul",yy,[(0,a.Lk)("li",{onClick:t[6]||(t[6]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[32]||(t[32]=(0,a.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",ky,(0,r.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[7]||(t[7]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[33]||(t[33]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",by,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[8]||(t[8]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[34]||(t[34]=[(0,a.Lk)("span",null,"Clear Sort",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",xy,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>i.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[10]||(t[10]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[11]||(t[11]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",fy,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",_y,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredPackageType,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,a.Lk)("td",vy,(0,r.v_)(e.id),1),(0,a.Lk)("td",wy,(0,r.v_)(e.name),1),(0,a.Lk)("td",Ly,[(0,a.Lk)("div",Py,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[35]||(t[35]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,Cy),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,Dy)])])])))),128)),0===i.filteredPackageType.length?((0,a.uX)(),(0,a.CE)("tr",Ty,t[37]||(t[37]=[(0,a.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",My,[(0,a.Lk)("div",Sy,[(0,a.Lk)("div",Ey,[t[38]||(t[38]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขประเภทแพ็คเกจ",-1)),(0,a.Lk)("div",Ry,[(0,a.Lk)("span",{onClick:t[13]||(t[13]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Ay,[(0,a.Lk)("div",zy,[t[39]||(t[39]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>i.selectedPromotionType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPromotionType.name]])]),(0,a.Lk)("div",Fy,[(0,a.Lk)("button",{onClick:t[15]||(t[15]=e=>i.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[40]||(t[40]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,a.eW)("บันทึก ")]))])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",Xy,[(0,a.Lk)("div",Oy,[(0,a.Lk)("div",Qy,[t[41]||(t[41]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[42]||(t[42]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",Vy,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Ny,[(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[43]||(t[43]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,jy),(0,a.Lk)("div",Uy,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[21]||(t[21]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[22]||(t[22]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Iy)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[25]||(t[25]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[44]||(t[44]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,$y)])])}var qy={name:"PromotionTypePage",data(){return{headers:["รหัส","ชื่อ",""],headerWidths:["10%","85%","5%"],searchQuery:"",filteredPackageType:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",promotion_types:[],currentPage:1,itemsPerPage:10,selectedPromotionType:{},isEditModalOpen:!1,isAddModalOpen:!1,newPromotionType:{name:""},isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}}},methods:{async fetchPackageTypes(){try{const e=await ne.A.get("http://127.0.0.1:3333/package-types");this.filteredPackageType=e.data,console.log("Response data:",e.data),this.promotion_types=e.data,this.updatePage()}catch(e){console.error("Error fetching promotion_type:",e)}},search(){const e=this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t}));this.currentPage=1,this.filteredPackageType=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredPackageType=this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.promotion_types.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.promotion_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedPromotionType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await ne.A.put(`http://127.0.0.1:3333/package-types/${this.selectedPromotionType.id}`,{name:this.selectedPromotionType.name});const e=this.promotion_types.findIndex((e=>e.id===this.selectedPromotionType.id));-1!==e&&(this.promotion_types[e]={...this.selectedPromotionType},this.updatePage()),this.isEditModalOpen=!1}catch(e){console.error("Error updating promotion type:",e)}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPromotionType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/package-types/${this.itemToDelete}`),this.promotion_types=this.promotion_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0,this.newPromotionType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addPromotionType(){if(this.newPromotionType.name.trim())try{const e=await ne.A.post("http://127.0.0.1:3333/package-types",this.newPromotionType);this.promotion_types.push(e.data),this.updatePage(),this.closeAddModal()}catch(e){console.error("Error adding promotion type:",e),alert("เกิดข้อผิดพลาดในการเพิ่มข้อมูล")}else alert("กรุณากรอกชื่อ")}},created(){this.filteredPackageType=this.promotion_types,this.sortData("id"),this.fetchPackageTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPackageTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Jy=(0,B.A)(qy,[["render",Zy],["__scopeId","data-v-5c61a4e8"]]);var Wy=Jy;const By={class:"flex space-x-2 items-center relative"},Ky={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Yy={class:"text-m text-custom-orange font-bold"},Hy={class:"add relative inline-block"},Gy={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ek={class:"bg-white rounded-md shadow-lg w-1000"},tk={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},sk={class:"flex space-x-2"},ok={class:"bg-white rounded-lg p-6 w-[400px]"},ak={class:"mb-4"},lk={class:"flex justify-end space-x-2"},rk={class:"sort relative inline-block",ref:"sortDropdown"},ik={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},nk={class:"list-none p-0 m-0"},dk={key:0,class:"material-symbols-outlined text-sm"},ck={key:0,class:"material-symbols-outlined text-sm"},uk={class:"flex w-[250px] relative"},pk={class:"min-w-full table-fixed border-collapse mt-4"},gk={class:"bg-custom-orange text-white"},hk={class:"px-4 py-2 align-top"},mk={class:"px-4 py-2 align-top font-bold text-custom-orange"},yk={class:"px-4 py-2 align-top text-right"},kk={class:"flex justify-end space-x-2"},bk=["onClick"],xk=["onClick"],fk={key:0},_k={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},vk={class:"bg-white rounded-md shadow-lg w-1000"},wk={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Lk={class:"flex space-x-2"},Pk={class:"bg-white rounded-lg shadow-lg p-6 w-96"},Ck={class:"mb-4"},Dk={class:"flex justify-end space-x-2"},Tk={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},Mk={class:"bg-white rounded-lg shadow-md w-1/3"},Sk={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Ek={class:"flex justify-end space-x-2 p-4"},Rk={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},Ak=["disabled"],zk={class:"flex items-center space-x-1"},Fk=["onClick"],Xk=["disabled"];function Ok(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",By,[(0,a.Lk)("div",Ky,[t[26]||(t[26]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภทโซนการจัดส่งทั้งหมด: ",-1)),(0,a.Lk)("span",Yy,(0,r.v_)(i.zone_types.length)+" รายการ",1)]),(0,a.Lk)("div",Hy,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[27]||(t[27]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มประเภทโซนการจัดส่ง",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",Gy,[(0,a.Lk)("div",ek,[(0,a.Lk)("div",tk,[t[28]||(t[28]=(0,a.Lk)("div",{class:"flex-1 flex items-left"},[(0,a.Lk)("span",{class:"text-xl font-bold"},"เพิ่มประเภทโซนการจัดส่งใหม่")],-1)),(0,a.Lk)("div",sk,[(0,a.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",ok,[(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,o.D$)(((...e)=>n.addZoneDliveryType&&n.addZoneDliveryType(...e)),["prevent"]))},[(0,a.Lk)("div",ak,[t[29]||(t[29]=(0,a.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อโปรโมชั่น",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>i.newZoneDeliveryType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[o.Jo,i.newZoneDeliveryType.name]])]),(0,a.Lk)("div",lk,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"},"ยกเลิก"),t[30]||(t[30]=(0,a.Lk)("button",{type:"submit",class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},[(0,a.Lk)("span",{class:"material-symbols-outlined"},"save"),(0,a.eW)("บันทึก")],-1))])],32)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",rk,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[31]||(t[31]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",ik,[(0,a.Lk)("ul",nk,[(0,a.Lk)("li",{onClick:t[6]||(t[6]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[32]||(t[32]=(0,a.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",dk,(0,r.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[7]||(t[7]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[33]||(t[33]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",ck,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[8]||(t[8]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[34]||(t[34]=[(0,a.Lk)("span",null,"Clear Sort",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",uk,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>i.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[10]||(t[10]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[11]||(t[11]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",pk,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",gk,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredZoneTypes,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,a.Lk)("td",hk,(0,r.v_)(e.id),1),(0,a.Lk)("td",mk,(0,r.v_)(e.name),1),(0,a.Lk)("td",yk,[(0,a.Lk)("div",kk,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[35]||(t[35]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,bk),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,xk)])])])))),128)),0===i.filteredZoneTypes.length?((0,a.uX)(),(0,a.CE)("tr",fk,t[37]||(t[37]=[(0,a.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",_k,[(0,a.Lk)("div",vk,[(0,a.Lk)("div",wk,[t[38]||(t[38]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข Promotion Type",-1)),(0,a.Lk)("div",Lk,[(0,a.Lk)("span",{onClick:t[13]||(t[13]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Pk,[(0,a.Lk)("div",Ck,[t[39]||(t[39]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>i.selectedZoneDeliveryType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedZoneDeliveryType.name]])]),(0,a.Lk)("div",Dk,[(0,a.Lk)("button",{onClick:t[15]||(t[15]=e=>i.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[40]||(t[40]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,a.eW)("บันทึก ")]))])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",Tk,[(0,a.Lk)("div",Mk,[(0,a.Lk)("div",Sk,[t[41]||(t[41]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[42]||(t[42]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",Ek,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Rk,[(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[43]||(t[43]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Ak),(0,a.Lk)("div",zk,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[21]||(t[21]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[22]||(t[22]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Fk)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[25]||(t[25]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[44]||(t[44]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Xk)])])}var Qk={name:"ZoneDeliveryTypePage",data(){return{headers:["รหัส","ชื่อ",""],headerWidths:["10%","85%","5%"],searchQuery:"",filteredZoneTypes:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",zone_types:[],currentPage:1,itemsPerPage:10,selectedZoneDeliveryType:{},isEditModalOpen:!1,isAddModalOpen:!1,newZoneDeliveryType:{name:""},isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.zone_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}}},methods:{async fetchPromotionTypes(){try{const e=await ne.A.get("http://127.0.0.1:3333/zone-delivery-types");this.filteredZoneTypes=e.data,console.log("Response data:",e.data),this.zone_types=e.data,this.updatePage()}catch(e){console.error("Error fetching zone_delivery_type:",e)}},search(){const e=this.zone_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t}));this.currentPage=1,this.filteredZoneTypes=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredZoneTypes=this.zone_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.zone_types.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.zone_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedZoneDeliveryType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await ne.A.put(`http://127.0.0.1:3333/zone-delivery-types/${this.selectedZoneDeliveryType.id}`,{name:this.selectedZoneDeliveryType.name});const e=this.zone_types.findIndex((e=>e.id===this.selectedZoneDeliveryType.id));-1!==e&&(this.zone_types[e]={...this.selectedZoneDeliveryType},this.updatePage()),this.isEditModalOpen=!1}catch(e){console.error("Error updating promotion type:",e)}},closeEditModal(){this.isEditModalOpen=!1,this.selectedZoneDeliveryType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/zone-delivery-types/${this.itemToDelete}`),this.zone_types=this.zone_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0,this.newZoneDeliveryType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addZoneDliveryType(){if(this.newZoneDeliveryType.name.trim())try{const e=await ne.A.post("http://127.0.0.1:3333/zone-delivery-types",this.newZoneDeliveryType);this.zone_types.push(e.data),this.updatePage(),this.closeAddModal()}catch(e){console.error("Error adding promotion type:",e),alert("เกิดข้อผิดพลาดในการเพิ่มข้อมูล")}else alert("กรุณากรอกชื่อโปรโมชั่น")}},created(){this.filteredZoneTypes=this.zone_types,this.sortData("id"),this.fetchPromotionTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPromotionTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Vk=(0,B.A)(Qk,[["render",Ok],["__scopeId","data-v-4f4cb994"]]);var Nk=Vk;const jk={class:"flex space-x-2 items-center relative"},Uk={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Ik={class:"text-m text-custom-orange font-bold"},$k={class:"add relative inline-block"},Zk={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},qk={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[500px] flex flex-col"},Jk={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Wk={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Bk=["value"],Kk={class:"mb-4"},Yk={class:"flex justify-end space-x-4 p-4 bg-gray-100 rounded-b-md"},Hk={class:"sort relative inline-block",ref:"sortDropdown"},Gk={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},eb={class:"list-none p-0 m-0"},tb={key:0,class:"material-symbols-outlined text-sm"},sb={key:0,class:"material-symbols-outlined text-sm"},ob={class:"filter relative inline-block",ref:"filterDropdown"},ab={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},lb={class:"p-4 w-[500px] list-none"},rb={class:"grid grid-cols-2 gap-4"},ib=["value"],nb={class:"flex justify-between mt-4 border-t pt-2"},db={class:"flex space-x-2"},cb={class:"flex w-[250px] relative"},ub={class:"min-w-full table-fixed border-collapse mt-4"},pb={class:"bg-custom-orange text-white"},gb={class:"px-4 py-2 align-top"},hb={class:"px-4 py-2 align-top font-bold text-custom-orange"},mb={class:"px-4 py-2 align-top"},yb={class:"px-4 py-2 align-top"},kb={class:"px-4 py-2 align-top text-right"},bb={class:"flex justify-end space-x-2"},xb=["onClick"],fb=["onClick"],_b={key:0},vb={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},wb={class:"bg-white rounded-md shadow-lg w-1000"},Lb={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Pb={class:"flex space-x-2"},Cb={class:"bg-white rounded-lg shadow-lg p-6 w-96"},Db={class:"mb-4"},Tb={class:"mb-4"},Mb=["value"],Sb={class:"mb-4"},Eb={class:"flex justify-end space-x-2"},Rb={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},Ab={class:"bg-white rounded-lg shadow-md w-1/3"},zb={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Fb={class:"flex justify-end space-x-2 p-4"},Xb={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},Ob=["disabled"],Qb={class:"flex items-center space-x-1"},Vb=["onClick"],Nb=["disabled"];function jb(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",jk,[(0,a.Lk)("div",Uk,[t[35]||(t[35]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนโปรแกรมทั้งหมด: ",-1)),(0,a.Lk)("span",Ik,(0,r.v_)(i.zoneDeliveries.length)+" รายการ",1)]),(0,a.Lk)("div",$k,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[36]||(t[36]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มโซนการจัดส่ง",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",Zk,[(0,a.Lk)("div",qk,[(0,a.Lk)("div",Jk,[t[37]||(t[37]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มโซนการจัดส่ง",-1)),(0,a.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,a.Lk)("div",Wk,[(0,a.Lk)("div",null,[t[38]||(t[38]=(0,a.Lk)("label",{for:"zoneDeliveryName",class:"block font-bold text-gray-700"},"ชื่อโซนการจัดส่ง",-1)),(0,a.bo)((0,a.Lk)("input",{id:"zoneDeliveryName","onUpdate:modelValue":t[2]||(t[2]=e=>i.newZoneDelivery.name=e),type:"text",placeholder:"กรอกชื่อโซนการจัดส่ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newZoneDelivery.name]])]),(0,a.Lk)("div",null,[t[40]||(t[40]=(0,a.Lk)("label",{for:"zoneDeliveryType",class:"block font-bold text-gray-700"},"ประเภทโซนการจัดส่ง",-1)),(0,a.bo)((0,a.Lk)("select",{id:"zoneDeliveryType","onUpdate:modelValue":t[3]||(t[3]=e=>i.newZoneDelivery.zone_type_id=e),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},[t[39]||(t[39]=(0,a.Lk)("option",{value:"",disabled:""},"เลือกประเภทโปรโมชั่น",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.zone_delivery_types,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,Bk)))),128))],512),[[o.u1,i.newZoneDelivery.zone_type_id]])]),(0,a.Lk)("div",Kk,[t[41]||(t[41]=(0,a.Lk)("label",{for:"zoneDeliveryPrice",class:"block text-gray-700 font-medium"},"ราคา",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>i.newZoneDelivery.price=e),id:"zoneDeliveryPrice",type:"number",step:"1",min:"0",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newZoneDelivery.price]])])]),(0,a.Lk)("div",Yk,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.addzoneDelivery&&n.addzoneDelivery(...e)),class:"px-4 py-2 rounded bg-green-500 text-white hover:bg-green-600"}," บันทึก ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Hk,[(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[42]||(t[42]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",Gk,[(0,a.Lk)("ul",eb,[(0,a.Lk)("li",{onClick:t[8]||(t[8]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[43]||(t[43]=(0,a.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",tb,(0,r.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[9]||(t[9]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[44]||(t[44]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",sb,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[10]||(t[10]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[45]||(t[45]=[(0,a.Lk)("span",null,"Clear Sort",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",ob,[(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[46]||(t[46]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Filter",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",ab,[(0,a.Lk)("div",lb,[t[48]||(t[48]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยประเภทโปรโมชัน",-1)),(0,a.Lk)("div",rb,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.zone_delivery_types,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=e=>i.selectedZoneDeliveryTypes=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,ib),[[o.lH,i.selectedZoneDeliveryTypes]]),(0,a.Lk)("span",null,(0,r.v_)(e.name),1)])))),128))]),(0,a.Lk)("div",nb,[(0,a.Lk)("li",{onClick:t[13]||(t[13]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[47]||(t[47]=[(0,a.Lk)("span",null,"Clear Filter",-1)])),(0,a.Lk)("div",db,[(0,a.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง "),(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 bg-gray-400 hover:bg-gray-600 text-white rounded-md"}," ยกเลิก ")])])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",cb,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>i.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[17]||(t[17]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[18]||(t[18]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",ub,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",pb,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredZoneDeliveries,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,a.Lk)("td",gb,(0,r.v_)(e.id),1),(0,a.Lk)("td",hb,(0,r.v_)(e.name),1),(0,a.Lk)("td",mb,(0,r.v_)(n.getZoneDeliveryTypeName(e.zone_type_id)),1),(0,a.Lk)("td",yb,(0,r.v_)(parseFloat(e.price).toLocaleString("th-TH",{minimumFractionDigits:2}))+" บาท",1),(0,a.Lk)("td",kb,[(0,a.Lk)("div",bb,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,xb),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[50]||(t[50]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,fb)])])])))),128)),0===i.filteredZoneDeliveries.length?((0,a.uX)(),(0,a.CE)("tr",_b,t[51]||(t[51]=[(0,a.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",vb,[(0,a.Lk)("div",wb,[(0,a.Lk)("div",Lb,[t[52]||(t[52]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขโซนการจัดส่ง",-1)),(0,a.Lk)("div",Pb,[(0,a.Lk)("span",{onClick:t[20]||(t[20]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Cb,[(0,a.Lk)("div",Db,[t[53]||(t[53]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>i.selectedZoneDelivery.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedZoneDelivery.name]])]),(0,a.Lk)("div",Tb,[t[55]||(t[55]=(0,a.Lk)("label",{for:"editZoneDeliveryType",class:"block font-bold text-gray-700"},"ประเภทโซนการจัดส่ง",-1)),(0,a.bo)((0,a.Lk)("select",{id:"editZoneDeliveryType","onUpdate:modelValue":t[22]||(t[22]=e=>i.selectedZoneDelivery.zone_type_id=e),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},[t[54]||(t[54]=(0,a.Lk)("option",{value:"",disabled:""},"เลือกประเภทโซนการจัดส่ง",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.zone_delivery_types,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,Mb)))),128))],512),[[o.u1,i.selectedZoneDelivery.zone_type_id]])]),(0,a.Lk)("div",Sb,[t[56]||(t[56]=(0,a.Lk)("label",{for:"editZoneDeliveryPrice",class:"block text-gray-700 font-medium"},"ราคา",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[23]||(t[23]=e=>i.selectedZoneDelivery.price=e),id:"editZoneDeliveryPrice",type:"number",step:"1",min:"0",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedZoneDelivery.price]])]),(0,a.Lk)("div",Eb,[(0,a.Lk)("button",{onClick:t[24]||(t[24]=e=>i.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,a.eW)("บันทึก ")]))])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",Rb,[(0,a.Lk)("div",Ab,[(0,a.Lk)("div",zb,[t[58]||(t[58]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[26]||(t[26]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[59]||(t[59]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",Fb,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Xb,[(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[60]||(t[60]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Ob),(0,a.Lk)("div",Qb,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[30]||(t[30]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[31]||(t[31]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Vb)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[32]||(t[32]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[33]||(t[33]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[34]||(t[34]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[61]||(t[61]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Nb)])])}var Ub={name:"zoneDeliveryPage",data(){return{headers:["รหัส","ชื่อ","ประเภทโซนการจัดส่ง","ราคา",""],headerWidths:["10%","30%","35%","20","5%"],searchQuery:"",filteredZoneDeliveries:[],selectedZoneDeliveryTypes:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",zoneDeliveries:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newZoneDelivery:{name:"",zone_type_id:"",price:""},selectedZoneDelivery:{id:"",name:"",zone_type_id:"",price:""},zone_delivery_types:[],isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.zoneDeliveries.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedZoneDeliveryTypes.length||this.selectedZoneDeliveryTypes.includes(e.zone_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}}},methods:{async fetchZoneDeliveries(){try{const e=await ne.A.get("http://127.0.0.1:3333/zone-deliveries");this.filteredZoneDeliveries=e.data,console.log("Response data:",e.data),this.zoneDeliveries=e.data,this.updatePage()}catch(e){console.error("Error fetching zoneDelivery:",e)}},search(){const e=this.zoneDeliveries.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedZoneDeliveryTypes.length||this.selectedZoneDeliveryTypes.includes(e.zone_type_id);return t&&s}));this.currentPage=1,this.filteredZoneDeliveries=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredZoneDeliveries=this.zoneDeliveries.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedZoneDeliveryTypes.length||this.selectedZoneDeliveryTypes.includes(e.zone_type_id);return t&&s})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.zoneDeliveries.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.zoneDeliveries.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedZoneDeliveryTypes.length>0?this.filteredZoneDeliveries=this.zoneDeliveries.filter((e=>this.selectedZoneDeliveryTypes.includes(e.zone_type_id))):this.filteredZoneDeliveries=this.zoneDeliveries,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedZoneDeliveryTypes=[],this.filteredZoneDeliveries=this.zoneDeliveries,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getZoneDeliveryTypeName(e){const t=this.zone_delivery_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){this.selectedZoneDelivery={...e},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedZoneDelivery.name||!this.selectedZoneDelivery.zone_type_id||!this.selectedZoneDelivery.price)return void alert("กรุณากรอกข้อมูลให้ครบถ้วน");const e=await ne.A.put(`http://127.0.0.1:3333/zone-deliveries/${this.selectedZoneDelivery.id}`,{name:this.selectedZoneDelivery.name,zone_type_id:this.selectedZoneDelivery.zone_type_id,price:this.selectedZoneDelivery.price});console.log("zoneDelivery updated:",e.data);const t=this.zoneDeliveries.findIndex((e=>e.id===this.selectedZoneDelivery.id));-1!==t&&(this.zoneDeliveries[t]=e.data),this.closeEditModal(),this.updatePage()}catch(e){console.error("Error saving changes:",e),alert("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedZoneDelivery={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/zone-deliveries/${this.itemToDelete}`),this.zoneDeliveries=this.zoneDeliveries.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewZoneDelivery()},resetNewZoneDelivery(){this.newZoneDelivery={name:"",zone_type_id:"",price:""}},async addzoneDelivery(){if(this.newZoneDelivery.name&&this.newZoneDelivery.zone_type_id)try{const e=await ne.A.post("http://127.0.0.1:3333/zone-deliveries",{name:this.newZoneDelivery.name,zone_type_id:this.newZoneDelivery.zone_type_id,price:this.newZoneDelivery.price});console.log("Added zoneDelivery:",e.data),this.zoneDeliveries.push(e.data),this.closeAddModal(),this.updatePage()}catch(e){console.error("Error adding zoneDelivery:",e),alert("เกิดข้อผิดพลาดในการเพิ่มข้อมูล")}else alert("กรุณากรอกข้อมูลให้ครบถ้วน")},async fetchZoneDliveryTypes(){try{const e=await ne.A.get("http://127.0.0.1:3333/zone-delivery-types");this.zone_delivery_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}}},created(){this.filteredZoneDeliveries=this.zoneDeliveries,this.sortData("id"),this.fetchZoneDeliveries(),this.fetchZoneDliveryTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchZoneDeliveries(),this.fetchZoneDliveryTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Ib=(0,B.A)(Ub,[["render",jb],["__scopeId","data-v-00db4be3"]]);var $b=Ib;const Zb={class:"flex space-x-2 items-center relative"},qb={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Jb={class:"text-m text-custom-orange font-bold"},Wb={class:"add relative inline-block"},Bb={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Kb={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Yb={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Hb={class:"flex space-x-2"},Gb={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},ex={class:"mb-4"},tx={class:"flex justify-end space-x-2"},sx={class:"sort relative inline-block",ref:"sortDropdown"},ox={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},ax={class:"list-none p-0 m-0"},lx={key:0,class:"material-symbols-outlined text-sm"},rx={key:0,class:"material-symbols-outlined text-sm"},ix={class:"flex w-[250px] relative"},nx={class:"min-w-full table-fixed border-collapse mt-4"},dx={class:"bg-custom-orange text-white"},cx={class:"px-4 py-2 align-top"},ux={class:"px-4 py-2 align-top font-bold text-custom-orange"},px={class:"px-4 py-2 align-top text-right"},gx={class:"flex justify-end space-x-2"},hx=["onClick"],mx=["onClick"],yx={key:0},kx={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},bx={class:"bg-white rounded-md shadow-lg w-1000"},xx={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},fx={class:"flex space-x-2"},_x={class:"bg-white rounded-lg shadow-lg p-6 w-96"},vx={class:"mb-4"},wx={class:"flex justify-end space-x-2"},Lx={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},Px={class:"bg-white rounded-lg shadow-md w-1/3"},Cx={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Dx={class:"flex justify-end space-x-2 p-4"},Tx={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},Mx=["disabled"],Sx={class:"flex items-center space-x-1"},Ex=["onClick"],Rx=["disabled"];function Ax(e,t,s,l,i,n){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[33]||(t[33]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[32]||(t[32]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[35]||(t[35]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[34]||(t[34]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Zb,[(0,a.Lk)("div",qb,[t[36]||(t[36]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนโปรแกรมเมนูทั้งหมด: ",-1)),(0,a.Lk)("span",Jb,(0,r.v_)(i.menu_types.length)+" รายการ",1)]),(0,a.Lk)("div",Wb,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[37]||(t[37]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มข้อมูล",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",Bb,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[39]||(t[39]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[38]||(t[38]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[41]||(t[41]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[40]||(t[40]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Kb,[(0,a.Lk)("div",Yb,[t[42]||(t[42]=(0,a.Lk)("div",{class:"flex-1 flex items-left"},[(0,a.Lk)("span",{class:"text-xl font-bold"},"เพิ่มข้อมูลใหม่")],-1)),(0,a.Lk)("div",Hb,[(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",Gb,[(0,a.Lk)("form",{onSubmit:t[8]||(t[8]=(0,o.D$)(((...e)=>n.addPromotionType&&n.addPromotionType(...e)),["prevent"]))},[(0,a.Lk)("div",ex,[t[43]||(t[43]=(0,a.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อโปรแกรมเมนู",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>i.newMenuType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[o.Jo,i.newMenuType.name]])]),(0,a.Lk)("div",tx,[(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"},"ยกเลิก"),t[44]||(t[44]=(0,a.Lk)("button",{type:"submit",class:"bg-custom-orange text-white px-2 py-2 rounded hover:bg-custom-orange-hover flex items-center space-x-30"}," บันทึก",-1))])],32)])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",sx,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[45]||(t[45]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",ox,[(0,a.Lk)("ul",ax,[(0,a.Lk)("li",{onClick:t[10]||(t[10]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[46]||(t[46]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",lx,(0,r.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[11]||(t[11]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[47]||(t[47]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",rx,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[12]||(t[12]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[48]||(t[48]=[(0,a.Lk)("span",null,"Clear Sort",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",ix,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[14]||(t[14]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[15]||(t[15]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",nx,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",dx,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredMenuType,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,a.Lk)("td",cx,(0,r.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",ux,(0,r.v_)(e.name),1),(0,a.Lk)("td",px,[(0,a.Lk)("div",gx,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,hx),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[50]||(t[50]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,mx)])])])))),128)),0===i.filteredMenuType.length?((0,a.uX)(),(0,a.CE)("tr",yx,t[51]||(t[51]=[(0,a.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",kx,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[53]||(t[53]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[17]||(t[17]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[52]||(t[52]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",bx,[(0,a.Lk)("div",xx,[t[54]||(t[54]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขโปรแกรมเมนู",-1)),(0,a.Lk)("div",fx,[(0,a.Lk)("span",{onClick:t[18]||(t[18]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,a.Lk)("div",_x,[(0,a.Lk)("div",vx,[t[55]||(t[55]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedPromotionType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[o.Jo,i.selectedPromotionType.name]])]),(0,a.Lk)("div",wx,[(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>i.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[21]||(t[21]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",Lx,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[57]||(t[57]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[22]||(t[22]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[56]||(t[56]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Px,[(0,a.Lk)("div",Cx,[t[58]||(t[58]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[23]||(t[23]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[59]||(t[59]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",Dx,[(0,a.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Tx,[(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[60]||(t[60]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Mx),(0,a.Lk)("div",Sx,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[27]||(t[27]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[28]||(t[28]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Ex)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[29]||(t[29]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[30]||(t[30]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[31]||(t[31]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[61]||(t[61]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Rx)])])}var zx={name:"PromotionTypePage",data(){return{headers:["#","ชื่อ",""],headerWidths:["10%","80%","10%"],searchQuery:"",filteredMenuType:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",menu_types:[],currentPage:1,itemsPerPage:10,selectedPromotionType:{},isEditModalOpen:!1,isAddModalOpen:!1,newMenuType:{name:""},toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.menu_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase());return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}}},methods:{async fetchMenuTypes(){try{const e=await ne.A.get("http://127.0.0.1:3333/menu-types");this.filteredMenuType=e.data,console.log("Response data:",e.data),this.menu_types=e.data,this.menu_types.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching menu_type:",e)}},search(){const e=this.menu_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase());return t}));this.currentPage=1,this.filteredMenuType=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredMenuType=this.menu_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase());return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.menu_types.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.menu_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedPromotionType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await ne.A.put(`http://127.0.0.1:3333/menu-types/${this.selectedPromotionType.id}`,{name:this.selectedPromotionType.name});const e=this.menu_types.findIndex((e=>e.id===this.selectedPromotionType.id));-1!==e&&(this.menu_types[e]={...this.selectedPromotionType},this.updatePage(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")),this.isEditModalOpen=!1}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPromotionType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/menu-types/${this.itemToDelete}`),this.menu_types=this.menu_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0,this.newMenuType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addPromotionType(){if(this.newMenuType.name.trim())try{const e=await ne.A.post("http://127.0.0.1:3333/menu-types",this.newMenuType);this.menu_types.push(e.data),this.updatePage(),this.closeAddModal(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบ!")},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredMenuType=this.menu_types,this.sortData("id"),this.fetchMenuTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchMenuTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Fx=(0,B.A)(zx,[["render",Ax]]);var Xx=Fx;const Ox={class:"flex space-x-2 items-center relative"},Qx={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Vx={class:"text-m text-custom-orange font-bold"},Nx={class:"ml-2"},jx={class:"add relative inline-block"},Ux={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Ix={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},$x={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Zx={class:"p-6 space-y-4"},qx={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Jx={class:"sort relative inline-block",ref:"sortDropdown"},Wx={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Bx={class:"list-none p-0 m-0"},Kx={key:0,class:"material-symbols-outlined text-sm"},Yx={key:0,class:"material-symbols-outlined text-sm"},Hx={class:"filter relative inline-block",ref:"filterDropdown"},Gx={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},ef={class:"p-4 w-[500px] list-none"},tf={class:"grid grid-cols-3 gap-4"},sf=["value"],of={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},af={class:"flex space-x-2"},lf={class:"flex w-[250px] relative"},rf={class:"min-w-full table-fixed border-collapse mt-4"},nf={class:"bg-custom-orange text-white"},df={class:"px-4 py-2 align-top"},cf={class:"px-4 py-2 align-top font-bold text-custom-orange"},uf={class:"px-4 py-2 align-top"},pf={class:"px-4 py-2 align-top text-right"},gf={class:"flex justify-end space-x-2"},hf=["onClick"],mf=["onClick"],yf={key:0},kf={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},bf={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},xf={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},ff={class:"flex space-x-2"},_f={class:"p-6 space-y-4"},vf={class:"mb-4"},wf={class:"mb-4"},Lf={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Pf={class:"flex space-x-2"},Cf={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},Df={class:"bg-white rounded-lg shadow-md w-1/3"},Tf={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Mf={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Sf={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},Ef=["disabled"],Rf={class:"flex items-center space-x-1"},Af=["onClick"],zf=["disabled"];function Ff(e,t,s,l,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[39]||(t[39]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[38]||(t[38]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[41]||(t[41]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[40]||(t[40]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Ox,[(0,a.Lk)("div",Qx,[t[42]||(t[42]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภทเมนูทั้งหมด: ",-1)),(0,a.Lk)("span",Vx,(0,r.v_)(i.meal_types.length)+" รายการ",1)]),i.selectedMenuType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[43]||(t[43]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",Nx,"รีเซ็ตตัวกรอง ("+(0,r.v_)(i.selectedMenuType.length)+")",1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",jx,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[44]||(t[44]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มประเภทเมนู",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",Ux,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[46]||(t[46]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[45]||(t[45]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Ix,[(0,a.Lk)("div",$x,[t[47]||(t[47]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มประเภทเมนูเข้า",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",Zx,[(0,a.Lk)("div",null,[t[48]||(t[48]=(0,a.Lk)("label",{for:"meal_typeName",class:"block font-bold text-gray-700"},"ชื่อประเภทเมนู",-1)),(0,a.bo)((0,a.Lk)("input",{id:"meal_typeName","onUpdate:modelValue":t[6]||(t[6]=e=>i.newMealType.name=e),type:"text",placeholder:"กรอกชื่อประเภทเมนู",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMealType.name]])]),(0,a.Lk)("div",null,[t[49]||(t[49]=(0,a.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"ประเภทโปรแกรมเมนู",-1)),(0,a.bF)(d,{modelValue:i.newMealType.menu_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>i.newMealType.menu_type_id=e),options:i.menu_types,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทโปรแกรมเมนู",label:"name","track-by":"id",class:"z-50"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",qx,[(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>n.addMealType&&n.addMealType(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Jx,[(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[50]||(t[50]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",Wx,[(0,a.Lk)("ul",Bx,[(0,a.Lk)("li",{onClick:t[11]||(t[11]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[51]||(t[51]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",Kx,(0,r.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[12]||(t[12]=e=>n.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[52]||(t[52]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",Yx,(0,r.v_)(1===i.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[13]||(t[13]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[53]||(t[53]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",Hx,[(0,a.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",Gx,[(0,a.Lk)("div",ef,[t[55]||(t[55]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยประเภทโปรแกรมเมนู",-1)),(0,a.Lk)("div",tf,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.menu_types,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>i.selectedMenuType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,sf),[[o.lH,i.selectedMenuType]]),(0,a.Lk)("span",null,(0,r.v_)(e.name),1)])))),128))])]),(0,a.Lk)("div",of,[(0,a.Lk)("li",{onClick:t[16]||(t[16]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[56]||(t[56]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",af,[(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 bg-gray-400 hover:bg-gray-600 text-white rounded-md"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",lf,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[20]||(t[20]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[21]||(t[21]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",rf,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",nf,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredMealType,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,a.Lk)("td",df,(0,r.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",cf,(0,r.v_)(e.name),1),(0,a.Lk)("td",uf,(0,r.v_)(n.getMenuTypeName(e.menu_type_id)),1),(0,a.Lk)("td",pf,[(0,a.Lk)("div",gf,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,hf),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,mf)])])])))),128)),0===i.filteredMealType.length?((0,a.uX)(),(0,a.CE)("tr",yf,t[59]||(t[59]=[(0,a.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",kf,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[61]||(t[61]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[23]||(t[23]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[60]||(t[60]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",bf,[(0,a.Lk)("div",xf,[t[62]||(t[62]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขประเภทเมนู",-1)),(0,a.Lk)("div",ff,[(0,a.Lk)("span",{onClick:t[24]||(t[24]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",_f,[(0,a.Lk)("div",vf,[t[63]||(t[63]=(0,a.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>i.selectedMealType.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMealType.name]])]),(0,a.Lk)("div",wf,[t[64]||(t[64]=(0,a.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"ประเภทโปรแกรมเมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedMealType.menu_type_id,"onUpdate:modelValue":t[26]||(t[26]=e=>i.selectedMealType.menu_type_id=e),options:i.menu_types,"track-by":"id",label:"name",placeholder:"เลือกประเภทโปรแกรมเมนู"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",Lf,[(0,a.Lk)("div",Pf,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>i.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded hover:bg-custom-orange-hover flex items-center space-x-30"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",Cf,[(0,a.Lk)("div",Df,[(0,a.Lk)("div",Tf,[t[65]||(t[65]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[29]||(t[29]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[66]||(t[66]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",Mf,[(0,a.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Sf,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[67]||(t[67]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Ef),(0,a.Lk)("div",Rf,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Af)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[37]||(t[37]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,zf)])])}var Xf={name:"meal_typePage",data(){return{headers:["#","ชื่อ","ประเภทโปรแกรมเมนู",""],headerWidths:["10%","50%","35%","5%"],searchQuery:"",filteredMealType:[],selectedMenuType:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",meal_types:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newMealType:{name:"",menu_type_id:""},selectedMealType:{id:"",name:"",menu_type_id:""},menu_types:[],toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isDeleteModalOpen:!1,itemToDelete:null}},components:{Multiselect:rr.Ay},computed:{totalPages(){return Math.ceil(this.meal_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMenuType.length||this.selectedMenuType.includes(e.menu_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},...(0,ir.L8)(["menu_types"])},methods:{...(0,ir.i0)(["fetchMenuTypes","fetchMealTypes"]),async fetchMealTypes(){try{const e=await ne.A.get("http://127.0.0.1:3333/meal-types");this.filteredMealType=e.data,console.log("Response data:",e.data),this.meal_types=e.data,this.meal_types.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching meal_type:",e)}},search(){const e=this.meal_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMenuType.length||this.selectedMenuType.includes(e.menu_type_id);return t&&s}));this.currentPage=1,this.filteredMealType=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredMealType=this.meal_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMenuType.length||this.selectedMenuType.includes(e.menu_type_id);return t&&s})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.meal_types.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.meal_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedMenuType.length>0?this.filteredMealType=this.meal_types.filter((e=>this.selectedMenuType.includes(e.menu_type_id))):this.filteredMealType=this.meal_types,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedMenuType=[],this.filteredMealType=this.meal_types,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getMenuTypeName(e){const t=this.menu_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){this.selectedMealType={...e,menu_type_id:this.menu_types.find((t=>t.id===e.menu_type_id))},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedMealType.name||!this.selectedMealType.menu_type_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=await ne.A.put(`http://127.0.0.1:3333/meal-types/${this.selectedMealType.id}`,{name:this.selectedMealType.name,menu_type_id:this.selectedMealType.menu_type_id.id}),t=this.meal_types.findIndex((e=>e.id===this.selectedMealType.id));-1!==t&&(this.meal_types[t]=e.data),this.isEditModalOpen=!1,this.updatePage(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedMealType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/meal-types/${this.itemToDelete}`),this.meal_types=this.meal_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewMealType()},resetNewMealType(){this.newMealType={name:"",menu_type_id:""}},async addMealType(){if(this.newMealType.name&&this.newMealType.menu_type_id)try{const e=await ne.A.post("http://127.0.0.1:3333/meal-types",{name:this.newMealType.name,menu_type_id:this.newMealType.menu_type_id.id});this.meal_types.push(e.data),this.closeAddModal(),this.updatePage(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบ!")},async fetchMenuTypes(){try{const e=await ne.A.get("http://127.0.0.1:3333/menu-types");this.menu_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredMealType=this.meal_types,this.sortData("id"),this.fetchMealTypes(),this.fetchMenuTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchMealTypes(),this.fetchMenuTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Of=(0,B.A)(Xf,[["render",Ff],["__scopeId","data-v-724b7c5a"]]);var Qf=Of;const Vf={class:"flex space-x-2 items-center relative"},Nf={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},jf={class:"text-m text-custom-orange font-bold"},Uf={class:"ml-2"},If={class:"add relative inline-block"},$f={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Zf={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},qf={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Jf={class:"p-6 space-y-4"},Wf={class:"flex space-x-4"},Bf={class:"flex-1"},Kf={class:"flex-1"},Yf={class:"flex-1"},Hf={class:"flex-1"},Gf={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},e_={class:"flex space-x-2"},t_={class:"sort relative inline-block",ref:"sortDropdown"},s_={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-64 z-50 border border-gray-300"},o_={class:"list-none p-0 m-0"},a_={key:0,class:"material-symbols-outlined text-sm"},l_={key:0,class:"material-symbols-outlined text-sm"},r_={key:0,class:"material-symbols-outlined text-sm"},i_={class:"filter relative inline-block",ref:"filterDropdown"},n_={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},d_={class:"p-4 w-[500px] h-auto max-h-[400px] overflow-y-auto flex-grow list-none"},c_={class:"flex justify-between items-center"},u_={class:"font-semibold mb-2 text-custom-orange"},p_=["onClick"],g_={class:"grid grid-cols-2 gap-4"},h_=["value"],m_={class:"break-words"},y_={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},k_={class:"flex space-x-2"},b_={class:"flex w-[250px] relative"},x_={class:"min-w-full table-fixed border-collapse mt-4"},f_={class:"bg-custom-orange text-white"},__={class:"px-4 py-2 align-top"},v_={class:"px-4 py-2 align-top font-bold text-custom-orange"},w_={class:"px-4 py-2 align-top font-bold"},L_={class:"px-4 py-2 align-top"},P_={key:0},C_={key:1},D_={class:"px-4 py-2 align-top"},T_={class:"px-4 py-2 align-top"},M_={class:"px-4 py-2 align-top"},S_={class:"px-4 py-2 align-top"},E_={class:"px-4 py-2 align-top text-right"},R_={class:"flex justify-end space-x-2"},A_=["onClick"],z_=["onClick"],F_={key:0},X_={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},O_={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Q_={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},V_={class:"flex space-x-2"},N_={class:"p-6 space-y-4"},j_={class:"mb-4"},U_={class:"mb-4"},I_={class:"mb-4"},$_={class:"mb-4"},Z_={class:"flex space-x-4"},q_={class:"flex-1"},J_={class:"flex-1"},W_={class:"flex-1"},B_={class:"flex-1"},K_={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Y_={class:"flex space-x-2"},H_={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},G_={class:"bg-white rounded-lg shadow-md w-1/3"},ev={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},tv={class:"flex justify-end space-x-2 p-4 border-t"},sv={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},ov=["disabled"],av={class:"flex items-center space-x-1"},lv=["onClick"],rv=["disabled"];function iv(e,t,s,l,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[54]||(t[54]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[56]||(t[56]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[55]||(t[55]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Vf,[(0,a.Lk)("div",Nf,[t[57]||(t[57]=(0,a.Lk)("span",{class:"text-m text-gray-700"},"จำนวนเมนูทั้งหมด: ",-1)),(0,a.Lk)("span",jf,(0,r.v_)(i.menus.length)+" รายการ",1)]),i.selectedMealType.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[58]||(t[58]=(0,a.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,a.Lk)("span",Uf,"รีเซ็ตตัวกรอง ("+(0,r.v_)(i.selectedMealType.length)+")",1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",If,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[59]||(t[59]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มเมนู",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",$f,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[61]||(t[61]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[60]||(t[60]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",Zf,[(0,a.Lk)("div",qf,[t[62]||(t[62]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มเมนู",-1)),(0,a.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",Jf,[(0,a.Lk)("div",null,[t[63]||(t[63]=(0,a.Lk)("label",{for:"menuCode",class:"block font-bold text-gray-700"},"รหัสเมนู",-1)),(0,a.bo)((0,a.Lk)("input",{id:"menuCode","onUpdate:modelValue":t[6]||(t[6]=e=>i.newMenu.menu_code=e),type:"text",placeholder:"กรอกรหัสเมนู",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.menu_code]])]),(0,a.Lk)("div",null,[t[64]||(t[64]=(0,a.Lk)("label",{for:"nameEnglish",class:"block font-bold text-gray-700"},"ชื่อเมนูภาษาอังกฤษ",-1)),(0,a.bo)((0,a.Lk)("input",{id:"nameEnglish","onUpdate:modelValue":t[7]||(t[7]=e=>i.newMenu.name_english=e),type:"text",placeholder:"กรอกชื่อเมนูภาษาอังกฤษ",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.name_english]])]),(0,a.Lk)("div",null,[t[65]||(t[65]=(0,a.Lk)("label",{for:"nameThai",class:"block font-bold text-gray-700"},"ชื่อเมนูภาษาไทย",-1)),(0,a.bo)((0,a.Lk)("input",{id:"nameThai","onUpdate:modelValue":t[8]||(t[8]=e=>i.newMenu.name_thai=e),type:"text",placeholder:"กรอกชื่อเมนูภาษาไทย",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.name_thai]])]),(0,a.Lk)("div",null,[t[66]||(t[66]=(0,a.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"ประเภทเมนู",-1)),(0,a.bF)(d,{modelValue:i.newMenu.meal_type_id,"onUpdate:modelValue":t[9]||(t[9]=e=>i.newMenu.meal_type_id=e),options:i.meal_types.map((e=>({id:e.id,name:`${e.name} (${e.menuType?e.menuType.name:"ไม่มีข้อมูล"})`}))),multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทเมนู",label:"name","track-by":"id",class:"z-50"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Wf,[(0,a.Lk)("div",Bf,[t[67]||(t[67]=(0,a.Lk)("label",{for:"cal",class:"block font-bold text-gray-700"},"แคลอรี่",-1)),(0,a.bo)((0,a.Lk)("input",{id:"cal","onUpdate:modelValue":t[10]||(t[10]=e=>i.newMenu.cal=e),type:"number",placeholder:"กรอกแคลอรี่",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.cal]])]),(0,a.Lk)("div",Kf,[t[68]||(t[68]=(0,a.Lk)("label",{for:"protein",class:"block font-bold text-gray-700"},"โปรตีน",-1)),(0,a.bo)((0,a.Lk)("input",{id:"protein","onUpdate:modelValue":t[11]||(t[11]=e=>i.newMenu.protein=e),type:"number",placeholder:"กรอกโปรตีน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.protein]])]),(0,a.Lk)("div",Yf,[t[69]||(t[69]=(0,a.Lk)("label",{for:"fat",class:"block font-bold text-gray-700"},"ไขมัน",-1)),(0,a.bo)((0,a.Lk)("input",{id:"fat","onUpdate:modelValue":t[12]||(t[12]=e=>i.newMenu.fat=e),type:"number",placeholder:"กรอกไขมัน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.fat]])]),(0,a.Lk)("div",Hf,[t[70]||(t[70]=(0,a.Lk)("label",{for:"carb",class:"block font-bold text-gray-700"},"คาร์โบไฮเดรต",-1)),(0,a.bo)((0,a.Lk)("input",{id:"carb","onUpdate:modelValue":t[13]||(t[13]=e=>i.newMenu.carb=e),type:"number",placeholder:"กรอกคาร์โบไฮเดรต",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.newMenu.carb]])])])]),(0,a.Lk)("div",Gf,[(0,a.Lk)("li",{onClick:t[14]||(t[14]=(...e)=>n.resetNewMenu&&n.resetNewMenu(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[71]||(t[71]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",e_,[(0,a.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>n.addMenu&&n.addMenu(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",t_,[(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.toggleSortDropdown&&n.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isSortDropdownOpen?((0,a.uX)(),(0,a.CE)("div",s_,[(0,a.Lk)("ul",o_,[(0,a.Lk)("li",{onClick:t[18]||(t[18]=e=>n.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[73]||(t[73]=(0,a.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",a_,(0,r.v_)(1===i.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[19]||(t[19]=e=>n.sortData("name_english")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[74]||(t[74]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อภาษาอังกฤษ",-1)),"name_english"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",l_,(0,r.v_)(1===i.sortDirection["name_english"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[20]||(t[20]=e=>n.sortData("name_thai")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[75]||(t[75]=(0,a.Lk)("span",null,"จัดเรียงตามชื่อภาษาไทย",-1)),"name_thai"===i.sortColumn?((0,a.uX)(),(0,a.CE)("span",r_,(0,r.v_)(1===i.sortDirection["name_thai"]?"arrow_upward":"arrow_downward"),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("li",{onClick:t[21]||(t[21]=(...e)=>n.clearSort&&n.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[76]||(t[76]=[(0,a.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",i_,[(0,a.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[77]||(t[77]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1),(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),i.isFilterDropdownOpen?((0,a.uX)(),(0,a.CE)("div",n_,[(0,a.Lk)("div",d_,[t[78]||(t[78]=(0,a.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยประเภทเมนู",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.groupedMealTypes,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"mb-4"},[(0,a.Lk)("div",c_,[(0,a.Lk)("h4",u_,(0,r.v_)(s),1),(0,a.Lk)("button",{onClick:e=>n.toggleSelectMenuTypeAll(s),class:"text-custom-orange hover:text-custom-orange-hover text-sm"},(0,r.v_)(i.selectAllMenuTypeState[s]?"ยกเลิกเลือกทั้งหมด":"เลือกทั้งหมด"),9,p_)]),(0,a.Lk)("div",g_,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,(e=>((0,a.uX)(),(0,a.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=e=>i.selectedMealType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent flex-shrink-0"},null,8,h_),[[o.lH,i.selectedMealType]]),(0,a.Lk)("span",m_,(0,r.v_)(e.name),1)])))),128))])])))),128))]),(0,a.Lk)("div",y_,[(0,a.Lk)("li",{onClick:t[24]||(t[24]=(...e)=>n.clearFilter&&n.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[79]||(t[79]=[(0,a.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,a.Lk)("div",k_,[(0,a.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>n.toggleFiltterDropdown&&n.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>n.applyFilter&&n.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,a.Q3)("",!0)],512),(0,a.Lk)("div",b_,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[27]||(t[27]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[28]||(t[28]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[29]||(t[29]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.Lk)("table",x_,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",f_,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredMenu,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,a.Lk)("td",__,(0,r.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",v_,(0,r.v_)(e.name_english),1),(0,a.Lk)("td",w_,(0,r.v_)(e.name_thai),1),(0,a.Lk)("td",L_,[(0,a.eW)((0,r.v_)(n.getMealTypeName(e.meal_type_id))+" ",1),e.mealType&&e.mealType.menuType?((0,a.uX)(),(0,a.CE)("span",P_," ("+(0,r.v_)(e.mealType.menuType.name)+") ",1)):((0,a.uX)(),(0,a.CE)("span",C_," (ไม่มีข้อมูล) "))]),(0,a.Lk)("td",D_,(0,r.v_)(e.cal),1),(0,a.Lk)("td",T_,(0,r.v_)(e.protein),1),(0,a.Lk)("td",M_,(0,r.v_)(e.fat),1),(0,a.Lk)("td",S_,(0,r.v_)(e.carb),1),(0,a.Lk)("td",E_,[(0,a.Lk)("div",R_,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,A_),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,z_)])])])))),128)),0===i.filteredMenu.length?((0,a.uX)(),(0,a.CE)("tr",F_,t[82]||(t[82]=[(0,a.Lk)("td",{colspan:"10",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,a.Q3)("",!0)]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",X_,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[84]||(t[84]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[31]||(t[31]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[83]||(t[83]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",O_,[(0,a.Lk)("div",Q_,[t[85]||(t[85]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไขเมนู",-1)),(0,a.Lk)("div",V_,[(0,a.Lk)("span",{onClick:t[32]||(t[32]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",N_,[(0,a.Lk)("div",j_,[t[86]||(t[86]=(0,a.Lk)("label",{for:"editMenuCode",class:"block text-gray-700 font-bold"},"รหัสเมนู",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>i.selectedMenu.menu_code=e),id:"editMenuCode",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.menu_code]])]),(0,a.Lk)("div",U_,[t[87]||(t[87]=(0,a.Lk)("label",{for:"editNameEnglish",class:"block text-gray-700 font-bold"},"ชื่อเมนูภาษาอังกฤษ",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[34]||(t[34]=e=>i.selectedMenu.name_english=e),id:"editNameEnglish",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.name_english]])]),(0,a.Lk)("div",I_,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editNameThai",class:"block text-gray-700 font-bold"},"ชื่อเมนูภาษาไทย",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[35]||(t[35]=e=>i.selectedMenu.name_thai=e),id:"editNameThai",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.name_thai]])]),(0,a.Lk)("div",$_,[t[89]||(t[89]=(0,a.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"ประเภทเมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedMenu.meal_type_id,"onUpdate:modelValue":t[36]||(t[36]=e=>i.selectedMenu.meal_type_id=e),options:i.meal_types.map((e=>({id:e.id,name:`${e.name} (${e.menuType?e.menuType.name:"ไม่มีข้อมูล"})`}))),"track-by":"id",label:"name",placeholder:"เลือกประเภทเมนู",multiple:!1,searchable:!0,"close-on-select":!0,class:"z-50"},null,8,["modelValue","options"])]),(0,a.Lk)("div",Z_,[(0,a.Lk)("div",q_,[t[90]||(t[90]=(0,a.Lk)("label",{for:"editCal",class:"block font-bold text-gray-700"},"แคลอรี่",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editCal","onUpdate:modelValue":t[37]||(t[37]=e=>i.selectedMenu.cal=e),type:"number",placeholder:"กรอกแคลอรี่",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.cal]])]),(0,a.Lk)("div",J_,[t[91]||(t[91]=(0,a.Lk)("label",{for:"editProtein",class:"block font-bold text-gray-700"},"โปรตีน",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editProtein","onUpdate:modelValue":t[38]||(t[38]=e=>i.selectedMenu.protein=e),type:"number",placeholder:"กรอกโปรตีน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.protein]])]),(0,a.Lk)("div",W_,[t[92]||(t[92]=(0,a.Lk)("label",{for:"editFat",class:"block font-bold text-gray-700"},"ไขมัน",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editFat","onUpdate:modelValue":t[39]||(t[39]=e=>i.selectedMenu.fat=e),type:"number",placeholder:"กรอกไขมัน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.fat]])]),(0,a.Lk)("div",B_,[t[93]||(t[93]=(0,a.Lk)("label",{for:"editCarb",class:"block font-bold text-gray-700"},"คาร์โบไฮเดรต",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editCarb","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedMenu.carb=e),type:"number",placeholder:"กรอกคาร์โบไฮเดรต",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedMenu.carb]])])])]),(0,a.Lk)("div",K_,[(0,a.Lk)("div",Y_,[(0,a.Lk)("button",{onClick:t[41]||(t[41]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[42]||(t[42]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",H_,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[95]||(t[95]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[43]||(t[43]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[94]||(t[94]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",G_,[(0,a.Lk)("div",ev,[t[96]||(t[96]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[44]||(t[44]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[97]||(t[97]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",tv,[(0,a.Lk)("button",{onClick:t[45]||(t[45]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[46]||(t[46]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",sv,[(0,a.Lk)("button",{onClick:t[47]||(t[47]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[98]||(t[98]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,ov),(0,a.Lk)("div",av,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[48]||(t[48]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[49]||(t[49]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,lv)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[50]||(t[50]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[51]||(t[51]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[52]||(t[52]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[99]||(t[99]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,rv)])])}var nv={name:"menuPage",data(){return{headers:["#","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย","ประเภทโปรแกรมเมนู","แคลอรี่","โปรตีน","ไขมัน","คาร์โบไฮเดต",""],headerWidths:["5%","25%","20%","15%","5%","5%","5%","10%","10%"],searchQuery:"",filteredMenu:[],selectedMealType:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",menus:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newMenu:{menu_code:"",name_english:"",name_thai:"",meal_type_id:"",cal:0,protein:0,fat:0,carb:0},selectedMenu:{id:"",menu_code:"",name_english:"",name_thai:"",meal_type_id:"",cal:0,protein:0,fat:0,carb:0},meal_types:[],toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isDeleteModalOpen:!1,itemToDelete:null,selectAllMenuTypeState:{}}},components:{Multiselect:rr.Ay},computed:{totalPages(){return Math.ceil(this.menus.filter((e=>{const t=e.name_english.toLowerCase().includes(this.searchQuery.toLowerCase())||e.name_thai.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMealType.length||this.selectedMealType.includes(e.meal_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,o=this.currentPage+t;return s<1&&(s=1,o=Math.min(e,this.totalPages)),o>this.totalPages&&(o=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:o,range:Array.from({length:o-s+1},((e,t)=>s+t))}},groupedMealTypes(){return this.meal_types.reduce(((e,t)=>{const s=t.menuType?t.menuType.name:"ไม่มีข้อมูล";return e[s]||(e[s]=[]),e[s].push(t),e}),{})},...(0,ir.L8)(["menus"])},methods:{...(0,ir.i0)(["fetchMealTypes","fetchMenus"]),async fetchMenus(){try{const e=await ne.A.get("http://127.0.0.1:3333/menus");this.filteredMenu=e.data,console.log("Response data:",e.data),this.menus=e.data,this.menus.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching menu:",e)}},search(){const e=this.menus.filter((e=>{const t=e.name_english.toLowerCase().includes(this.searchQuery.toLowerCase())||e.name_thai.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMealType.length||this.selectedMealType.includes(e.meal_type_id);return t&&s}));this.currentPage=1,this.filteredMenu=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredMenu=this.menus.filter((e=>{const t=e.name_english.toLowerCase().includes(this.searchQuery.toLowerCase())||e.name_thai.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMealType.length||this.selectedMealType.includes(e.meal_type_id);return t&&s})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.menus.sort(((t,s)=>{const o=t[e],a=s[e];return o<a?-this.sortDirection[e]:o>a?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.menus.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.currentPage=1,this.selectedMealType.length>0?this.filteredMenu=this.menus.filter((e=>this.selectedMealType.includes(e.meal_type_id))):this.filteredMenu=this.menus,this.isFilterDropdownOpen=!1,this.currentPage=1,this.updatePage()},toggleSelectMenuTypeAll(e){if(this.selectAllMenuTypeState[e])this.selectedMealType=this.selectedMealType.filter((t=>!this.groupedMealTypes[e].some((e=>e.id===t))));else{const t=this.groupedMealTypes[e].map((e=>e.id));this.selectedMealType=[...new Set([...this.selectedMealType,...t])]}this.selectAllMenuTypeState[e]=!this.selectAllMenuTypeState[e]},clearFilter(){this.selectedMealType=[],this.filteredMenu=this.menus,Object.keys(this.selectAllMenuTypeState).forEach((e=>{this.selectAllMenuTypeState[e]=!1})),this.applyFilter(),this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){const t=this.meal_types.find((t=>t.id===e.meal_type_id));this.selectedMenu={...e,meal_type_id:t?{id:t.id,name:`${t.name} (${t.menuType?t.menuType.name:"ไม่มีข้อมูล"})`}:null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedMenu.name_english||!this.selectedMenu.name_thai||!this.selectedMenu.meal_type_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=await ne.A.put(`http://127.0.0.1:3333/menus/${this.selectedMenu.id}`,{menu_code:this.selectedMenu.menu_code,name_english:this.selectedMenu.name_english,name_thai:this.selectedMenu.name_thai,meal_type_id:this.selectedMenu.meal_type_id.id,cal:this.selectedMenu.cal,protein:this.selectedMenu.protein,fat:this.selectedMenu.fat,carb:this.selectedMenu.carb}),t=this.menus.findIndex((e=>e.id===this.selectedMenu.id));-1!==t&&(this.menus[t]={...e.data,mealType:this.meal_types.find((t=>t.id===e.data.meal_type_id))||{}}),this.isEditModalOpen=!1,this.updatePage(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/menus/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewMenu()},resetNewMenu(){this.newMenu={menu_code:"",name_english:"",name_thai:"",meal_type_id:"",cal:0,protein:0,fat:0,carb:0}},async addMenu(){if(this.newMenu.name_english&&this.newMenu.name_thai&&this.newMenu.meal_type_id)try{const e=await ne.A.post("http://127.0.0.1:3333/menus",{menu_code:this.newMenu.menu_code,name_english:this.newMenu.name_english,name_thai:this.newMenu.name_thai,meal_type_id:this.newMenu.meal_type_id.id,cal:this.newMenu.cal,protein:this.newMenu.protein,fat:this.newMenu.fat,carb:this.newMenu.carb});e.data&&e.data.mealType&&e.data.mealType.menuType&&this.menus.push(e.data),this.closeAddModal(),this.updatePage(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบ!")},async fetchMealTypes(){try{const e=await ne.A.get("http://127.0.0.1:3333/meal-types");this.meal_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:" "},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredMenu=this.menus,this.sortData("id"),this.fetchMenus(),this.fetchMealTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchMenus(),this.fetchMealTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const dv=(0,B.A)(nv,[["render",iv]]);var cv=dv;const uv={class:"flex justify-end items-center space-x-2 relative"},pv={class:"flex items-center space-x-1 mr-auto"},gv={class:"text-2xl font-bold mb-2 ml-auto"},hv={class:"flex items-center space-x-4"},mv={class:"add relative inline-block"},yv={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},kv={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},bv={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},xv={class:"p-6 space-y-4 overflow-y-auto flex-grow"},fv={class:"flex items-center space-x-4"},_v={class:"text-xl font-bold text-gray-700"},vv={class:"absolute top-2 right-4"},wv=["onClick"],Lv={class:"mb-4 flex justify-center"},Pv={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Cv={class:"flex space-x-2"},Dv={class:"flex w-[250px] relative"},Tv={class:"flex items-center space-x-3 py-2"},Mv={key:0,class:"mb-8"},Sv={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},Ev={class:"bg-custom-orange text-white"},Rv={class:"px-4 py-2 align-top pb-5"},Av=["rowspan"],zv={class:"flex items-center"},Fv={class:"px-4 py-2 align-top pb-5"},Xv={class:"px-4 py-2 align-top pb-5"},Ov={class:"px-4 py-2 align-top pb-5"},Qv={class:"px-4 py-2 align-top text-right"},Vv={class:"flex justify-end space-x-2"},Nv=["onClick"],jv=["onClick"],Uv={key:0},Iv={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},$v=["disabled"],Zv={class:"flex items-center space-x-1"},qv=["onClick"],Jv=["disabled"],Wv={class:"flex items-center space-x-3 py-2"},Bv={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},Kv={class:"bg-custom-orange text-white"},Yv={class:"px-4 py-2 align-top pb-5"},Hv={class:"px-4 py-2 align-top pb-5"},Gv={class:"px-4 py-2 align-top pb-5"},ew={class:"px-4 py-2 align-top pb-5"},tw={class:"px-4 py-2 align-top text-right"},sw={class:"flex justify-end space-x-2"},ow=["onClick"],aw=["onClick"],lw={key:0},rw={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},iw=["disabled"],nw={class:"flex items-center space-x-1"},dw=["onClick"],cw=["disabled"],uw={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},pw={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},gw={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},hw={class:"flex space-x-2"},mw={class:"p-6 space-y-4"},yw={class:"flex items-center space-x-4"},kw={class:"mb-4"},bw={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},xw={class:"flex space-x-2"},fw={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},_w={class:"bg-white rounded-lg shadow-md w-1/3"},vw={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},ww={class:"flex justify-end space-x-2 p-4 border-t"};function Lw(e,t,s,l,i,n){const d=(0,a.g2)("multiselect");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showSuccessToast,"opacity-0":!i.showSuccessToast}])},[t[50]||(t[50]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastSuccessMessage),1),(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>i.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":i.showFailToast,"opacity-0":!i.showFailToast}])},[t[52]||(t[52]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastFailMessage),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>i.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",uv,[(0,a.Lk)("div",pv,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>i.viewMode="week"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===i.viewMode}])},t[53]||(t[53]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>i.viewMode="day"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===i.viewMode}])},t[54]||(t[54]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,a.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,a.Lk)("h1",gv,(0,r.v_)("week"===i.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,a.Lk)("div",hv,[(0,a.Lk)("div",null,[t[56]||(t[56]=(0,a.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>n.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[o.Jo,n.formattedStartDate]])]),i.isDateConfirmed||i.startDate===i.initialStartDate?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>n.updateStartDate&&n.updateStartDate(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"}," ยืนยัน "))]),(0,a.Lk)("div",mv,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.openAddModal&&n.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,a.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),i.isAddModalOpen?((0,a.uX)(),(0,a.CE)("div",yv,[(0,a.Lk)("div",kv,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[59]||(t[59]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[7]||(t[7]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",bv,[t[60]||(t[60]=(0,a.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,a.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,a.Lk)("div",xv,[(0,a.Lk)("div",fv,[t[61]||(t[61]=(0,a.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[o.Jo,i.day_of_week]])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.formRows,((e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"space-y-4 relative"},[(0,a.Lk)("div",_v," ประเภทอาหาร "+(0,r.v_)(s+1),1),(0,a.Lk)("div",null,[t[62]||(t[62]=(0,a.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:n.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,a.Lk)("div",null,[t[63]||(t[63]=(0,a.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,a.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:n.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":n.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,a.Lk)("div",vv,[(0,a.Lk)("button",{type:"button",onClick:e=>n.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,a.Lk)("span",null,"× ลบเมนู",-1)]),8,wv)])])))),128)),(0,a.Lk)("div",Lv,[(0,a.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>n.addRow&&n.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,a.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,a.Lk)("div",Pv,[(0,a.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>n.clearForm&&n.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,a.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,a.Lk)("div",Cv,[(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>n.closeAddModal&&n.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"},"ยกเลิก"),(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.addMenus&&n.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"},"บันทึก")])])])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Dv,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>i.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,o.jR)(((...e)=>n.search&&n.search(...e)),["enter"]))},null,544),[[o.Jo,i.searchQuery]]),i.searchQuery?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>n.clearSearch&&n.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.search&&n.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",Tv,[(0,a.Lk)("button",{onClick:t[18]||(t[18]=e=>n.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),n.weekOptions.length>0?((0,a.uX)(),(0,a.Wv)(d,{key:0,modelValue:i.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>i.selectedWeek=e),options:n.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t[20]||(t[20]=e=>n.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),i.selectedWeek?((0,a.uX)(),(0,a.CE)("div",Mv,[(0,a.Lk)("table",Sv,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Ev,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headers,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenus,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",Rv,(0,r.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),0===s||e.day_of_week!==n.paginatedMenus[s-1].day_of_week?((0,a.uX)(),(0,a.CE)("td",{key:0,rowspan:n.getRowSpan(n.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,a.Lk)("div",null,[t[70]||(t[70]=(0,a.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,a.eW)((0,r.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",zv,[t[69]||(t[69]=(0,a.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,a.eW)(" "+(0,r.v_)(n.formattedDate(e.date_to_show)),1)])])],8,Av)):(0,a.Q3)("",!0),(0,a.Lk)("td",Fv,(0,r.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",Xv,(0,r.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",Ov,(0,r.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",Qv,[(0,a.Lk)("div",Vv,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,Nv),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,jv)])])])))),128)),0===n.paginatedMenus.length?((0,a.uX)(),(0,a.CE)("tr",Uv,t[74]||(t[74]=[(0,a.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูล",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Iv,[(0,a.Lk)("button",{onClick:t[21]||(t[21]=e=>n.goToPage(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,$v),(0,a.Lk)("div",Zv,[n.totalPagesArray.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>n.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArray.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>n.goToPage(n.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArray.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,qv)))),128)),n.totalPagesArray.end<n.totalPages-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>n.goToPage(n.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArray.end<n.totalPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>n.goToPage(n.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[26]||(t[26]=e=>n.goToPage(i.currentPage+1)),disabled:i.currentPage===n.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Jv)])])):(0,a.Q3)("",!0)],512),[[o.aG,"week"===i.viewMode]]),(0,a.bo)((0,a.Lk)("div",null,[(0,a.Lk)("div",Wv,[(0,a.Lk)("button",{onClick:t[27]||(t[27]=e=>n.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,a.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>n.setToday&&n.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,a.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>n.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,a.bo)((0,a.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>n.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>n.onSelectDateChange&&n.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[o.Jo,n.formattedSelectedDate]])]),(0,a.Lk)("table",Bv,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",Kv,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.headersByDay,((e,t)=>((0,a.uX)(),(0,a.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:i.headerWidthsByDay[t]})},(0,r.v_)(e),5)))),128))])]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.paginatedMenusByDay,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,a.Lk)("td",Yv,(0,r.v_)((i.currentPage-1)*i.itemsPerPage+s+1),1),(0,a.Lk)("td",Hv,(0,r.v_)(n.getMealTypeName(n.getMealTypeID(e.menu_id))),1),(0,a.Lk)("td",Gv,(0,r.v_)(n.getMenuEnglishName(e.menu_id)),1),(0,a.Lk)("td",ew,(0,r.v_)(n.getMenuThaiName(e.menu_id)),1),(0,a.Lk)("td",tw,[(0,a.Lk)("div",sw,[(0,a.Lk)("button",{onClick:t=>n.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,a.Lk)("span",null,"แก้ไข",-1)]),8,ow),(0,a.Lk)("button",{onClick:t=>n.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,aw)])])])))),128)),0===n.paginatedMenusByDay.length?((0,a.uX)(),(0,a.CE)("tr",lw,t[82]||(t[82]=[(0,a.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูล",-1)]))):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",rw,[(0,a.Lk)("button",{onClick:t[32]||(t[32]=e=>n.goToPageByDay(i.currentPage-1)),disabled:1===i.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,iw),(0,a.Lk)("div",nw,[n.totalPagesArrayByDay.start>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>n.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.start>2?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>n.goToPageByDay(n.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.totalPagesArrayByDay.range,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>n.goToPageByDay(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":i.currentPage===e,"bg-white":i.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,dw)))),128)),n.totalPagesArrayByDay.end<n.totalPagesByDay-1?((0,a.uX)(),(0,a.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>n.goToPageByDay(n.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,a.Q3)("",!0),n.totalPagesArrayByDay.end<n.totalPagesByDay?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>n.goToPageByDay(n.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(n.totalPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[37]||(t[37]=e=>n.goToPageByDay(i.currentPage+1)),disabled:i.currentPage===n.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,a.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,cw)])],512),[[o.aG,"day"===i.viewMode]]),i.isEditModalOpen?((0,a.uX)(),(0,a.CE)("div",uw,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[86]||(t[86]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[38]||(t[38]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",pw,[(0,a.Lk)("div",gw,[t[87]||(t[87]=(0,a.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,a.Lk)("div",hw,[(0,a.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,a.Lk)("div",mw,[(0,a.Lk)("div",yw,[t[88]||(t[88]=(0,a.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>i.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[o.Jo,i.selectedSetupMenu.day_of_week]])]),(0,a.Lk)("div",null,[t[89]||(t[89]=(0,a.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>i.selectedSetupMenu.meal_type_id=e),options:n.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,a.Lk)("div",kw,[t[90]||(t[90]=(0,a.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,a.bF)(d,{modelValue:i.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>i.selectedSetupMenu.menu_id=e),options:n.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,a.Lk)("div",bw,[(0,a.Lk)("div",xw,[(0,a.Lk)("button",{onClick:t[43]||(t[43]=e=>i.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>n.saveChanges&&n.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,a.Q3)("",!0),i.isDeleteModalOpen?((0,a.uX)(),(0,a.CE)("div",fw,[(0,a.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":i.showErrorToast,"opacity-0":!i.showErrorToast}])},[t[92]||(t[92]=(0,a.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,a.Lk)("span",null,(0,r.v_)(i.toastErrorMessage),1),(0,a.Lk)("button",{onClick:t[45]||(t[45]=e=>i.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,a.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,a.Lk)("div",_w,[(0,a.Lk)("div",vw,[t[93]||(t[93]=(0,a.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,a.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,a.Lk)("div",{class:"p-4"},[(0,a.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,a.Lk)("div",ww,[(0,a.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>n.closeDeleteModal&&n.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,a.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>n.deleteConfirmed&&n.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,a.Q3)("",!0)],64)}var Pw={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:rr.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&"PH"===e.menuType.name))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)||e.day_of_week.toString().includes(o)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",o=this.searchQuery.toLowerCase();return t.includes(o)||s.includes(o)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-ph"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${o}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await ne.A.get(`http://127.0.0.1:3333/setup-menu-ph/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([ne.A.get("http://127.0.0.1:3333/menus"),ne.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await ne.A.get(`http://127.0.0.1:3333/setup-menu-ph/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await ne.A.get("http://127.0.0.1:3333/setup-menu-ph/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await ne.A.post("http://127.0.0.1:3333/setup-menu-ph/set-start-date",{startDate:this.startDate});this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage=""}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&"PH"===t.menuType.name}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ne.A.post("http://127.0.0.1:3333/setup-menu-ph",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await ne.A.put(`http://127.0.0.1:3333/setup-menu-ph/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await ne.A.delete(`http://127.0.0.1:3333/setup-menu-ph/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,Ad.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,Ad.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1}}};const Cw=(0,B.A)(Pw,[["render",Lw],["__scopeId","data-v-7e7894ce"]]);var Dw=Cw;const Tw=[{path:"/login",name:"login",component:Re,meta:{title:"เข้าสู่ระบบ - Absolute FitFood",layout:"BlankLayout"}},{path:"/register",name:"register",component:Ie,meta:{title:"สมัครสมาชิก - Absolute FitFood",layout:"BlankLayout"}},{path:"/profile",name:"profile",component:pt,meta:{title:"Profile - Absolute FitFood",layout:"SimpleLayout"}},{path:"/register-aff",name:"register-aff",component:Et,meta:{title:"สมัครสมาชิก AFF - Absolute FitFood",layout:"SimpleLayout"}},{path:"/",name:"Home",component:qt,meta:{title:"หน้าแรก - Absolute FitFood"}},{path:"/customers",name:"ข้อมูลลูกค้า",component:Oc,meta:{title:"ข้อมูลลูกค้า - Absolute FitFood"}},{path:"/customers-hhb",name:"ข้อมูลลูกค้าHHB",component:rp,meta:{title:"ข้อมูลลูกค้า - Absolute FitFood"}},{path:"/sale-records",name:"บันทึกการขาย",component:cr,meta:{title:"บันทึกการขาย - Absolute FitFood"}},{path:"/sale-records-additional",name:"บันทึกการขาย Additional",component:mn,meta:{title:"บันทึกการขาย - Absolute FitFood"}},{path:"/daily-sale",name:"ยอดขายประจำวัน",component:Xd,meta:{title:"ยอดขายประจำวัน - Absolute FitFood"}},{path:"/setup-menu-ph",name:"Setup Menu Premium Health",component:Dw,meta:{title:"Setup Menu Premium Health - Absolute FitFood"}},{path:"/test",name:"test",component:Uc,meta:{title:"test - Absolute FitFood",layout:"SimpleLayout"}},{path:"/test2",name:"test2",component:ku,meta:{title:"test2 - Absolute FitFood",layout:"SimpleLayout"}},{path:"/test3",name:"test3",component:_u,meta:{title:"test3 - Absolute FitFood",layout:"SimpleLayout"}},{path:"/promotion-types",name:"ข้อมูลประเภทโปรโมชั่น",component:Hp,meta:{title:"Promotion Types - Absolute FitFood"}},{path:"/programs",name:"ข้อมูลโปรแกรม",component:Gg,meta:{title:"ข้อมูลโปรแกรม - Absolute FitFood"}},{path:"/packages",name:"ข้อมูลแพ็คเกจ",component:sy,meta:{title:"ข้อมูลแพ็คเกจ - Absolute FitFood"}},{path:"/package-types",name:"ข้อมูลประเภทแพ็คเกจ",component:Wy,meta:{title:"ข้อมูลประเภทแพ็คเกจ - Absolute FitFood"}},{path:"/zone-delivery-types",name:"ข้อมูลประเภทโซนการจัดส่ง",component:Nk,meta:{title:"ข้อมูลประเภทโซนการจัดส่ง - Absolute FitFood"}},{path:"/zone-deliveries",name:"ข้อมูลโซนการจัดส่ง",component:$b,meta:{title:"ข้อมูลโซนการจัดส่ง - Absolute FitFood"}},{path:"/menu-types",name:"ข้อมูลโปรแกรมเมนู",component:Xx,meta:{title:"ข้อมูลโปรแกรมเมนู - Absolute FitFood"}},{path:"/meal-types",name:"ข้อมูลประเภทเมนู",component:Qf,meta:{title:"ข้อมูลประเภทเมนู - Absolute FitFood"}},{path:"/menus",name:"ข้อมูลเมนู",component:cv,meta:{title:"ข้อมูลเมนู - Absolute FitFood"}}],Mw=(0,_e.aE)({history:(0,_e.LA)(),routes:Tw});Mw.beforeEach(((e,t,s)=>{document.title=e.meta.title||"Absolute FitFood",s()}));var Sw=Mw;const Ew=(0,o.Ef)(fe);Ew.use(Sw),Ew.mount("#app")}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,s),l.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,l){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],l=e[c][2];for(var i=!0,n=0;n<o.length;n++)(!1&l||r>=l)&&Object.keys(s.O).every((function(e){return s.O[e](o[n])}))?o.splice(n--,1):(i=!1,l<r&&(r=l));if(i){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[o,a,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,l,r=o[0],i=o[1],n=o[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(n)var c=n(s)}for(t&&t(o);d<r.length;d++)l=r[d],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(c)},o=self["webpackChunkfitfood_frontend"]=self["webpackChunkfitfood_frontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(5786)}));o=s.O(o)})();
//# sourceMappingURL=app.777df328.js.map