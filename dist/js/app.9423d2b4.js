(function(){"use strict";var e={914:function(e,t,s){var a=s(5130),o=s(6768);function l(e,t,s,a,l,r){const n=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",null,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(r.layoutComponent),null,{default:(0,o.k6)((()=>[(0,o.bF)(n)])),_:1}))])}var r=s(4232),n=s.p+"img/fitfood_logo.489e1b18.png";const i={class:"flex h-screen"},d={class:"p-4 flex justify-between items-center"},c={class:"flex items-center space-x-2"},u={key:0,src:n,alt:"Logo",class:"w-10 h-10 rounded-full shadow-md"},p={key:1,class:"text-black text-[16px] font-bold"},h={key:2,class:"text-[16px] font-bold"},g={key:0,class:"material-symbols-outlined text-3xl"},m={key:1,class:"material-symbols-outlined text-3xl"},y={class:"flex-1 font-bold"},k={class:"hover:bg-custom-orange-hover"},b={key:0},x={class:"hover:bg-custom-orange-hover"},f={key:0},w={class:"hover:bg-custom-orange-hover"},v={key:0},_={class:"hover:bg-custom-orange-hover"},L={key:0},D={class:"hover:bg-custom-orange-hover"},C={key:0},P={class:"hover:bg-custom-orange-hover"},M={key:0,class:"text-sm"},T={class:"hover:bg-custom-orange-hover"},S={key:0},E={class:"hover:bg-custom-orange-hover"},R={key:0},A={key:0,class:"relative"},F={class:"space-y-2 px-4 font-normal"},O={class:"hover:bg-custom-orange-hover"},X={key:0},z={class:"hover:bg-custom-orange-hover"},N={key:0},Q={class:"hover:bg-custom-orange-hover"},V={key:0},I={key:0,class:"flex items-center justify-between p-4 relative mt-auto"},B={class:"flex items-center space-x-2"},j=["src"],U={key:1,class:"uppercase"},$={key:0,class:"flex flex-col items-start"},W={class:"text-white ml-2"},q={class:"flex items-center justify-center"},J={class:"flex-1 p-4 bg-gray-100 relative"},Z={class:"bg-white p-4 shadow-md fixed top-0 left-0 right-0 z-10 flex justify-between items-center flex-shrink-0"},K={class:"flex items-center space-x-3"},Y={class:"material-symbols-outlined text-gray-600 text-3xl"},H={class:"text-xl text-gray-600 font-bold"},G={key:0,class:"pt-16 p-4 flex items-left space-x-6 text-m font-bold"},ee={key:1,class:"pt-16 p-4 flex items-left space-x-6 text-m font-bold"},te={key:2,class:"pt-16 p-4 flex items-left space-x-6 text-m font-bold"},se={key:3,class:"pt-16 p-4 flex items-left space-x-6 text-m font-bold"},ae={key:4,class:"pt-16 p-4 flex items-left space-x-6 text-m font-bold"},oe={class:"pt-16"};function le(e,t,s,l,n,le){const re=(0,o.g2)("router-link"),ne=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("aside",{style:(0,r.Tr)({width:n.isExpanded?"300px":"64px"}),class:"bg-custom-orange text-white flex flex-col transition-all duration-300"},[(0,o.Lk)("div",d,[(0,o.Lk)("div",c,[n.isExpanded?((0,o.uX)(),(0,o.CE)("img",u)):(0,o.Q3)("",!0),n.isExpanded?((0,o.uX)(),(0,o.CE)("h2",p,"ABSOLUTE")):(0,o.Q3)("",!0),n.isExpanded?((0,o.uX)(),(0,o.CE)("h2",h,"FITFOOD")):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>le.toggleSidebar&&le.toggleSidebar(...e)),class:"text-white focus:outline-none"},[n.isExpanded?((0,o.uX)(),(0,o.CE)("span",g,"menu_open")):((0,o.uX)(),(0,o.CE)("span",m,"menu"))])]),(0,o.Lk)("nav",y,[(0,o.Lk)("ul",null,[(0,o.Lk)("li",k,[(0,o.bF)(re,{to:"/master",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,o.k6)((()=>[t[4]||(t[4]=(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"},"home",-1)),n.isExpanded?((0,o.uX)(),(0,o.CE)("span",b,"หน้าแรก")):(0,o.Q3)("",!0)])),_:1})]),(0,o.Lk)("li",x,[(0,o.bF)(re,{to:"/customers",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,o.k6)((()=>[t[5]||(t[5]=(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"},"groups",-1)),n.isExpanded?((0,o.uX)(),(0,o.CE)("span",f,"ข้อมูลลูกค้า")):(0,o.Q3)("",!0)])),_:1})]),(0,o.Lk)("li",w,[(0,o.bF)(re,{to:"/sale-records",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,o.k6)((()=>[t[6]||(t[6]=(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"},"contact_page",-1)),n.isExpanded?((0,o.uX)(),(0,o.CE)("span",v,"บันทึกการขาย")):(0,o.Q3)("",!0)])),_:1})]),(0,o.Lk)("li",_,[(0,o.bF)(re,{to:"/daily-sale",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,o.k6)((()=>[t[7]||(t[7]=(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"},"calendar_month",-1)),n.isExpanded?((0,o.uX)(),(0,o.CE)("span",L,"ยอดขายประจำวัน")):(0,o.Q3)("",!0)])),_:1})]),(0,o.Lk)("li",D,[(0,o.bF)(re,{to:"/setup-menu-ph",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,o.k6)((()=>[t[8]||(t[8]=(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"},"menu_book",-1)),n.isExpanded?((0,o.uX)(),(0,o.CE)("span",C,"Setup Menus")):(0,o.Q3)("",!0)])),_:1})]),(0,o.Lk)("li",P,[(0,o.bF)(re,{to:"/result-orders",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,o.k6)((()=>[t[9]||(t[9]=(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"},"receipt_long",-1)),n.isExpanded?((0,o.uX)(),(0,o.CE)("span",M,"รายการอาหารประจำวันของลูกค้า")):(0,o.Q3)("",!0)])),_:1})]),(0,o.Lk)("li",T,[(0,o.bF)(re,{to:"/kitchen-orders",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,o.k6)((()=>[t[10]||(t[10]=(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"},"stockpot",-1)),n.isExpanded?((0,o.uX)(),(0,o.CE)("span",S,"Kitchen Orders")):(0,o.Q3)("",!0)])),_:1})]),(0,o.Lk)("li",E,[(0,o.bF)(re,{to:"/test",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,o.k6)((()=>[t[11]||(t[11]=(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"},"fullscreen",-1)),n.isExpanded?((0,o.uX)(),(0,o.CE)("span",R,"test")):(0,o.Q3)("",!0)])),_:1})]),n.isExpanded?((0,o.uX)(),(0,o.CE)("li",A,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>le.toggleSubMenu&&le.toggleSubMenu(...e)),class:"py-2 px-4 flex items-center space-x-2 w-full text-left"},t[12]||(t[12]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"folder",-1),(0,o.Lk)("span",null,"ข้อมูลทั้งหมด",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"},"expand_more",-1)])),(0,o.bo)((0,o.Lk)("ul",F,[(0,o.Lk)("li",O,[(0,o.bF)(re,{to:"/packages",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,o.k6)((()=>[n.isExpanded?((0,o.uX)(),(0,o.CE)("span",X,"ข้อมูลแพ็คเกจ")):(0,o.Q3)("",!0)])),_:1})]),(0,o.Lk)("li",z,[(0,o.bF)(re,{to:"/zone-deliveries",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,o.k6)((()=>[n.isExpanded?((0,o.uX)(),(0,o.CE)("span",N,"ข้อมูลโซนการจัดส่ง")):(0,o.Q3)("",!0)])),_:1})]),(0,o.Lk)("li",Q,[(0,o.bF)(re,{to:"/menus",class:"py-2 px-4 flex items-center space-x-2"},{default:(0,o.k6)((()=>[n.isExpanded?((0,o.uX)(),(0,o.CE)("span",V,"ข้อมูลเมนู")):(0,o.Q3)("",!0)])),_:1})])],512),[[a.aG,n.isSubMenuOpen]])])):(0,o.Q3)("",!0)])]),n.isLoggedIn?((0,o.uX)(),(0,o.CE)("div",I,[(0,o.Lk)("div",B,[(0,o.Lk)("div",{class:"relative w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center text-white text-lg font-bold flex-shrink-0 cursor-pointer",onClick:t[2]||(t[2]=(...t)=>e.toggleDropdown&&e.toggleDropdown(...t))},[n.userProfileImage?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.userProfileImage,alt:"User Profile",class:"w-full h-full rounded-full object-cover border-2 border-white"},null,8,j)):((0,o.uX)(),(0,o.CE)("span",U,(0,r.v_)(n.username.charAt(0)),1))]),n.isExpanded?((0,o.uX)(),(0,o.CE)("div",$,[(0,o.Lk)("strong",W,(0,r.v_)(n.username),1),t[13]||(t[13]=(0,o.Lk)("p",{class:"text-white text-sm ml-2"},"View Profile",-1))])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",q,[(0,o.Lk)("div",{class:"px-4 py-3 cursor-pointer hover:text-red-500 flex items-center",onClick:t[3]||(t[3]=(...e)=>le.logout&&le.logout(...e))},t[14]||(t[14]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"}," logout ",-1)]))])])):(0,o.Q3)("",!0)],4),(0,o.Lk)("main",J,[(0,o.Lk)("header",Z,[(0,o.Lk)("div",K,[(0,o.Lk)("span",Y,(0,r.v_)(n.pageIcon),1),(0,o.Lk)("h1",H,(0,r.v_)(n.pageTitle),1)])]),"/customers"===e.$route.path||"/customers-hhb"===e.$route.path?((0,o.uX)(),(0,o.CE)("div",G,[(0,o.bF)(re,{to:"customers",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/customers"===e.$route.path}])},{default:(0,o.k6)((()=>t[15]||(t[15]=[(0,o.eW)(" ข้อมูลลูกค้า AFF ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/customers-hhb",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/customers-hhb"===e.$route.path}])},{default:(0,o.k6)((()=>t[16]||(t[16]=[(0,o.eW)(" ข้อมูลลูกค้า HHB ")]))),_:1},8,["class"])])):(0,o.Q3)("",!0),"/packages"===e.$route.path||"/programs"===e.$route.path||"/promotion-types"===e.$route.path||"/package-types"===e.$route.path?((0,o.uX)(),(0,o.CE)("div",ee,[(0,o.bF)(re,{to:"packages",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/packages"===e.$route.path}])},{default:(0,o.k6)((()=>t[17]||(t[17]=[(0,o.eW)(" ข้อมูลแพ็คเกจ ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/programs",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/programs"===e.$route.path}])},{default:(0,o.k6)((()=>t[18]||(t[18]=[(0,o.eW)(" ข้อมูลโปรแกรม ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/promotion-types",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/promotion-types"===e.$route.path}])},{default:(0,o.k6)((()=>t[19]||(t[19]=[(0,o.eW)(" ข้อมูลประเภทโปรโมชัน ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/package-types",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/package-types"===e.$route.path}])},{default:(0,o.k6)((()=>t[20]||(t[20]=[(0,o.eW)(" ข้อมูลประเภทแพ็คเกจ ")]))),_:1},8,["class"])])):(0,o.Q3)("",!0),"/zone-deliveries"===e.$route.path||"/zone-delivery-types"===e.$route.path?((0,o.uX)(),(0,o.CE)("div",te,[(0,o.bF)(re,{to:"/zone-deliveries",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/zone-deliveries"===e.$route.path}])},{default:(0,o.k6)((()=>t[21]||(t[21]=[(0,o.eW)(" ข้อมูลโซนการจัดส่ง ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/zone-delivery-types",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/zone-delivery-types"===e.$route.path}])},{default:(0,o.k6)((()=>t[22]||(t[22]=[(0,o.eW)(" ข้อมูลประเภทโซนการจัดส่ง ")]))),_:1},8,["class"])])):(0,o.Q3)("",!0),"/menus"===e.$route.path||"/meal-types"===e.$route.path||"/menu-types"===e.$route.path?((0,o.uX)(),(0,o.CE)("div",se,[(0,o.bF)(re,{to:"menus",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/menus"===e.$route.path}])},{default:(0,o.k6)((()=>t[23]||(t[23]=[(0,o.eW)(" ข้อมูลเมนู ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/meal-types",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/meal-types"===e.$route.path}])},{default:(0,o.k6)((()=>t[24]||(t[24]=[(0,o.eW)(" ข้อมูลประเภทเมนู ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/menu-types",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/menu-types"===e.$route.path}])},{default:(0,o.k6)((()=>t[25]||(t[25]=[(0,o.eW)(" ข้อมูลประเภทโปรแกรมเมนู ")]))),_:1},8,["class"])])):(0,o.Q3)("",!0),"/setup-menu-ph"===e.$route.path||"/setup-menu-hhb"===e.$route.path||"/setup-menu-lc"===e.$route.path||"/setup-menu-fl"===e.$route.path||"/setup-menu-bpd"===e.$route.path||"/setup-menu-diabete"===e.$route.path||"/setup-menu-fat-disease"===e.$route.path?((0,o.uX)(),(0,o.CE)("div",ae,[(0,o.bF)(re,{to:"/setup-menu-ph",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-ph"===e.$route.path}])},{default:(0,o.k6)((()=>t[26]||(t[26]=[(0,o.eW)(" Premeium Health ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/setup-menu-hhb",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-hhb"===e.$route.path}])},{default:(0,o.k6)((()=>t[27]||(t[27]=[(0,o.eW)(" Happy Healthy Box ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/setup-menu-lc",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-lc"===e.$route.path}])},{default:(0,o.k6)((()=>t[28]||(t[28]=[(0,o.eW)(" Low Carb ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/setup-menu-fl",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-fl"===e.$route.path}])},{default:(0,o.k6)((()=>t[29]||(t[29]=[(0,o.eW)(" Fat Loss ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/setup-menu-bpd",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-bpd"===e.$route.path}])},{default:(0,o.k6)((()=>t[30]||(t[30]=[(0,o.eW)(" โรคความดัน ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/setup-menu-diabete",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-diabete"===e.$route.path}])},{default:(0,o.k6)((()=>t[31]||(t[31]=[(0,o.eW)(" โรคเบาหวาน ")]))),_:1},8,["class"]),(0,o.bF)(re,{to:"/setup-menu-fat-disease",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/setup-menu-fat-disease"===e.$route.path}])},{default:(0,o.k6)((()=>t[32]||(t[32]=[(0,o.eW)(" โรคไขมัน ")]))),_:1},8,["class"])])):(0,o.Q3)("",!0),(0,o.Lk)("div",oe,[(0,o.bF)(ne)])])])}s(4114);var re=s(4373);const ne="http://127.0.0.1:3333";re.A.defaults.withCredentials=!0;var ie={async register(e,t,s,a,o){try{const l=await re.A.post(`${ne}/register`,{firstname:e,lastname:t,username:s,email:a,password:o,role:"customer"});return l.data}catch(l){throw l.response.data}},async login(e,t,s){try{const a=await re.A.post(`${ne}/login`,{identifier:e,password:t}),o=a.data.token;if(!o)throw new Error("Token is undefined or invalid");return localStorage.setItem("token",o),s.dispatch("fetchUserRole"),re.A.defaults.headers.common["Authorization"]=`Bearer ${o}`,a.data}catch(a){throw console.error("Login error:",a),a.response?a.response.data:a.message}},async logout(){try{return localStorage.removeItem("token"),delete re.A.defaults.headers.common["Authorization"],!0}catch(e){throw e.response?e.response.data:e.message}},async getProfile(){try{const e=localStorage.getItem("token");if(!e)throw new Error("No token found");re.A.defaults.headers.common["Authorization"]=`Bearer ${e}`;const t=await re.A.get(`${ne}/profile`);return t.data}catch(e){throw console.error("Error fetching profile:",e.response?e.response.data:e.message),e.response?e.response.data:e.message}},async changePassword(e,t){try{const s=await re.A.put(`${ne}/users/update-password`,{oldPassword:e,newPassword:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return s.data}catch(s){throw console.error("Error changing password:",s.response?s.response.data:s.message),s.response?s.response.data:s.message}}},de={name:"MainLayout",data(){return{isExpanded:!1,pageTitle:"",pageIcon:"",isSubMenuOpen:!1,isLoggedIn:!1,username:"",userProfileImage:"",isDropdownOpen:!1}},methods:{toggleSidebar(){this.isExpanded=!this.isExpanded},toggleSubMenu(){this.isSubMenuOpen=!this.isSubMenuOpen},setPageIcon(e){switch(e){case"Home":this.pageIcon="home";break;case"ข้อมูลลูกค้า":this.pageIcon="groups";break;case"ข้อมูลลูกค้าHHB":this.pageIcon="groups",this.pageTitle="ข้อมูลลูกค้า";break;case"บันทึกการขาย":this.pageIcon="contact_page";break;case"ยอดขายประจำวัน":this.pageIcon="calendar_month";break;case"Setup Menu Premium Health":case"Setup Menu Happy Healthy Box":case"Setup Menu Low Carb":case"Setup Menu Fat Loss":case"Setup Menu โรคความดัน":case"Setup Menu โรคเบาหวาน":case"Setup Menu โรคไขมัน":this.pageIcon="menu_book";break;case"รายการอาหารประจำวันของลูกค้า":this.pageIcon="receipt_long";break;case"Kitchen Orders":this.pageIcon="stockpot";break;default:this.pageIcon=""}},checkLoginStatus(){const e=localStorage.getItem("token");e&&(this.isLoggedIn=!0,this.getUserProfile())},async getUserProfile(){try{const e=await ie.getProfile();this.username=e.username,this.email=e.email}catch(e){console.log("Error fetching profile:",e)}},logout(){localStorage.removeItem("token"),this.isLoggedIn=!1,this.username="",this.$router.push("/login")}},watch:{$route(e){e.name&&(this.pageTitle=e.name,this.setPageIcon(e.name))}},created(){this.$route.name&&(this.pageTitle=this.$route.name,this.setPageIcon(this.$route.name)),this.checkLoginStatus()}},ce=s(1241);const ue=(0,ce.A)(de,[["render",le],["__scopeId","data-v-8a74078e"]]);var pe=ue;const he={class:"flex justify-between items-center p-4 px-32 bg-white text-white shadow-lg relative"},ge={key:0,class:"flex items-left space-x-6 text-black font-bold"},me={key:1,class:"flex items-center space-x-4"},ye={class:"relative flex items-center space-x-4"},ke={class:"text-black"},be={class:"text-custom-orange"},xe={class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border"},fe={class:"list-none p-0 m-0"},we={key:2,class:"flex items-center space-x-2"},ve={class:"flex-1 p-4 px-32 relative"};function _e(e,t,s,l,i,d){const c=(0,o.g2)("router-link"),u=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("header",he,[(0,o.Lk)("div",{class:"flex justify-center items-center cursor-pointer",onClick:t[0]||(t[0]=(...e)=>d.goToHome&&d.goToHome(...e))},t[7]||(t[7]=[(0,o.Lk)("img",{src:n,alt:"Logo",class:"w-12 h-12"},null,-1),(0,o.Lk)("div",{class:"leading-none ml-2"},[(0,o.Lk)("p",{class:"text-lg font-bold text-black"},"ABSOLUTE"),(0,o.Lk)("p",{class:"text-lg font-bold text-custom-orange -mt-3"},"FITFOOD")],-1)])),["/premium-health","/","/happy-healthy-box","/low-carb","/fat-loss"].includes(e.$route.path)?((0,o.uX)(),(0,o.CE)("div",ge,[(0,o.bF)(c,{to:"/premium-health",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/premium-health"===e.$route.path||"/"===e.$route.path}])},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.eW)(" Premium Health ")]))),_:1},8,["class"]),(0,o.bF)(c,{to:"/happy-healthy-box",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/happy-healthy-box"===e.$route.path}])},{default:(0,o.k6)((()=>t[9]||(t[9]=[(0,o.eW)(" Happy Healthy Box ")]))),_:1},8,["class"]),(0,o.bF)(c,{to:"/low-carb",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/low-carb"===e.$route.path}])},{default:(0,o.k6)((()=>t[10]||(t[10]=[(0,o.eW)(" Low Carb ")]))),_:1},8,["class"]),(0,o.bF)(c,{to:"/fat-loss",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/fat-loss"===e.$route.path}])},{default:(0,o.k6)((()=>t[11]||(t[11]=[(0,o.eW)(" Fat Loss ")]))),_:1},8,["class"])])):(0,o.Q3)("",!0),i.isLoggedIn?((0,o.uX)(),(0,o.CE)("div",me,[(0,o.Lk)("div",ye,[i.isUserRegistered?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",{key:0,class:"cursor-pointer text-custom-orange font-bold",onClick:t[1]||(t[1]=t=>e.$router.push("/register-aff"))}," Register Aff ")),(0,o.Lk)("span",{onClick:t[2]||(t[2]=(...e)=>d.toggleMenu&&d.toggleMenu(...e)),class:"cursor-pointer flex items-center space-x-2"},[(0,o.Lk)("span",ke,[t[12]||(t[12]=(0,o.eW)("Welcome, ")),(0,o.Lk)("strong",be,(0,r.v_)(i.username),1)]),(0,o.Lk)("span",{class:(0,r.C4)([{"rotate-180":i.isMenuOpen},"material-symbols-outlined text-black transition-transform duration-300"])}," arrow_drop_down ",2)]),(0,o.bo)((0,o.Lk)("div",xe,[(0,o.Lk)("ul",fe,[(0,o.Lk)("li",{class:"px-4 py-3 cursor-pointer hover:bg-gray-100 hover:text-custom-orange hover:font-bold border-b flex items-center justify-between",onClick:t[3]||(t[3]=(...e)=>d.goToProfile&&d.goToProfile(...e))},t[13]||(t[13]=[(0,o.Lk)("span",{class:"material-symbols-outlined"}," person ",-1),(0,o.Lk)("span",null,"Profile",-1)])),"admin"===i.role?((0,o.uX)(),(0,o.CE)("li",{key:0,class:"px-4 py-3 cursor-pointer hover:bg-gray-100 hover:text-custom-orange hover:font-bold border-b flex items-center justify-between",onClick:t[4]||(t[4]=(...e)=>d.goToBackend&&d.goToBackend(...e))},t[14]||(t[14]=[(0,o.Lk)("span",{class:"material-symbols-outlined"}," shield_person ",-1),(0,o.Lk)("span",null,"Admin Page",-1)]))):(0,o.Q3)("",!0),(0,o.Lk)("li",{class:"px-4 py-3 cursor-pointer hover:bg-gray-100 hover:text-red-500 hover:font-bold hover:rounded-b-md border-b flex items-center justify-between",onClick:t[5]||(t[5]=(...e)=>d.logout&&d.logout(...e))},t[15]||(t[15]=[(0,o.Lk)("span",{class:"material-symbols-outlined"}," logout ",-1),(0,o.Lk)("span",null,"Logout",-1)]))])],512),[[a.aG,i.isMenuOpen]])])])):((0,o.uX)(),(0,o.CE)("div",we,[(0,o.Lk)("span",{class:"text-black cursor-pointer flex items-center space-x-2 font-bold hover:text-custom-orange-hover",onClick:t[6]||(t[6]=(...e)=>d.goToLogin&&d.goToLogin(...e))},t[16]||(t[16]=[(0,o.Lk)("span",{class:"material-symbols-outlined"}," account_circle ",-1),(0,o.Lk)("span",null,"Login",-1)]))]))]),(0,o.Lk)("main",ve,[(0,o.bF)(u)])])}var Le={data(){return{username:"",role:"",isLoggedIn:!1,isMenuOpen:!1,isUserRegistered:!1}},created(){this.checkLoginStatus()},methods:{checkLoginStatus(){const e=localStorage.getItem("token");e&&(this.isLoggedIn=!0,this.getUserProfile())},async getUserProfile(){try{const e=await ie.getProfile();this.username=e.username,this.role=e.role}catch(e){console.log("Error fetching profile:",e)}},goToLogin(){this.$router.push("/login")},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},goToHome(){this.$router.push("/premium-health")},goToProfile(){this.$router.push("/profile")},goToBackend(){this.$router.push("/master")},logout(){localStorage.removeItem("token"),this.isLoggedIn=!1,this.username="",this.$router.push("/")},checkIfAdmin(){"admin"===this.role?console.log("User is an admin."):console.log("User is not an admin.")}},async mounted(){try{const e=await re.A.get("http://127.0.0.1:3333/check-user-registration");e.data.isRegistered&&(this.isUserRegistered=!0)}catch(e){console.error("Error checking user registration",e)}},watch:{$route(){this.checkLoginStatus()}},computed:{userRole(){return this.$store.getters.getUserRole}}};const De=(0,ce.A)(Le,[["render",_e]]);var Ce=De;function Pe(e,t,s,a,l,r){const n=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(n)])}var Me={name:"BlankLayout"};const Te=(0,ce.A)(Me,[["render",Pe],["__scopeId","data-v-28df8f6e"]]);var Se=Te,Ee={computed:{layoutComponent(){return"BlankLayout"===this.$route.meta.layout?Se:"SimpleLayout"===this.$route.meta.layout?Ce:pe},userRole(){return this.$store.getters.getUserRole}},created(){this.$store.dispatch("fetchUserRole")}};const Re=(0,ce.A)(Ee,[["render",l]]);var Ae=Re,Fe=s(782);const Oe=(0,Fe.y$)({state:{role:localStorage.getItem("role")||null},mutations:{setUserRole(e,t){e.role=t,localStorage.setItem("role",t)}},actions:{async fetchUserRole({commit:e}){try{const t=await ie.getProfile(),s=t.role||"customer";e("setUserRole",s)}catch(t){console.error("Error fetching user role:",t)}}},getters:{getUserRole(e){return e.role}}});var Xe=Oe,ze=s(1387);const Ne={class:"flex items-center justify-center min-h-screen fixed inset-0 bg-gradient-to-r from-custom-orange to-custom-orange-hover"},Qe={class:"flex flex-col items-center"},Ve={class:"bg-white bg-opacity-60 backdrop-blur-md w-full max-w-md p-8 rounded-b-lg shadow-lg border"},Ie={key:0,class:"mb-4 text-red-500 text-center font-bold"},Be={class:"flex items-center justify-between"},je={class:"flex items-center"},Ue={class:"mt-4 text-center text-gray-700"};function $e(e,t,s,l,i,d){return(0,o.uX)(),(0,o.CE)("div",Ne,[(0,o.Lk)("div",Qe,[t[9]||(t[9]=(0,o.Fv)('<div class="w-full max-w-md bg-white px-4 py-3 rounded-t-lg shadow-lg flex justify-center items-center relative"><img src="'+n+'" alt="Logo" class="w-12 h-12"><div class="leading-none ml-2"><p class="text-lg font-bold">ABSOLUTE</p><p class="text-lg font-bold text-custom-orange -mt-3">FITFOOD</p></div></div>',1)),(0,o.Lk)("div",Ve,[t[8]||(t[8]=(0,o.Lk)("h2",{class:"text-2xl font-bold text-center text-gray-700 mb-4"},"Login",-1)),i.error?((0,o.uX)(),(0,o.CE)("p",Ie,(0,r.v_)(i.error),1)):(0,o.Q3)("",!0),(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)(((...e)=>d.login&&d.login(...e)),["prevent"])),class:"space-y-4"},[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.identifier=e),placeholder:"Email or Username",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,i.identifier]]),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),placeholder:"Password",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,i.password]]),(0,o.Lk)("div",Be,[(0,o.Lk)("div",je,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"rememberMe","onUpdate:modelValue":t[2]||(t[2]=e=>i.rememberMe=e),class:"w-4 h-4 accent-custom-orange focus:ring-0"},null,512),[[a.lH,i.rememberMe]]),t[5]||(t[5]=(0,o.Lk)("label",{for:"rememberMe",class:"ml-2 text-gray-700 text-sm"},"Remember Me",-1))])]),t[6]||(t[6]=(0,o.Lk)("button",{type:"submit",class:"w-full bg-custom-orange text-white py-2 rounded-md hover:bg-custom-orange-hover transition"}," Login ",-1))],32),(0,o.Lk)("p",Ue,[t[7]||(t[7]=(0,o.eW)(" Don't have an account? ")),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>d.goToRegister&&d.goToRegister(...e)),class:"text-custom-orange hover:underline font-bold"}," Register ")])])])])}var We={data(){return{identifier:localStorage.getItem("rememberedIdentifier")||"",password:localStorage.getItem("rememberedPassword")||"",rememberMe:"true"===localStorage.getItem("rememberMe"),error:null}},methods:{async login(){try{await ie.login(this.identifier,this.password,this.$store),this.rememberMe?(localStorage.setItem("rememberedIdentifier",this.identifier),localStorage.setItem("rememberedPassword",this.password),localStorage.setItem("rememberMe","true")):(localStorage.removeItem("rememberedIdentifier"),localStorage.removeItem("rememberedPassword"),localStorage.removeItem("rememberMe")),this.$router.push("/")}catch(e){this.error="Login failed"}},goToRegister(){this.$router.push("/register")}}};const qe=(0,ce.A)(We,[["render",$e]]);var Je=qe;const Ze={class:"flex items-center justify-center min-h-screen fixed inset-0 bg-gradient-to-r from-custom-orange to-custom-orange-hover"},Ke={class:"flex flex-col items-center"},Ye={class:"bg-white bg-opacity-60 backdrop-blur-md w-full max-w-md p-8 rounded-b-lg shadow-lg border"},He={key:0,class:"mb-4 text-green-500 text-center font-bold"},Ge={key:1,class:"mb-4 text-red-500 text-center font-bold"},et={class:"flex space-x-4"},tt={class:"text-center text-gray-600 mt-4"};function st(e,t,s,l,i,d){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Ze,[(0,o.Lk)("div",Ke,[t[11]||(t[11]=(0,o.Fv)('<div class="w-full max-w-md bg-white px-4 py-3 rounded-t-lg shadow-lg flex justify-center items-center"><img src="'+n+'" alt="Logo" class="w-12 h-12"><div class="leading-none ml-2"><p class="text-lg font-bold">ABSOLUTE</p><p class="text-lg font-bold text-custom-orange -mt-3">FITFOOD</p></div></div>',1)),(0,o.Lk)("div",Ye,[t[10]||(t[10]=(0,o.Lk)("h2",{class:"text-2xl font-bold text-center text-gray-700 mb-4"},"Register",-1)),i.success?((0,o.uX)(),(0,o.CE)("p",He,(0,r.v_)(i.success),1)):(0,o.Q3)("",!0),!i.success&&i.error?((0,o.uX)(),(0,o.CE)("p",Ge,(0,r.v_)(i.error),1)):(0,o.Q3)("",!0),(0,o.Lk)("form",{onSubmit:t[6]||(t[6]=(0,a.D$)(((...e)=>d.register&&d.register(...e)),["prevent"])),class:"space-y-4"},[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),placeholder:"Username",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,i.username]]),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=e=>i.email=e),placeholder:"Email",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,i.email]]),(0,o.Lk)("div",et,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>i.firstname=e),placeholder:"First Name",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,i.firstname]]),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>i.lastname=e),placeholder:"Last Name",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,i.lastname]])]),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=e=>i.password=e),placeholder:"Password",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,i.password]]),(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[5]||(t[5]=e=>i.confirmPassword=e),placeholder:"Confirm Password",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,i.confirmPassword]]),t[7]||(t[7]=(0,o.Lk)("button",{type:"submit",class:"w-full bg-custom-orange text-white py-2 rounded-md hover:bg-custom-orange-hover transition"}," Register ",-1))],32),(0,o.Lk)("p",tt,[t[9]||(t[9]=(0,o.eW)(" Already have an account? ")),(0,o.bF)(c,{to:"/login",class:"text-custom-orange hover:underline font-bold"},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.eW)("Login")]))),_:1})])])])])}var at={data(){return{firstname:"",lastname:"",username:"",email:"",password:"",confirmPassword:"",error:null,success:null}},methods:{async register(){if(this.password===this.confirmPassword)try{await ie.register(this.firstname,this.lastname,this.username,this.email,this.password),this.success="Registration successful! Please login to continue.",this.firstname="",this.lastname="",this.username="",this.email="",this.password="",this.confirmPassword=""}catch(e){this.error="Email or Username already exists"}else this.error="Passwords do not match!"}}};const ot=(0,ce.A)(at,[["render",st]]);var lt=ot;const rt={key:0,class:"text-red-500"},nt={key:1,class:"text-gray-500"},it={key:2,class:"profile-info flex space-x-8"},dt={key:0,class:"w-1/4 bg-white shadow-lg p-4 rounded-md text-center"},ct={key:0,class:"w-16 h-16 rounded-full overflow-hidden mb-4 mx-auto"},ut=["src"],pt={key:1,class:"w-16 h-16 rounded-full bg-gray-300 text-white flex items-center justify-center mb-4 mx-auto"},ht={class:"text-xl font-bold"},gt={class:"text-lg"},mt={class:"text-gray-700 pb-3"},yt={class:"w-3/4 bg-white shadow-lg p-4 rounded-md"},kt={key:3,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50"},bt={class:"bg-white p-6 rounded-md shadow-lg w-96"},xt={class:"mb-4"},ft={class:"mb-4"},wt={class:"mb-4"},vt={key:0,class:"text-red-500 mb-4"},_t={key:1,class:"text-green-500 mb-4"},Lt={class:"flex space-x-4"};function Dt(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[t[22]||(t[22]=(0,o.Lk)("h2",null,"Your Profile",-1)),n.error?((0,o.uX)(),(0,o.CE)("div",rt,(0,r.v_)(n.error),1)):(0,o.Q3)("",!0),n.loading?((0,o.uX)(),(0,o.CE)("div",nt,"Loading...")):(0,o.Q3)("",!0),n.customer?((0,o.uX)(),(0,o.CE)("div",it,[n.user?((0,o.uX)(),(0,o.CE)("div",dt,[n.user.profilePicture?((0,o.uX)(),(0,o.CE)("div",ct,[(0,o.Lk)("img",{src:n.user.profilePicture,alt:"Profile Picture",class:"w-full h-full object-cover"},null,8,ut)])):((0,o.uX)(),(0,o.CE)("div",pt,[(0,o.Lk)("span",ht,(0,r.v_)(n.user.firstname&&n.user.lastname?n.user.firstname.charAt(0)+n.user.lastname.charAt(0):"N/A"),1)])),(0,o.Lk)("strong",gt,(0,r.v_)(n.user.firstname||"N/A")+" "+(0,r.v_)(n.user.lastname||"N/A"),1),(0,o.Lk)("p",mt,(0,r.v_)(n.user.email||"No email provided"),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.logout&&i.logout(...e)),class:"w-full border text-red-500 font-bold py-2 rounded-md mt-2 hover:bg-gray-100 transition-colors"}," Logout "),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.openChangePasswordModal&&i.openChangePasswordModal(...e)),class:"w-full border py-2 rounded-md mt-2 hover:bg-gray-100 transition-colors"}," Change Password ")])):(0,o.Q3)("",!0),(0,o.Lk)("div",yt,[(0,o.Lk)("p",null,[t[7]||(t[7]=(0,o.Lk)("strong",null,"Name:",-1)),(0,o.eW)(" "+(0,r.v_)(n.customer.name),1)]),(0,o.Lk)("p",null,[t[8]||(t[8]=(0,o.Lk)("strong",null,"Email:",-1)),(0,o.eW)(" "+(0,r.v_)(n.customer.email),1)]),(0,o.Lk)("p",null,[t[9]||(t[9]=(0,o.Lk)("strong",null,"Gender:",-1)),(0,o.eW)(" "+(0,r.v_)(n.customer.gender),1)]),(0,o.Lk)("p",null,[t[10]||(t[10]=(0,o.Lk)("strong",null,"Phone Number:",-1)),(0,o.eW)(" "+(0,r.v_)(n.customer.tel),1)]),(0,o.Lk)("p",null,[t[11]||(t[11]=(0,o.Lk)("strong",null,"Line ID:",-1)),(0,o.eW)(" "+(0,r.v_)(n.customer.line_id),1)]),(0,o.Lk)("p",null,[t[12]||(t[12]=(0,o.Lk)("strong",null,"Food Allergies:",-1)),(0,o.eW)(" "+(0,r.v_)(n.customer.food_allergies),1)]),(0,o.Lk)("p",null,[t[13]||(t[13]=(0,o.Lk)("strong",null,"Delivery Date:",-1)),(0,o.eW)(" "+(0,r.v_)(n.customer.delivery_date),1)]),(0,o.Lk)("p",null,[t[14]||(t[14]=(0,o.Lk)("strong",null,"Address 1:",-1)),(0,o.eW)(" "+(0,r.v_)(n.customer.address_1),1)]),(0,o.Lk)("p",null,[t[15]||(t[15]=(0,o.Lk)("strong",null,"Address 2:",-1)),(0,o.eW)(" "+(0,r.v_)(n.customer.address_2),1)]),(0,o.Lk)("p",null,[t[16]||(t[16]=(0,o.Lk)("strong",null,"Address 3:",-1)),(0,o.eW)(" "+(0,r.v_)(n.customer.address_3),1)])])])):(0,o.Q3)("",!0),n.isModalOpen?((0,o.uX)(),(0,o.CE)("div",kt,[(0,o.Lk)("div",bt,[t[21]||(t[21]=(0,o.Lk)("h3",{class:"text-lg font-semibold mb-4"},"Change Password",-1)),(0,o.Lk)("form",{onSubmit:t[6]||(t[6]=(0,a.D$)(((...e)=>i.changePassword&&i.changePassword(...e)),["prevent"]))},[(0,o.Lk)("div",xt,[t[17]||(t[17]=(0,o.Lk)("label",{for:"oldPassword",class:"block text-sm font-medium text-gray-700"},"Old Password",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.oldPassword=e),type:"password",id:"oldPassword",class:"w-full p-2 border border-gray-300 rounded-md",required:""},null,512),[[a.Jo,n.oldPassword]])]),(0,o.Lk)("div",ft,[t[18]||(t[18]=(0,o.Lk)("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700"},"New Password",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.newPassword=e),type:"password",id:"newPassword",class:"w-full p-2 border border-gray-300 rounded-md",required:""},null,512),[[a.Jo,n.newPassword]])]),(0,o.Lk)("div",wt,[t[19]||(t[19]=(0,o.Lk)("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700"},"Confirm New Password",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.confirmPassword=e),type:"password",id:"confirmPassword",class:"w-full p-2 border border-gray-300 rounded-md",required:""},null,512),[[a.Jo,n.confirmPassword]])]),n.errorMessage?((0,o.uX)(),(0,o.CE)("div",vt,(0,r.v_)(n.errorMessage),1)):(0,o.Q3)("",!0),n.successMessage?((0,o.uX)(),(0,o.CE)("div",_t,(0,r.v_)(n.successMessage),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",Lt,[t[20]||(t[20]=(0,o.Lk)("button",{type:"submit",class:"w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600 transition-colors"}," Save ",-1)),(0,o.Lk)("button",{type:"button",onClick:t[5]||(t[5]=(...e)=>i.closeChangePasswordModal&&i.closeChangePasswordModal(...e)),class:"w-full bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition-colors"}," Cancel ")])],32)])])):(0,o.Q3)("",!0)])}var Ct={data(){return{customer:null,error:null,loading:!1,user:{},isModalOpen:!1,oldPassword:"",newPassword:"",confirmPassword:"",errorMessage:"",successMessage:""}},created(){this.fetchCustomerData(),this.fetchProfile()},methods:{async fetchCustomerData(){this.loading=!0;try{const e=await re.A.get("http://127.0.0.1:3333/customer/profile");this.customer=e.data.customer}catch(e){this.error="Failed to fetch customer data"}finally{this.loading=!1}},async fetchProfile(){try{this.user=await ie.getProfile()}catch(e){this.error=e.message||"Failed to fetch profile"}},logout(){localStorage.removeItem("token"),this.isLoggedIn=!1,this.username="",this.$router.push("/test2")},openChangePasswordModal(){this.isModalOpen=!0},closeChangePasswordModal(){this.isModalOpen=!1,this.errorMessage="",this.successMessage="",this.oldPassword="",this.newPassword="",this.confirmPassword=""},async changePassword(){if(this.newPassword===this.confirmPassword)try{const e=await ie.changePassword(this.oldPassword,this.newPassword);this.successMessage=e.message,this.errorMessage="",this.closeChangePasswordModal()}catch(e){this.errorMessage=e.message||"An error occurred.",this.successMessage=""}else this.errorMessage="New password and confirmation do not match."}}};const Pt=(0,ce.A)(Ct,[["render",Dt],["__scopeId","data-v-282d7834"]]);var Mt=Pt;const Tt={class:"flex items-center justify-center inset-0"},St={class:"flex flex-col items-center"},Et={class:"bg-gray-100 bg-opacity-50 backdrop-blur-md w-full h-auto max-h-[800px] p-8 rounded-lg shadow-lg border flex flex-col"},Rt={key:0,class:"text-red-500 text-center mb-4"},At={key:1,class:"text-green-500 text-center mb-4"},Ft={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Ot={class:"flex space-x-4"},Xt={class:"w-1/2"},zt={class:"w-1/2"},Nt={class:"flex space-x-4"},Qt={class:"flex space-x-4"},Vt={class:"w-1/2"},It={class:"w-1/2"},Bt={class:"flex space-x-4"},jt={key:0};function Ut(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",Tt,[(0,o.Lk)("div",St,[(0,o.Lk)("div",Et,[t[34]||(t[34]=(0,o.Lk)("h2",{class:"text-2xl font-bold text-center mb-6"},"ลงทะเบียนข้อมูลลูกค้า",-1)),n.error?((0,o.uX)(),(0,o.CE)("p",Rt,(0,r.v_)(n.error),1)):(0,o.Q3)("",!0),n.success?((0,o.uX)(),(0,o.CE)("p",At,(0,r.v_)(n.success),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",Ft,[(0,o.Lk)("form",{onSubmit:t[15]||(t[15]=(0,a.D$)(((...e)=>i.submitAddress&&i.submitAddress(...e)),["prevent"])),class:"space-y-4"},[(0,o.Lk)("div",Ot,[(0,o.Lk)("div",Xt,[t[16]||(t[16]=(0,o.Lk)("label",{for:"firstname",class:"block font-medium text-gray-700"},"First Name",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.firstname=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.firstname]])]),(0,o.Lk)("div",zt,[t[17]||(t[17]=(0,o.Lk)("label",{for:"lastname",class:"block font-medium text-gray-700"},"Last Name",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.lastname=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.lastname]])])]),(0,o.Lk)("div",null,[t[18]||(t[18]=(0,o.Lk)("label",{for:"email",class:"block font-medium text-gray-700"},"Email",-1)),(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>n.email=e),class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.email]])]),(0,o.Lk)("div",null,[t[19]||(t[19]=(0,o.Lk)("label",{for:"customer_id",class:"block font-medium text-gray-700"},"รหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>n.customer_id=e),placeholder:"กรอกรหัสอ้างอิงที่คุณได้รับจากเจ้าหน้าที่ของเรา",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.customer_id]])]),(0,o.Lk)("div",null,[t[22]||(t[22]=(0,o.Lk)("label",{class:"block font-medium text-gray-700"},"Gender",-1)),(0,o.Lk)("div",Nt,[(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=e=>n.gender=e),value:"female",class:"focus:ring-custom-orange"},null,512),[[a.XL,n.gender]]),t[20]||(t[20]=(0,o.eW)(" ผู้หญิง / Female "))]),(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=e=>n.gender=e),value:"male",class:"focus:ring-custom-orange"},null,512),[[a.XL,n.gender]]),t[21]||(t[21]=(0,o.eW)(" ผู้ชาย / Male "))])])]),(0,o.Lk)("div",Qt,[(0,o.Lk)("div",Vt,[t[23]||(t[23]=(0,o.Lk)("label",{for:"tel",class:"block font-medium text-gray-700"},"Phone Number",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>n.tel=e),maxlength:"10",placeholder:"กรอกหมายเลขโทรศัพท์",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.tel]])]),(0,o.Lk)("div",It,[t[24]||(t[24]=(0,o.Lk)("label",{for:"line_id",class:"block font-medium text-gray-700"},"Line ID (ถ้ามี)",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>n.line_id=e),placeholder:"กรอก line id",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.line_id]])])]),(0,o.Lk)("div",null,[t[27]||(t[27]=(0,o.Lk)("label",{class:"block font-medium text-gray-700"},"คุณแพ้อาหารชนิดใดหรือไม่?",-1)),(0,o.Lk)("div",Bt,[(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=e=>n.food_allergies=e),value:"ไม่ No",class:"focus:ring-custom-orange"},null,512),[[a.XL,n.food_allergies]]),t[25]||(t[25]=(0,o.eW)(" ไม่ / No "))]),(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[9]||(t[9]=e=>n.food_allergies=e),value:"ใช่ Yes, ",class:"focus:ring-custom-orange"},null,512),[[a.XL,n.food_allergies]]),t[26]||(t[26]=(0,o.eW)(" ใช่ / Yes "))])])]),"ใช่ Yes, "===n.food_allergies?((0,o.uX)(),(0,o.CE)("div",jt,[t[28]||(t[28]=(0,o.Lk)("label",{for:"food_allergies_detail",class:"block font-medium text-gray-700"},"โปรดระบุประเภทอาหารที่คุณมีอาการแพ้ในบรรทัดด้านล่าง",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"food_allergies_detail","onUpdate:modelValue":t[10]||(t[10]=e=>n.food_allergies_detail=e),placeholder:"Enter details here",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[a.Jo,n.food_allergies_detail]])])):(0,o.Q3)("",!0),(0,o.Lk)("div",null,[t[29]||(t[29]=(0,o.Lk)("label",{for:"delivery_date",class:"block font-medium text-gray-700"},"โปรดระบุวันที่คุณต้องการรับอาหาร",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>n.delivery_date=e),placeholder:"กรอกโปรดระบุวันที่คุณต้องการรับอาหาร",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.delivery_date]])]),(0,o.Lk)("div",null,[t[30]||(t[30]=(0,o.Lk)("label",{for:"address_1",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 1",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"address","onUpdate:modelValue":t[12]||(t[12]=e=>n.address_1=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[a.Jo,n.address_1]])]),(0,o.Lk)("div",null,[t[31]||(t[31]=(0,o.Lk)("label",{for:"address_2",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 2 (ถ้ามี)",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"address_2","onUpdate:modelValue":t[13]||(t[13]=e=>n.address_2=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[a.Jo,n.address_2]])]),(0,o.Lk)("div",null,[t[32]||(t[32]=(0,o.Lk)("label",{for:"address_3",class:"block font-medium text-gray-700"},"ที่อยู่จัดส่ง 3 (ถ้ามี)",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"address_3","onUpdate:modelValue":t[14]||(t[14]=e=>n.address_3=e),placeholder:"กรอกที่อยู่การจัดส่ง",class:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange",rows:"4"},null,512),[[a.Jo,n.address_3]])]),t[33]||(t[33]=(0,o.Lk)("button",{type:"submit",class:"w-full bg-custom-orange text-white py-2 rounded-md hover:bg-custom-orange-hover"}," Submit Address ",-1))],32)])])])])}var $t={data(){return{firstname:"",lastname:"",email:"",line_id:"",address_1:"",address_2:"",address_3:"",gender:"",tel:"",food_allergies:"",food_allergies_detail:"",delivery_date:"",customer_id:"",error:null,success:null}},created(){this.fetchUserData()},methods:{async fetchUserData(){try{const e=await re.A.get("http://127.0.0.1:3333/profile");this.firstname=e.data.firstname,this.lastname=e.data.lastname,this.email=e.data.email}catch(e){this.error=e.response.data.message||"Failed to fetch user data"}},async submitAddress(){try{const e=await re.A.post("http://127.0.0.1:3333/customer",{address_1:this.address_1,address_2:this.address_2,address_3:this.address_3,gender:this.gender,customer_id:this.customer_id,name:`${this.firstname} ${this.lastname}`,email:this.email,line_id:this.line_id,tel:this.tel,food_allergies:this.food_allergies+this.food_allergies_detail,delivery_date:this.delivery_date});this.success=e.data.message,this.address=""}catch(e){this.error=e.response.data.message||"Failed to add address"}}}};const Wt=(0,ce.A)($t,[["render",Ut],["__scopeId","data-v-27ba5a7d"]]);var qt=Wt;const Jt={class:"flex space-x-5"},Zt={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},Kt={class:"text-center"},Yt={class:"text-3xl font-bold text-custom-orange"},Ht={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},Gt={class:"text-center"},es={class:"text-3xl font-bold text-custom-orange"},ts={class:"text-sm text-gray-600 mt-4"},ss={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},as={class:"text-center"},os={class:"text-3xl font-bold text-custom-orange"};function ls(e,t,s,a,l,n){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",Jt,[(0,o.Lk)("div",Zt,[t[1]||(t[1]=(0,o.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,o.Lk)("div",Kt,[(0,o.Lk)("p",Yt,(0,r.v_)(n.formatPrice(l.allTotalSales)),1),t[0]||(t[0]=(0,o.Lk)("p",{class:"text-sm text-gray-600 mt-4"},"ยอดขายทั้งหมด",-1))])]),(0,o.Lk)("div",Ht,[t[3]||(t[3]=(0,o.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,o.Lk)("div",Gt,[(0,o.Lk)("p",es,(0,r.v_)(n.formatPrice(l.totalSales)),1),(0,o.Lk)("p",ts,[t[2]||(t[2]=(0,o.eW)("ยอดประจำวันที่ ")),(0,o.Lk)("strong",null,(0,r.v_)(n.formatDate(l.endDate)),1)])])]),(0,o.Lk)("div",ss,[t[5]||(t[5]=(0,o.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"}," person ")],-1)),(0,o.Lk)("div",as,[(0,o.Lk)("p",os,(0,r.v_)(n.formatNumber(l.customers.length)),1),t[4]||(t[4]=(0,o.Lk)("p",{class:"text-sm text-gray-600 mt-4"},"ลูกค้าทั้งหมด (AFF)",-1))])])])])}var rs={name:"HomePage",data(){return{allDailySales:[],allTotalSales:0,DailySales:[],totalSales:0,startDate:"",endDate:"",customers:[]}},computed:{},methods:{async fetchAllDailySales(){try{const e=await re.A.get("http://127.0.0.1:3333/sales/all-daily",{});this.allDailySales=e.data.data.allDailySales,this.allTotalSales=e.data.data.totalSales}catch(e){console.error("Error fetching sales data in range:",e)}},async fetchDailySales(e,t){try{const s=await re.A.get("http://127.0.0.1:3333/sales/daily",{params:{startDate:e,endDate:t}});this.dailySales=s.data.data.dailySales,this.totalSales=s.data.data.totalSales}catch(s){console.error("Error fetching sales data in range:",s)}},async fetchLookupData(){try{const[e,t,s,a,o,l,r,n,i]=await Promise.all([re.A.get("http://127.0.0.1:3333/customers"),re.A.get("http://127.0.0.1:3333/promotion-types"),re.A.get("http://127.0.0.1:3333/programs"),re.A.get("http://127.0.0.1:3333/packages"),re.A.get("http://127.0.0.1:3333/package-types"),re.A.get("http://127.0.0.1:3333/zone-deliveries"),re.A.get("http://127.0.0.1:3333/seller-names"),re.A.get("http://127.0.0.1:3333/payment-types"),re.A.get("http://127.0.0.1:3333/additional-types")]);this.customers=e.data,this.promotion_types=t.data,this.allPrograms=s.data||[],this.packages=a.data,this.package_types=o.data,this.zoneDeliveries=l.data,this.seller_names=r.data,this.payment_types=n.data.data,this.additional_types=i.data,this.updatePage,console.log("Fetched payment types:",n.data),console.log(this.paymentTypes)}catch(e){console.error("Error fetching lookup data:",e)}},formatDate(e){return e?new Intl.DateTimeFormat("en-UK",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e)):"-"},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatNumber(e){return new Intl.NumberFormat("th-TH",{}).format(e)}},created(){this.fetchAllDailySales(),this.fetchDailySales(),this.fetchLookupData();const e=new Date,t=e.toISOString().split("T")[0];this.endDate=t},mounted(){this.fetchAllDailySales(),this.fetchDailySales(),this.fetchLookupData()},beforeUnmount(){}};const ns=(0,ce.A)(rs,[["render",ls],["__scopeId","data-v-c29e753a"]]);var is=ns;const ds={class:"flex space-x-2 items-center relative"},cs={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},us={class:"text-m text-custom-orange font-bold"},ps={class:"ml-2"},hs={class:"add relative inline-block"},gs={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},ms={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},ys={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},ks={class:"p-6 space-y-4 overflow-y-auto flex-grow"},bs={key:0},xs={class:"flex-1"},fs={class:"relative"},ws={key:1},vs={key:1,class:"mt-4 p-4 border border-custom-orange rounded-md"},_s={class:"space-y-4 overflow-y-auto flex-grow mt-4"},Ls={class:"flex flex-wrap gap-4"},Ds={class:"flex-1"},Cs={class:"flex-1"},Ps={class:"flex-1"},Ms={class:"flex-1"},Ts={class:"flex flex-wrap gap-4"},Ss={class:"flex-1"},Es={class:"flex-1"},Rs={class:"flex-1"},As={class:"flex space-x-4"},Fs={class:"flex-1"},Os={class:"relative"},Xs={class:"flex-1"},zs={class:"relative"},Ns={key:2},Qs={class:"flex-1"},Vs={class:"block font-bold text-gray-700"},Is={class:"text-gray-600"},Bs={class:"text-gray-600"},js={class:"text-gray-600"},Us={key:3},$s={class:"block font-bold text-gray-700"},Ws={class:"text-gray-600"},qs={class:"text-gray-600"},Js={class:"text-gray-600"},Zs={key:4,class:"mt-4 p-4 border border-custom-orange rounded-md"},Ks={key:0},Ys={key:1},Hs={key:2},Gs={class:"flex-1"},ea={class:"flex space-x-4"},ta={class:"flex-1"},sa={class:"flex-1"},aa={key:5,class:"flex-1"},oa={class:"block font-bold text-gray-700"},la={class:"text-gray-600"},ra={class:"flex space-x-4"},na={class:"flex-1"},ia={class:"flex-1"},da={key:6,class:"flex-1"},ca={class:"block font-bold text-gray-700"},ua={class:"text-gray-600"},pa={class:"flex space-x-4"},ha={class:"flex-1"},ga={class:"flex-1"},ma={key:7,class:"flex-1"},ya={class:"block font-bold text-gray-700"},ka={class:"text-gray-600"},ba={class:"flex space-x-4"},xa={class:"flex-1"},fa={class:"flex-1"},wa={key:8,class:"flex-1"},va={class:"block font-bold text-gray-700"},_a={class:"text-gray-600"},La={key:9,class:"flex-1"},Da={class:"block font-bold text-gray-700"},Ca={class:"text-gray-600"},Pa={class:"text-gray-600"},Ma={key:10,class:"flex-1"},Ta={class:"block font-bold text-custom-orange"},Sa={key:0},Ea={class:"text-gray-600"},Ra={key:1},Aa={class:"text-gray-600"},Fa={class:"text-gray-600"},Oa={class:"flex space-x-4"},Xa={class:"flex-1"},za={class:"flex-1"},Na={class:"flex space-x-4"},Qa={class:"flex-1"},Va={class:"flex-1"},Ia={class:"mb-4"},Ba={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},ja={class:"flex space-x-2"},Ua={class:"filter relative inline-block",ref:"filterDropdown"},$a={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},Wa={class:"p-4 w-[500px] list-none"},qa={class:"grid grid-cols-3 gap-4"},Ja=["value"],Za={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Ka={class:"flex space-x-2"},Ya={class:"sort relative inline-block",ref:"sortDropdown"},Ha={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Ga={class:"list-none p-0 m-0"},eo={key:0,class:"material-symbols-outlined text-sm"},to={key:0,class:"material-symbols-outlined text-sm"},so={class:"flex w-[250px] relative"},ao={key:0,class:"p-4 flex items-left space-x-6 text-m font-bold"},oo={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},lo={class:"bg-custom-orange text-white"},ro={class:"px-4 py-2 align-top pb-5"},no={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},io={class:"px-4 py-2 align-top pb-5 font-bold"},co={class:"px-4 py-2 align-top pb-5"},uo={class:"px-4 py-2 align-top pb-5"},po={class:"px-4 py-2 align-top pb-5"},ho={key:0,class:"text-red-500 font-bold"},go={key:1},mo={class:"px-4 py-2 align-top pb-5"},yo={class:"px-4 py-2 align-top font-bold pb-5"},ko=["onClick"],bo={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},xo={class:"bg-white rounded-md w-1/3 max-w-lg"},fo={class:"font-bold"},wo={class:"p-6 space-y-4"},vo={class:"text-gray-700"},_o={key:0},Lo={key:1,class:"mt-4"},Do={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},Co=["onClick"],Po={key:0},Mo={class:"list-none p-0 m-0"},To=["onClick"],So=["onClick"],Eo=["onClick"],Ro=["onClick"],Ao={key:1},Fo={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},Oo={class:"list-none p-0 m-0"},Xo=["onClick"],zo=["onClick"],No=["onClick"],Qo=["onClick"],Vo={key:2},Io={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Bo={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},jo={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Uo={class:"flex space-x-2"},$o={class:"p-6",ref:"modalContent"},Wo={key:0},qo={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Jo={class:"bg-white rounded-md shadow-lg w-1/2 max-w-6xl h-auto max-h-[800px] flex flex-col"},Zo={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Ko={class:"flex space-x-2"},Yo={class:"pb-2 pt-2 overflow-y-auto flex-grow",ref:"modalContent"},Ho={key:0,class:"flex items-center space-x-4 pl-3 pr-3"},Go={class:"flex-1"},el={class:"mr-2"},tl={class:"flex-1"},sl={class:"flex-1"},al={key:1,class:"flex items-center space-x-4 pl-3 pr-3"},ol={class:"flex-1"},ll={class:"mr-2"},rl={class:"flex-1"},nl={class:"flex-1"},il={key:2,class:"flex items-center space-x-4 pl-3 pr-3"},dl={class:"flex-1"},cl={class:"mr-2"},ul={class:"flex-1"},pl={class:"flex-1"},hl={key:3,class:"flex items-center space-x-4 pl-3 pr-3"},gl={class:"flex-1"},ml={class:"mr-2"},yl={class:"flex-1"},kl={class:"flex-1"},bl={class:"mr-2 pl-3 pr-3"},xl={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},fl={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},wl={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},vl={class:"flex space-x-2"},_l={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Ll={class:"flex space-x-4"},Dl={class:"flex-1"},Cl={class:"relative"},Pl={class:"flex-1"},Ml={class:"relative"},Tl={key:0},Sl={class:"flex-1"},El={class:"block font-bold text-gray-700"},Rl={class:"text-gray-600"},Al={class:"text-gray-600"},Fl={class:"text-gray-600"},Ol={class:"flex space-x-4"},Xl={class:"flex-1"},zl={class:"flex-1"},Nl={key:1,class:"flex-1"},Ql={class:"block font-bold text-gray-700"},Vl={class:"text-gray-600"},Il={class:"flex space-x-4"},Bl={class:"flex-1"},jl={class:"flex-1"},Ul={key:2,class:"flex-2"},$l={class:"block font-bold text-gray-700"},Wl={class:"text-gray-600"},ql={class:"flex space-x-4"},Jl={class:"flex-1"},Zl={class:"flex-1"},Kl={key:3,class:"flex-1"},Yl={class:"block font-bold text-gray-700"},Hl={class:"text-gray-600"},Gl={class:"flex space-x-4"},er={class:"flex-1"},tr={class:"flex-1"},sr={key:4,class:"flex-1"},ar={class:"block font-bold text-gray-700"},or={class:"text-gray-600"},lr={key:5,class:"flex-1"},rr={class:"block font-bold text-gray-700"},nr={class:"text-gray-600"},ir={class:"text-gray-600"},dr={key:6,class:"flex-1"},cr={class:"block font-bold text-custom-orange"},ur={class:"text-gray-600"},pr={class:"text-gray-600"},hr={class:"flex space-x-4"},gr={class:"flex-1"},mr={class:"flex-1"},yr={class:"flex space-x-4"},kr={class:"flex-1"},br={class:"flex-1"},xr={class:"mb-4"},fr={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},wr={class:"flex space-x-2"},vr={key:3,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},_r={class:"bg-white rounded-lg shadow-md w-1/3"},Lr={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Dr={class:"flex justify-end space-x-2 p-4 border-t"},Cr={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},Pr=["disabled"],Mr={class:"flex items-center space-x-1"},Tr=["onClick"],Sr=["disabled"];function Er(e,t,s,l,n,i){const d=(0,o.g2)("multiselect"),c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[99]||(t[99]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[98]||(t[98]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[101]||(t[101]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[100]||(t[100]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",ds,[(0,o.Lk)("div",cs,[t[102]||(t[102]=(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"contact_page",-1)),t[103]||(t[103]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการบันทึกการขายทั้งหมด: ",-1)),(0,o.Lk)("span",us,(0,r.v_)(n.saleRecords.length)+" รายการ",1)]),n.selectedPackageType.length>0?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>i.clearFilter&&i.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[105]||(t[105]=(0,o.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,o.Lk)("span",ps,[t[104]||(t[104]=(0,o.eW)(" รีเซ็ตตัวกรอง ")),n.selectedPackageType.length>0?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)(" ("+(0,r.v_)(n.selectedPackageType.length)+") ",1)],64)):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0),(0,o.Lk)("div",hs,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[106]||(t[106]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มบันทึกการขาย",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",gs,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[108]||(t[108]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[107]||(t[107]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",ms,[(0,o.Lk)("div",ys,[t[109]||(t[109]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,o.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,o.Lk)("div",ks,[(0,o.Lk)("div",null,[t[110]||(t[110]=(0,o.Lk)("label",{for:"customer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.customer_id,"onUpdate:modelValue":t[6]||(t[6]=e=>n.saleRecord.customer_id=e),options:n.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[111]||(t[111]=(0,o.Lk)("label",{for:"package_type",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.package_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>n.saleRecord.package_type_id=e),options:n.packageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),n.saleRecord.package_type_id&&"additional sales"===n.saleRecord.package_type_id.name.toLowerCase()||n.saleRecord.package_type_id&&"consignment"===n.saleRecord.package_type_id.name.toLowerCase()?((0,o.uX)(),(0,o.CE)("div",bs,[(0,o.Lk)("div",null,[t[112]||(t[112]=(0,o.Lk)("label",{for:"additional_type",class:"block font-bold text-gray-700"},"ประเภทรายการ",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.additional_type_id,"onUpdate:modelValue":t[8]||(t[8]=e=>n.saleRecord.additional_type_id=e),options:n.additionalTypes,placeholder:"เลือกประเภทรายการ","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[113]||(t[113]=(0,o.Lk)("label",{for:"add_detail",class:"block text-gray-700 font-bold"},"รายละเอียดการขาย",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"add_detail","onUpdate:modelValue":t[9]||(t[9]=e=>n.saleRecord.add_detail=e),placeholder:"กรอกรายละเอียดการขาย",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[a.Jo,n.saleRecord.add_detail]])]),(0,o.Lk)("div",xs,[t[115]||(t[115]=(0,o.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,o.Lk)("div",fs,[t[114]||(t[114]=(0,o.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>n.saleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.add_price]])])])])):(0,o.Q3)("",!0),"additional sales"!==n.saleRecord.package_type_id?.name?.toLowerCase()&&"consignment"!==n.saleRecord.package_type_id?.name?.toLowerCase()?((0,o.uX)(),(0,o.CE)("div",ws,[(0,o.Lk)("div",null,[t[116]||(t[116]=(0,o.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.promotion_type_id,"onUpdate:modelValue":t[11]||(t[11]=e=>n.saleRecord.promotion_type_id=e),options:n.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[117]||(t[117]=(0,o.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.program_id,"onUpdate:modelValue":t[12]||(t[12]=e=>n.saleRecord.program_id=e),options:n.programs,placeholder:"เลือก Program","track-by":"id",label:"name",disabled:!n.saleRecord.promotion_type_id||!n.saleRecord.promotion_type_id.id},null,8,["modelValue","options","disabled"])]),(0,o.Lk)("div",null,[t[123]||(t[123]=(0,o.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.package_id,"onUpdate:modelValue":t[13]||(t[13]=e=>n.saleRecord.package_id=e),options:n.packages,placeholder:"เลือก Package","track-by":"id",label:"displayLabel",disabled:!n.saleRecord.program_id||!n.saleRecord.program_id.id},null,8,["modelValue","options","disabled"]),n.saleRecord.package_id&&n.saleRecord.package_id.id?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[14]||(t[14]=(0,a.D$)((e=>i.togglePackageDetails(n.saleRecord.package_id)),["prevent"])),class:"mt-2 cursor-pointer text-custom-orange text-left hover:underline"},(0,r.v_)(n.isShowingPackageDetails?"ปิดรายละเอียด":"ดูรายละเอียดแพ็คเกจ"),1)):(0,o.Q3)("",!0),n.packageDetails?((0,o.uX)(),(0,o.CE)("div",vs,[t[122]||(t[122]=(0,o.Lk)("h3",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,o.Lk)("p",null,[t[118]||(t[118]=(0,o.Lk)("strong",null,"Package:",-1)),(0,o.eW)(" "+(0,r.v_)(n.packageDetails.name),1)]),(0,o.Lk)("p",null,[t[119]||(t[119]=(0,o.Lk)("strong",null,"ราคา:",-1)),(0,o.eW)(" "+(0,r.v_)(i.formatPrice(n.packageDetails.price)),1)]),(0,o.Lk)("p",null,[t[120]||(t[120]=(0,o.Lk)("strong",null,"Package Details for Purchase Summary:",-1)),(0,o.eW)(" "+(0,r.v_)(n.packageDetails.package_detail),1)]),(0,o.Lk)("p",null,[t[121]||(t[121]=(0,o.Lk)("strong",null,"อายุการใช้งาน:",-1)),(0,o.eW)(" "+(0,r.v_)(n.packageDetails.package_validity)+" วัน ",1)])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",_s,[t[131]||(t[131]=(0,o.Lk)("strong",{class:"text-custom-orange text-lg"},"จำนวนที่แถม",-1)),(0,o.Lk)("div",Ls,[(0,o.Lk)("div",Ds,[t[124]||(t[124]=(0,o.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[15]||(t[15]=e=>n.saleRecord.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.free_mad]])]),(0,o.Lk)("div",Cs,[t[125]||(t[125]=(0,o.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[16]||(t[16]=e=>n.saleRecord.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.free_dessert]])]),(0,o.Lk)("div",Ps,[t[126]||(t[126]=(0,o.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[17]||(t[17]=e=>n.saleRecord.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.free_brittles]])]),(0,o.Lk)("div",Ms,[t[127]||(t[127]=(0,o.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[18]||(t[18]=e=>n.saleRecord.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.free_energy_balls]])])]),(0,o.Lk)("div",Ts,[(0,o.Lk)("div",Ss,[t[128]||(t[128]=(0,o.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[19]||(t[19]=e=>n.saleRecord.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.free_dressing]])]),(0,o.Lk)("div",Es,[t[129]||(t[129]=(0,o.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[20]||(t[20]=e=>n.saleRecord.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.free_yoghurt]])]),(0,o.Lk)("div",Rs,[t[130]||(t[130]=(0,o.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[21]||(t[21]=e=>n.saleRecord.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.free_granola]])])])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",As,[(0,o.Lk)("div",Fs,[t[133]||(t[133]=(0,o.Lk)("label",{for:"discount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,o.Lk)("div",Os,[t[132]||(t[132]=(0,o.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>n.saleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.discount]])])]),(0,o.Lk)("div",Xs,[t[135]||(t[135]=(0,o.Lk)("label",{for:"extraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,o.Lk)("div",zs,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[23]||(t[23]=e=>n.saleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[a.Jo,n.saleRecord.extra_charge]]),t[134]||(t[134]=(0,o.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),!i.isConsignmentOrAdditional&&i.computedTotalPackagePrice>0?((0,o.uX)(),(0,o.CE)("div",Ns,[(0,o.Lk)("div",Qs,[(0,o.Lk)("label",Vs," มูลค่าแพ็กเกจรวม: "+(0,r.v_)(i.formatPrice(i.computedTotalPackagePrice)),1),(0,o.Lk)("p",Is,"ราคาแพ็กเกจ: "+(0,r.v_)(i.formatPrice(n.saleRecord.package_price)),1),(0,o.Lk)("p",Bs,"ส่วนลดเพิ่มเติม: "+(0,r.v_)(i.formatPrice(n.saleRecord.discount)),1),(0,o.Lk)("p",js,"มูลค่า Extra Charge: "+(0,r.v_)(i.formatPrice(i.computedExtraChargePackagePrice)),1)])])):(0,o.Q3)("",!0),i.isConsignmentOrAdditional&&i.computedTotalAdditionalPrice>0?((0,o.uX)(),(0,o.CE)("div",Us,[(0,o.Lk)("label",$s," มูลค่าขาย: "+(0,r.v_)(i.formatPrice(i.computedTotalAdditionalPrice)),1),(0,o.Lk)("p",Ws,"มูลค่าขาย: "+(0,r.v_)(i.formatPrice(n.saleRecord.add_price)),1),(0,o.Lk)("p",qs,"ส่วนลดเพิ่มเติม: "+(0,r.v_)(i.formatPrice(n.saleRecord.discount)),1),(0,o.Lk)("p",Js,"มูลค่า Extra Charge: "+(0,r.v_)(i.formatPrice(i.computedExtraChargeAdditionalPrice)),1)])):(0,o.Q3)("",!0),n.saleRecord.address_1?((0,o.uX)(),(0,o.CE)("div",Zs,[t[139]||(t[139]=(0,o.Lk)("h3",{class:"font-bold"},"ที่อยู่ลูกค้า",-1)),n.saleRecord.address_1?((0,o.uX)(),(0,o.CE)("div",Ks,[(0,o.Lk)("p",null,[t[136]||(t[136]=(0,o.Lk)("strong",null,"ที่อยู่ 1:",-1)),(0,o.eW)(" "+(0,r.v_)(n.saleRecord.address_1),1)])])):(0,o.Q3)("",!0),n.saleRecord.address_2?((0,o.uX)(),(0,o.CE)("div",Ys,[(0,o.Lk)("p",null,[t[137]||(t[137]=(0,o.Lk)("strong",null,"ที่อยู่ 2:",-1)),(0,o.eW)(" "+(0,r.v_)(n.saleRecord.address_2),1)])])):(0,o.Q3)("",!0),n.saleRecord.address_3?((0,o.uX)(),(0,o.CE)("div",Hs,[(0,o.Lk)("p",null,[t[138]||(t[138]=(0,o.Lk)("strong",null,"ที่อยู่ 3:",-1)),(0,o.eW)(" "+(0,r.v_)(n.saleRecord.address_3),1)])])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Gs,[t[140]||(t[140]=(0,o.Lk)("label",{for:"receiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.receive_food_id,"onUpdate:modelValue":t[24]||(t[24]=e=>n.saleRecord.receive_food_id=e),options:n.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",ea,[(0,o.Lk)("div",ta,[t[141]||(t[141]=(0,o.Lk)("label",{for:"zone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.zone1_id,"onUpdate:modelValue":t[25]||(t[25]=e=>n.saleRecord.zone1_id=e),options:n.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",sa,[t[142]||(t[142]=(0,o.Lk)("label",{for:"zone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>n.saleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.zone1_quantity]])])]),i.computedZone1Price>0?((0,o.uX)(),(0,o.CE)("div",aa,[(0,o.Lk)("label",oa,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,r.v_)(i.formatPrice(i.computedZone1Price)),1),(0,o.Lk)("p",la,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.saleRecord.zone1_id.id))),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",ra,[(0,o.Lk)("div",na,[t[143]||(t[143]=(0,o.Lk)("label",{for:"zone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.zone2_id,"onUpdate:modelValue":t[27]||(t[27]=e=>n.saleRecord.zone2_id=e),options:n.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",ia,[t[144]||(t[144]=(0,o.Lk)("label",{for:"zone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[28]||(t[28]=e=>n.saleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.zone2_quantity]])])]),i.computedZone2Price>0?((0,o.uX)(),(0,o.CE)("div",da,[(0,o.Lk)("label",ca,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,r.v_)(i.formatPrice(i.computedZone2Price)),1),(0,o.Lk)("p",ua,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.saleRecord.zone2_id.id))),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",pa,[(0,o.Lk)("div",ha,[t[145]||(t[145]=(0,o.Lk)("label",{for:"zone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.zone3_id,"onUpdate:modelValue":t[29]||(t[29]=e=>n.saleRecord.zone3_id=e),options:n.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",ga,[t[146]||(t[146]=(0,o.Lk)("label",{for:"zone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[30]||(t[30]=e=>n.saleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.zone3_quantity]])])]),i.computedZone3Price>0?((0,o.uX)(),(0,o.CE)("div",ma,[(0,o.Lk)("label",ya,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,r.v_)(i.formatPrice(i.computedZone3Price)),1),(0,o.Lk)("p",ka,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.saleRecord.zone3_id.id))),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",ba,[(0,o.Lk)("div",xa,[t[147]||(t[147]=(0,o.Lk)("label",{for:"zone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.zone_outsource_id,"onUpdate:modelValue":t[31]||(t[31]=e=>n.saleRecord.zone_outsource_id=e),options:n.zoneDeliveries,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",fa,[t[148]||(t[148]=(0,o.Lk)("label",{for:"zone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[32]||(t[32]=e=>n.saleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.zone_outsource_quantity]])])]),i.computedZoneOutsourcePrice>0?((0,o.uX)(),(0,o.CE)("div",wa,[(0,o.Lk)("label",va,"ค่าจัดส่งรวม Outsource: "+(0,r.v_)(i.formatPrice(i.computedZoneOutsourcePrice)),1),(0,o.Lk)("p",_a,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.saleRecord.zone_outsource_id.id))),1)])):(0,o.Q3)("",!0),i.computedTotalDeliveryPrice>0?((0,o.uX)(),(0,o.CE)("div",La,[(0,o.Lk)("label",Da,"รวมค่าจัดส่งทั้งหมด: "+(0,r.v_)(i.formatPrice(i.computedTotalDeliveryPrice)),1),(0,o.Lk)("p",Ca,"ค่าจัดส่งรวม In-house Riders: "+(0,r.v_)(i.formatPrice(i.computedTotalZonePrice)),1),(0,o.Lk)("p",Pa,"ค่าจัดส่งรวม Outsource: "+(0,r.v_)(i.formatPrice(i.computedZoneOutsourcePrice)),1)])):(0,o.Q3)("",!0),i.computedTotalPrice>0?((0,o.uX)(),(0,o.CE)("div",Ma,[(0,o.Lk)("label",Ta,"มูลค่าขายรวม: "+(0,r.v_)(i.formatPrice(i.computedTotalPrice)),1),i.computedTotalPackagePrice>0?((0,o.uX)(),(0,o.CE)("div",Sa,[(0,o.Lk)("p",Ea,"มูลค่าแพ็กเกจรวม: "+(0,r.v_)(i.formatPrice(i.computedTotalPackagePrice)),1)])):(0,o.Q3)("",!0),i.computedTotalAdditionalPrice>0?((0,o.uX)(),(0,o.CE)("div",Ra,[(0,o.Lk)("p",Aa,"มูลค่าขาย: "+(0,r.v_)(i.formatPrice(i.computedTotalAdditionalPrice)),1)])):(0,o.Q3)("",!0),(0,o.Lk)("p",Fa,"รวมค่าจัดส่งทั้งหมด: "+(0,r.v_)(i.formatPrice(i.computedTotalDeliveryPrice)),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Oa,[(0,o.Lk)("div",Xa,[t[149]||(t[149]=(0,o.Lk)("label",{for:"sellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.seller_name_id,"onUpdate:modelValue":t[33]||(t[33]=e=>n.saleRecord.seller_name_id=e),options:n.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",za,[t[150]||(t[150]=(0,o.Lk)("label",{for:"startDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[34]||(t[34]=e=>n.saleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.start_date]])])]),(0,o.Lk)("div",Na,[(0,o.Lk)("div",Qa,[t[151]||(t[151]=(0,o.Lk)("label",{for:"deliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.delivery_round_id,"onUpdate:modelValue":t[35]||(t[35]=e=>n.saleRecord.delivery_round_id=e),options:n.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",Va,[t[152]||(t[152]=(0,o.Lk)("label",{for:"selectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.select_food_id,"onUpdate:modelValue":t[36]||(t[36]=e=>n.saleRecord.select_food_id=e),options:n.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",Ia,[t[153]||(t[153]=(0,o.Lk)("label",{for:"note",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"note","onUpdate:modelValue":t[37]||(t[37]=e=>n.saleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[a.Jo,n.saleRecord.note]])])]),(0,o.Lk)("div",Ba,[(0,o.Lk)("li",{onClick:t[38]||(t[38]=(...e)=>i.clearForm&&i.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[154]||(t[154]=[(0,o.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,o.Lk)("div",ja,[(0,o.Lk)("button",{onClick:t[39]||(t[39]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[40]||(t[40]=(...e)=>i.addSaleRecord&&i.addSaleRecord(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ua,[(0,o.Lk)("button",{onClick:t[41]||(t[41]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[155]||(t[155]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isFilterDropdownOpen?((0,o.uX)(),(0,o.CE)("div",$a,[(0,o.Lk)("div",Wa,[t[156]||(t[156]=(0,o.Lk)("h3",{class:"font-bold mb-2"},"กรองโดย Package Type",-1)),(0,o.Lk)("div",qa,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredPackageTypes,(e=>((0,o.uX)(),(0,o.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[42]||(t[42]=e=>n.selectedPackageType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,Ja),[[a.lH,n.selectedPackageType]]),(0,o.Lk)("span",null,(0,r.v_)(e.name),1)])))),128))])]),(0,o.Lk)("div",Za,[(0,o.Lk)("li",{onClick:t[43]||(t[43]=(...e)=>i.clearFilter&&i.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[157]||(t[157]=[(0,o.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,o.Lk)("div",Ka,[(0,o.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[45]||(t[45]=(...e)=>i.applyFilter&&i.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Ya,[(0,o.Lk)("button",{onClick:t[46]||(t[46]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[158]||(t[158]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Ha,[(0,o.Lk)("ul",Ga,[(0,o.Lk)("li",{onClick:t[47]||(t[47]=e=>i.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[159]||(t[159]=(0,o.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",eo,(0,r.v_)(1===n.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[48]||(t[48]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[160]||(t[160]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",to,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[49]||(t[49]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[161]||(t[161]=[(0,o.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",so,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[50]||(t[50]=e=>n.searchQuery=e),placeholder:"ค้นหาชื่อลูกค้า..",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[51]||(t[51]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[52]||(t[52]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[53]||(t[53]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),"/sale-records"===e.$route.path||"/sale-records-additional"===e.$route.path?((0,o.uX)(),(0,o.CE)("div",ao,[(0,o.bF)(c,{to:"sale-records",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records"===e.$route.path}])},{default:(0,o.k6)((()=>t[162]||(t[162]=[(0,o.eW)(" บันทึกการขาย 1st Timer, Package Renewal ")]))),_:1},8,["class"]),(0,o.bF)(c,{to:"sale-records-additional",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records-additional"===e.$route.path}])},{default:(0,o.k6)((()=>t[163]||(t[163]=[(0,o.eW)(" บันทึกการขาย Additional Sales ")]))),_:1},8,["class"])])):(0,o.Q3)("",!0),(0,o.Lk)("table",oo,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",lo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[i.filteredSaleRecords1standRenew.length>0?((0,o.uX)(!0),(0,o.CE)(o.FK,{key:0},(0,o.pI)(i.filteredSaleRecords1standRenew,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,o.Lk)("td",ro,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",no,(0,r.v_)(i.getCustomerName(e.customer_id)),1),(0,o.Lk)("td",io,(0,r.v_)(i.getPackageTypeName(e.package_type_id)),1),(0,o.Lk)("td",co,(0,r.v_)(i.getProgramName(e.program_id)),1),(0,o.Lk)("td",uo,(0,r.v_)(i.getPackageName(e.package_id)),1),(0,o.Lk)("td",po,[e.remaining_days<0?((0,o.uX)(),(0,o.CE)("span",ho," หมดอายุ ")):((0,o.uX)(),(0,o.CE)("span",go,(0,r.v_)(e.remaining_days)+" วัน ",1))]),(0,o.Lk)("td",mo,(0,r.v_)(i.formatDate(e.expiry_date)),1),(0,o.Lk)("td",yo,[(0,o.Lk)("button",{onClick:t=>i.openConfirmPaymentModal(e),class:(0,r.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none hover:text-gray-200",i.getPaymentStatusClass(e.payment_status)])},(0,r.v_)(i.getPaymentStatusText(e.payment_status)),11,ko),n.isConfirmPaymentModalOpen?((0,o.uX)(),(0,o.CE)("div",bo,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[165]||(t[165]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[54]||(t[54]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[164]||(t[164]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",xo,[(0,o.Lk)("div",{class:(0,r.C4)([{"bg-green-500":"unpaid"===n.selectedSaleRecord.payment_status,"bg-red-500":"paid"===n.selectedSaleRecord.payment_status},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,o.Lk)("span",fo,(0,r.v_)("paid"===n.selectedSaleRecord.payment_status?"เปลี่ยนสถานะเป็นยังไม่ได้ชำระเงิน":"ยืนยันการชำระเงิน"),1),(0,o.Lk)("button",{onClick:t[55]||(t[55]=(...e)=>i.closeConfirmPaymentModal&&i.closeConfirmPaymentModal(...e)),class:"text-white hover:text-gray-200"},t[166]||(t[166]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,o.Lk)("div",wo,[(0,o.Lk)("p",vo,(0,r.v_)("paid"===n.selectedSaleRecord.payment_status?'คุณต้องการเปลี่ยนสถานะเป็น "ยังไม่ได้ชำระเงิน" หรือไม่?':"กรุณาเลือกวันที่ชำระเงิน:"),1),"paid"!==n.selectedSaleRecord.payment_status?((0,o.uX)(),(0,o.CE)("div",_o,[(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[56]||(t[56]=e=>n.selectedPaidDate=e),class:"border border-gray-300 rounded px-4 py-2 w-full"},null,512),[[a.Jo,n.selectedPaidDate]])])):(0,o.Q3)("",!0),"paid"!==n.selectedSaleRecord.payment_status?((0,o.uX)(),(0,o.CE)("div",Lo,[t[167]||(t[167]=(0,o.Lk)("label",{for:"payment_types",class:"block text-gray-700"},"เลือกประเภทการชำระเงิน:",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.payment_type_id,"onUpdate:modelValue":t[57]||(t[57]=e=>n.selectedSaleRecord.payment_type_id=e),options:n.paymentTypes,label:"name","track-by":"id",placeholder:"เลือกประเภทการชำระเงิน"},null,8,["modelValue","options"])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Do,[(0,o.Lk)("button",{onClick:t[58]||(t[58]=(...e)=>i.closeConfirmPaymentModal&&i.closeConfirmPaymentModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[59]||(t[59]=(...e)=>i.confirmPayment&&i.confirmPayment(...e)),class:(0,r.C4)([{"bg-green-500 hover:bg-green-600":"unpaid"===n.selectedSaleRecord.payment_status,"bg-red-500 hover:bg-red-600":"paid"===n.selectedSaleRecord.payment_status},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,o.Lk)("button",{onClick:e=>i.toggleMoreDropdown(s)},t[168]||(t[168]=[(0,o.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,Co),i.filteredSaleRecords1standRenew.length>4?((0,o.uX)(),(0,o.CE)("div",Po,[n.moreOpenDropdownIndex===s?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)([i.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,o.Lk)("ul",Mo,[(0,o.Lk)("li",{onClick:t=>i.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,To),(0,o.Lk)("li",{onClick:t=>i.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,So),(0,o.Lk)("li",{onClick:t=>i.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,Eo),(0,o.Lk)("li",{onClick:t=>i.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,Ro)])],2)):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",Ao,[n.moreOpenDropdownIndex===s?((0,o.uX)(),(0,o.CE)("div",Fo,[(0,o.Lk)("ul",Oo,[(0,o.Lk)("li",{onClick:t=>i.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,Xo),(0,o.Lk)("li",{onClick:t=>i.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,zo),(0,o.Lk)("li",{onClick:t=>i.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,No),(0,o.Lk)("li",{onClick:t=>i.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,Qo)])])):(0,o.Q3)("",!0)]))],512)])))),128)):(0,o.Q3)("",!0),i.filteredSaleRecords1standRenew.length<6&&i.filteredSaleRecords1standRenew.length>0?((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(6-i.filteredSaleRecords1standRenew.length,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[169]||(t[169]=[(0,o.Lk)("td",{colspan:"8",class:"py-20"},null,-1)]))))),128)):(0,o.Q3)("",!0),0===i.filteredSaleRecords1standRenew.length?((0,o.uX)(),(0,o.CE)("tr",Vo,t[170]||(t[170]=[(0,o.Lk)("td",{colspan:"9",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isResultModalOpen?((0,o.uX)(),(0,o.CE)("div",Io,[(0,o.Lk)("div",Bo,[(0,o.Lk)("div",jo,[t[171]||(t[171]=(0,o.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,o.Lk)("div",Uo,[(0,o.Lk)("span",{onClick:t[60]||(t[60]=(...e)=>i.copyResultModalContent&&i.copyResultModalContent(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},(0,r.v_)(n.isCopied?"check_circle":"content_copy"),1),(0,o.Lk)("span",{onClick:t[61]||(t[61]=(...e)=>i.closeResultModal&&i.closeResultModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",$o,[t[172]||(t[172]=(0,o.Lk)("p",{class:"text-gray-500"},[(0,o.Lk)("strong",null,"📌 ขออนุญาตสรุปยอดนะคะ")],-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredResultSaleRecord,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"mb-2"},[(0,o.Lk)("p",null,["name"===t?((0,o.uX)(),(0,o.CE)("strong",Wo,[(0,o.eW)((0,r.v_)(i.formatResultLabel(t)),1),(0,o.Lk)("span",null,(0,r.v_)(e),1)])):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.Lk)("strong",null,(0,r.v_)(i.formatResultLabel(t)),1),(0,o.eW)(" "+(0,r.v_)(e),1)],64))])])))),128)),t[173]||(t[173]=(0,o.Lk)("p",{class:"text-gray-500"},[(0,o.Lk)("strong",null,"📌 กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1))],512)])])):(0,o.Q3)("",!0),n.isDetailModalOpen?((0,o.uX)(),(0,o.CE)("div",qo,[(0,o.Lk)("div",Jo,[(0,o.Lk)("div",Zo,[t[174]||(t[174]=(0,o.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,o.Lk)("div",Ko,[(0,o.Lk)("span",{onClick:t[62]||(t[62]=(...e)=>i.closeDetailModal&&i.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Yo,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredDetailSaleRecord,((e,s,a)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:(0,r.C4)(["p-2 rounded-md",a%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none"])},["zone1_id"===s?((0,o.uX)(),(0,o.CE)("div",Ho,[(0,o.Lk)("div",Go,[(0,o.Lk)("strong",el,(0,r.v_)(i.formatDetailLabel(s))+":",1),(0,o.eW)(" "+(0,r.v_)(e),1)]),(0,o.Lk)("div",tl,[t[175]||(t[175]=(0,o.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,o.eW)(" "+(0,r.v_)(this.selectedSaleRecord.zone1_quantity),1)]),(0,o.Lk)("div",sl,[t[176]||(t[176]=(0,o.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,o.eW)(" "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.selectedSaleRecord.zone1_id))),1)])])):"zone2_id"===s?((0,o.uX)(),(0,o.CE)("div",al,[(0,o.Lk)("div",ol,[(0,o.Lk)("strong",ll,(0,r.v_)(i.formatDetailLabel(s))+":",1),(0,o.eW)(" "+(0,r.v_)(e),1)]),(0,o.Lk)("div",rl,[t[177]||(t[177]=(0,o.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,o.eW)(" "+(0,r.v_)(this.selectedSaleRecord.zone2_quantity),1)]),(0,o.Lk)("div",nl,[t[178]||(t[178]=(0,o.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,o.eW)(" "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.selectedSaleRecord.zone2_id))),1)])])):"zone3_id"===s?((0,o.uX)(),(0,o.CE)("div",il,[(0,o.Lk)("div",dl,[(0,o.Lk)("strong",cl,(0,r.v_)(i.formatDetailLabel(s))+":",1),(0,o.eW)(" "+(0,r.v_)(e),1)]),(0,o.Lk)("div",ul,[t[179]||(t[179]=(0,o.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,o.eW)(" "+(0,r.v_)(this.selectedSaleRecord.zone3_quantity),1)]),(0,o.Lk)("div",pl,[t[180]||(t[180]=(0,o.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,o.eW)(" "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.selectedSaleRecord.zone3_id))),1)])])):"zone_outsource_id"===s?((0,o.uX)(),(0,o.CE)("div",hl,[(0,o.Lk)("div",gl,[(0,o.Lk)("strong",ml,(0,r.v_)(i.formatDetailLabel(s))+":",1),(0,o.eW)(" "+(0,r.v_)(e),1)]),(0,o.Lk)("div",yl,[t[181]||(t[181]=(0,o.Lk)("strong",{class:"font-bold mr-2"},"จำนวนครั้ง:",-1)),(0,o.eW)(" "+(0,r.v_)(this.selectedSaleRecord.zone_outsource_quantity),1)]),(0,o.Lk)("div",kl,[t[182]||(t[182]=(0,o.Lk)("strong",{class:"font-bold mr-2"},"ค่าจัดส่ง/ครั้ง:",-1)),(0,o.eW)(" "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.selectedSaleRecord.zone_outsource_id))),1)])])):((0,o.uX)(),(0,o.CE)(o.FK,{key:4},[(0,o.Lk)("strong",bl,(0,r.v_)(i.formatDetailLabel(s))+":",1),(0,o.eW)(" "+(0,r.v_)(e),1)],64))],2)))),128))],512)])])):(0,o.Q3)("",!0),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",xl,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[184]||(t[184]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[63]||(t[63]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[183]||(t[183]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",fl,[(0,o.Lk)("div",wl,[t[185]||(t[185]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไขบันทึกการขาย",-1)),(0,o.Lk)("div",vl,[(0,o.Lk)("span",{onClick:t[64]||(t[64]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",_l,[(0,o.Lk)("div",null,[t[186]||(t[186]=(0,o.Lk)("label",{for:"editCustomer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.customer_id,"onUpdate:modelValue":t[65]||(t[65]=e=>n.selectedSaleRecord.customer_id=e),options:n.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[187]||(t[187]=(0,o.Lk)("label",{for:"editPackageType",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.package_type_id,"onUpdate:modelValue":t[66]||(t[66]=e=>n.selectedSaleRecord.package_type_id=e),options:i.filteredPackageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[188]||(t[188]=(0,o.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.promotion_type_id,"onUpdate:modelValue":t[67]||(t[67]=e=>n.selectedSaleRecord.promotion_type_id=e),options:n.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[189]||(t[189]=(0,o.Lk)("label",{for:"editProgram",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.program_id,"onUpdate:modelValue":t[68]||(t[68]=e=>n.selectedSaleRecord.program_id=e),options:n.programs,placeholder:"เลือก Programs","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[190]||(t[190]=(0,o.Lk)("label",{for:"editPackage",class:"block font-bold text-gray-700"},"Package",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.package_id,"onUpdate:modelValue":t[69]||(t[69]=e=>n.selectedSaleRecord.package_id=e),options:n.packages,placeholder:"เลือก Package","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,o.Lk)("div",Ll,[(0,o.Lk)("div",Dl,[t[192]||(t[192]=(0,o.Lk)("label",{for:"editDiscount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,o.Lk)("div",Cl,[t[191]||(t[191]=(0,o.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[70]||(t[70]=e=>n.selectedSaleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSaleRecord.discount]])])]),(0,o.Lk)("div",Pl,[t[194]||(t[194]=(0,o.Lk)("label",{for:"editExtraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,o.Lk)("div",Ml,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[71]||(t[71]=e=>n.selectedSaleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[a.Jo,n.selectedSaleRecord.extra_charge]]),t[193]||(t[193]=(0,o.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),i.computedEditTotalPackagePrice>0?((0,o.uX)(),(0,o.CE)("div",Tl,[(0,o.Lk)("div",Sl,[(0,o.Lk)("label",El," มูลค่าแพ็กเกจรวม: "+(0,r.v_)(i.formatPrice(i.computedEditTotalPackagePrice)),1),(0,o.Lk)("p",Rl,"ราคาแพ็กเกจ: "+(0,r.v_)(i.formatPrice(n.selectedSaleRecord.package_price)),1),(0,o.Lk)("p",Al,"ส่วนลดเพิ่มเติม: "+(0,r.v_)(i.formatPrice(n.selectedSaleRecord.discount)),1),(0,o.Lk)("p",Fl,"มูลค่า Extra Charge: "+(0,r.v_)(i.formatPrice(i.computedEditExtraChargePackagePrice)),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("div",null,[t[195]||(t[195]=(0,o.Lk)("label",{for:"editReceiveFood",class:"block font-bold text-gray-700"},"วิธีการรับอาหาร",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.receive_food_id,"onUpdate:modelValue":t[72]||(t[72]=e=>n.selectedSaleRecord.receive_food_id=e),options:n.receiveFoods,placeholder:"เลือกวิธีการรับอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",Ol,[(0,o.Lk)("div",Xl,[t[196]||(t[196]=(0,o.Lk)("label",{for:"editZone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.zone1_id,"onUpdate:modelValue":t[73]||(t[73]=e=>n.selectedSaleRecord.zone1_id=e),options:n.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",zl,[t[197]||(t[197]=(0,o.Lk)("label",{for:"editZone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[74]||(t[74]=e=>n.selectedSaleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSaleRecord.zone1_quantity]])])]),i.computedEditZone1Price>0?((0,o.uX)(),(0,o.CE)("div",Nl,[(0,o.Lk)("label",Ql,"ค่าจัดส่งรวม (ที่อยู่ 1): "+(0,r.v_)(i.formatPrice(i.computedEditZone1Price)),1),(0,o.Lk)("p",Vl,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.selectedSaleRecord.zone1_id.id))),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Il,[(0,o.Lk)("div",Bl,[t[198]||(t[198]=(0,o.Lk)("label",{for:"editZone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.zone2_id,"onUpdate:modelValue":t[75]||(t[75]=e=>n.selectedSaleRecord.zone2_id=e),options:n.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",jl,[t[199]||(t[199]=(0,o.Lk)("label",{for:"editZone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[76]||(t[76]=e=>n.selectedSaleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSaleRecord.zone2_quantity]])])]),i.computedEditZone2Price>0?((0,o.uX)(),(0,o.CE)("div",Ul,[(0,o.Lk)("label",$l,"ค่าจัดส่งรวม (ที่อยู่ 2): "+(0,r.v_)(i.formatPrice(i.computedEditZone2Price)),1),(0,o.Lk)("p",Wl,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.selectedSaleRecord.zone2_id.id))),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",ql,[(0,o.Lk)("div",Jl,[t[200]||(t[200]=(0,o.Lk)("label",{for:"editZone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.zone3_id,"onUpdate:modelValue":t[77]||(t[77]=e=>n.selectedSaleRecord.zone3_id=e),options:n.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",Zl,[t[201]||(t[201]=(0,o.Lk)("label",{for:"editZone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[78]||(t[78]=e=>n.selectedSaleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSaleRecord.zone3_quantity]])])]),i.computedEditZone3Price>0?((0,o.uX)(),(0,o.CE)("div",Kl,[(0,o.Lk)("label",Yl,"ค่าจัดส่งรวม (ที่อยู่ 3): "+(0,r.v_)(i.formatPrice(i.computedEditZone3Price)),1),(0,o.Lk)("p",Hl,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.selectedSaleRecord.zone3_id.id))),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Gl,[(0,o.Lk)("div",er,[t[202]||(t[202]=(0,o.Lk)("label",{for:"editZone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.zone_outsource_id,"onUpdate:modelValue":t[79]||(t[79]=e=>n.selectedSaleRecord.zone_outsource_id=e),options:n.zoneDeliveries,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",tr,[t[203]||(t[203]=(0,o.Lk)("label",{for:"editZone_outsource_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[80]||(t[80]=e=>n.selectedSaleRecord.zone_outsource_quantity=e),id:"zone_outsource_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSaleRecord.zone_outsource_quantity]])])]),i.computedEditZoneOutsourcePrice>0?((0,o.uX)(),(0,o.CE)("div",sr,[(0,o.Lk)("label",ar,"ค่าจัดส่งรวม Outsource: "+(0,r.v_)(i.formatPrice(i.computedEditZoneOutsourcePrice)),1),(0,o.Lk)("p",or,"ค่าจัดส่ง/ครั้ง: "+(0,r.v_)(i.formatPrice(i.getZonePrice(n.selectedSaleRecord.zone_outsource_id.id))),1)])):(0,o.Q3)("",!0),i.computedEditTotalDeliveryPrice>0?((0,o.uX)(),(0,o.CE)("div",lr,[(0,o.Lk)("label",rr,"รวมค่าจัดส่งทั้งหมด: "+(0,r.v_)(i.formatPrice(i.computedEditTotalDeliveryPrice)),1),(0,o.Lk)("p",nr,"ค่าจัดส่งรวม In-house Riders: "+(0,r.v_)(i.formatPrice(i.computedEditTotalZonePrice)),1),(0,o.Lk)("p",ir,"ค่าจัดส่งรวม Outsource: "+(0,r.v_)(i.formatPrice(i.computedEditZoneOutsourcePrice)),1)])):(0,o.Q3)("",!0),i.computedEditTotalPrice>0?((0,o.uX)(),(0,o.CE)("div",dr,[(0,o.Lk)("label",cr,"มูลค่าขายรวม: "+(0,r.v_)(i.formatPrice(i.computedEditTotalPrice)),1),(0,o.Lk)("div",null,[(0,o.Lk)("p",ur,"มูลค่าแพ็กเกจรวม: "+(0,r.v_)(i.formatPrice(i.computedEditTotalPackagePrice)),1)]),(0,o.Lk)("p",pr,"รวมค่าจัดส่งทั้งหมด: "+(0,r.v_)(i.formatPrice(i.computedEditTotalDeliveryPrice)),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",hr,[(0,o.Lk)("div",gr,[t[204]||(t[204]=(0,o.Lk)("label",{for:"editSellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.seller_name_id,"onUpdate:modelValue":t[81]||(t[81]=e=>n.selectedSaleRecord.seller_name_id=e),options:n.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",mr,[t[205]||(t[205]=(0,o.Lk)("label",{for:"editStartDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[82]||(t[82]=e=>n.selectedSaleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSaleRecord.start_date]])])]),(0,o.Lk)("div",yr,[(0,o.Lk)("div",kr,[t[206]||(t[206]=(0,o.Lk)("label",{for:"editDeliveryRound",class:"block font-bold text-gray-700"},"รอบการจัดส่งอาหาร",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.delivery_round_id,"onUpdate:modelValue":t[83]||(t[83]=e=>n.selectedSaleRecord.delivery_round_id=e),options:n.deliveryRounds,placeholder:"เลือกรอบการจัดส่งอาหาร","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",br,[t[207]||(t[207]=(0,o.Lk)("label",{for:"editSelectFood",class:"block font-bold text-gray-700"},"เลือกอาหารโดย",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.select_food_id,"onUpdate:modelValue":t[84]||(t[84]=e=>n.selectedSaleRecord.select_food_id=e),options:n.selectFoods,placeholder:"เลือกอาหารโดย","track-by":"id",label:"name"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",xr,[t[208]||(t[208]=(0,o.Lk)("label",{for:"editNote",class:"block text-gray-700 font-bold"},"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"note","onUpdate:modelValue":t[85]||(t[85]=e=>n.selectedSaleRecord.note=e),placeholder:"กรอก Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[a.Jo,n.selectedSaleRecord.note]])])]),(0,o.Lk)("div",fr,[(0,o.Lk)("div",wr,[(0,o.Lk)("button",{onClick:t[86]||(t[86]=e=>n.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[87]||(t[87]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",vr,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[210]||(t[210]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[88]||(t[88]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[209]||(t[209]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",_r,[(0,o.Lk)("div",Lr,[t[211]||(t[211]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[89]||(t[89]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[212]||(t[212]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,o.Lk)("div",Dr,[(0,o.Lk)("button",{onClick:t[90]||(t[90]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[91]||(t[91]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Cr,[(0,o.Lk)("button",{onClick:t[92]||(t[92]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[213]||(t[213]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Pr),(0,o.Lk)("div",Mr,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[93]||(t[93]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[94]||(t[94]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Tr)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[95]||(t[95]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[96]||(t[96]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[97]||(t[97]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[214]||(t[214]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Sr)])])}s(8992),s(4520),s(2577);var Rr=s(8074),Ar={components:{Multiselect:Rr.Ay},data(){return{headers:["#","Customer's Name","Package Type","Program","Package","วันคงเหลือของแพ็กเกจ","วันหมดอายุแพ็กเกจ","สถานะการชำระเงิน",""],headerWidths:["5%","15%","10%","12%","13%","15%","13%","12%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],isAddModalOpen:!1,saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:"",total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],deliveryRounds:[],receiveFoods:[],selectFoods:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isFilterDropdownOpen:!1,selectedPackageType:[],isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,extra_charge_price:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:""},isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.filteredSaleRecords1standRenew.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{name:this.selectedSaleRecord.customer.name,package:this.selectedSaleRecord.package.package_detail,promotion_detail:this.selectedSaleRecord.package.promotion_detail,receive_food:this.totalReceiveFood,start_date:this.formatDate(this.selectedSaleRecord.start_date),sellect_by:this.getSelectFood(this.selectedSaleRecord.select_food_id),delivery_date:this.selectedSaleRecord.customer.delivery_date,delivery:this.getDeliveryRoundName(this.selectedSaleRecord.delivery_round_id),package_price:this.formatPrice(this.selectedSaleRecord.package.price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),note:this.selectedSaleRecord.note}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{seller_name_id:this.getSellerName(this.selectedSaleRecord.seller_name_id),name:this.selectedSaleRecord.customer?.name||"",package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),promotion_type:this.getPromotionTypeName(this.selectedSaleRecord.promotion_type_id)||"",program:this.getProgramName(this.selectedSaleRecord.program_id),package:this.selectedSaleRecord.package?.name||"",package_price:this.formatPrice(this.selectedSaleRecord.package?.price),promotion_detail:this.selectedSaleRecord.package?.promotion_detail||"",discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPercent(this.selectedSaleRecord.extra_charge),extra_charge_price:this.formatPrice(this.selectedSaleRecord.extra_charge_price),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),receive_food_id:this.getReceiveFoodName(this.selectedSaleRecord.receive_food_id),zone1_id:this.getZoneName(this.selectedSaleRecord.zone1_id),total_zone1_price:this.formatPrice(this.selectedSaleRecord.total_zone1_price),zone2_id:this.getZoneName(this.selectedSaleRecord.zone2_id),total_zone2_price:this.formatPrice(this.selectedSaleRecord.total_zone2_price),zone3_id:this.getZoneName(this.selectedSaleRecord.zone3_id),total_zone3_price:this.formatPrice(this.selectedSaleRecord.total_zone3_price),zone_outsource_id:this.getZoneName(this.selectedSaleRecord.zone_outsource_id),total_zone_outsource_price:this.formatPrice(this.selectedSaleRecord.total_zone_outsource_price),total_delivery_zone_price:this.formatPrice(this.selectedSaleRecord.total_delivery_zone_price),total_delivery_price:this.formatPrice(this.selectedSaleRecord.total_delivery_price),total_price:this.formatPrice(this.selectedSaleRecord.total_price),payment_status:this.getPaymentStatusText(this.selectedSaleRecord.payment_status),paid_date:this.formatDate(this.selectedSaleRecord.paid_date),payment_type_id:this.getPaymentTypeName(this.selectedSaleRecord.payment_type_id),start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),receive_date:this.formatDate(this.selectedSaleRecord.start_date),note:this.selectedSaleRecord.note||"",package_detail:this.selectedSaleRecord.package?.package_detail||"",delivery_date:this.selectedSaleRecord.customer?.delivery_date||"",select_food_id:this.getSelectFood(this.selectedSaleRecord.select_food_id)}:{name:"",expiry_date:""}},zone1_info(){const e=this.getZoneName(this.selectedSaleRecord.zone1_id),t=this.selectedSaleRecord.zone1_quantity;return`${e} (${t})`},zone1Name(){return this.selectedSaleRecord.zone1_id?this.getZoneName(this.selectedSaleRecord.zone1_id):"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.zone2_id?this.getZoneName(this.selectedSaleRecord.zone2_id):"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.zone3_id?this.getZoneName(this.selectedSaleRecord.zone3_id):"ไม่พบข้อมูล"},zoneOutsourceName(){return this.selectedSaleRecord.zone_outsource_id?this.getZoneName(this.selectedSaleRecord.zone_outsource_id):"ไม่พบข้อมูล"},totalReceiveFood(){let e=[];this.selectedSaleRecord.package.free_mad>0&&e.push(`${this.selectedSaleRecord.package.free_mad} x Main Dish`),this.selectedSaleRecord.package.free_dessert>0&&e.push(`${this.selectedSaleRecord.package.free_dessert} x Dessert`),this.selectedSaleRecord.package.free_brittles>0&&e.push(`${this.selectedSaleRecord.package.free_brittles} x Brittles`),this.selectedSaleRecord.package.free_energy_balls>0&&e.push(`${this.selectedSaleRecord.package.free_energy_balls} x Energy Balls`),this.selectedSaleRecord.package.free_dressing>0&&e.push(`${this.selectedSaleRecord.package.free_dressing} x Dressing`),this.selectedSaleRecord.package.free_yoghurt>0&&e.push(`${this.selectedSaleRecord.package.free_yoghurt} x Yoghurt`),this.selectedSaleRecord.package.free_granola>0&&e.push(`${this.selectedSaleRecord.package.free_granola} x Granola`);let t=e.length>0?e.join(" + "):"";return t},totalDeliveryPrice(){let e=[];null!==this.selectedSaleRecord.zone1_id&&this.selectedSaleRecord.zone1_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone1_id)} x ${this.selectedSaleRecord.zone1_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone2_id&&this.selectedSaleRecord.zone2_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone2_id)} x ${this.selectedSaleRecord.zone2_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone3_id&&this.selectedSaleRecord.zone3_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone3_id)} x ${this.selectedSaleRecord.zone3_quantity} ครั้ง`),null!==this.selectedSaleRecord.zone_outsource_id&&this.selectedSaleRecord.zone_outsource_quantity>0&&e.push(`${this.getZoneName(this.selectedSaleRecord.zone_outsource_id)} x ${this.selectedSaleRecord.zone_outsource_quantity} ครั้ง`);let t=e.length>0?`(${e.join(" + ")})`:"";return this.selectedSaleRecord.total_delivery_price>0?`${this.formatPrice(this.selectedSaleRecord.total_delivery_price)} ${t}`:""},filteredSaleRecords1standRenew(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t})).filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}))},filteredPackageTypes(){return this.packageTypes.filter((e=>!e.name.toLowerCase().includes("additional sales")&&!e.name.toLowerCase().includes("consignment")))},isConsignmentOrAdditional(){const e=this.saleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedExtraChargePackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalPackagePrice(){const e=Number(this.saleRecord.package_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargePackagePrice;return e+s-t},computedExtraChargeAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.extra_charge)||0;return e*t/100},computedTotalAdditionalPrice(){const e=Number(this.saleRecord.add_price)||0,t=Number(this.saleRecord.discount)||0,s=this.computedExtraChargeAdditionalPrice;return e+s-t},computedZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));return e&&this.saleRecord.zone1_quantity?e.price*this.saleRecord.zone1_quantity:0},computedZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));return e&&this.saleRecord.zone2_quantity?e.price*this.saleRecord.zone2_quantity:0},computedZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));return e&&this.saleRecord.zone3_quantity?e.price*this.saleRecord.zone3_quantity:0},computedTotalZonePrice(){return this.computedZone1Price+this.computedZone2Price+this.computedZone3Price},computedZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));return e&&this.saleRecord.zone_outsource_quantity?e.price*this.saleRecord.zone_outsource_quantity:0},computedTotalDeliveryPrice(){return this.computedTotalZonePrice+this.computedZoneOutsourcePrice},computedTotalPrice(){return this.computedTotalPackagePrice+this.computedTotalAdditionalPrice+this.computedTotalDeliveryPrice},isEditConsignmentOrAdditional(){const e=this.selectedSaleRecord.package_type_id?.name?.toLowerCase();return["consignment","additional sales"].includes(e)},computedEditExtraChargePackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.extra_charge)||0;return e*t/100},computedEditTotalPackagePrice(){const e=Number(this.selectedSaleRecord.package_price)||0,t=Number(this.selectedSaleRecord.discount)||0,s=this.computedEditExtraChargePackagePrice;return e+s-t},computedEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));return e&&this.selectedSaleRecord.zone1_quantity?e.price*this.selectedSaleRecord.zone1_quantity:0},computedEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));return e&&this.selectedSaleRecord.zone2_quantity?e.price*this.selectedSaleRecord.zone2_quantity:0},computedEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));return e&&this.selectedSaleRecord.zone3_quantity?e.price*this.selectedSaleRecord.zone3_quantity:0},computedEditTotalZonePrice(){return this.computedEditZone1Price+this.computedEditZone2Price+this.computedEditZone3Price},computedEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));return e&&this.selectedSaleRecord.zone_outsource_quantity?e.price*this.selectedSaleRecord.zone_outsource_quantity:0},computedEditTotalDeliveryPrice(){return this.computedEditTotalZonePrice+this.computedEditZoneOutsourcePrice},computedEditTotalPrice(){return this.computedEditTotalPackagePrice+this.computedEditTotalDeliveryPrice},...(0,Fe.L8)(["saleRecords"])},methods:{...(0,Fe.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),resetProgramAndPackage(){this.saleRecord.program_id=null,this.saleRecord.package_id=null},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),a=s.getDate(),o=t[s.getMonth()],l=s.getFullYear();return`${a} ${o} ${l}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.filteredSaleRecords1standRenew.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s})).slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedPackageType.length||this.selectedPackageType.includes(e.package_type_id);return t&&s}));this.currentPage=1,this.filteredSaleRecords=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let a,o;return"name"===e?(a=this.getCustomerName(t.customer_id),o=this.getCustomerName(s.customer_id)):(a=t[e],o=s[e]),a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPackageType.length>0?this.filteredSaleRecords=this.packageTypes.filter((e=>this.selectedPackageType.includes(e.package_type_id))):this.filteredSaleRecords=this.saleRecords,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPackageType=[],this.filteredSaleRecords=this.saleRecords,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredSaleRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},openAddModal(){this.isAddModalOpen=!0},async addSaleRecord(){if(this.saleRecord.customer_id)try{const e=await re.A.post("http://127.0.0.1:3333/sale-records",{customer_id:this.saleRecord.customer_id?.id||null,promotion_type_id:this.saleRecord.promotion_type_id?.id||null,program_id:this.saleRecord.program_id?.id||null,package_id:this.saleRecord.package_id?.id||null,package_type_id:this.saleRecord.package_type_id?.id||null,seller_name_id:this.saleRecord.seller_name_id?.id||null,delivery:this.saleRecord.delivery||"",discount:this.saleRecord.discount||0,extra_charge:this.saleRecord.extra_charge||0,payment_status:this.saleRecord.payment_status||"unpaid",paid_date:this.saleRecord.paid_date||null,payment_type_id:this.saleRecord.payment_type_id?.id||null,start_date:this.saleRecord.start_date||null,zone1_id:this.saleRecord.zone1_id?.id||null,zone1_quantity:this.saleRecord.zone1_quantity||0,zone2_id:this.saleRecord.zone2_id?.id||null,zone2_quantity:this.saleRecord.zone2_quantity||0,zone3_id:this.saleRecord.zone3_id?.id||null,zone3_quantity:this.saleRecord.zone3_quantity||0,zone_outsource_id:this.saleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.saleRecord.zone_outsource_quantity||0,additional_type_id:this.saleRecord.additional_type_id?.id||null,add_detail:this.saleRecord.add_detail||null,add_price:this.saleRecord.add_price||0,delivery_round_id:this.saleRecord.delivery_round_id?.id||null,select_food_id:this.saleRecord.select_food_id?.id||null,receive_food_id:this.saleRecord.receive_food_id?.id||null,note:this.saleRecord.note||null,free_mad:this.saleRecord.free_mad||0,free_dessert:this.saleRecord.free_dessert||0,free_brittles:this.saleRecord.free_brittles||0,free_energy_balls:this.saleRecord.free_energy_balls||0,free_dressing:this.saleRecord.free_dressing||0,free_yoghurt:this.saleRecord.free_yoghurt||0,free_granola:this.saleRecord.free_granola||0});this.saleRecords.push(e.data),this.closeAddModal(),this.filterPrograms(),this.filterPackages(),await this.fetchSaleRecords(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){console.error("Error adding sale record:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการเพิ่มข้อมูล!"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},clearForm(){this.saleRecord={customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0,receive_food_id:"",select_food_id:"",delivery_round_id:"",note:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0},this.packageDetails=null,this.isShowingPackageDetails=!1,this.customerAddress=null,this.filterPrograms(),this.filterPackages()},openEditModal(e){const t=e=>{if(!e)return null;const t=new Date(e);return t.toLocaleDateString("en-CA")};this.selectedSaleRecord={...e,start_date:t(e.start_date),customer_id:this.customers.find((t=>t.id===e.customer_id))||null,package_type_id:this.packageTypes.find((t=>t.id===e.package_type_id))||null,promotion_type_id:this.promotionTypes.find((t=>t.id===e.promotion_type_id))||null,program_id:this.programs.find((t=>t.id===e.program_id))||null,package_id:this.packages.find((t=>t.id===e.package_id))||null,receive_food_id:this.receiveFoods.find((t=>t.id===e.receive_food_id))||null,zone1_id:this.zoneDeliveries.find((t=>t.id===e.zone1_id))||null,zone2_id:this.zoneDeliveries.find((t=>t.id===e.zone2_id))||null,zone3_id:this.zoneDeliveries.find((t=>t.id===e.zone3_id))||null,zone_outsource_id:this.zoneDeliveries.find((t=>t.id===e.zone_outsource_id))||null,seller_name_id:this.zoneDeliveries.find((t=>t.id===e.seller_name_id))||null,delivery_round_id:this.deliveryRounds.find((t=>t.id===e.delivery_round_id))||null,select_food_id:this.selectFoods.find((t=>t.id===e.select_food_id))||null,paid_date:t(e.paid_date),payment_type_id:this.paymentTypes.find((t=>t.id===e.payment_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){if(this.selectedSaleRecord.customer_id)try{const e=await re.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}`,{customer_id:this.selectedSaleRecord.customer_id?.id||null,promotion_type_id:this.selectedSaleRecord.promotion_type_id?.id||null,program_id:this.selectedSaleRecord.program_id?.id||null,package_id:this.selectedSaleRecord.package_id?.id||null,package_type_id:this.selectedSaleRecord.package_type_id?.id||null,seller_name_id:this.selectedSaleRecord.seller_name_id?.id||null,delivery:this.selectedSaleRecord.delivery||"",discount:this.selectedSaleRecord.discount||0,extra_charge:this.selectedSaleRecord.extra_charge||0,start_date:this.selectedSaleRecord.start_date||null,zone1_id:this.selectedSaleRecord.zone1_id?.id||null,zone1_quantity:this.selectedSaleRecord.zone1_quantity||0,zone2_id:this.selectedSaleRecord.zone2_id?.id||null,zone2_quantity:this.selectedSaleRecord.zone2_quantity||0,zone3_id:this.selectedSaleRecord.zone3_id?.id||null,zone3_quantity:this.selectedSaleRecord.zone3_quantity||0,zone_outsource_id:this.selectedSaleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.selectedSaleRecord.zone_outsource_quantity||0,additional_type_id:this.selectedSaleRecord.additional_type_id?.id||null,add_detail:this.selectedSaleRecord.add_detail||null,add_price:this.selectedSaleRecord.add_price||0,delivery_round_id:this.selectedSaleRecord.delivery_round_id?.id||null,select_food_id:this.selectedSaleRecord.select_food_id?.id||null,receive_food_id:this.selectedSaleRecord.receive_food_id?.id||null,note:this.selectedSaleRecord.note||null}),t=this.saleRecords.findIndex((e=>e.id===this.selectedSaleRecord.id));-1!==t&&(this.saleRecords[t]=e.data),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.isEditModalOpen=!1,await this.fetchSaleRecords()}catch(e){console.error("Error saving changes:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeEditModal(){this.isEditModalOpen=!1,this.selectedSaleRecord={}},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,a,o,l,r,n,i,d,c,u,p]=await Promise.all([re.A.get("http://127.0.0.1:3333/customers"),re.A.get("http://127.0.0.1:3333/promotion-types"),re.A.get("http://127.0.0.1:3333/programs"),re.A.get("http://127.0.0.1:3333/packages"),re.A.get("http://127.0.0.1:3333/package-types"),re.A.get("http://127.0.0.1:3333/zone-deliveries"),re.A.get("http://127.0.0.1:3333/zone-delivery-types"),re.A.get("http://127.0.0.1:3333/seller-names"),re.A.get("http://127.0.0.1:3333/payment-types"),re.A.get("http://127.0.0.1:3333/additional-types"),re.A.get("http://127.0.0.1:3333/delivery-rounds"),re.A.get("http://127.0.0.1:3333/receive-foods"),re.A.get("http://127.0.0.1:3333/select-foods")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=a.data.filter((e=>{if(!e.start_date)return e.displayLabel=e.name,!0;const t=new Date(e.start_date),s=(new Date).getMonth(),a=t.getMonth();if(a===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],a=s[t.getMonth()],o=t.getFullYear();return e.displayLabel=`${e.name} (${a} ${o})`,!0}return!1})),this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=o.data,this.zoneDeliveries=l.data,this.zoneDeliveryTypes=r.data,this.sellerNames=n.data,this.paymentTypes=i.data.data,this.additionalTypes=d.data,this.deliveryRounds=c.data,this.receiveFoods=u.data,this.selectFoods=p.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await re.A.get("http://127.0.0.1:3333/sale-records");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPromotionTypeName(e){const t=this.promotionTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));if(t){const e=this.promotionTypes.find((e=>e.id===t.promotion_type_id)),s=e?e.name:"ไม่มีโปรโมชั่น";return`${t.name} (${s})`}return"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));if(t){if(!t.start_date)return t.name;const e=new Date(t.start_date),s=(new Date).getMonth(),a=e.getMonth();if(a===s){const s=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],a=s[e.getMonth()],o=e.getFullYear();return`${t.name} (${a} ${o})`}return t.name}return"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPaymentTypeName(e){const t=this.paymentTypes.find((t=>t.id===e));return t?t.name:null},getZoneName(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectFood(e){const t=this.selectFoods.find((t=>t.id===e));return t?t.name:" "},getReceiveFoodName(e){const t=this.receiveFoods.find((t=>t.id===e));return t?t.name:""},getDeliveryRoundName(e){const t=this.deliveryRounds.find((t=>t.id===e));return t?t.name:" "},getSellerName(e){const t=this.sellerNames.find((t=>t.id===e));return t?t.name:" "},getZonePrice(e){const t=this.zoneDeliveries.find((t=>t.id===e));return t?t.price:0},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/sale-records/${this.itemToDelete}`),this.saleRecords=this.saleRecords.filter((e=>e.id!==this.itemToDelete)),this.showFailToastNotification("ลบข้อมูลสำเร็จ!"),this.closeDeleteModal(),this.updatePage()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1},formatDetailLabel(e){const t={seller_name_id:"ผู้ขาย",name:"ชื่อ-สกุลลูกค้า",package_type:"Package Type",promotion_type:"Promotion Type",program:"Program",package:"แพ็กเกจที่ซื้อ ",package_price:"ราคาแพ็กเกจ",promotion_detail:"รายละเอียดโปรโมชัน",discount:"ส่วนลดเพิ่มเติมจากโปรฯ ประจำเดือน (ถ้ามี)",extra_charge:"Extra Charge (%)",extra_charge_price:"มูลค่า Extra Charge",total_package_price:"มูลค่าแพ็กเกจรวม",receive_food_id:"วิธีการรับอาหาร",zone1_id:"In-house Riders (ที่อยู่ 1)",total_zone1_price:"ค่าจัดส่งรวม (ที่อยู่ 1)",zone2_id:"In-house Riders (ที่อยู่ 2)",total_zone2_price:"ค่าจัดส่งรวม (ที่อยู่ 2)",zone3_id:"In-house Riders (ที่อยู่ 3)",total_zone3_price:"ค่าจัดส่งรวม (ที่อยู่ 3)",zone_outsource_id:"Outsource Riders",total_zone_outsource_price:"ค่าจัดส่งรวม Outsource",total_delivery_zone_price:"ค่าจัดส่งรวม In-house Riders",total_delivery_price:"รวมค่าจัดส่งทั้งหมด",total_price:"มูลค่าขายรวม",payment_status:"สถานะการชำระเงิน",paid_date:"วันที่ชำระเงิน",payment_type_id:"วิธีการชำระเงิน",receive_date:"วันเริ่มรับอาหารวันแรก",sellect_by:"เลือกอาหารโดย",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",note:"Note รายละเอียดโปรโมชันสำหรับส่งสรุปให้ลูกค้า (ถ้ามี)",package_detail:"ข้อมูลแพ็กเกจ(สำหรับสรุปให้ลูกค้า)",delivery_date:"วันที่ต้องการรับอาหาร",select_food_id:"วิธีการเลือกอาหาร"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},onViewResultSaleRecord(e){this.selectedSaleRecord=e,this.isResultModalOpen=!0,this.moreOpenDropdownIndex=null},closeResultModal(){this.isResultModalOpen=!1},formatResultLabel(e){const t={name:"🏷 คุณ",package:"▶️ แพ็คเกจ",promotion_detail:"🔥",receive_food:"▶️ อาหารที่ได้รับ",start_date:"▶️ วันรับอาหารวันแรก",sellect_by:"▶️ เลือกอาหารโดย",delivery_date:"▶️ วันที่รับอาหาร",delivery:"▶️ จัดส่ง",package_price:"▶️ ราคาแพ็คเกจ",extra_charge:"▶️ Extra Chrage",discount:"▶️ ส่วนลด",total_delivery_price:"▶️ ค่าจัดส่ง",total_price:"▶️ ยอดชำระ",expiry_date:"▶️ วันหมดอายุแพ็คเกจ",note:"▶️ หมายเหตุ:"};return t[e]||e},copyResultModalContent(){let e=this.$refs.modalContent.innerText;if(e=e.replace(/\n\s*\n/g,"\n"),navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)})).catch((e=>{console.error("ไม่สามารถคัดลอกข้อความ:",e)}));else{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)}catch(t){console.error("ไม่สามารถคัดลอกข้อความ:",t)}finally{document.body.removeChild(s)}}},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1)},calculateTotalPrice(){if(!this.saleRecord.package_id)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.saleRecord.package_id.id));if(!e)return this.saleRecord.package_price=0,this.saleRecord.total_package_price=0,void(this.saleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.saleRecord.extra_charge)||0,a=parseFloat(this.saleRecord.discount)||0,o=t*s/100;this.saleRecord.extra_charge_price=o,this.saleRecord.package_price=t,this.saleRecord.total_package_price=t+o-a},calculateZone1Price(){if(!this.saleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone1_id.id));e&&this.saleRecord.zone1_quantity&&(this.computedZone1Price=e.price*this.saleRecord.zone1_quantity)},calculateZone2Price(){if(!this.saleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone2_id.id));e&&this.saleRecord.zone2_quantity&&(this.computedZone2Price=e.price*this.saleRecord.zone2_quantity)},calculateZone3Price(){if(!this.saleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone3_id.id));e&&this.saleRecord.zone3_quantity&&(this.computedZone3Price=e.price*this.saleRecord.zone3_quantity)},calculateZoneOutsourcePrice(){if(!this.saleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.saleRecord.zone_outsource_id.id));e&&this.saleRecord.zone_outsource_quantity&&(this.computedZoneOutsourcePrice=e.price*this.saleRecord.zone_outsource_quantity)},calculateEditTotalPrice(){if(!this.selectedSaleRecord.package_id)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const e=this.packages.find((e=>e.id===this.selectedSaleRecord.package_id?.id));if(!e)return this.selectedSaleRecord.package_price=0,this.selectedSaleRecord.total_package_price=0,void(this.selectedSaleRecord.extra_charge_price=0);const t=parseFloat(e.price)||0,s=parseFloat(this.selectedSaleRecord.extra_charge)||0,a=parseFloat(this.selectedSaleRecord.discount)||0,o=t*s/100;this.selectedSaleRecord.extra_charge_price=o,this.selectedSaleRecord.package_price=t,this.selectedSaleRecord.total_package_price=t+o-a},calculateEditZone1Price(){if(!this.selectedSaleRecord.zone1_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone1_id.id));e&&this.selectedSaleRecord.zone1_quantity&&(this.computedEditZone1Price=e.price*this.selectedSaleRecord.zone1_quantity)},calculateEditZone2Price(){if(!this.selectedSaleRecord.zone2_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone2_id.id));e&&this.selectedSaleRecord.zone2_quantity&&(this.computedEditZone2Price=e.price*this.selectedSaleRecord.zone2_quantity)},calculateEditZone3Price(){if(!this.selectedSaleRecord.zone3_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone3_id.id));e&&this.selectedSaleRecord.zone3_quantity&&(this.computedEditZone3Price=e.price*this.selectedSaleRecord.zone3_quantity)},calculateEditZoneOutsourcePrice(){if(!this.selectedSaleRecord.zone_outsource_id)return 0;const e=this.zoneDeliveries.find((e=>e.id===this.selectedSaleRecord.zone_outsource_id.id));e&&this.selectedSaleRecord.zone_outsource_quantity&&(this.computedEditZoneOutsourcePrice=e.price*this.selectedSaleRecord.zone_outsource_quantity)},clearNotAdditionalForm(){this.saleRecord.add_detail=null,this.saleRecord.additional_type_id=null,this.saleRecord.add_price=0},clearAdditionalForm(){this.saleRecord.promotion_type_id=null,this.saleRecord.program_id=null,this.saleRecord.package_id=null},checkPackageType(){!this.saleRecord.package_type_id||"additional sales"!==this.saleRecord.package_type_id.name.toLowerCase()&&"consignment"!==this.saleRecord.package_type_id.name.toLowerCase()?this.clearNotAdditionalForm():this.clearAdditionalForm()},openConfirmPaymentModal(e){this.selectedSaleRecord=e,this.selectedPaidDate=e.paid_date||"",this.isConfirmPaymentModalOpen=!0},closeConfirmPaymentModal(){this.isConfirmPaymentModalOpen=!1,this.selectedPaidDate=""},async confirmPayment(){try{const e="paid"===this.selectedSaleRecord.payment_status?"unpaid":"paid",t="paid"===e?this.selectedPaidDate:null,s="paid"===e?this.selectedSaleRecord.payment_type_id?.id:null;if("paid"===e&&(!this.selectedPaidDate||!s))return void this.showErrorToastNotification("กรุณาเลือกข้อมูลให้ครบ!");const a={payment_status:e,paid_date:t,payment_type_id:s},o=await re.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}/payment-status`,a);if(await this.fetchSaleRecords(),200!==o.status)throw new Error("Unexpected response status");{const e=o.data.data,t=this.saleRecords.findIndex((t=>t.id===e.id));-1!==t&&(this.saleRecords[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error updating payment status:",e),console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmPaymentModal()},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.promotion_type_id":function(){this.filterPrograms()},"saleRecord.program_id":function(){this.filterPackages()},"saleRecord.package_id"(){this.calculateTotalPrice()},"saleRecord.discount"(){this.calculateTotalPrice()},"saleRecord.extra_charge"(){this.calculateTotalPrice()},"saleRecord.zone1_id"(){this.calculateZone1Price()},"saleRecord.zone1_quantity"(){this.calculateZone1Price()},"saleRecord.zone2_id"(){this.calculateZone2Price()},"saleRecord.zone2_quantity"(){this.calculateZone2Price()},"saleRecord.zone3_id"(){this.calculateZone3Price()},"saleRecord.zone3_quantity"(){this.calculateZone3Price()},"saleRecord.zone_outsource_id"(){this.calculateZoneOutsourcePrice()},"saleRecord.zone_outsource_quantity"(){this.calculateZoneOutsourcePrice()},"saleRecord.package_type_id":"checkPackageType","selectedSaleRecord.package_id"(){this.calculateEditTotalPrice()},"selectedSaleRecord.discount"(){this.calculateEditTotalPrice()},"selectedSaleRecord.extra_charge"(){this.calculateEditTotalPrice()},"selectedSaleRecord.zone1_id"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone1_quantity"(){this.calculateEditZone1Price()},"selectedSaleRecord.zone2_id"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone2_quantity"(){this.calculateEditZone2Price()},"selectedSaleRecord.zone3_id"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone3_quantity"(){this.calculateEditZone3Price()},"selectedSaleRecord.zone_outsource_id"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.zone_outsource_quantity"(){this.calculateEditZoneOutsourcePrice()},"selectedSaleRecord.package_type_id":"checkEditPackageType"},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Fr=(0,ce.A)(Ar,[["render",Er]]);var Or=Fr;const Xr={class:"flex space-x-2 items-center relative"},zr={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Nr={class:"text-m text-custom-orange font-bold"},Qr={class:"add relative inline-block"},Vr={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Ir={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Br={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},jr={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Ur={key:0},$r={class:"flex-1"},Wr={class:"relative"},qr={key:1},Jr={class:"flex-1"},Zr={class:"relative"},Kr={key:2},Yr={class:"flex space-x-4"},Hr={class:"flex-1"},Gr={class:"relative"},en={class:"flex-1"},tn={class:"relative"},sn={key:3,class:"mt-4 p-4 border border-custom-orange rounded-md"},an={key:0},on={key:1},ln={key:2},rn={class:"flex space-x-4"},nn={class:"flex-1"},dn={class:"flex-1"},cn={class:"flex space-x-4"},un={class:"flex-1"},pn={class:"flex-1"},hn={class:"flex space-x-4"},gn={class:"flex-1"},mn={class:"flex-1"},yn={class:"flex space-x-4"},kn={class:"flex-1"},bn={class:"flex-1"},xn={class:"flex space-x-4"},fn={class:"flex-1"},wn={class:"flex-1"},vn={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},_n={class:"flex space-x-2"},Ln={class:"sort relative inline-block",ref:"sortDropdown"},Dn={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Cn={class:"list-none p-0 m-0"},Pn={key:0,class:"material-symbols-outlined text-sm"},Mn={key:0,class:"material-symbols-outlined text-sm"},Tn={class:"flex w-[250px] relative"},Sn={key:0,class:"p-4 flex items-left space-x-6 text-m font-bold"},En={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},Rn={class:"bg-custom-orange text-white"},An={class:"px-4 py-2 align-top pb-5"},Fn={class:"px-4 py-2 align-top pb-5 font-bold text-custom-orange"},On={class:"px-4 py-2 align-top pb-5"},Xn={class:"px-4 py-2 align-top pb-5"},zn={class:"px-4 py-2 align-top pb-5"},Nn={class:"px-4 py-2 align-top pb-5"},Qn={class:"px-4 py-2 align-top font-bold pb-5"},Vn=["onClick"],In={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},Bn={class:"bg-white rounded-md w-1/3 max-w-lg"},jn={class:"font-bold"},Un={class:"p-6 space-y-4"},$n={class:"text-gray-700"},Wn={key:0},qn={key:1,class:"mt-4"},Jn={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},Zn=["onClick"],Kn={key:0},Yn={class:"list-none p-0 m-0"},Hn=["onClick"],Gn=["onClick"],ei=["onClick"],ti=["onClick"],si={key:1},ai={key:0,class:"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"},oi={class:"list-none p-0 m-0"},li=["onClick"],ri=["onClick"],ni=["onClick"],ii=["onClick"],di={key:2},ci={key:0,class:"modal fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-10 z-50"},ui={class:"bg-white rounded-md shadow-lg w-1000"},pi={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},hi={class:"flex space-x-2"},gi={class:"p-6",ref:"modalContent"},mi={key:1,class:"modal fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-10 z-50"},yi={class:"bg-white rounded-md shadow-lg w-1000"},ki={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},bi={class:"flex space-x-2"},xi={class:"p-6",ref:"modalContent"},fi={key:2,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},wi={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},vi={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},_i={class:"flex space-x-2"},Li={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Di={class:"mb-4"},Ci={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Pi={class:"flex space-x-2"},Mi={key:3,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},Ti={class:"bg-white rounded-lg shadow-md w-1/3"},Si={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Ei={class:"flex justify-end space-x-2 p-4"},Ri={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1 border-t border-t-gray-200"},Ai=["disabled"],Fi={class:"flex items-center space-x-1"},Oi=["onClick"],Xi=["disabled"];function zi(e,t,s,l,n,i){const d=(0,o.g2)("multiselect"),c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[63]||(t[63]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[62]||(t[62]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[65]||(t[65]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[64]||(t[64]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",Xr,[(0,o.Lk)("div",zr,[t[66]||(t[66]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการบันทึกการขายทั้งหมด: ",-1)),(0,o.Lk)("span",Nr,(0,r.v_)(n.saleRecords.length)+" รายการ",1)]),(0,o.Lk)("div",Qr,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[67]||(t[67]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มบันทึกการขาย",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",Vr,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[69]||(t[69]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[68]||(t[68]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",Ir,[(0,o.Lk)("div",Br,[t[70]||(t[70]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,o.Lk)("span",{onClick:t[4]||(t[4]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,o.Lk)("div",jr,[(0,o.Lk)("div",null,[t[71]||(t[71]=(0,o.Lk)("label",{for:"customer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.customer_id,"onUpdate:modelValue":t[5]||(t[5]=e=>n.saleRecord.customer_id=e),options:n.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[72]||(t[72]=(0,o.Lk)("label",{for:"package_type",class:"block font-bold text-gray-700"},"Package Type",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.package_type_id,"onUpdate:modelValue":t[6]||(t[6]=e=>n.saleRecord.package_type_id=e),options:n.packageTypes,placeholder:"เลือก Package Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),n.saleRecord.package_type_id&&"additional sales"===n.saleRecord.package_type_id.name.toLowerCase()?((0,o.uX)(),(0,o.CE)("div",Ur,[(0,o.Lk)("div",null,[t[73]||(t[73]=(0,o.Lk)("label",{for:"additional_type",class:"block font-bold text-gray-700"},"ประเภทรายการ",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.additional_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>n.saleRecord.additional_type_id=e),options:n.additionalTypes,placeholder:"เลือกประเภทรายการ","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[74]||(t[74]=(0,o.Lk)("label",{for:"add_detail",class:"block font-bold text-gray-700"},"รายละเอียดการขาย",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>n.saleRecord.add_detail=e),id:"add_detail",type:"text",placeholder:"กรอกรายละเอียดการขาย",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.add_detail]])]),(0,o.Lk)("div",$r,[t[76]||(t[76]=(0,o.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,o.Lk)("div",Wr,[t[75]||(t[75]=(0,o.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.saleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.add_price]])])])])):(0,o.Q3)("",!0),n.saleRecord.package_type_id&&"consignment"===n.saleRecord.package_type_id.name.toLowerCase()?((0,o.uX)(),(0,o.CE)("div",qr,[(0,o.Lk)("div",null,[t[77]||(t[77]=(0,o.Lk)("label",{for:"consignment_detail",class:"block font-bold text-gray-700"},"รายละเอียดสำหรับ Consignment",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>n.saleRecord.add_detail=e),id:"consignment_detail",type:"text",placeholder:"กรอกรายละเอียด Consignment",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.add_detail]])]),(0,o.Lk)("div",Jr,[t[79]||(t[79]=(0,o.Lk)("label",{for:"add_price",class:"block font-bold text-gray-700"},"มูลค่าขาย",-1)),(0,o.Lk)("div",Zr,[t[78]||(t[78]=(0,o.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>n.saleRecord.add_price=e),id:"add_price",type:"number",step:"1",placeholder:"กรอกมูลค่าขาย",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.add_price]])])])])):(0,o.Q3)("",!0),"additional sales"!==n.saleRecord.package_type_id?.name?.toLowerCase()&&"consignment"!==n.saleRecord.package_type_id?.name?.toLowerCase()?((0,o.uX)(),(0,o.CE)("div",Kr,[(0,o.Lk)("div",null,[t[80]||(t[80]=(0,o.Lk)("label",{for:"promotion_type",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.promotion_type_id,"onUpdate:modelValue":t[12]||(t[12]=e=>n.saleRecord.promotion_type_id=e),options:n.promotionTypes,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[81]||(t[81]=(0,o.Lk)("label",{for:"program",class:"block font-bold text-gray-700"},"Program",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.program_id,"onUpdate:modelValue":t[13]||(t[13]=e=>n.saleRecord.program_id=e),options:n.programs,placeholder:"เลือก Program","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[82]||(t[82]=(0,o.Lk)("label",{for:"package",class:"block font-bold text-gray-700"},"Package",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.package_id,"onUpdate:modelValue":t[14]||(t[14]=e=>n.saleRecord.package_id=e),options:n.packages,placeholder:"เลือก Package","track-by":"id",label:"name"},null,8,["modelValue","options"])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",Yr,[(0,o.Lk)("div",Hr,[t[84]||(t[84]=(0,o.Lk)("label",{for:"discount",class:"block font-bold text-gray-700"},"Discount",-1)),(0,o.Lk)("div",Gr,[t[83]||(t[83]=(0,o.Lk)("span",{class:"absolute inset-y-0 left-4 flex items-center text-gray-500"},"฿",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>n.saleRecord.discount=e),id:"discount",type:"number",step:"1",placeholder:"กรอก Discount",class:"w-full pl-8 pr-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.discount]])])]),(0,o.Lk)("div",en,[t[86]||(t[86]=(0,o.Lk)("label",{for:"extraCharge",class:"block font-bold text-gray-700"},"Extra Charge (%)",-1)),(0,o.Lk)("div",tn,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>n.saleRecord.extra_charge=e),id:"extraCharge",type:"number",step:"1",min:"0",placeholder:"กรอก Extra Charge (%)",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange pr-12"},null,512),[[a.Jo,n.saleRecord.extra_charge]]),t[85]||(t[85]=(0,o.Lk)("span",{class:"absolute inset-y-0 right-4 flex items-center text-gray-500"},"%",-1))])])]),n.saleRecord.address_1?((0,o.uX)(),(0,o.CE)("div",sn,[t[90]||(t[90]=(0,o.Lk)("h3",{class:"font-bold"},"ที่อยู่ลูกค้า",-1)),n.saleRecord.address_1?((0,o.uX)(),(0,o.CE)("div",an,[(0,o.Lk)("p",null,[t[87]||(t[87]=(0,o.Lk)("strong",null,"ที่อยู่ 1:",-1)),(0,o.eW)(" "+(0,r.v_)(n.saleRecord.address_1),1)])])):(0,o.Q3)("",!0),n.saleRecord.address_2?((0,o.uX)(),(0,o.CE)("div",on,[(0,o.Lk)("p",null,[t[88]||(t[88]=(0,o.Lk)("strong",null,"ที่อยู่ 2:",-1)),(0,o.eW)(" "+(0,r.v_)(n.saleRecord.address_2),1)])])):(0,o.Q3)("",!0),n.saleRecord.address_3?((0,o.uX)(),(0,o.CE)("div",ln,[(0,o.Lk)("p",null,[t[89]||(t[89]=(0,o.Lk)("strong",null,"ที่อยู่ 3:",-1)),(0,o.eW)(" "+(0,r.v_)(n.saleRecord.address_3),1)])])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),(0,o.Lk)("div",rn,[(0,o.Lk)("div",nn,[t[91]||(t[91]=(0,o.Lk)("label",{for:"zone1_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 1)",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.zone1_id,"onUpdate:modelValue":t[17]||(t[17]=e=>n.saleRecord.zone1_id=e),options:n.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 1)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",dn,[t[92]||(t[92]=(0,o.Lk)("label",{for:"zone1_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>n.saleRecord.zone1_quantity=e),id:"zone1_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.zone1_quantity]])])]),(0,o.Lk)("div",cn,[(0,o.Lk)("div",un,[t[93]||(t[93]=(0,o.Lk)("label",{for:"zone2_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 2)",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.zone2_id,"onUpdate:modelValue":t[19]||(t[19]=e=>n.saleRecord.zone2_id=e),options:n.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 2)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",pn,[t[94]||(t[94]=(0,o.Lk)("label",{for:"zone2_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>n.saleRecord.zone2_quantity=e),id:"zone2_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.zone2_quantity]])])]),(0,o.Lk)("div",hn,[(0,o.Lk)("div",gn,[t[95]||(t[95]=(0,o.Lk)("label",{for:"zone3_delivery",class:"block font-bold text-gray-700"},"In-house Riders (ที่อยู่ 3)",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.zone3_id,"onUpdate:modelValue":t[21]||(t[21]=e=>n.saleRecord.zone3_id=e),options:n.zoneDeliveries,placeholder:"เลือก In-house Riders (ที่อยู่ 3)","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",mn,[t[96]||(t[96]=(0,o.Lk)("label",{for:"zone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>n.saleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.zone3_quantity]])])]),(0,o.Lk)("div",yn,[(0,o.Lk)("div",kn,[t[97]||(t[97]=(0,o.Lk)("label",{for:"zone_outsource_delivery",class:"block font-bold text-gray-700"},"Outsource Riders",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.zone_outsource_id,"onUpdate:modelValue":t[23]||(t[23]=e=>n.saleRecord.zone_outsource_id=e),options:n.zoneDeliveries,placeholder:"เลือก Outsource Riders","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",bn,[t[98]||(t[98]=(0,o.Lk)("label",{for:"zone3_quantity",class:"block font-bold text-gray-700"},"จำนวนครั้ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[24]||(t[24]=e=>n.saleRecord.zone3_quantity=e),id:"zone3_quantity",type:"number",step:"1",placeholder:"กรอกจำนวนครั้ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.zone3_quantity]])])]),(0,o.Lk)("div",xn,[(0,o.Lk)("div",fn,[t[99]||(t[99]=(0,o.Lk)("label",{for:"sellerName",class:"block font-bold text-gray-700"},"ผู้ขาย",-1)),(0,o.bF)(d,{modelValue:n.saleRecord.seller_name_id,"onUpdate:modelValue":t[25]||(t[25]=e=>n.saleRecord.seller_name_id=e),options:n.sellerNames,placeholder:"เลือกผู้ขาย","track-by":"id",label:"name"},null,8,["modelValue","options"])]),(0,o.Lk)("div",wn,[t[100]||(t[100]=(0,o.Lk)("label",{for:"startDate",class:"block font-bold text-gray-700"},"วันเริ่มแพ็คเกจ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>n.saleRecord.start_date=e),id:"startDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.saleRecord.start_date]])])])]),(0,o.Lk)("div",vn,[(0,o.Lk)("li",{onClick:t[27]||(t[27]=(...e)=>i.clearForm&&i.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[101]||(t[101]=[(0,o.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,o.Lk)("div",_n,[(0,o.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[29]||(t[29]=(...e)=>i.addSaleRecord&&i.addSaleRecord(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ln,[(0,o.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[102]||(t[102]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Dn,[(0,o.Lk)("ul",Cn,[(0,o.Lk)("li",{onClick:t[31]||(t[31]=e=>i.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[103]||(t[103]=(0,o.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Pn,(0,r.v_)(1===n.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[32]||(t[32]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[104]||(t[104]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อลูกค้า",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Mn,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[33]||(t[33]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[105]||(t[105]=[(0,o.Lk)("span",null,"Clear Sort",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Tn,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[34]||(t[34]=e=>n.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[35]||(t[35]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[36]||(t[36]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[37]||(t[37]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),"/sale-records"===e.$route.path||"/sale-records-additional"===e.$route.path?((0,o.uX)(),(0,o.CE)("div",Sn,[(0,o.bF)(c,{to:"sale-records",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records"===e.$route.path}])},{default:(0,o.k6)((()=>t[106]||(t[106]=[(0,o.eW)(" บันทึกการขาย 1stTimer, PackageRenewal ")]))),_:1},8,["class"]),(0,o.bF)(c,{to:"sale-records-additional",class:(0,r.C4)(["hover:text-custom-orange",{"text-custom-orange border-b-2 border-custom-orange":"/"===e.$route.path||"/sale-records-additional"===e.$route.path}])},{default:(0,o.k6)((()=>t[107]||(t[107]=[(0,o.eW)(" บันทึกการขาย AdditionalSales ")]))),_:1},8,["class"])])):(0,o.Q3)("",!0),(0,o.Lk)("table",En,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",Rn,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[i.additionalSalesRecords.length>0?((0,o.uX)(!0),(0,o.CE)(o.FK,{key:0},(0,o.pI)(i.additionalSalesRecords,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[(0,o.Lk)("td",An,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",Fn,(0,r.v_)(i.getCustomerName(e.customer_id)),1),(0,o.Lk)("td",On,(0,r.v_)(i.getPackageTypeName(e.package_type_id)),1),(0,o.Lk)("td",Xn,(0,r.v_)(e.additional_type_id),1),(0,o.Lk)("td",zn,(0,r.v_)(e.add_detail),1),(0,o.Lk)("td",Nn,(0,r.v_)(i.formatPrice(e.add_price)),1),(0,o.Lk)("td",Qn,[(0,o.Lk)("button",{onClick:t=>i.openConfirmPaymentModal(e),class:(0,r.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none",i.getPaymentStatusClass(e.payment_status)])},(0,r.v_)(i.getPaymentStatusText(e.payment_status)),11,Vn),n.isConfirmPaymentModalOpen?((0,o.uX)(),(0,o.CE)("div",In,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[109]||(t[109]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[38]||(t[38]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[108]||(t[108]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",Bn,[(0,o.Lk)("div",{class:(0,r.C4)([{"bg-green-500":"unpaid"===n.selectedSaleRecord.payment_status,"bg-red-500":"paid"===n.selectedSaleRecord.payment_status},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,o.Lk)("span",jn,(0,r.v_)("paid"===n.selectedSaleRecord.payment_status?"เปลี่ยนสถานะเป็นยังไม่ได้ชำระเงิน":"ยืนยันการชำระเงิน"),1),(0,o.Lk)("button",{onClick:t[39]||(t[39]=(...e)=>i.closeConfirmPaymentModal&&i.closeConfirmPaymentModal(...e)),class:"text-white hover:text-gray-200"},t[110]||(t[110]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,o.Lk)("div",Un,[(0,o.Lk)("p",$n,(0,r.v_)("paid"===n.selectedSaleRecord.payment_status?'คุณต้องการเปลี่ยนสถานะเป็น "ยังไม่ได้ชำระเงิน" หรือไม่?':"กรุณาเลือกวันที่ชำระเงิน:"),1),"paid"!==n.selectedSaleRecord.payment_status?((0,o.uX)(),(0,o.CE)("div",Wn,[(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[40]||(t[40]=e=>n.selectedPaidDate=e),class:"border border-gray-300 rounded px-4 py-2 w-full"},null,512),[[a.Jo,n.selectedPaidDate]])])):(0,o.Q3)("",!0),"paid"!==n.selectedSaleRecord.payment_status?((0,o.uX)(),(0,o.CE)("div",qn,[t[111]||(t[111]=(0,o.Lk)("label",{for:"payment_types",class:"block text-gray-700"},"เลือกประเภทการชำระเงิน:",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.payment_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>n.selectedSaleRecord.payment_type_id=e),options:n.paymentTypes,label:"name","track-by":"id",placeholder:"เลือกประเภทการชำระเงิน"},null,8,["modelValue","options"])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Jn,[(0,o.Lk)("button",{onClick:t[42]||(t[42]=(...e)=>i.closeConfirmPaymentModal&&i.closeConfirmPaymentModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[43]||(t[43]=(...e)=>i.confirmPayment&&i.confirmPayment(...e)),class:(0,r.C4)([{"bg-green-500 hover:bg-green-600":"unpaid"===n.selectedSaleRecord.payment_status,"bg-red-500 hover:bg-red-600":"paid"===n.selectedSaleRecord.payment_status},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("td",{class:"px-4 py-2 text-right pb-5 relative",ref_for:!0,ref:"moreDropdown"},[(0,o.Lk)("button",{onClick:e=>i.toggleMoreDropdown(s)},t[112]||(t[112]=[(0,o.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,Zn),i.additionalSalesRecords.length>4?((0,o.uX)(),(0,o.CE)("div",Kn,[n.moreOpenDropdownIndex===s?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)([i.moreDropdownPositionClass(s),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,o.Lk)("ul",Yn,[(0,o.Lk)("li",{onClick:t=>i.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,Hn),(0,o.Lk)("li",{onClick:t=>i.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,Gn),(0,o.Lk)("li",{onClick:t=>i.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,ei),(0,o.Lk)("li",{onClick:t=>i.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,ti)])],2)):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",si,[n.moreOpenDropdownIndex===s?((0,o.uX)(),(0,o.CE)("div",ai,[(0,o.Lk)("ul",oi,[(0,o.Lk)("li",{onClick:t=>i.onViewResultSaleRecord(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-custom-orange font-bold border-b border-gray-300"}," สรุปยอด ",8,li),(0,o.Lk)("li",{onClick:t=>i.onViewDetail(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,ri),(0,o.Lk)("li",{onClick:t=>i.openEditModal(e),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,ni),(0,o.Lk)("li",{onClick:t=>i.confirmDelete(e.id),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,ii)])])):(0,o.Q3)("",!0)]))],512)])))),128)):(0,o.Q3)("",!0),i.additionalSalesRecords.length<5&&i.additionalSalesRecords.length>0?((0,o.uX)(!0),(0,o.CE)(o.FK,{key:1},(0,o.pI)(5-i.additionalSalesRecords.length,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:"empty-"+e,class:"bg-white"},t[113]||(t[113]=[(0,o.Lk)("td",{colspan:"8",class:"py-20"},null,-1)]))))),128)):(0,o.Q3)("",!0),0===i.additionalSalesRecords.length?((0,o.uX)(),(0,o.CE)("tr",di,t[114]||(t[114]=[(0,o.Lk)("td",{colspan:"8",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isResultModalOpen?((0,o.uX)(),(0,o.CE)("div",ci,[(0,o.Lk)("div",ui,[(0,o.Lk)("div",pi,[t[115]||(t[115]=(0,o.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,o.Lk)("div",hi,[(0,o.Lk)("span",{onClick:t[44]||(t[44]=(...e)=>i.copyResultModalContent&&i.copyResultModalContent(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},(0,r.v_)(n.isCopied?"check_circle":"content_copy"),1),(0,o.Lk)("span",{onClick:t[45]||(t[45]=(...e)=>i.closeResultModal&&i.closeResultModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",gi,[t[116]||(t[116]=(0,o.Lk)("p",{class:"text-gray-500"},[(0,o.Lk)("strong",null,"📌 ขออนุญาตสรุปยอดนะคะ")],-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredResultSaleRecord,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"mb-2"},[(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,(0,r.v_)(i.formatResultLabel(t))+":",1),(0,o.eW)(" "+(0,r.v_)(e),1)])])))),128)),t[117]||(t[117]=(0,o.Lk)("p",{class:"text-gray-500"},[(0,o.Lk)("strong",null,"📌 กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1))],512)])])):(0,o.Q3)("",!0),n.isDetailModalOpen?((0,o.uX)(),(0,o.CE)("div",mi,[(0,o.Lk)("div",yi,[(0,o.Lk)("div",ki,[t[118]||(t[118]=(0,o.Lk)("span",{class:"font-bold"},"รายละเอียดบันทึกการขาย",-1)),(0,o.Lk)("div",bi,[(0,o.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>i.closeDetailModal&&i.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",xi,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredDetailSaleRecord,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"mb-2"},[(0,o.Lk)("p",null,[(0,o.Lk)("strong",{class:(0,r.C4)(i.getLabelClass(t))},(0,r.v_)(i.formatDetialLabel(t))+":",3),(0,o.Lk)("span",{class:(0,r.C4)(["ml-1",i.getValueClass(t)])},(0,r.v_)(e),3)])])))),128))],512)])])):(0,o.Q3)("",!0),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",fi,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[120]||(t[120]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[47]||(t[47]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[119]||(t[119]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",wi,[(0,o.Lk)("div",vi,[t[121]||(t[121]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไขโปรแกรม",-1)),(0,o.Lk)("div",_i,[(0,o.Lk)("span",{onClick:t[48]||(t[48]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Li,[(0,o.Lk)("div",Di,[t[122]||(t[122]=(0,o.Lk)("label",{for:"editCustomer",class:"block font-bold text-gray-700"},"ลูกค้า",-1)),(0,o.bF)(d,{modelValue:n.selectedSaleRecord.customer_id,"onUpdate:modelValue":t[49]||(t[49]=e=>n.selectedSaleRecord.customer_id=e),options:n.customers,placeholder:"เลือกลูกค้า","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",Ci,[(0,o.Lk)("div",Pi,[(0,o.Lk)("button",{onClick:t[50]||(t[50]=e=>n.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[51]||(t[51]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[123]||(t[123]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,o.eW)("บันทึก ")]))])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",Mi,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[125]||(t[125]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[52]||(t[52]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[124]||(t[124]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",Ti,[(0,o.Lk)("div",Si,[t[126]||(t[126]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[53]||(t[53]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[127]||(t[127]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,o.Lk)("div",Ei,[(0,o.Lk)("button",{onClick:t[54]||(t[54]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[55]||(t[55]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ri,[(0,o.Lk)("button",{onClick:t[56]||(t[56]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[128]||(t[128]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Ai),(0,o.Lk)("div",Fi,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[57]||(t[57]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[58]||(t[58]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Oi)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[59]||(t[59]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[60]||(t[60]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[61]||(t[61]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[129]||(t[129]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Xi)])])}var Ni={components:{Multiselect:Rr.Ay},data(){return{headers:["#","Customer's Name","Sales Type","ประเภทรายการ","รายละเอียดการขาย","มูลค่าขาย","สถานะการชำระเงิน",""],headerWidths:["5%","15%","15%","15%","25%","10%","15%","5%"],saleRecords:[],searchQuery:"",filteredSaleRecords:[],isAddModalOpen:!1,saleRecord:{customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",package_price:0,discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0},customers:[],customerAddress:null,promotionTypes:[],programs:[],packages:[],packageTypes:[],zoneDeliveries:[],zoneDeliveryTypes:[],selectedZoneDeliveryType:"",sellerNames:[],paymentTypes:[],additionalTypes:[],packageDetails:null,isShowingPackageDetails:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",isDetailModalOpen:!1,isResultModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null,moreOpenDropdownIndex:null,selectedSaleRecord:{id:"",customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0},isCopied:!1,isEditModalOpen:!1,isConfirmPaymentModalOpen:!1,selectedPaidDate:"",selectedPaymentTypeId:"",currentPage:1,itemsPerPage:10,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{totalPages(){return Math.ceil(this.additionalSalesRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase();return t.includes(this.searchQuery.toLowerCase())})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}},filteredResultSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{name:this.selectedSaleRecord.customer.name,package:this.selectedSaleRecord.package.package_detail,start_date:this.formatDate(this.selectedSaleRecord.start_date),sellect_by:this.getSelectByText(this.selectedSaleRecord.customer.select_by),delivery_date:this.selectedSaleRecord.customer.delivery_date,delivery:this.selectedSaleRecord.delivery,package_price:this.formatPrice(this.selectedSaleRecord.package.price),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),discount:this.formatPrice(this.selectedSaleRecord.discount),total_delivery_price:this.totalDeliveryPrice,total_price:this.formatPrice(this.selectedSaleRecord.total_price),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date)}:{name:"",expiry_date:""}},filteredDetailSaleRecord(){return this.selectedSaleRecord&&this.selectedSaleRecord.customer?{customer_id:this.selectedSaleRecord.customer.customer_id,name:this.selectedSaleRecord.customer.name,package_type:this.getPackageTypeName(this.selectedSaleRecord.package_type_id),package:this.selectedSaleRecord.package.package_detail,promotion_type:this.selectedSaleRecord.promotionType.name,program:this.getProgramName(this.selectedSaleRecord.program_id),package_price:this.formatPrice(this.selectedSaleRecord.package.price),discount:this.formatPrice(this.selectedSaleRecord.discount),extra_charge:this.formatPrice(this.selectedSaleRecord.extra_charge),total_package_price:this.formatPrice(this.selectedSaleRecord.total_package_price),sellect_by:this.selectedSaleRecord.customer.sellect_by,delivery_date:this.selectedSaleRecord.customer.delivery_date,start_date:this.formatDate(this.selectedSaleRecord.start_date),expiry_date:this.formatDate(this.selectedSaleRecord.expiry_date),note_customer:this.selectedSaleRecord.customer.other_detail||"-"}:{name:"",expiry_date:""}},zone1Name(){return this.selectedSaleRecord.customer.zone1?this.selectedSaleRecord.customer.zone1.name:"ไม่พบข้อมูล"},zone2Name(){return this.selectedSaleRecord.customer.zone2?this.selectedSaleRecord.customer.zone2.name:"ไม่พบข้อมูล"},zone3Name(){return this.selectedSaleRecord.customer.zone3?this.selectedSaleRecord.customer.zone3.name:"ไม่พบข้อมูล"},totalDeliveryPrice(){let e=[];null!==this.selectedSaleRecord.customer.zone_1&&this.selectedSaleRecord.zone1_quantity>0&&e.push(`${this.selectedSaleRecord.customer.zone1.name} x ${this.selectedSaleRecord.zone1_quantity} ครั้ง`),null!==this.selectedSaleRecord.customer.zone_2&&this.selectedSaleRecord.zone2_quantity>0&&e.push(`${this.selectedSaleRecord.customer.zone2.name} x ${this.selectedSaleRecord.zone2_quantity} ครั้ง`),null!==this.selectedSaleRecord.customer.zone_3&&this.selectedSaleRecord.zone3_quantity>0&&e.push(`${this.selectedSaleRecord.customer.zone3.name} x ${this.selectedSaleRecord.zone3_quantity} ครั้ง`);let t=e.length>0?`(${e.join(" + ")})`:"";return this.selectedSaleRecord.total_delivery_price>0?`${this.formatPrice(this.selectedSaleRecord.total_delivery_price)} ${t}`:""},additionalSalesRecords(){return this.saleRecords.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"===t||"consignment"===t}))},...(0,Fe.L8)(["saleRecords"])},methods:{...(0,Fe.i0)(["fetchSaleRecords","fetchLookupData","fetchCustomerAddress"]),getFilteredSaleRecords(){return this.filteredSaleRecords1standRenew},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),a=s.getDate(),o=t[s.getMonth()],l=s.getFullYear();return`${a} ${o} ${l}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH").format(e)},fetchCustomerAddress(e){if(!e||!e.id)return this.customerAddress="เลือกลูกค้าใหม่",this.saleRecord.address_1="",this.saleRecord.address_2="",void(this.saleRecord.address_3="");const t=e.id||e.customer_id,s=this.customers.find((e=>e.id===t));s?(this.customerAddress=`${s.address_1||""} ${s.address_2||""} ${s.address_3||""}`.trim(),this.saleRecord.address_1=s.address_1,this.saleRecord.address_2=s.address_2,this.saleRecord.address_3=s.address_3,this.customerAddress||(this.customerAddress="ไม่มีที่อยู่")):this.customerAddress="ไม่พบข้อมูลลูกค้า"},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredSaleRecords=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase();return t.includes(this.searchQuery)})).slice(e,t)},search(){const e=this.saleRecords.filter((e=>{const t=this.getCustomerName(e.customer_id).toLowerCase();return t.includes(this.searchQuery)}));this.currentPage=1,this.filteredSaleRecords=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.saleRecords.sort(((t,s)=>{let a,o;return"name"===e?(a=this.getCustomerName(t.customer_id),o=this.getCustomerName(s.customer_id)):(a=t[e],o=s[e]),a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.additionalSalesRecords.length-2?"dropdown-up":"dropdown-down"},getPaymentStatusText(e){return"paid"===e?"ชำระเงินแล้ว":"ยังไม่ได้ชำระเงิน"},getPaymentStatusClass(e){return"paid"===e?"text-white bg-green-500":"text-white bg-red-500"},getAddPaymentStatusClass(e){return"paid"===e?"text-green-500 font-bold":"text-red-500 font-bold"},filterPrograms(){this.saleRecord.promotion_type_id&&this.saleRecord.promotion_type_id.id?this.programs=this.allPrograms.filter((e=>e.promotion_type_id===this.saleRecord.promotion_type_id.id)):this.programs=this.allPrograms,this.saleRecord.program_id=[]},filterPackages(){this.saleRecord.program_id&&this.saleRecord.program_id.id?this.packages=this.allPackages.filter((e=>e.program_id===this.saleRecord.program_id.id)):this.packages=this.allPackages,this.saleRecord.package_id=[]},openAddModal(){this.isAddModalOpen=!0},async addSaleRecord(){if(this.saleRecord.customer_id){console.log("ข้อมูลที่ส่งไปยัง backend:",this.saleRecord);try{const e=await re.A.post("http://127.0.0.1:3333/sale-records",{customer_id:this.saleRecord.customer_id?.id||null,promotion_type_id:this.saleRecord.promotion_type_id?.id||null,program_id:this.saleRecord.program_id?.id||null,package_id:this.saleRecord.package_id?.id||null,package_type_id:this.saleRecord.package_type_id?.id||null,seller_name_id:this.saleRecord.seller_name_id?.id||null,delivery:this.saleRecord.delivery||"",discount:this.saleRecord.discount||0,extra_charge:this.saleRecord.extra_charge||0,payment_status:this.saleRecord.payment_status||"unpaid",paid_date:this.saleRecord.paid_date||null,payment_type_id:this.saleRecord.payment_type_id?.id||null,start_date:this.saleRecord.start_date||null,zone1_id:this.saleRecord.zone1_id?.id||null,zone1_quantity:this.saleRecord.zone1_quantity||0,zone2_id:this.saleRecord.zone2_id?.id||null,zone2_quantity:this.saleRecord.zone2_quantity||0,zone3_id:this.saleRecord.zone3_id?.id||null,zone3_quantity:this.saleRecord.zone3_quantity||0,zone_outsource_id:this.saleRecord.zone_outsource_id?.id||null,zone_outsource_quantity:this.saleRecord.zone_outsource_quantity||0,additional_type_id:this.saleRecord.additional_type_id.id||null,add_detail:this.saleRecord.add_detail||null,add_price:this.saleRecord.add_price||0});this.saleRecords.push(e.data),this.closeAddModal(),this.filterPrograms(),this.filterPackages(),await this.fetchSaleRecords(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){console.error("Error adding sale record:",e),e.response&&e.response.data?this.showErrorToastNotification(e.response.data.message||"เกิดข้อผิดพลาดในการเพิ่มข้อมูล!"):this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},clearForm(){this.saleRecord={customer_id:"",promotion_type_id:"",program_id:"",package_id:"",package_type_id:"",seller_name_id:"",delivery:"",discount:0,extra_charge:0,total_package_price:"",zone1_id:"",zone1_quantity:0,zone2_id:"",zone2_quantity:0,zone3_id:"",zone3_quantity:0,zone_outsource_id:"",zone_outsource_quantity:0,total_delivery_zone_price:"",total_delivery_price:"",payment_status:"unpaid",paid_date:"",payment_type_id:"",start_date:"",expiry_date:"",remaining_days:0,additional_type_id:"",add_detail:"",add_price:0},this.packageDetails=null,this.isShowingPackageDetails=!1,this.customerAddress=null,this.filterPrograms(),this.filterPackages()},openEditModal(e){const t=this.customers.find((t=>t.id===e.customer_id));this.selectedSaleRecord={...e,customer_id:t||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSaleRecord.customer_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=await re.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}`,{customer_id:this.selectedSaleRecord.customer_id.id}),t=this.saleRecords.findIndex((e=>e.id===this.selectedSaleRecord.id));-1!==t&&(this.saleRecords[t]={...e.data}),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.isEditModalOpen=!1,this.updatePage()}catch(e){console.error("Error saving changes:",e),alert("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSaleRecord={}},async showPackageDetails(e){const t=this.packages.find((t=>t.id===e.id));t?(this.packageDetails=t,this.isShowingPackageDetails=!0):console.error("ไม่พบแพ็คเกจที่เลือก")},togglePackageDetails(e){this.isShowingPackageDetails?this.resetPackageDetails():this.showPackageDetails(e)},resetPackageDetails(){this.packageDetails=null,this.isShowingPackageDetails=!1},async fetchLookupData(){try{const[e,t,s,a,o,l,r,n,i,d]=await Promise.all([re.A.get("http://127.0.0.1:3333/customers"),re.A.get("http://127.0.0.1:3333/promotion-types"),re.A.get("http://127.0.0.1:3333/programs"),re.A.get("http://127.0.0.1:3333/packages"),re.A.get("http://127.0.0.1:3333/package-types"),re.A.get("http://127.0.0.1:3333/zone-deliveries"),re.A.get("http://127.0.0.1:3333/zone-delivery-types"),re.A.get("http://127.0.0.1:3333/seller-names"),re.A.get("http://127.0.0.1:3333/payment-types"),re.A.get("http://127.0.0.1:3333/additional-types")]);this.customers=e.data,this.promotionTypes=t.data,this.allPrograms=s.data||[],this.programs=this.allPrograms,this.saleRecord.promotion_type_id&&this.filterPrograms(),this.allPackages=a.data||[],this.packages=this.allPackages,this.saleRecord.program_id&&this.filterPackages(),this.packageTypes=o.data,this.zoneDeliveries=l.data,this.zoneDeliveryTypes=r.data,this.sellerNames=n.data,this.paymentTypes=i.data.data,this.additionalTypes=d.data,this.updatePage}catch(e){console.error("Error fetching lookup data:",e)}},async fetchSaleRecords(){try{const e=await re.A.get("http://127.0.0.1:3333/sale-records");this.saleRecords=e.data,this.filteredSaleRecords=e.data,this.saleRecords.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching sale records:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getProgramName(e){const t=this.programs.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getPackageName(e){if(this.allPackages&&Array.isArray(this.allPackages)){const t=this.allPackages.find((t=>t.id===e));return t?t.package_detail:"ไม่พบข้อมูล"}return"ข้อมูลแพ็คเกจไม่พร้อมใช้งาน"},getPackageTypeName(e){const t=this.packageTypes.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},getSelectByText(){const e=this.selectedSaleRecord.customer.select_by;return"customer"===e?"ลูกค้า":"aff"===e?"นักโภชนาการของ AFF":"ไม่มี"},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/sale-records/${this.itemToDelete}`),this.saleRecords=this.saleRecords.filter((e=>e.id!==this.itemToDelete)),this.showFailToastNotification("ลบข้อมูลสำเร็จ!"),this.closeDeleteModal(),this.updatePage()}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},onViewDetail(e){this.selectedSaleRecord=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedSaleRecord=null},formatDetialLabel(e){const t={customer_id:"รหัส",name:"ชื่อ",package_type:"ประเภทแพ็คเกจ",package:"แพ็คเกจ",promotion_type:"ประเภทโปรโมชัน",program:"โปรแกรม",package_price:"ราคาแพ็คเกจ",discount:"ส่วนลดเพิ่มเติม",extra_charge:"Extra Chrage",total_package_price:"มูลค่าแพ็กเกจทั้งหมด",sellect_by:"เลือกอาหารโดย",delivery_date:"วันที่รับอาหาร",start_date:"วันเริ่มแพ็กเกจ",expiry_date:"วันหมดอายุแพ็คเกจ",note_customer:"Note ของลูกค้า"};return t[e]||e},getLabelClass(e){return"total_package_price"===e?"text-custom-orange":""},getValueClass(){return""},onViewResultSaleRecord(e){this.selectedSaleRecord=e,this.isResultModalOpen=!0,this.moreOpenDropdownIndex=null},closeResultModal(){this.isResultModalOpen=!1,this.selectedSaleRecord=null},formatResultLabel(e){const t={name:"ชื่อ",package:"แพ็คเกจ",start_date:"▶️ วันรับอาหารวันแรก",sellect_by:"เลือกอาหารโดย",delivery_date:"วันที่รับอาหาร",delivery:"จัดส่ง",package_price:"ราคาแพ็คเกจ",extra_charge:"Extra Chrage",discount:"ส่วนลด",total_delivery_price:"▶️ ค่าจัดส่ง",total_price:"▶️ ยอดชำระ",expiry_date:"วันหมดอายุแพ็คเกจ"};return t[e]||e},copyResultModalContent(){let e=this.$refs.modalContent.innerText;if(e=e.replace(/\n\s*\n/g,"\n"),navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)})).catch((e=>{console.error("ไม่สามารถคัดลอกข้อความ:",e)}));else{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select();try{document.execCommand("copy"),this.isCopied=!0,setTimeout((()=>{this.isCopied=!1}),2e3)}catch(t){console.error("ไม่สามารถคัดลอกข้อความ:",t)}finally{document.body.removeChild(s)}}},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null),e.target.closest(".sort")&&(this.moreOpenDropdownIndex=null),e.target.closest(".more")&&(this.isSortDropdownOpen=!1)},openConfirmPaymentModal(e){this.selectedSaleRecord=e,this.selectedPaidDate=e.paid_date||"",this.isConfirmPaymentModalOpen=!0},closeConfirmPaymentModal(){this.isConfirmPaymentModalOpen=!1,this.selectedSaleRecord=null,this.selectedPaidDate=""},async confirmPayment(){try{const e="paid"===this.selectedSaleRecord.payment_status?"unpaid":"paid",t="paid"===e?this.selectedPaidDate:null,s="paid"===e?this.selectedSaleRecord.payment_type_id?.id:null;if("paid"===e&&!this.selectedPaidDate&&!this.selectedPaymentTypeId)return void this.showErrorToastNotification("กรุณาเลือกข้อมูลให้ครบ!");const a={payment_status:e,paid_date:t,payment_type_id:s},o=await re.A.put(`http://127.0.0.1:3333/sale-records/${this.selectedSaleRecord.id}/payment-status`,a);if(await this.fetchSaleRecords(),200!==o.status)throw new Error("Unexpected response status");{const e=o.data.data,t=this.saleRecords.findIndex((t=>t.id===e.id));-1!==t&&(this.saleRecords[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error updating payment status:",e),console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmPaymentModal()},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},watch:{"saleRecord.customer_id"(e){this.fetchCustomerAddress(e)},"saleRecord.promotion_type_id":function(){this.filterPrograms()},"saleRecord.program_id":function(){this.filterPackages()}},created(){this.filteredSaleRecords=this.saleRecords,this.sortData("id"),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchLookupData(),this.fetchSaleRecords(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Qi=(0,ce.A)(Ni,[["render",zi]]);var Vi=Qi;const Ii={class:"flex items-center space-x-3 py-2"},Bi={class:"flex space-x-5"},ji={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},Ui={class:"text-center"},$i={class:"text-3xl font-bold text-custom-orange"},Wi={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},qi={class:"text-center"},Ji={class:"text-3xl font-bold text-custom-orange"},Zi={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},Ki={class:"text-center"},Yi={class:"text-3xl font-bold text-custom-orange"},Hi={class:"bg-white shadow rounded-lg p-4 h-48 flex flex-col items-center justify-center space-y-5"},Gi={class:"text-center"},ed={class:"text-3xl font-bold text-custom-orange"},td={class:"flex justify-end items-center space-x-2 relative"},sd={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},ad={class:"text-m text-custom-orange font-bold"},od={class:"flex space-x-4"},ld={class:"min-w-[45%] table-auto rounded-2xl overflow-hidden mt-4"},rd={key:0},nd={key:0,class:"px-4 py-2 align-top font-bold"},id={key:1,class:"px-4 py-2 align-top"},dd={class:"px-4 py-2 align-top pb-5"},cd={class:"px-4 py-2 align-top"},ud={class:"px-4 py-2 align-top"},pd={class:"bg-purple-100",style:{height:"50px"}},hd={colspan:"4",class:"px-4 py-2 text-right"},gd={class:"min-w-[45%] table-auto rounded-2xl overflow-hidden mt-4"},md={class:"px-4 py-2 align-top font-bold pb-5"},yd={class:"px-4 py-2 align-top"},kd={class:"px-4 py-2 align-top"},bd={key:0},xd={class:"min-w-full table-auto rounded-2xl overflow-hidden mt-4"},fd={key:0},wd={key:0,class:"px-4 py-2 align-top font-bold pb-5"},vd={key:1,class:"px-4 py-2 align-top"},_d={class:"px-4 py-2 align-top pb-5"},Ld={class:"px-4 py-2 align-top"},Dd={class:"px-4 py-2 align-top"},Cd={key:0,class:"bg-pink-100"},Pd={colspan:"4",class:"px-4 py-2 text-right"},Md={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},Td={class:"bg-custom-orange text-white"},Sd=["onClick"],Ed={key:0,class:"ml-2 items-center"},Rd={class:"material-symbols-outlined text-sm"},Ad={class:"px-4 py-2 align-top pb-5"},Fd={class:"px-4 py-2 align-top font-bold text-custom-orange"},Od={class:"px-4 py-2 align-top"},Xd={class:"px-4 py-2 align-top"},zd={class:"px-4 py-2 align-top"},Nd={class:"px-4 py-2 align-top"},Qd={class:"px-4 py-2 align-top"},Vd={class:"px-4 py-2 align-top"},Id={class:"px-4 py-2 align-top"},Bd={class:"px-4 py-2 align-top text-right list-none"},jd=["onClick"],Ud={key:0},$d={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Wd={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},qd={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Jd={class:"flex space-x-2"},Zd={class:"pb-2 pt-2"},Kd={class:"pl-3 pr-3"},Yd={class:"mr-2"},Hd={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},Gd=["disabled"],ec={class:"flex items-center space-x-1"},tc=["onClick"],sc=["disabled"];function ac(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",Ii,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>i.changeDate(-1)),class:"flex items-center"},t[14]||(t[14]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[15]||(t[15]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>i.changeDate(1)),class:"flex items-center"},t[16]||(t[16]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[17]||(t[17]=(0,o.Lk)("strong",{class:"text-gray-700"},"Start Date:",-1)),(0,o.bo)((0,o.Lk)("input",{ref:"startDatepicker",type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>i.formattedStartDate=e),onInput:t[4]||(t[4]=(...e)=>i.onStartDateChange&&i.onStartDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่เริ่มต้น"},null,544),[[a.Jo,i.formattedStartDate]]),t[18]||(t[18]=(0,o.Lk)("strong",{class:"text-gray-700"},"End Date:",-1)),(0,o.bo)((0,o.Lk)("input",{ref:"endDatepicker",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>i.formattedEndDate=e),onInput:t[6]||(t[6]=(...e)=>i.onEndDateChange&&i.onEndDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่สิ้นสุด"},null,544),[[a.Jo,i.formattedEndDate]])]),(0,o.Lk)("div",Bi,[(0,o.Lk)("div",ji,[t[20]||(t[20]=(0,o.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,o.Lk)("div",Ui,[(0,o.Lk)("p",$i,(0,r.v_)(i.formatPrice(n.totalSales)),1),t[19]||(t[19]=(0,o.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายทั้งหมด",-1))])]),(0,o.Lk)("div",Wi,[t[22]||(t[22]=(0,o.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"}," payments ")],-1)),(0,o.Lk)("div",qi,[(0,o.Lk)("p",Ji,(0,r.v_)(i.formatPrice(n.totalSalesBeforeVAT)),1),t[21]||(t[21]=(0,o.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายทั้งหมดก่อน VAT",-1))])]),(0,o.Lk)("div",Zi,[t[24]||(t[24]=(0,o.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"}," package_2 ")],-1)),(0,o.Lk)("div",Ki,[(0,o.Lk)("p",Yi,(0,r.v_)(i.formatPrice(n.totalPackageBeforeVAT)),1),t[23]||(t[23]=(0,o.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายสินค้าก่อน VAT",-1))])]),(0,o.Lk)("div",Hi,[t[26]||(t[26]=(0,o.Lk)("div",{class:"bg-gray-100 text-gray-600 shadow p-3 rounded-md"},[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl"}," local_shipping ")],-1)),(0,o.Lk)("div",Gi,[(0,o.Lk)("p",ed,(0,r.v_)(i.formatPrice(n.totalDeliveryBeforeVAT)),1),t[25]||(t[25]=(0,o.Lk)("p",{class:"text-sm text-gray-600"},"ยอดขายค่าส่งก่อน VAT",-1))])])]),(0,o.Lk)("div",td,[(0,o.Lk)("div",sd,[t[27]||(t[27]=(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"calendar_month",-1)),t[28]||(t[28]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการยอดขายประจำวันทั้งหมด: ",-1)),(0,o.Lk)("span",ad,(0,r.v_)(n.dailySales.length)+" รายการ",1)])]),(0,o.Lk)("div",od,[(0,o.Lk)("table",ld,[t[33]||(t[33]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",{class:"bg-purple-500 text-white"},[(0,o.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ผู้ขาย"),(0,o.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"Package Type"),(0,o.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,o.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,o.Lk)("tbody",null,[0===i.filteredSalesBySellerAddit.length?((0,o.uX)(),(0,o.CE)("tr",rd,t[29]||(t[29]=[(0,o.Lk)("td",{colspan:"4",class:"bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขาย ",-1)]))):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredSalesBySellerAddit,((e,s)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:s},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.sales,((t,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"bg-white relative border-b border-b-gray-200"},[0===s?((0,o.uX)(),(0,o.CE)("td",nd,(0,r.v_)(i.getSellerName(e.sellerId)),1)):((0,o.uX)(),(0,o.CE)("td",id)),(0,o.Lk)("td",dd,(0,r.v_)(i.getPackageTypeName(t.package_type_id)),1),(0,o.Lk)("td",cd,(0,r.v_)(i.formatPrice(t.total_sales)),1),(0,o.Lk)("td",ud,(0,r.v_)(i.formatPrice(t.pre_vat)),1)])))),128)),(0,o.Lk)("tr",pd,[(0,o.Lk)("td",hd,[t[30]||(t[30]=(0,o.Lk)("span",{class:"font-bold mr-2"},"ยอดขายรวมทั้งหมด:",-1)),(0,o.eW)(" "+(0,r.v_)(i.formatPrice(e.totalSales))+" ",1),t[31]||(t[31]=(0,o.Lk)("span",{class:"ml-4"},"|",-1)),t[32]||(t[32]=(0,o.Lk)("span",{class:"font-bold ml-4 mr-2"},"ยอดขายรวมทั้งหมดก่อน VAT:",-1)),(0,o.eW)(" "+(0,r.v_)(i.formatPrice(e.totalPreVat)),1)])])],64)))),128))])]),(0,o.Lk)("table",gd,[t[35]||(t[35]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",{class:"bg-green-500 text-white"},[(0,o.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"วิธีการชำระเงิน"),(0,o.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,o.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.salesByPaymentType,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t,class:"bg-white relative border-b border-b-gray-200"},[(0,o.Lk)("td",md,(0,r.v_)(i.getPaymentTypeName(e.payment_type_id)),1),(0,o.Lk)("td",yd,(0,r.v_)(i.formatPrice(e.total_sales)),1),(0,o.Lk)("td",kd,(0,r.v_)(i.formatPrice(e.pre_vat)),1)])))),128)),0===n.salesByPaymentType.length?((0,o.uX)(),(0,o.CE)("tr",bd,t[34]||(t[34]=[(0,o.Lk)("td",{colspan:"3",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขายตามประเภทการชำระเงิน ",-1)]))):(0,o.Q3)("",!0)])])]),(0,o.Lk)("table",xd,[t[39]||(t[39]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",{class:"bg-pink-500 text-white"},[(0,o.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ผู้ขาย"),(0,o.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"Package Type"),(0,o.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวม"),(0,o.Lk)("th",{class:"px-4 py-2 text-left font-bold"},"ยอดขายรวมก่อน VAT")])],-1)),(0,o.Lk)("tbody",null,[0===i.filteredSalesBySeller.length?((0,o.uX)(),(0,o.CE)("tr",fd,t[36]||(t[36]=[(0,o.Lk)("td",{colspan:"4",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่มีข้อมูลยอดขาย ",-1)]))):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredSalesBySeller,((e,s)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:s},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.sales,((t,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"border-b border-b-gray-200 bg-white relative"},[0===s?((0,o.uX)(),(0,o.CE)("td",wd,(0,r.v_)(i.getSellerName(e.sellerId)),1)):((0,o.uX)(),(0,o.CE)("td",vd)),(0,o.Lk)("td",_d,(0,r.v_)(i.getPackageTypeName(t.package_type_id)),1),(0,o.Lk)("td",Ld,(0,r.v_)(i.formatPrice(t.total_sales)),1),(0,o.Lk)("td",Dd,(0,r.v_)(i.formatPrice(t.pre_vat)),1)])))),128)),e.sales.length>0?((0,o.uX)(),(0,o.CE)("tr",Cd,[(0,o.Lk)("td",Pd,[t[37]||(t[37]=(0,o.Lk)("span",{class:"font-bold mr-2"},"ยอดขายรวมทั้งหมด:",-1)),(0,o.eW)(" "+(0,r.v_)(i.formatPrice(e.totalSales))+" ",1),t[38]||(t[38]=(0,o.Lk)("span",{class:"font-bold ml-14 mr-2"},"ยอดขายรวมทั้งหมดก่อน VAT:",-1)),(0,o.eW)(" "+(0,r.v_)(i.formatPrice(e.totalPreVat)),1)])])):(0,o.Q3)("",!0)],64)))),128))])]),(0,o.Lk)("table",Md,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",Td,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)([["px-4 py-2 text-left font-bold"],"items-center hover:text-gray-200"]),style:(0,r.Tr)({width:n.headerWidths[t],cursor:"pointer"}),onClick:t=>i.sortColumn(e)},[(0,o.Lk)("span",null,(0,r.v_)(e),1),"Transaction Date"===e?((0,o.uX)(),(0,o.CE)("span",Ed,[(0,o.Lk)("span",Rd,(0,r.v_)(n.sortIcon),1)])):(0,o.Q3)("",!0)],12,Sd)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredDailySales,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",Ad,(0,r.v_)(i.formatDate(e.paid_date)),1),(0,o.Lk)("td",Fd,(0,r.v_)(i.getCustomerName(e.customer_id)),1),(0,o.Lk)("td",Od,(0,r.v_)(i.getPackageTypeName(e.package_type_id)),1),(0,o.Lk)("td",Xd,(0,r.v_)(i.getPromotionTypeName(e.promotion_type_id)),1),(0,o.Lk)("td",zd,(0,r.v_)(i.getPackageName(e.package_id)||i.getAdditionalTypeName(e.additional_type_id)),1),(0,o.Lk)("td",Nd,(0,r.v_)(i.getPromotionDetail(e.package_id)||e.add_detail),1),(0,o.Lk)("td",Qd,(0,r.v_)(i.formatPrice(e.total_price)),1),(0,o.Lk)("td",Vd,(0,r.v_)(i.getPaymentTypeName(e.payment_type_id)),1),(0,o.Lk)("td",Id,(0,r.v_)(i.getSellerName(e.seller_name_id)),1),(0,o.Lk)("td",Bd,[(0,o.Lk)("li",{onClick:t=>i.onViewDetails(e),class:"px-2 py-1 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[40]||(t[40]=[(0,o.Lk)("span",null,"รายละเอียด",-1)]),8,jd)])])))),128)),0===n.filteredDailySales.length?((0,o.uX)(),(0,o.CE)("tr",Ud,t[41]||(t[41]=[(0,o.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูลที่ค้นหา",-1)]))):(0,o.Q3)("",!0)]),n.isDetailModalOpen?((0,o.uX)(),(0,o.CE)("div",$d,[(0,o.Lk)("div",Wd,[(0,o.Lk)("div",qd,[t[42]||(t[42]=(0,o.Lk)("span",{class:"font-bold"},[(0,o.Lk)("h2",null,"รายละเอียดยอดขายประจำวัน")],-1)),(0,o.Lk)("div",Jd,[(0,o.Lk)("span",{onClick:t[7]||(t[7]=(...e)=>i.closeDetailModal&&i.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Zd,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredDetail,((e,t,s)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:(0,r.C4)([s%2===0?"bg-white rounded-none":"bg-gray-100 rounded-none","p-2 rounded-md"])},[(0,o.Lk)("p",Kd,[(0,o.Lk)("strong",Yd,(0,r.v_)(i.formatLabel(t))+":",1),(0,o.eW)(" "+(0,r.v_)(e),1)])],2)))),128))])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Hd,[(0,o.Lk)("button",{onClick:t[8]||(t[8]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[43]||(t[43]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Gd),(0,o.Lk)("div",ec,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[9]||(t[9]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[10]||(t[10]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,tc)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[11]||(t[11]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[12]||(t[12]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[13]||(t[13]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[44]||(t[44]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,sc)])])}s(1454),s(8872);var oc=s(2689),lc={data(){return{headers:["Transaction Date","Customer's Name","Package Type","Sales Category","Package/Purchase Details","Details","ยอดขายรวม","วิธีการชำระเงิน","Sales Rep"," "],headerWidths:["10%","12%","10%","10%","13%","12%","8%","10%","7%","8%"],sortDirection:"asc",sortIcon:"arrow_downward",filteredDailySales:[],selectedDate:"",dailySales:[],totalSales:0,totalSalesBeforeVAT:0,totalPackageBeforeVAT:0,totalDeliveryBeforeVAT:0,salesByPaymentType:[],customers:[],packages:[],promotion_types:[],seller_names:[],payment_types:[],package_types:[],selectedPackageTypeId:"",additional_types:[],isPaymentTableVisible:!1,selectedSeller:"",salesBySellerAndPackageType:[],sellers:[],groupedsalesBySellerAndPackageType:null,currentPage:1,itemsPerPage:10,startDate:"",endDate:"",isDetailModalOpen:!1,selectedDailySaleDetail:{}}},computed:{totalPages(){return Math.ceil(this.dailySales.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}},totalSalesSum(){return this.groupedsalesBySellerAndPackageType?Object.values(this.groupedsalesBySellerAndPackageType).flat().reduce(((e,t)=>{const s=parseFloat(t.total_sales)||0;return e+s}),0):0},totalPreVatSum(){return this.groupedsalesBySellerAndPackageType?Object.values(this.groupedsalesBySellerAndPackageType).flat().reduce(((e,t)=>{const s=parseFloat(t.pre_vat)||0;return e+s}),0):0},filteredSalesBySellerAddit(){return Object.keys(this.salesBySellerAndPackageType).map((e=>{const t=this.salesBySellerAndPackageType[e].sales.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"===t||"consignment"===t}));return{sellerId:e,sales:t,totalSales:t.reduce(((e,t)=>e+parseFloat(t.total_sales)),0),totalPreVat:t.reduce(((e,t)=>e+parseFloat(t.pre_vat)),0)}})).filter((e=>e.sales.length>0))},filteredSalesBySeller(){return Object.keys(this.salesBySellerAndPackageType).map((e=>{const t=this.salesBySellerAndPackageType[e].sales.filter((e=>{const t=this.getPackageTypeName(e.package_type_id).toLowerCase();return"additional sales"!==t&&"consignment"!==t}));return{sellerId:e,sales:t,totalSales:t.reduce(((e,t)=>e+parseFloat(t.total_sales)),0),totalPreVat:t.reduce(((e,t)=>e+parseFloat(t.pre_vat)),0)}})).filter((e=>e.sales.length>0))},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""},filteredDetail(){return{paid_date:this.formatDate(this.selectedDailySaleDetail.paid_date),customer_id:this.getCustomerName(this.selectedDailySaleDetail.customer_id),package_type_id:this.getPackageTypeName(this.selectedDailySaleDetail.package_type_id),package_id:this.getPackageName(this.selectedDailySaleDetail.package_id)||this.getAdditionalTypeName(this.selectedDailySaleDetail.additional_type_id),promotion_type_id:this.getPromotionTypeName(this.selectedDailySaleDetail.promotion_type_id),package_price:this.formatPrice(this.getPackagePrice(this.selectedDailySaleDetail.package_id)),package_detail:this.getPromotionDetail(this.selectedDailySaleDetail.package_id)||this.selectedDailySaleDetail.add_detail,discount:this.formatPrice(this.selectedDailySaleDetail.discount),extra_charge:this.formatPercent(this.selectedDailySaleDetail.extra_charge),extra_charge_price:this.formatPrice(this.selectedDailySaleDetail.extra_charge_price),total_package_price:this.formatPrice(this.selectedDailySaleDetail.total_package_price),total_delivery_price:this.formatPrice(this.selectedDailySaleDetail.total_delivery_price),total_price:this.formatPrice(this.selectedDailySaleDetail.total_price),payment_type_id:this.getPaymentTypeName(this.selectedDailySaleDetail.payment_type_id),seller_name_id:this.getSellerName(this.selectedDailySaleDetail.seller_name_id)}}},methods:{goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),a=s.getDate(),o=t[s.getMonth()],l=s.getFullYear();return`${a} ${o} ${l}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},togglePaymentTableVisibility(){this.isPaymentTableVisible=!this.isPaymentTableVisible},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString())},onEndDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.endDate=t.toISOString())},sortColumn(e){"Transaction Date"===e&&(this.sortDirection="asc"===this.sortDirection?"desc":"asc",this.sortIcon="asc"===this.sortDirection?"arrow_downward":"arrow_upward",this.filteredDailySales.sort(((e,t)=>{const s=new Date(e.paid_date),a=new Date(t.paid_date);return"asc"===this.sortDirection?s-a:a-s})))},async fetchDailySales(e,t){try{const s=await re.A.get("http://127.0.0.1:3333/sales/daily",{params:{startDate:e,endDate:t}});this.dailySales=s.data.data.dailySales,this.filteredDailySales=this.dailySales,this.totalSales=s.data.data.totalSales,this.totalSalesBeforeVAT=s.data.data.totalSalesBeforeVAT,this.totalPackageBeforeVAT=s.data.data.totalPackageBeforeVAT,this.totalDeliveryBeforeVAT=s.data.data.totalDeliveryBeforeVAT,this.salesByPaymentType=s.data.data.salesByPaymentType,this.salesBySellerAndPackageType=s.data.data.salesBySellerAndPackageType,this.sellers=this.seller_names.map((e=>({id:e.id,name:e.name}))),this.filteredDailySales=this.dailySales.sort(((e,t)=>{const s=new Date(e.paid_date),a=new Date(t.paid_date);return s-a})),this.filterSalesBySeller()}catch(s){console.error("Error fetching sales data in range:",s)}},selectSeller(e){this.selectedSeller=e,this.filterSalesBySeller()},filterSalesBySeller(){let e=this.salesBySellerAndPackageType;this.selectedSeller&&this.selectedSeller.id&&(e=this.salesBySellerAndPackageType.filter((e=>e.seller_name_id===this.selectedSeller.id))),this.groupedsalesBySellerAndPackageType=this.groupBySeller(e)},groupBySeller(e){return e.reduce(((e,t)=>(e[t.seller_name_id]||(e[t.seller_name_id]=[]),e[t.seller_name_id].push(t),e)),{})},clearSelectedSeller(){this.selectedSeller=null},async fetchLookupData(){try{const[e,t,s,a,o,l,r,n,i]=await Promise.all([re.A.get("http://127.0.0.1:3333/customers"),re.A.get("http://127.0.0.1:3333/promotion-types"),re.A.get("http://127.0.0.1:3333/programs"),re.A.get("http://127.0.0.1:3333/packages"),re.A.get("http://127.0.0.1:3333/package-types"),re.A.get("http://127.0.0.1:3333/zone-deliveries"),re.A.get("http://127.0.0.1:3333/seller-names"),re.A.get("http://127.0.0.1:3333/payment-types"),re.A.get("http://127.0.0.1:3333/additional-types")]);this.customers=e.data,this.promotion_types=t.data,this.allPrograms=s.data||[],this.packages=a.data,this.package_types=o.data,this.zoneDeliveries=l.data,this.seller_names=r.data,this.payment_types=n.data.data,this.additional_types=i.data,this.updatePage,console.log("Fetched payment types:",n.data),console.log(this.paymentTypes)}catch(e){console.error("Error fetching lookup data:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.id===e));return t?t.name:null},getPackageName(e){const t=this.packages.find((t=>t.id===e));return t?t.name:null},getPromotionTypeName(e){const t=this.promotion_types.find((t=>t.id===e));return t?t.name:null},getPaymentTypeName(e){const t=this.payment_types.find((t=>t.id===e));return t?t.name:null},getSellerName(e){const t=this.seller_names.find((t=>t.id===parseInt(e)));return t?t.name:null},getPackageTypeName(e){const t=this.package_types.find((t=>t.id===e));return t?t.name:null},getPromotionDetail(e){const t=this.packages.find((t=>t.id===e));return t?t.promotion_detail:null},getPackagePrice(e){const t=this.packages.find((t=>t.id===e));return t?t.price:"-"},getAdditionalTypeName(e){const t=this.additional_types.find((t=>t.id===e));return t?t.name:null},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchSalesData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchSalesData()},fetchSalesData(){this.startDate&&this.endDate&&this.fetchDailySales(this.startDate,this.endDate)},onViewDetails(e){this.selectedDailySaleDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedDailySaleDetail={}},formatLabel(e){const t={paid_date:"Transaction Date",customer_id:"Customer's Name",package_type_id:"Package Type",package_id:"Package/Purchase Details",promotion_type_id:"Sales Category",package_price:"Package Price",package_detail:"Details",discount:"Additional Discount",extra_charge:"% Extra Charge",extra_charge_price:"Extra Charge Value",total_package_price:"Purchase Value",total_delivery_price:"ค่าจัดส่งรวม",total_price:"ยอดขายรวม",payment_type_id:"วิธีการชำระเงิน",seller_name_id:"Sales Rep"};return t[e]||e}},created(){this.filteredDailySales=this.dailySales,this.fetchLookupData(),this.fetchDailySales(this.selectedDate)},mounted(){this.fetchLookupData(),this.fetchDailySales(this.selectedDate),this.setToday(),this.$nextTick((()=>{(0,oc.A)(this.$refs.startDatepicker,{dateFormat:"Y-m-d",todayButton:!0,onChange:(e,t)=>{this.startDate=t,this.fetchSalesData()}}),(0,oc.A)(this.$refs.endDatepicker,{dateFormat:"Y-m-d",todayButton:!0,onChange:(e,t)=>{this.endDate=t,this.fetchSalesData()}})}))}};const rc=(0,ce.A)(lc,[["render",ac],["__scopeId","data-v-26183e52"]]);var nc=rc;const ic={class:"flex space-x-2 items-center relative"},dc={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},cc={class:"text-m text-custom-orange font-bold"},uc={class:"sort relative inline-block",ref:"sortDropdown"},pc={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},hc={class:"list-none p-0 m-0"},gc={key:0,class:"material-symbols-outlined text-sm"},mc={key:0,class:"material-symbols-outlined text-sm"},yc={class:"flex w-[250px] relative"},kc={class:"min-w-full table-fixed border-collapse mt-4"},bc={class:"bg-custom-orange text-white"},xc={class:"px-4 py-2 align-top"},fc={class:"px-4 py-2 align-top font-bold text-custom-orange"},wc={class:"px-4 py-2 align-top"},vc={class:"flex items-center"},_c={class:"flex items-center"},Lc={class:"px-4 py-2 align-top"},Dc={class:"px-4 py-2 align-top"},Cc={class:"px-4 py-2 text-right relative"},Pc=["onClick"],Mc={class:"list-none p-0 m-0"},Tc=["onClick"],Sc=["onClick"],Ec=["onClick"],Rc={key:0,class:"modal fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-10 z-50"},Ac={class:"bg-white rounded-md shadow-lg w-1000"},Fc={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Oc={class:"flex space-x-2"},Xc={class:"p-6"},zc={key:0},Nc={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Qc={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Vc={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Ic={class:"flex space-x-2"},Bc={class:"p-6 space-y-4 overflow-y-auto flex-grow"},jc={class:"mb-4"},Uc={class:"mb-4"},$c={class:"mb-4"},Wc={class:"mb-4"},qc={class:"mb-4"},Jc={class:"mb-4"},Zc={class:"mb-4"},Kc={class:"mb-4"},Yc={class:"mb-4"},Hc={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Gc={class:"flex space-x-2"},eu={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},tu=["disabled"],su={class:"flex items-center space-x-1"},au=["onClick"],ou=["disabled"];function lu(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",ic,[(0,o.Lk)("div",dc,[t[27]||(t[27]=(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"person",-1)),t[28]||(t[28]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนลูกค้าทั้งหมด: ",-1)),(0,o.Lk)("span",cc,(0,r.v_)(n.customers.length)+" คน",1)]),(0,o.Lk)("div",uc,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[29]||(t[29]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",pc,[(0,o.Lk)("ul",hc,[(0,o.Lk)("li",{onClick:t[1]||(t[1]=e=>i.sortData("customer_id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[30]||(t[30]=(0,o.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"customer_id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",gc,(0,r.v_)(1===n.sortDirection["customer_id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[2]||(t[2]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[31]||(t[31]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",mc,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[3]||(t[3]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[32]||(t[32]=[(0,o.Lk)("span",null,"Clear Sort",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",yc,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[5]||(t[5]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[6]||(t[6]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.Lk)("table",kc,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",bc,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredCustomers,((s,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:a,class:"customers-data bg-white relative"},[(0,o.Lk)("td",xc,(0,r.v_)(s.customer_id),1),(0,o.Lk)("td",fc,(0,r.v_)(s.name),1),(0,o.Lk)("td",wc,[(0,o.Lk)("div",vc,[t[33]||(t[33]=(0,o.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"mail",-1)),(0,o.eW)((0,r.v_)(s.email),1)]),(0,o.Lk)("div",_c,[t[34]||(t[34]=(0,o.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"phone",-1)),(0,o.eW)((0,r.v_)(s.tel),1)])]),(0,o.Lk)("td",Lc,(0,r.v_)(s.address_1),1),(0,o.Lk)("td",Dc,(0,r.v_)(s.food_allergies),1),(0,o.Lk)("td",Cc,[(0,o.Lk)("button",{onClick:e=>i.toggleMoreDropdown(a)},t[35]||(t[35]=[(0,o.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,Pc),n.moreOpenDropdownIndex===a?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)([i.moreDropdownPositionClass(a),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,o.Lk)("ul",Mc,[(0,o.Lk)("li",{onClick:e=>i.onViewDetails(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,Tc),(0,o.Lk)("li",{onClick:e=>i.onEdit(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,Sc),(0,o.Lk)("li",{onClick:e=>i.onDelete(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,Ec)])],2)):(0,o.Q3)("",!0)]),e.isDetailModalOpen?((0,o.uX)(),(0,o.CE)("div",Rc,[(0,o.Lk)("div",Ac,[(0,o.Lk)("div",Fc,[t[37]||(t[37]=(0,o.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,o.Lk)("div",Oc,[t[36]||(t[36]=(0,o.Lk)("span",{class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," edit ",-1)),(0,o.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>i.closeDetailModal&&i.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Xc,[t[38]||(t[38]=(0,o.Lk)("p",{class:"text-gray-500"},[(0,o.Lk)("strong",null,"ขออนุญาตสรุปยอดนะคะ")],-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredResultCustomer,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"mb-2"},[(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,(0,r.v_)(i.formatLabel(t))+":",1),(0,o.eW)(" "+(0,r.v_)(e),1)])])))),128)),t[39]||(t[39]=(0,o.Lk)("p",{class:"text-gray-500"},[(0,o.Lk)("strong",null,"กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1))])])])):(0,o.Q3)("",!0)])))),128)),0===n.filteredCustomers.length?((0,o.uX)(),(0,o.CE)("tr",zc,t[40]||(t[40]=[(0,o.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",Nc,[(0,o.Lk)("div",Qc,[(0,o.Lk)("div",Vc,[t[41]||(t[41]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไขข้อมูลลูกค้า",-1)),(0,o.Lk)("div",Ic,[(0,o.Lk)("span",{onClick:t[9]||(t[9]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Bc,[(0,o.Lk)("div",jc,[t[42]||(t[42]=(0,o.Lk)("label",{for:"editCustomerName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>n.selectedCustomer.name=e),id:"editCustomerName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedCustomer.name]])]),(0,o.Lk)("div",Uc,[t[43]||(t[43]=(0,o.Lk)("label",{for:"editCustomerEmail",class:"block text-gray-700 font-medium"},"อีเมล",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>n.selectedCustomer.email=e),id:"editCustomerEmail",type:"email",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedCustomer.email]])]),(0,o.Lk)("div",$c,[t[45]||(t[45]=(0,o.Lk)("label",{for:"editCustomerGender",class:"block font-bold text-gray-700"},"เพศ",-1)),(0,o.bo)((0,o.Lk)("select",{id:"editCustomerGender","onUpdate:modelValue":t[12]||(t[12]=e=>n.selectedCustomer.gender=e),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},t[44]||(t[44]=[(0,o.Lk)("option",{value:"",disabled:""},"เลือกเพศ",-1),(0,o.Lk)("option",{value:"male"},"ชาย",-1),(0,o.Lk)("option",{value:"female"},"หญิง",-1)]),512),[[a.u1,n.selectedCustomer.gender]])]),(0,o.Lk)("div",Wc,[t[46]||(t[46]=(0,o.Lk)("label",{for:"editCustomerTel",class:"block text-gray-700 font-medium"},"เบอร์โทรศัพท์",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>n.selectedCustomer.tel=e),id:"editCustomerTel",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedCustomer.tel]])]),(0,o.Lk)("div",qc,[t[47]||(t[47]=(0,o.Lk)("label",{for:"editFoodAllergies",class:"block text-gray-700 font-medium"},"แพ้อาหาร",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"editFoodAllergies","onUpdate:modelValue":t[14]||(t[14]=e=>n.selectedCustomer.food_allergies=e),placeholder:"กรอกข้อมูลการแพ้อาหาร",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[a.Jo,n.selectedCustomer.food_allergies]])]),(0,o.Lk)("div",Jc,[t[48]||(t[48]=(0,o.Lk)("label",{for:"editDeliveryDate",class:"block text-gray-700 font-medium"},"วันที่จัดส่ง",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>n.selectedCustomer.delivery_date=e),id:"editDeliveryDate",type:"date",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedCustomer.delivery_date]])]),(0,o.Lk)("div",Zc,[t[49]||(t[49]=(0,o.Lk)("label",{for:"editAddressMonToFri",class:"block text-gray-700 font-medium"},"ที่อยู่ (จันทร์-ศุกร์)",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"editAddressMonToFri","onUpdate:modelValue":t[16]||(t[16]=e=>n.selectedCustomer.address_mon_to_fri=e),placeholder:"กรอกที่อยู่สำหรับวันจันทร์ถึงวันศุกร์",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[a.Jo,n.selectedCustomer.address_mon_to_fri]])]),(0,o.Lk)("div",Kc,[t[50]||(t[50]=(0,o.Lk)("label",{for:"editRecipientMonToFri",class:"block text-gray-700 font-medium"},"ผู้รับ (จันทร์-ศุกร์)",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"editRecipientMonToFri","onUpdate:modelValue":t[17]||(t[17]=e=>n.selectedCustomer.recipient_mon_to_fri=e),placeholder:"กรอกชื่อผู้รับสำหรับวันจันทร์ถึงวันศุกร์",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[a.Jo,n.selectedCustomer.recipient_mon_to_fri]])]),(0,o.Lk)("div",Yc,[t[51]||(t[51]=(0,o.Lk)("label",{for:"editOtherDetail",class:"block text-gray-700 font-medium"},"รายละเอียดเพิ่มเติม",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"editOtherDetail","onUpdate:modelValue":t[18]||(t[18]=e=>n.selectedCustomer.other_detail=e),placeholder:"กรอกข้อมูลเพิ่มเติม",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[a.Jo,n.selectedCustomer.other_detail]])])]),(0,o.Lk)("div",Hc,[(0,o.Lk)("div",Gc,[(0,o.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[20]||(t[20]=(...t)=>e.saveCustomerChanges&&e.saveCustomerChanges(...t)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[52]||(t[52]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,o.eW)("บันทึก ")]))])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",eu,[(0,o.Lk)("button",{onClick:t[21]||(t[21]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[53]||(t[53]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,tu),(0,o.Lk)("div",su,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,au)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[26]||(t[26]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[54]||(t[54]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,ou)])])}var ru={name:"Test2Page",data(){return{headers:["รหัสลูกค้า","ชื่อ","ช่องทางการติดต่อ","ที่อยู่","ข้อมูลแพ้อาหาร",""],headerWidths:["10%","15%","20%","30%","20%","5%"],searchQuery:"",filteredCustomers:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",customers:[],currentPage:1,itemsPerPage:10,selectedCustomer:{id:null,email:"",customer_id:"",name:"",customer_gender:"",customer_tel:"",customer_line_id:"",food_allergies:"",delivery_date:"",address_mon_to_fri:"",recipient_mon_to_fri:"",address_sat_to_sun:"",recipient_sat_to_sun:"",other_detail:"",note:"",seller_name_id:null,select_by:"",address_1:"",zone_1:null,address_2:"",zone_2:null,address_3:"",zone_3:null,created_at:null,updated_at:null},moreOpenDropdownIndex:null,isEditModalOpen:!1,isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}},filteredResultCustomer(){return{name:this.selectedCustomer.name,address:this.selectedCustomer.address}}},methods:{async fetchCustomers(){try{const e=await re.A.get("http://127.0.0.1:3333/customers");this.filteredCustomers=e.data,this.customers=e.data,this.updatePage()}catch(e){console.error("Error fetching customers:",e)}},search(){const e=this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t}));this.currentPage=1,this.filteredCustomers=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredCustomers=this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.customers.sort(((t,s)=>{const a=t[e],o=s[e];return a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.customers.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null)},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredCustomers.length-2?"dropdown-up":"dropdown-down"},onViewDetails(e){this.selectedCustomer=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedCustomer={}},onEdit(e){this.selectedCustomer={...e},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedCustomer.name||!this.selectedCustomer.email)return void alert("กรุณากรอกข้อมูลให้ครบถ้วน");const e=await re.A.put(`http://127.0.0.1:3333/customers/${this.selectedCustomer.id}`,{email:this.selectedCustomer.email,customer_id:this.selectedCustomer.customer_id,name:this.selectedCustomer.name,gender:this.selectedCustomer.gender,tel:this.selectedCustomer.tel,line_id:this.selectedCustomer.line_id,food_allergies:this.selectedCustomer.food_allergies,delivery_date:this.selectedCustomer.delivery_date,address_mon_to_fri:this.selectedCustomer.address_mon_to_fri,recipient_mon_to_fri:this.selectedCustomer.recipient_mon_to_fri,address_sat_to_sun:this.selectedCustomer.address_sat_to_sun,recipient_sat_to_sun:this.selectedCustomer.recipient_sat_to_sun,other_detail:this.selectedCustomer.other_detail,note:this.selectedCustomer.note,seller_name_id:this.selectedCustomer.seller_name_id,select_by:this.selectedCustomer.select_by,address_1:this.selectedCustomer.address_1,zone_1:this.selectedCustomer.zone_1,address_2:this.selectedCustomer.address_2,zone_2:this.selectedCustomer.zone_2,address_3:this.selectedCustomer.address_3,zone_3:this.selectedCustomer.zone_3});console.log("Customer updated:",e.data);const t=this.customers.findIndex((e=>e.id===this.selectedCustomer.id));-1!==t&&(this.customers[t]=e.data),this.isEditModalOpen=!1,this.updatePage()}catch(e){console.error("Error saving changes:",e),alert("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedCustomer={}},onDelete(e){alert(`ลบข้อมูล: ${e.name}`)},formatLabel(e){const t={name:"ชื่อ",address:"muj"};return t[e]||e}},created(){this.filteredCustomers=this.customers,this.sortData("id"),this.fetchCustomers(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchCustomers(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const nu=(0,ce.A)(ru,[["render",lu],["__scopeId","data-v-8357b2aa"]]);var iu=nu;const du={ref:"contentToPrint"};function cu(e,t,s,a,l,r){const n=(0,o.g2)("vue-to-print");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(n,{content:l.contentToPrint},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.Lk)("button",null,"พิมพ์ข้อมูล",-1)]))),_:1},8,["content"]),(0,o.Lk)("div",du,t[1]||(t[1]=[(0,o.Lk)("table",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"หัวข้อ"),(0,o.Lk)("td",null,"ข้อมูล")])],-1)]),512)])}var uu=s(5982),pu={components:{VueToPrint:uu.Ay},data(){return{contentToPrint:"contentToPrint"}}};const hu=(0,ce.A)(pu,[["render",cu]]);var gu=hu;const mu={class:"mt-4 flex"},yu={class:"w-1/5"},ku={class:"mb-4"},bu={class:"flex items-center space-x-3 py-2"},xu={class:"mb-4 space-y-2"},fu=["onClick"],wu={class:"w-4/5 p-4"},vu={class:"font-bold text-xl mb-4"},_u={key:0,class:"text-center text-gray-600"},Lu={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3"},Du={class:"mb-4"},Cu=["src"],Pu={key:1,class:"bg-gray-100 w-full h-48 rounded-md flex items-center justify-center"},Mu={class:"text-lg font-semibold block"},Tu={class:"block"},Su={class:"block text-custom-orange font-bold"},Eu={class:"text-gray-700 text-sm"},Ru={class:"mr-2"},Au={class:"mr-2"},Fu={class:"mr-2"},Ou={class:"mr-2"},Xu={class:"mt-auto flex w-full space-x-2"},zu={class:"flex items-center justify-center w-1/2 space-x-2 p-2"},Nu=["onClick"],Qu=["onUpdate:modelValue"],Vu=["onClick"],Iu={class:"w-1/2 p-2 flex justify-end"},Bu=["onClick"];function ju(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[19]||(t[19]=(0,o.Lk)("h1",{class:"mt-4 font-bold text-custom-orange text-2xl mb-4 text-center"},"Premium Health",-1)),(0,o.Lk)("div",mu,[(0,o.Lk)("div",yu,[(0,o.Lk)("div",ku,[(0,o.Lk)("div",bu,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>i.changeDate(-1)),class:"flex items-center"},t[6]||(t[6]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[7]||(t[7]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>i.changeDate(1)),class:"flex items-center"},t[8]||(t[8]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{type:"date",id:"menuDate","onUpdate:modelValue":t[3]||(t[3]=e=>n.selectedDate=e),class:"p-2 border rounded-md w-auto",onChange:t[4]||(t[4]=(...e)=>i.fetchMenusForSelectedDate&&i.fetchMenusForSelectedDate(...e))},null,544),[[a.Jo,n.selectedDate]])])]),t[9]||(t[9]=(0,o.Lk)("h1",{class:"font-bold text-xl mb-4"},"ฟิลเตอร์เมนู",-1)),(0,o.Lk)("div",xu,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>n.selectedMealType=""),class:(0,r.C4)(["w-full text-left py-2 hover:text-custom-orange",""===n.selectedMealType?"text-custom-orange font-bold":"text-gray-600"])}," ทุกประเภท ",2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredMealTypes,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e.id,onClick:t=>n.selectedMealType=e.id,class:(0,r.C4)(["w-full py-2 text-left hover:text-custom-orange",n.selectedMealType===e.id?"text-custom-orange font-bold":"text-gray-600"])},(0,r.v_)(e.name),11,fu)))),128))])]),(0,o.Lk)("div",wu,[(0,o.Lk)("h1",vu,"รายการอาหารประจำวันที่ "+(0,r.v_)(i.formatDate(n.selectedDate))+" ("+(0,r.v_)(i.formatDateEng(n.selectedDate))+")",1),0===n.todayMenus.length?((0,o.uX)(),(0,o.CE)("div",_u,t[10]||(t[10]=[(0,o.Lk)("strong",{class:"text-2xl"},"ไม่มีเมนู",-1)]))):(0,o.Q3)("",!0),(0,o.Lk)("div",Lu,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredMenus,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"p-4 border rounded-lg shadow-md bg-white flex flex-col h-full mb-6"},[(0,o.Lk)("div",Du,[i.getMenuImage(e.menu_id)?((0,o.uX)(),(0,o.CE)("img",{key:0,src:`http://127.0.0.1:3333/images/${i.getMenuImage(e.menu_id)}`,alt:"Menu Image",class:"min-h-48 max-h-48 w-full object-cover rounded"},null,8,Cu)):((0,o.uX)(),(0,o.CE)("div",Pu,t[11]||(t[11]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-4xl text-gray-500"}," hide_image ",-1)])))]),(0,o.Lk)("span",Mu,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("span",Tu,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("span",Su,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("div",Eu,[(0,o.Lk)("span",Ru,(0,r.v_)(i.getMenuCal(e.menu_id))+" Cal",1),(0,o.Lk)("span",Au,[t[12]||(t[12]=(0,o.eW)("|")),t[13]||(t[13]=(0,o.Lk)("strong",null," Protein: ",-1)),(0,o.eW)(" "+(0,r.v_)(i.getMenuProtein(e.menu_id))+" g",1)]),(0,o.Lk)("span",Fu,[t[14]||(t[14]=(0,o.eW)("|")),t[15]||(t[15]=(0,o.Lk)("strong",null," Carbohydrate: ",-1)),(0,o.eW)((0,r.v_)(i.getMenuCarb(e.menu_id))+" g",1)]),(0,o.Lk)("span",Ou,[t[16]||(t[16]=(0,o.eW)("|")),t[17]||(t[17]=(0,o.Lk)("strong",null," Fat: ",-1)),(0,o.eW)((0,r.v_)(i.getMenuFat(e.menu_id))+" g",1)])]),(0,o.Lk)("div",Xu,[(0,o.Lk)("div",zu,[(0,o.Lk)("button",{onClick:t=>i.adjustQuantity(e,-1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"-",8,Nu),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,min:"0",placeholder:"จำนวน",class:"p-2 border rounded-md w-16 text-center input-no-spinner"},null,8,Qu),[[a.Jo,e.quantity,void 0,{number:!0}]]),(0,o.Lk)("button",{onClick:t=>i.adjustQuantity(e,1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"+",8,Vu)]),(0,o.Lk)("div",Iu,[(0,o.Lk)("button",{onClick:t=>i.orderMenu(e),class:"px-4 py-2 w-full bg-custom-orange text-white rounded-md hover:bg-custom-orange-hover transition flex items-center space-x-2 justify-center"},t[18]||(t[18]=[(0,o.Lk)("span",{class:"material-symbols-outlined"}," shopping_cart ",-1),(0,o.Lk)("span",null,"สั่งซื้อ",-1)]),8,Bu)])])])))),128))])])])],64)}s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698),s(3949);var Uu={data(){return{menus:[],todayMenus:[],meal_types:[],selectedDate:this.getTodayDate(),selectedMealType:""}},computed:{filteredMenus(){return 0===this.todayMenus.length?[]:this.selectedMealType?this.todayMenus.filter((e=>this.getMealTypeID(e.menu_id)===this.selectedMealType)):this.todayMenus},filteredMealTypes(){const e=new Set(this.todayMenus.map((e=>this.getMealTypeID(e.menu_id))));return this.meal_types.filter((t=>e.has(t.id)))}},methods:{getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusForSelectedDate()},setToday(){this.selectedDate=this.getTodayDate(),this.fetchMenusForSelectedDate()},async fetchMenusForSelectedDate(){try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-ph/menus-by-day/${this.selectedDate}`);console.log("API Response:",e.data),e.data.menus&&e.data.menus.length>0?(this.todayMenus=e.data.menus,this.todayMenus.forEach((e=>{e.quantity=0})),console.log("Date",this.selectedDate)):this.todayMenus=[]}catch(e){this.todayMenus=[]}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},getMenuCal(e){const t=this.menus.find((t=>t.id===e));return t?t.cal:null},getMenuProtein(e){const t=this.menus.find((t=>t.id===e));return t?t.protein:null},getMenuFat(e){const t=this.menus.find((t=>t.id===e));return t?t.fat:null},getMenuCarb(e){const t=this.menus.find((t=>t.id===e));return t?t.carb:null},getMenuImage(e){const t=this.menus.find((t=>t.id===e));return t?t.image:null},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),a=s.getDate(),o=t[s.getMonth()],l=s.getFullYear();return`${a} ${o} ${l}`},formatDateEng(e){const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e).toLocaleDateString("en-US",t);return s},orderMenu(e){e.quantity&&e.quantity>0?re.A.post("http://127.0.0.1:3333/order-ph",{menu_id:e.menu_id,quantity:e.quantity,order_date:this.selectedDate}).then((t=>{console.log("Order Success:",t.data),alert(`สั่งซื้อ ${e.quantity} ชิ้น ${this.getMenuEnglishName(e.menu_id)} สำหรับวันที่ ${this.selectedDate} เรียบร้อยแล้ว`),e.quantity=0})).catch((e=>{console.error("Order Error:",e),alert("เกิดข้อผิดพลาดในการสั่งซื้อ")})):alert("กรุณาระบุจำนวนที่ต้องการ")},adjustQuantity(e,t){const s=e.quantity+t;s>=0&&(e.quantity=s)}},created(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},mounted(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},watch:{selectedDate(){this.fetchMenusForSelectedDate()}}};const $u=(0,ce.A)(Uu,[["render",ju],["__scopeId","data-v-1b918d03"]]);var Wu=$u;function qu(e,t,s,a,l,n){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("h1",null,"Welcome, "+(0,r.v_)(l.user.username),1),(0,o.Lk)("p",null,"Email: "+(0,r.v_)(l.user.email),1),(0,o.Lk)("p",null,"Name: "+(0,r.v_)(l.user.fullname),1)])}var Ju={data(){return{user:{},error:null}},created(){this.fetchProfile()},methods:{async fetchProfile(){try{this.user=await ie.getProfile()}catch(e){this.error=e.message||"Failed to fetch profile"}},async logout(){try{await ie.logout(),this.$router.push("/test")}catch(e){this.error=e.message||"Logout failed"}}}};const Zu=(0,ce.A)(Ju,[["render",qu]]);var Ku=Zu;const Yu={class:"flex space-x-2 items-center relative"},Hu={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Gu={class:"text-m text-custom-orange font-bold"},ep={class:"sort relative inline-block",ref:"sortDropdown"},tp={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},sp={class:"list-none p-0 m-0"},ap={key:0,class:"material-symbols-outlined text-sm"},op={key:0,class:"material-symbols-outlined text-sm"},lp={class:"flex w-[250px] relative"},rp={class:"min-w-full table-fixed border-collapse mt-4"},np={class:"bg-custom-orange text-white"},ip={class:"px-4 py-2 align-top"},dp={class:"px-4 py-2 align-top font-bold text-custom-orange"},cp={class:"px-4 py-2 align-top"},up={class:"flex items-center"},pp={class:"flex items-center"},hp={class:"px-4 py-2 align-top"},gp={class:"px-4 py-2 align-top font-bold"},mp={class:"px-4 py-2 text-right relative"},yp=["onClick"],kp={class:"list-none p-0 m-0"},bp=["onClick"],xp=["onClick"],fp=["onClick"],wp={key:0,class:"modal fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-10 z-50"},vp={class:"bg-white rounded-md shadow-lg w-1000"},_p={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Lp={class:"flex space-x-2"},Dp={class:"p-6"},Cp={key:0},Pp={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},Mp=["disabled"],Tp={class:"flex items-center space-x-1"},Sp=["onClick"],Ep=["disabled"];function Rp(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",Yu,[(0,o.Lk)("div",Hu,[t[15]||(t[15]=(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"person",-1)),t[16]||(t[16]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนลูกค้าทั้งหมด: ",-1)),(0,o.Lk)("span",Gu,(0,r.v_)(n.customers.length)+" คน",1)]),(0,o.Lk)("div",ep,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[17]||(t[17]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",tp,[(0,o.Lk)("ul",sp,[(0,o.Lk)("li",{onClick:t[1]||(t[1]=e=>i.sortData("customer_id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[18]||(t[18]=(0,o.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"customer_id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",ap,(0,r.v_)(1===n.sortDirection["customer_id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[2]||(t[2]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[19]||(t[19]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",op,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[3]||(t[3]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[20]||(t[20]=[(0,o.Lk)("span",null,"Clear Sort",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",lp,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>n.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[5]||(t[5]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[6]||(t[6]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.Lk)("table",rp,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",np,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredCustomers,((s,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:a,class:"customers-data bg-white relative"},[(0,o.Lk)("td",ip,(0,r.v_)(s.customer_id),1),(0,o.Lk)("td",dp,(0,r.v_)(s.name),1),(0,o.Lk)("td",cp,[(0,o.Lk)("div",up,[t[21]||(t[21]=(0,o.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"mail",-1)),(0,o.eW)((0,r.v_)(s.email),1)]),(0,o.Lk)("div",pp,[t[22]||(t[22]=(0,o.Lk)("span",{class:"material-symbols-outlined mr-1 text-xl"},"phone",-1)),(0,o.eW)((0,r.v_)(s.tel),1)])]),(0,o.Lk)("td",hp,(0,r.v_)(s.address),1),(0,o.Lk)("td",gp,(0,r.v_)(s.package),1),(0,o.Lk)("td",mp,[(0,o.Lk)("button",{onClick:e=>i.toggleMoreDropdown(a)},t[23]||(t[23]=[(0,o.Lk)("span",{class:"material-symbols-outlined cursor-pointer"},"more_vert",-1)]),8,yp),n.moreOpenDropdownIndex===a?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,r.C4)([i.moreDropdownPositionClass(a),"dropdown-menu absolute right-0 text-center bg-white shadow-lg rounded-md z-50 w-40 border border-gray-300"])},[(0,o.Lk)("ul",kp,[(0,o.Lk)("li",{onClick:e=>i.onViewDetails(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-gray-700 border-b border-gray-300"}," ดูรายละเอียด ",8,bp),(0,o.Lk)("li",{onClick:e=>i.onEdit(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-blue-500 border-b border-gray-300"}," แก้ไขข้อมูล ",8,xp),(0,o.Lk)("li",{onClick:e=>i.onDelete(s),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 text-red-500 border-b border-gray-300"}," ลบข้อมูล ",8,fp)])],2)):(0,o.Q3)("",!0)]),e.isDetailModalOpen?((0,o.uX)(),(0,o.CE)("div",wp,[(0,o.Lk)("div",vp,[(0,o.Lk)("div",_p,[t[25]||(t[25]=(0,o.Lk)("span",{class:"font-bold"},"Copy & Paste เพื่อสรุปยอดส่งให้ลูกค้า",-1)),(0,o.Lk)("div",Lp,[t[24]||(t[24]=(0,o.Lk)("span",{class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," edit ",-1)),(0,o.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>i.closeDetailModal&&i.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Dp,[t[26]||(t[26]=(0,o.Lk)("p",{class:"text-gray-500"},[(0,o.Lk)("strong",null,"ขออนุญาตสรุปยอดนะคะ")],-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredResultCustomer,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"mb-2"},[(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,(0,r.v_)(i.formatLabel(t))+":",1),(0,o.eW)(" "+(0,r.v_)(e),1)])])))),128)),t[27]||(t[27]=(0,o.Lk)("p",{class:"text-gray-500"},[(0,o.Lk)("strong",null,"กรุณาชำระเงิน ของวันสรุปยอด เพื่อให้ท่านได้รับอาหารตามวันที่กำหนดในรายการสรุปยอดนี้นะคะ")],-1))])])])):(0,o.Q3)("",!0)])))),128)),0===n.filteredCustomers.length?((0,o.uX)(),(0,o.CE)("tr",Cp,t[28]||(t[28]=[(0,o.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",Pp,[(0,o.Lk)("button",{onClick:t[9]||(t[9]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[29]||(t[29]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Mp),(0,o.Lk)("div",Tp,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[10]||(t[10]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[11]||(t[11]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Sp)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[12]||(t[12]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[13]||(t[13]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[14]||(t[14]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[30]||(t[30]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Ep)])])}var Ap={name:"Test2Page",data(){return{headers:["รหัสลูกค้า","ชื่อ","ช่องทางการติดต่อ","ที่อยู่","แพ็กเกจที่เลือก",""],headerWidths:["10%","15%","20%","40%","10%","5%"],searchQuery:"",filteredCustomers:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",openDropdownIndex:null,customers:[],currentPage:1,itemsPerPage:10,selectedCustomer:{},moreOpenDropdownIndex:null}},computed:{totalPages(){return Math.ceil(this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}},filteredResultCustomer(){return{name:this.selectedCustomer.name,address:this.selectedCustomer.address}}},methods:{async fetchCustomers(){try{const e=await re.A.get("http://127.0.0.1:3333/customers-hhb");this.filteredCustomers=e.data,console.log("Customers loaded: ",this.customers),this.customers=e.data,this.updatePage()}catch(e){console.error("Error fetching customers:",e)}},search(){const e=this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t}));this.currentPage=1,this.filteredCustomers=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredCustomers=this.customers.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.customer_id.toString().includes(this.searchQuery);return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.customers.sort(((t,s)=>{const a=t[e],o=s[e];return a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.customers.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),e.target.closest(".dropdown-menu")||e.target.closest("button")||(this.moreOpenDropdownIndex=null)},toggleMoreDropdown(e){this.moreOpenDropdownIndex=this.moreOpenDropdownIndex===e?null:e},moreDropdownPositionClass(e){return e>=this.filteredCustomers.length-2?"dropdown-up":"dropdown-down"},onViewDetails(e){this.selectedCustomer=e,this.isDetailModalOpen=!0,this.moreOpenDropdownIndex=null},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedCustomer={}},onEdit(e){alert(`แก้ไขข้อมูล: ${e.name}`)},onDelete(e){alert(`ลบข้อมูล: ${e.name}`)},formatLabel(e){const t={name:"ชื่อ",address:"muj"};return t[e]||e}},created(){this.filteredCustomers=this.customers,this.sortData("id"),this.fetchCustomers(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchCustomers(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Fp=(0,ce.A)(Ap,[["render",Rp],["__scopeId","data-v-b0310cc4"]]);var Op=Fp;const Xp={class:"flex space-x-2 items-center relative"},zp={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Np={class:"text-m text-custom-orange font-bold"},Qp={class:"add relative inline-block"},Vp={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ip={class:"bg-white rounded-md shadow-lg w-1000"},Bp={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},jp={class:"flex space-x-2"},Up={class:"bg-white rounded-lg p-6 w-[400px]"},$p={class:"mb-4"},Wp={class:"flex justify-end space-x-2"},qp={class:"sort relative inline-block",ref:"sortDropdown"},Jp={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Zp={class:"list-none p-0 m-0"},Kp={key:0,class:"material-symbols-outlined text-sm"},Yp={key:0,class:"material-symbols-outlined text-sm"},Hp={class:"flex w-[250px] relative"},Gp={class:"min-w-full table-fixed border-collapse mt-4"},eh={class:"bg-custom-orange text-white"},th={class:"px-4 py-2 align-top"},sh={class:"px-4 py-2 align-top font-bold text-custom-orange"},ah={class:"px-4 py-2 align-top text-right"},oh={class:"flex justify-end space-x-2"},lh=["onClick"],rh=["onClick"],nh={key:0},ih={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},dh={class:"bg-white rounded-md shadow-lg w-1000"},ch={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},uh={class:"flex space-x-2"},ph={class:"bg-white rounded-lg shadow-lg p-6 w-96"},hh={class:"mb-4"},gh={class:"flex justify-end space-x-2"},mh={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},yh={class:"bg-white rounded-lg shadow-md w-1/3"},kh={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},bh={class:"flex justify-end space-x-2 p-4"},xh={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},fh=["disabled"],wh={class:"flex items-center space-x-1"},vh=["onClick"],_h=["disabled"];function Lh(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",Xp,[(0,o.Lk)("div",zp,[t[26]||(t[26]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภทโปรโมชันทั้งหมด: ",-1)),(0,o.Lk)("span",Np,(0,r.v_)(n.promotion_types.length)+" รายการ",1)]),(0,o.Lk)("div",Qp,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[27]||(t[27]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มข้อมูล",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",Vp,[(0,o.Lk)("div",Ip,[(0,o.Lk)("div",Bp,[t[28]||(t[28]=(0,o.Lk)("div",{class:"flex-1 flex items-left"},[(0,o.Lk)("span",{class:"text-xl font-bold"},"เพิ่มข้อมูลใหม่")],-1)),(0,o.Lk)("div",jp,[(0,o.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Up,[(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>i.addPromotionType&&i.addPromotionType(...e)),["prevent"]))},[(0,o.Lk)("div",$p,[t[29]||(t[29]=(0,o.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อโปรโมชั่น",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>n.newPromotionType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[a.Jo,n.newPromotionType.name]])]),(0,o.Lk)("div",Wp,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"},"ยกเลิก"),t[30]||(t[30]=(0,o.Lk)("button",{type:"submit",class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},[(0,o.Lk)("span",{class:"material-symbols-outlined"},"save"),(0,o.eW)("บันทึก")],-1))])],32)])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",qp,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[31]||(t[31]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Jp,[(0,o.Lk)("ul",Zp,[(0,o.Lk)("li",{onClick:t[6]||(t[6]=e=>i.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[32]||(t[32]=(0,o.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Kp,(0,r.v_)(1===n.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[7]||(t[7]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[33]||(t[33]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Yp,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[8]||(t[8]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[34]||(t[34]=[(0,o.Lk)("span",null,"Clear Sort",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Hp,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>n.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[10]||(t[10]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[11]||(t[11]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.Lk)("table",Gp,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",eh,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredPromotionType,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,o.Lk)("td",th,(0,r.v_)(e.id),1),(0,o.Lk)("td",sh,(0,r.v_)(e.name),1),(0,o.Lk)("td",ah,[(0,o.Lk)("div",oh,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[35]||(t[35]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,lh),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[36]||(t[36]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,rh)])])])))),128)),0===n.filteredPromotionType.length?((0,o.uX)(),(0,o.CE)("tr",nh,t[37]||(t[37]=[(0,o.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",ih,[(0,o.Lk)("div",dh,[(0,o.Lk)("div",ch,[t[38]||(t[38]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไข Promotion Type",-1)),(0,o.Lk)("div",uh,[(0,o.Lk)("span",{onClick:t[13]||(t[13]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",ph,[(0,o.Lk)("div",hh,[t[39]||(t[39]=(0,o.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>n.selectedPromotionType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[a.Jo,n.selectedPromotionType.name]])]),(0,o.Lk)("div",gh,[(0,o.Lk)("button",{onClick:t[15]||(t[15]=e=>n.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[40]||(t[40]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,o.eW)("บันทึก ")]))])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",mh,[(0,o.Lk)("div",yh,[(0,o.Lk)("div",kh,[t[41]||(t[41]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[42]||(t[42]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,o.Lk)("div",bh,[(0,o.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",xh,[(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[43]||(t[43]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,fh),(0,o.Lk)("div",wh,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[21]||(t[21]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[22]||(t[22]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,vh)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[23]||(t[23]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[24]||(t[24]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[25]||(t[25]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[44]||(t[44]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,_h)])])}var Dh={name:"PromotionTypePage",data(){return{headers:["รหัส","ชื่อ",""],headerWidths:["10%","85%","5%"],searchQuery:"",filteredPromotionType:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",promotion_types:[],currentPage:1,itemsPerPage:10,selectedPromotionType:{},isEditModalOpen:!1,isAddModalOpen:!1,newPromotionType:{name:""},isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}}},methods:{async fetchPromotionTypes(){try{const e=await re.A.get("http://127.0.0.1:3333/promotion-types");this.filteredPromotionType=e.data,console.log("Response data:",e.data),this.promotion_types=e.data,this.updatePage()}catch(e){console.error("Error fetching promotion_type:",e)}},search(){const e=this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t}));this.currentPage=1,this.filteredPromotionType=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredPromotionType=this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.promotion_types.sort(((t,s)=>{const a=t[e],o=s[e];return a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.promotion_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedPromotionType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await re.A.put(`http://127.0.0.1:3333/promotion-types/${this.selectedPromotionType.id}`,{name:this.selectedPromotionType.name});const e=this.promotion_types.findIndex((e=>e.id===this.selectedPromotionType.id));-1!==e&&(this.promotion_types[e]={...this.selectedPromotionType},this.updatePage()),this.isEditModalOpen=!1}catch(e){console.error("Error updating promotion type:",e)}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPromotionType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/promotion-types/${this.itemToDelete}`),this.promotion_types=this.promotion_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0,this.newPromotionType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addPromotionType(){if(this.newPromotionType.name.trim())try{const e=await re.A.post("http://127.0.0.1:3333/promotion-types",this.newPromotionType);this.promotion_types.push(e.data),this.updatePage(),this.closeAddModal()}catch(e){console.error("Error adding promotion type:",e),alert("เกิดข้อผิดพลาดในการเพิ่มข้อมูล")}else alert("กรุณากรอกชื่อโปรโมชั่น")}},created(){this.filteredPromotionType=this.promotion_types,this.sortData("id"),this.fetchPromotionTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPromotionTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Ch=(0,ce.A)(Dh,[["render",Lh],["__scopeId","data-v-c67208be"]]);var Ph=Ch;const Mh={class:"flex space-x-2 items-center relative"},Th={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Sh={class:"text-m text-custom-orange font-bold"},Eh={class:"add relative inline-block"},Rh={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Ah={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[500px] flex flex-col"},Fh={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Oh={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Xh=["value"],zh={class:"flex justify-end space-x-4 p-4 bg-gray-100 rounded-b-md"},Nh={class:"sort relative inline-block",ref:"sortDropdown"},Qh={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Vh={class:"list-none p-0 m-0"},Ih={key:0,class:"material-symbols-outlined text-sm"},Bh={key:0,class:"material-symbols-outlined text-sm"},jh={class:"filter relative inline-block",ref:"filterDropdown"},Uh={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},$h={class:"p-4 w-[500px] list-none"},Wh={class:"grid grid-cols-3 gap-4"},qh=["value"],Jh={class:"flex justify-between mt-4 border-t pt-2"},Zh={class:"flex space-x-2"},Kh={class:"flex w-[250px] relative"},Yh={class:"min-w-full table-fixed border-collapse mt-4"},Hh={class:"bg-custom-orange text-white"},Gh={class:"px-4 py-2 align-top"},eg={class:"px-4 py-2 align-top font-bold text-custom-orange"},tg={class:"px-4 py-2 align-top"},sg={class:"px-4 py-2 align-top text-right"},ag={class:"flex justify-end space-x-2"},og=["onClick"],lg=["onClick"],rg={key:0},ng={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},ig={class:"bg-white rounded-md shadow-lg w-1000"},dg={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},cg={class:"flex space-x-2"},ug={class:"bg-white rounded-lg shadow-lg p-6 w-96"},pg={class:"mb-4"},hg={class:"mb-4"},gg=["value"],mg={class:"flex justify-end space-x-2"},yg={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},kg={class:"bg-white rounded-lg shadow-md w-1/3"},bg={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},xg={class:"flex justify-end space-x-2 p-4"},fg={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},wg=["disabled"],vg={class:"flex items-center space-x-1"},_g=["onClick"],Lg=["disabled"];function Dg(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",Mh,[(0,o.Lk)("div",Th,[t[33]||(t[33]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนโปรแกรมทั้งหมด: ",-1)),(0,o.Lk)("span",Sh,(0,r.v_)(n.programs.length)+" รายการ",1)]),(0,o.Lk)("div",Eh,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[34]||(t[34]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มโปรแกรม",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",Rh,[(0,o.Lk)("div",Ah,[(0,o.Lk)("div",Fh,[t[35]||(t[35]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มโปรแกรมเข้า",-1)),(0,o.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,o.Lk)("div",Oh,[(0,o.Lk)("div",null,[t[36]||(t[36]=(0,o.Lk)("label",{for:"programName",class:"block font-bold text-gray-700"},"ชื่อโปรแกรม",-1)),(0,o.bo)((0,o.Lk)("input",{id:"programName","onUpdate:modelValue":t[2]||(t[2]=e=>n.newProgram.name=e),type:"text",placeholder:"กรอกชื่อโปรแกรม",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newProgram.name]])]),(0,o.Lk)("div",null,[t[38]||(t[38]=(0,o.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"ประเภทโปรโมชั่น",-1)),(0,o.bo)((0,o.Lk)("select",{id:"promotionType","onUpdate:modelValue":t[3]||(t[3]=e=>n.newProgram.promotion_type_id=e),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},[t[37]||(t[37]=(0,o.Lk)("option",{value:"",disabled:""},"เลือกประเภทโปรโมชั่น",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.promotion_types,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,Xh)))),128))],512),[[a.u1,n.newProgram.promotion_type_id]])])]),(0,o.Lk)("div",zh,[(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.addProgram&&i.addProgram(...e)),class:"px-4 py-2 rounded bg-green-500 text-white hover:bg-green-600"}," บันทึก ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Nh,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[39]||(t[39]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Qh,[(0,o.Lk)("ul",Vh,[(0,o.Lk)("li",{onClick:t[7]||(t[7]=e=>i.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[40]||(t[40]=(0,o.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Ih,(0,r.v_)(1===n.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[8]||(t[8]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[41]||(t[41]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Bh,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[9]||(t[9]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[42]||(t[42]=[(0,o.Lk)("span",null,"Clear Sort",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",jh,[(0,o.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[43]||(t[43]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Filter",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isFilterDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Uh,[(0,o.Lk)("div",$h,[t[45]||(t[45]=(0,o.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยประเภทโปรโมชัน",-1)),(0,o.Lk)("div",Wh,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.promotion_types,(e=>((0,o.uX)(),(0,o.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=e=>n.selectedPromotionType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,qh),[[a.lH,n.selectedPromotionType]]),(0,o.Lk)("span",null,(0,r.v_)(e.name),1)])))),128))]),(0,o.Lk)("div",Jh,[(0,o.Lk)("li",{onClick:t[12]||(t[12]=(...e)=>i.clearFilter&&i.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[44]||(t[44]=[(0,o.Lk)("span",null,"Clear Filter",-1)])),(0,o.Lk)("div",Zh,[(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>i.applyFilter&&i.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง "),(0,o.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"px-4 py-2 bg-gray-400 hover:bg-gray-600 text-white rounded-md"}," ยกเลิก ")])])])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Kh,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[15]||(t[15]=e=>n.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[16]||(t[16]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[17]||(t[17]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.Lk)("table",Yh,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",Hh,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredProgram,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,o.Lk)("td",Gh,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",eg,(0,r.v_)(e.name),1),(0,o.Lk)("td",tg,(0,r.v_)(i.getPromotionTypeName(e.promotion_type_id)),1),(0,o.Lk)("td",sg,[(0,o.Lk)("div",ag,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[46]||(t[46]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,og),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[47]||(t[47]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,lg)])])])))),128)),0===n.filteredProgram.length?((0,o.uX)(),(0,o.CE)("tr",rg,t[48]||(t[48]=[(0,o.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",ng,[(0,o.Lk)("div",ig,[(0,o.Lk)("div",dg,[t[49]||(t[49]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไขโปรแกรม",-1)),(0,o.Lk)("div",cg,[(0,o.Lk)("span",{onClick:t[19]||(t[19]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",ug,[(0,o.Lk)("div",pg,[t[50]||(t[50]=(0,o.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>n.selectedProgram.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedProgram.name]])]),(0,o.Lk)("div",hg,[t[52]||(t[52]=(0,o.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"ประเภทโปรโมชั่น",-1)),(0,o.bo)((0,o.Lk)("select",{id:"editPromotionType","onUpdate:modelValue":t[21]||(t[21]=e=>n.selectedProgram.promotion_type_id=e),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},[t[51]||(t[51]=(0,o.Lk)("option",{value:"",disabled:""},"เลือกประเภทโปรโมชั่น",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.promotion_types,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,gg)))),128))],512),[[a.u1,n.selectedProgram.promotion_type_id]])]),(0,o.Lk)("div",mg,[(0,o.Lk)("button",{onClick:t[22]||(t[22]=e=>n.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[53]||(t[53]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,o.eW)("บันทึก ")]))])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",yg,[(0,o.Lk)("div",kg,[(0,o.Lk)("div",bg,[t[54]||(t[54]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[24]||(t[24]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[55]||(t[55]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,o.Lk)("div",xg,[(0,o.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",fg,[(0,o.Lk)("button",{onClick:t[27]||(t[27]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[56]||(t[56]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,wg),(0,o.Lk)("div",vg,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[28]||(t[28]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[29]||(t[29]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,_g)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[30]||(t[30]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[31]||(t[31]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[32]||(t[32]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[57]||(t[57]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Lg)])])}var Cg={name:"ProgramPage",data(){return{headers:["#","ชื่อ","ประเภทโปรโมชัน",""],headerWidths:["10%","50%","35%","5%"],searchQuery:"",filteredProgram:[],selectedPromotionType:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",programs:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newProgram:{name:"",promotion_type_id:""},selectedProgram:{id:"",name:"",promotion_type_id:""},promotion_types:[],isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.programs.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedPromotionType.length||this.selectedPromotionType.includes(e.promotion_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}}},methods:{async fetchPrograms(){try{const e=await re.A.get("http://127.0.0.1:3333/programs");this.filteredProgram=e.data,console.log("Response data:",e.data),this.programs=e.data,this.updatePage()}catch(e){console.error("Error fetching program:",e)}},search(){const e=this.programs.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedPromotionType.length||this.selectedPromotionType.includes(e.promotion_type_id);return t&&s}));this.currentPage=1,this.filteredProgram=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredProgram=this.programs.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedPromotionType.length||this.selectedPromotionType.includes(e.promotion_type_id);return t&&s})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.programs.sort(((t,s)=>{const a=t[e],o=s[e];return a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.programs.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedPromotionType.length>0?this.filteredProgram=this.programs.filter((e=>this.selectedPromotionType.includes(e.promotion_type_id))):this.filteredProgram=this.programs,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedPromotionType=[],this.filteredProgram=this.programs,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getPromotionTypeName(e){const t=this.promotion_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){this.selectedProgram={...e},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedProgram.name||!this.selectedProgram.promotion_type_id)return void alert("กรุณากรอกข้อมูลให้ครบถ้วน");const e=await re.A.put(`http://127.0.0.1:3333/programs/${this.selectedProgram.id}`,{name:this.selectedProgram.name,promotion_type_id:this.selectedProgram.promotion_type_id});console.log("Program updated:",e.data);const t=this.programs.findIndex((e=>e.id===this.selectedProgram.id));-1!==t&&(this.programs[t]=e.data),this.isEditModalOpen=!1,this.updatePage()}catch(e){console.error("Error saving changes:",e),alert("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedProgram={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/programs/${this.itemToDelete}`),this.programs=this.programs.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewProgram()},resetNewProgram(){this.newProgram={name:"",promotion_type_id:""}},async addProgram(){if(this.newProgram.name&&this.newProgram.promotion_type_id)try{const e=await re.A.post("http://127.0.0.1:3333/programs",{name:this.newProgram.name,promotion_type_id:this.newProgram.promotion_type_id});console.log("Added Program:",e.data),this.programs.push(e.data),this.closeAddModal(),this.updatePage()}catch(e){console.error("Error adding program:",e),alert("เกิดข้อผิดพลาดในการเพิ่มข้อมูล")}else alert("กรุณากรอกข้อมูลให้ครบถ้วน")},async fetchPromotionTypes(){try{const e=await re.A.get("http://127.0.0.1:3333/promotion-types");this.promotion_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}}},created(){this.filteredProgram=this.programs,this.sortData("id"),this.fetchPrograms(),this.fetchPromotionTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPrograms(),this.fetchPromotionTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Pg=(0,ce.A)(Cg,[["render",Dg],["__scopeId","data-v-2f961f14"]]);var Mg=Pg;const Tg={class:"flex space-x-2 items-center relative"},Sg={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Eg={class:"text-m text-custom-orange font-bold"},Rg={class:"ml-2"},Ag={key:0},Fg={class:"add relative inline-block"},Og={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Xg={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},zg={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Ng={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Qg={class:"flex flex-wrap gap-4"},Vg={class:"flex-1"},Ig={class:"flex-1"},Bg={class:"flex-1"},jg={class:"flex-1"},Ug={class:"flex gap-4"},$g={class:"flex-1"},Wg={class:"flex-1"},qg={class:"space-y-4 overflow-y-auto flex-grow"},Jg={class:"flex flex-wrap gap-4"},Zg={class:"flex-1"},Kg={class:"flex-1"},Yg={class:"flex-1"},Hg={class:"flex-1"},Gg={class:"flex flex-wrap gap-4"},em={class:"flex-1"},tm={class:"flex-1"},sm={class:"flex-1"},am={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},om={class:"flex space-x-2"},lm={class:"sort relative inline-block",ref:"sortDropdown"},rm={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},nm={class:"list-none p-0 m-0"},im={key:0,class:"material-symbols-outlined text-sm"},dm={key:0,class:"material-symbols-outlined text-sm"},cm={class:"filter relative inline-block",ref:"filterDropdown"},um={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},pm={class:"p-4 w-[500px] list-none"},hm={class:"flex justify-between items-center"},gm={class:"font-semibold mb-2 text-custom-orange"},mm=["onClick"],ym={class:"grid grid-cols-2 gap-4"},km=["value"],bm={class:"break-words"},xm={class:"mb-4"},fm={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},wm={class:"flex space-x-2"},vm={class:"flex w-[250px] relative"},_m={class:"min-w-full table-fixed border-collapse mt-4"},Lm={class:"bg-custom-orange text-white"},Dm={class:"px-4 py-2 align-top"},Cm={class:"px-4 py-2 align-top"},Pm={class:"px-4 py-2 align-top"},Mm={class:"px-4 py-2 align-top font-bold text-custom-orange"},Tm={key:0},Sm={class:"px-4 py-2 align-top"},Em={class:"px-4 py-2 align-top"},Rm={class:"px-4 py-2 align-top"},Am={class:"px-4 py-2 align-top text-right"},Fm={class:"flex justify-end space-x-2 list-none"},Om=["onClick"],Xm=["onClick"],zm=["onClick"],Nm={key:0},Qm={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Vm={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Im={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Bm={class:"flex space-x-2"},jm={class:"p-6"},Um={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},$m={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Wm={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},qm={class:"flex space-x-2"},Jm={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Zm={class:"mb-4"},Km={class:"mb-4"},Ym={class:"mb-4"},Hm={class:"flex flex-wrap gap-4"},Gm={class:"flex-1"},ey={class:"flex-1"},ty={class:"flex-1"},sy={class:"flex-1"},ay={class:"flex gap-4"},oy={class:"flex-1"},ly={class:"flex-1"},ry={class:"mb-4"},ny={class:"space-y-4 overflow-y-auto flex-grow"},iy={class:"flex flex-wrap gap-4"},dy={class:"flex-1"},cy={class:"flex-1"},uy={class:"flex-1"},py={class:"flex-1"},hy={class:"flex flex-wrap gap-4"},gy={class:"flex-1"},my={class:"flex-1"},yy={class:"flex-1"},ky={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},by={class:"flex space-x-2"},xy={key:2,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},fy={class:"bg-white rounded-lg shadow-md w-1/3"},wy={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},vy={class:"flex justify-end space-x-2 p-4"},_y={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},Ly=["disabled"],Dy={class:"flex items-center space-x-1"},Cy=["onClick"],Py=["disabled"];function My(e,t,s,l,n,i){const d=(0,o.g2)("multiselect");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[75]||(t[75]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[74]||(t[74]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[77]||(t[77]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[76]||(t[76]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",Tg,[(0,o.Lk)("div",Sg,[t[78]||(t[78]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนแพ็คเกจทั้งหมด: ",-1)),(0,o.Lk)("span",Eg,(0,r.v_)(n.packages.length)+" รายการ",1)]),n.selectedProgram.length>0||e.selectedMonthYear?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>i.clearFilter&&i.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[80]||(t[80]=(0,o.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,o.Lk)("span",Rg,[t[79]||(t[79]=(0,o.eW)(" รีเซ็ตตัวกรอง ")),n.selectedProgram.length>0?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.eW)(" ("+(0,r.v_)(n.selectedProgram.length)+") ",1)],64)):(0,o.Q3)("",!0),e.selectedMonthYear?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[n.selectedProgram.length>0?((0,o.uX)(),(0,o.CE)("span",Ag,", ")):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,r.v_)(i.formattedStartDate(e.selectedMonthYear)),1)],64)):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0),(0,o.Lk)("div",Fg,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[81]||(t[81]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มแพ็คเกจ",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",Og,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[83]||(t[83]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[82]||(t[82]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",Xg,[(0,o.Lk)("div",zg,[t[84]||(t[84]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มแพ็คเกจ",-1)),(0,o.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,o.Lk)("div",Ng,[(0,o.Lk)("div",null,[t[85]||(t[85]=(0,o.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,o.bF)(d,{modelValue:n.selectedPromotionType,"onUpdate:modelValue":t[6]||(t[6]=e=>n.selectedPromotionType=e),options:n.promotion_types,"custom-label":e.customLabel,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options","custom-label"])]),(0,o.Lk)("div",null,[t[86]||(t[86]=(0,o.Lk)("label",{for:"programType",class:"block font-bold text-gray-700"},"Program",-1)),(0,o.bF)(d,{modelValue:n.newPackage.program_id,"onUpdate:modelValue":t[7]||(t[7]=e=>n.newPackage.program_id=e),options:i.filteredPrograms,"track-by":"id",label:"name",placeholder:"เลือกประเภทโปรแกรม"},null,8,["modelValue","options"])]),(0,o.Lk)("div",null,[t[87]||(t[87]=(0,o.Lk)("label",{for:"packageName",class:"block font-bold text-gray-700"},"Package",-1)),(0,o.bo)((0,o.Lk)("input",{id:"packageName","onUpdate:modelValue":t[8]||(t[8]=e=>n.newPackage.name=e),type:"text",placeholder:"กรอกชื่อแพ็คเกจ",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.name]])]),(0,o.Lk)("div",null,[t[88]||(t[88]=(0,o.Lk)("label",{for:"packageDetail",class:"block font-bold text-gray-700"},"Package Details for Purchase Summary",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"packageDetail","onUpdate:modelValue":t[9]||(t[9]=e=>n.newPackage.package_detail=e),placeholder:"กรอกรายละเอียดแพ็คเกจ",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[a.Jo,n.newPackage.package_detail]])]),(0,o.Lk)("div",Qg,[(0,o.Lk)("div",Vg,[t[89]||(t[89]=(0,o.Lk)("label",{for:"packageValidity",class:"block font-bold text-gray-700"},"Package Validity",-1)),(0,o.bo)((0,o.Lk)("input",{id:"packageValidity","onUpdate:modelValue":t[10]||(t[10]=e=>n.newPackage.package_validity=e),type:"number",step:"1",min:"0",placeholder:"กรอก Package Validity",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.package_validity]])]),(0,o.Lk)("div",Ig,[t[90]||(t[90]=(0,o.Lk)("label",{for:"totalDays",class:"block font-bold text-gray-700"},"Total Days",-1)),(0,o.bo)((0,o.Lk)("input",{id:"totalDays","onUpdate:modelValue":t[11]||(t[11]=e=>n.newPackage.total_days=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Days",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.total_days]])]),(0,o.Lk)("div",Bg,[t[91]||(t[91]=(0,o.Lk)("label",{for:"boxesPerDay",class:"block font-bold text-gray-700"},"# of Boxes/Day",-1)),(0,o.bo)((0,o.Lk)("input",{id:"boxesPerDay","onUpdate:modelValue":t[12]||(t[12]=e=>n.newPackage.boxes_per_day=e),type:"number",step:"1",min:"0",placeholder:"กรอก # of Boxes/Day",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.boxes_per_day]])]),(0,o.Lk)("div",jg,[t[92]||(t[92]=(0,o.Lk)("label",{for:"totalBoxes",class:"block font-bold text-gray-700"},"Total Boxes",-1)),(0,o.bo)((0,o.Lk)("input",{id:"totalBoxes","onUpdate:modelValue":t[13]||(t[13]=e=>n.newPackage.total_boxes=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Boxes",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.total_boxes]])])]),(0,o.Lk)("div",Ug,[(0,o.Lk)("div",$g,[t[93]||(t[93]=(0,o.Lk)("label",{for:"packagePrice",class:"block font-bold text-gray-700"},"ราคา",-1)),(0,o.bo)((0,o.Lk)("input",{id:"packagePrice","onUpdate:modelValue":t[14]||(t[14]=e=>n.newPackage.price=e),type:"number",step:"1",min:"0",placeholder:"กรอกราคา",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.price]])]),(0,o.Lk)("div",Wg,[t[94]||(t[94]=(0,o.Lk)("label",{for:"startMonth",class:"block font-bold text-gray-700"},"เลือกเดือนเริ่มต้น (เฉพาะ Flash Sale)",-1)),(0,o.bo)((0,o.Lk)("input",{id:"startMonth","onUpdate:modelValue":t[15]||(t[15]=e=>n.newPackage.start_date=e),type:"month",placeholder:"เลือกเดือนเริ่มต้น",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.start_date]])])]),(0,o.Lk)("div",null,[t[95]||(t[95]=(0,o.Lk)("label",{for:"promotionDetail",class:"block font-bold text-gray-700"},"รายละเอียดโปรโมชัน",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"promotionDetail","onUpdate:modelValue":t[16]||(t[16]=e=>n.newPackage.promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชัน",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[a.Jo,n.newPackage.promotion_detail]])]),(0,o.Lk)("div",qg,[(0,o.Lk)("div",Jg,[(0,o.Lk)("div",Zg,[t[96]||(t[96]=(0,o.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[17]||(t[17]=e=>n.newPackage.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.free_mad]])]),(0,o.Lk)("div",Kg,[t[97]||(t[97]=(0,o.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[18]||(t[18]=e=>n.newPackage.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.free_dessert]])]),(0,o.Lk)("div",Yg,[t[98]||(t[98]=(0,o.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[19]||(t[19]=e=>n.newPackage.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.free_brittles]])]),(0,o.Lk)("div",Hg,[t[99]||(t[99]=(0,o.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[20]||(t[20]=e=>n.newPackage.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.free_energy_balls]])])]),(0,o.Lk)("div",Gg,[(0,o.Lk)("div",em,[t[100]||(t[100]=(0,o.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[21]||(t[21]=e=>n.newPackage.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.free_dressing]])]),(0,o.Lk)("div",tm,[t[101]||(t[101]=(0,o.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[22]||(t[22]=e=>n.newPackage.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.free_yoghurt]])]),(0,o.Lk)("div",sm,[t[102]||(t[102]=(0,o.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[23]||(t[23]=e=>n.newPackage.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newPackage.free_granola]])])])])]),(0,o.Lk)("div",am,[(0,o.Lk)("li",{onClick:t[24]||(t[24]=(...e)=>i.clearAdd&&i.clearAdd(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[103]||(t[103]=[(0,o.Lk)("span",null,"รีเซ็คข้อมูล",-1)])),(0,o.Lk)("div",om,[(0,o.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>i.addPackage&&i.addPackage(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",lm,[(0,o.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[104]||(t[104]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",rm,[(0,o.Lk)("ul",nm,[(0,o.Lk)("li",{onClick:t[28]||(t[28]=e=>i.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[105]||(t[105]=(0,o.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",im,(0,r.v_)(1===n.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[29]||(t[29]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[106]||(t[106]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",dm,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[30]||(t[30]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[107]||(t[107]=[(0,o.Lk)("span",null,"Clear Sort",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",cm,[(0,o.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[108]||(t[108]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Filter",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isFilterDropdownOpen?((0,o.uX)(),(0,o.CE)("div",um,[(0,o.Lk)("div",pm,[t[110]||(t[110]=(0,o.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยโปรแกรม",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.groupedPrograms,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"mb-4"},[(0,o.Lk)("div",hm,[(0,o.Lk)("h4",gm,(0,r.v_)(s),1),(0,o.Lk)("button",{onClick:e=>i.toggleSelectPromotionAll(s),class:"text-custom-orange hover:text-custom-orange-hover text-sm"},(0,r.v_)(n.selectAllProgramState[s]?"ยกเลิกเลือกทั้งหมด":"เลือกทั้งหมด"),9,mm)]),(0,o.Lk)("div",ym,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,(e=>((0,o.uX)(),(0,o.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[32]||(t[32]=e=>n.selectedProgram=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent flex-shrink-0"},null,8,km),[[a.lH,n.selectedProgram]]),(0,o.Lk)("span",bm,(0,r.v_)(e.name),1)])))),128))])])))),128)),(0,o.Lk)("div",xm,[t[109]||(t[109]=(0,o.Lk)("label",{for:"startMonth",class:"block font-semibold mb-2 text-custom-orange"},"กรองตามเดือนและปี",-1)),(0,o.bo)((0,o.Lk)("input",{id:"startMonth","onUpdate:modelValue":t[33]||(t[33]=t=>e.selectedMonthYear=t),type:"month",class:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,e.selectedMonthYear]])])]),(0,o.Lk)("div",fm,[(0,o.Lk)("li",{onClick:t[34]||(t[34]=(...e)=>i.clearFilter&&i.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[111]||(t[111]=[(0,o.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,o.Lk)("div",wm,[(0,o.Lk)("button",{onClick:t[35]||(t[35]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[36]||(t[36]=(...e)=>i.applyFilter&&i.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",vm,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[37]||(t[37]=e=>n.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[38]||(t[38]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[39]||(t[39]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[40]||(t[40]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.Lk)("table",_m,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",Lm,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredPackage,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,o.Lk)("td",Dm,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",Cm,(0,r.v_)(e.program&&e.program.promotionType?e.program.promotionType.name:"N/A"),1),(0,o.Lk)("td",Pm,(0,r.v_)(i.getProgramName(e.program_id)),1),(0,o.Lk)("td",Mm,[(0,o.eW)((0,r.v_)(e.name)+" ",1),e.start_date?((0,o.uX)(),(0,o.CE)("span",Tm,"( "+(0,r.v_)(i.formattedStartDate(e.start_date))+" )",1)):(0,o.Q3)("",!0)]),(0,o.Lk)("td",Sm,(0,r.v_)(e.package_validity)+" วัน",1),(0,o.Lk)("td",Em,(0,r.v_)(e.total_days)+" วัน",1),(0,o.Lk)("td",Rm,(0,r.v_)(parseFloat(e.price).toLocaleString("th-TH",{minimumFractionDigits:2}))+" บาท ",1),(0,o.Lk)("td",Am,[(0,o.Lk)("div",Fm,[(0,o.Lk)("li",{onClick:t=>i.onViewDetails(e),class:"px-2 py-1 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[112]||(t[112]=[(0,o.Lk)("span",null,"ดูรายละเอียด",-1)]),8,Om),(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[113]||(t[113]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,Xm),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[114]||(t[114]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,zm)])])])))),128)),0===n.filteredPackage.length?((0,o.uX)(),(0,o.CE)("tr",Nm,t[115]||(t[115]=[(0,o.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isDetailModalOpen?((0,o.uX)(),(0,o.CE)("div",Qm,[(0,o.Lk)("div",Vm,[(0,o.Lk)("div",Im,[t[116]||(t[116]=(0,o.Lk)("span",{class:"font-bold"},"รายละเอียดแพ็คเกจ",-1)),(0,o.Lk)("div",Bm,[(0,o.Lk)("span",{onClick:t[41]||(t[41]=(...e)=>i.closeDetailModal&&i.closeDetailModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",jm,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredDetail,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"mb-2"},[(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,(0,r.v_)(i.formatLabel(t))+":",1),(0,o.eW)(" "+(0,r.v_)(e),1)])])))),128))])])])):(0,o.Q3)("",!0),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",Um,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[118]||(t[118]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[42]||(t[42]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[117]||(t[117]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",$m,[(0,o.Lk)("div",Wm,[t[119]||(t[119]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไขโปรแกรม",-1)),(0,o.Lk)("div",qm,[(0,o.Lk)("span",{onClick:t[43]||(t[43]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Jm,[(0,o.Lk)("div",null,[t[120]||(t[120]=(0,o.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"Promotion Type",-1)),(0,o.bF)(d,{modelValue:n.selectedPackage.program.promotionType,"onUpdate:modelValue":t[44]||(t[44]=e=>n.selectedPackage.program.promotionType=e),options:n.promotion_types,"custom-label":e.customLabel,placeholder:"เลือก Promotion Type","track-by":"id",label:"name"},null,8,["modelValue","options","custom-label"])]),(0,o.Lk)("div",Zm,[t[121]||(t[121]=(0,o.Lk)("label",{for:"editProgramType",class:"block font-bold text-gray-700"},"Program",-1)),(0,o.bF)(d,{modelValue:n.selectedPackage.program_id,"onUpdate:modelValue":t[45]||(t[45]=e=>n.selectedPackage.program_id=e),options:i.filteredEditPrograms,placeholder:"เลือกประเภทโปรแกรม","track-by":"id",label:"name",class:"w-full"},null,8,["modelValue","options"])]),(0,o.Lk)("div",Km,[t[122]||(t[122]=(0,o.Lk)("label",{for:"editName",class:"block text-gray-700 font-bold"},"Package",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[46]||(t[46]=e=>n.selectedPackage.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.name]])]),(0,o.Lk)("div",Ym,[t[123]||(t[123]=(0,o.Lk)("label",{for:"editPackageDetail",class:"block text-gray-700 font-bold"},"Package Details for Purchase Summary",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"editPackageDetail","onUpdate:modelValue":t[47]||(t[47]=e=>n.selectedPackage.package_detail=e),placeholder:"กรอก Package Details for Purchase Summary",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[a.Jo,n.selectedPackage.package_detail]])]),(0,o.Lk)("div",Hm,[(0,o.Lk)("div",Gm,[t[124]||(t[124]=(0,o.Lk)("label",{for:"packageValidity",class:"block font-bold text-gray-700"},"Package Validity",-1)),(0,o.bo)((0,o.Lk)("input",{id:"packageValidity","onUpdate:modelValue":t[48]||(t[48]=e=>n.selectedPackage.package_validity=e),type:"number",step:"1",min:"0",placeholder:"กรอก Package Validity",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.package_validity]])]),(0,o.Lk)("div",ey,[t[125]||(t[125]=(0,o.Lk)("label",{for:"totalDays",class:"block font-bold text-gray-700"},"Total Days",-1)),(0,o.bo)((0,o.Lk)("input",{id:"totalDays","onUpdate:modelValue":t[49]||(t[49]=e=>n.selectedPackage.total_days=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Days",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.total_days]])]),(0,o.Lk)("div",ty,[t[126]||(t[126]=(0,o.Lk)("label",{for:"boxesPerDay",class:"block font-bold text-gray-700"},"# of Boxes/Day",-1)),(0,o.bo)((0,o.Lk)("input",{id:"boxesPerDay","onUpdate:modelValue":t[50]||(t[50]=e=>n.selectedPackage.boxes_per_day=e),type:"number",step:"1",min:"0",placeholder:"กรอก # of Boxes/Day",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.boxes_per_day]])]),(0,o.Lk)("div",sy,[t[127]||(t[127]=(0,o.Lk)("label",{for:"totalBoxes",class:"block font-bold text-gray-700"},"Total Boxes",-1)),(0,o.bo)((0,o.Lk)("input",{id:"totalBoxes","onUpdate:modelValue":t[51]||(t[51]=e=>n.selectedPackage.total_boxes=e),type:"number",step:"1",min:"0",placeholder:"กรอก Total Boxes",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.total_boxes]])])]),(0,o.Lk)("div",ay,[(0,o.Lk)("div",oy,[t[128]||(t[128]=(0,o.Lk)("label",{for:"packagePrice",class:"block font-bold text-gray-700"},"ราคา",-1)),(0,o.bo)((0,o.Lk)("input",{id:"packagePrice","onUpdate:modelValue":t[52]||(t[52]=e=>n.selectedPackage.price=e),type:"number",step:"1",min:"0",placeholder:"กรอกราคา",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.price]])]),(0,o.Lk)("div",ly,[t[129]||(t[129]=(0,o.Lk)("label",{for:"startMonth",class:"block font-bold text-gray-700"},"เลือกเดือนเริ่มต้น (เฉพาะ Flash Sale)",-1)),(0,o.bo)((0,o.Lk)("input",{id:"startMonth","onUpdate:modelValue":t[53]||(t[53]=e=>n.selectedPackage.start_date=e),type:"month",placeholder:"เลือกเดือนเริ่มต้น",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.start_date]])])]),(0,o.Lk)("div",ry,[t[130]||(t[130]=(0,o.Lk)("label",{for:"editPromotionDetail",class:"block text-gray-700 font-bold"},"รายละเอียดโปรโมชัน",-1)),(0,o.bo)((0,o.Lk)("textarea",{id:"editPromotionDetail","onUpdate:modelValue":t[54]||(t[54]=e=>n.selectedPackage.promotion_detail=e),placeholder:"กรอกรายละเอียดโปรโมชัน",rows:"3",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange resize-y"},null,512),[[a.Jo,n.selectedPackage.promotion_detail]])]),(0,o.Lk)("div",ny,[(0,o.Lk)("div",iy,[(0,o.Lk)("div",dy,[t[131]||(t[131]=(0,o.Lk)("label",{for:"freeMad",class:"block font-bold text-gray-700"},"Main Dish",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeMad","onUpdate:modelValue":t[55]||(t[55]=e=>n.selectedPackage.free_mad=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Main Dish",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.free_mad]])]),(0,o.Lk)("div",cy,[t[132]||(t[132]=(0,o.Lk)("label",{for:"freeDessert",class:"block font-bold text-gray-700"},"Dessert",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeDessert","onUpdate:modelValue":t[56]||(t[56]=e=>n.selectedPackage.free_dessert=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Dessert",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.free_dessert]])]),(0,o.Lk)("div",uy,[t[133]||(t[133]=(0,o.Lk)("label",{for:"freeBrittles",class:"block font-bold text-gray-700"},"Brittles",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeBrittles","onUpdate:modelValue":t[57]||(t[57]=e=>n.selectedPackage.free_brittles=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Brittles",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.free_brittles]])]),(0,o.Lk)("div",py,[t[134]||(t[134]=(0,o.Lk)("label",{for:"freeEnergyBalls",class:"block font-bold text-gray-700"},"Energy Balls",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeEnergyBalls","onUpdate:modelValue":t[58]||(t[58]=e=>n.selectedPackage.free_energy_balls=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Energy Balls",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.free_energy_balls]])])]),(0,o.Lk)("div",hy,[(0,o.Lk)("div",gy,[t[135]||(t[135]=(0,o.Lk)("label",{for:"freeDressing",class:"block font-bold text-gray-700"},"Free Dressing",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeDressing","onUpdate:modelValue":t[59]||(t[59]=e=>n.selectedPackage.free_dressing=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Free Dressing",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.free_dressing]])]),(0,o.Lk)("div",my,[t[136]||(t[136]=(0,o.Lk)("label",{for:"freeYoghurt",class:"block font-bold text-gray-700"},"Yoghurt",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeYoghurt","onUpdate:modelValue":t[60]||(t[60]=e=>n.selectedPackage.free_yoghurt=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Yoghurt",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.free_yoghurt]])]),(0,o.Lk)("div",yy,[t[137]||(t[137]=(0,o.Lk)("label",{for:"freeGranola",class:"block font-bold text-gray-700"},"Granola",-1)),(0,o.bo)((0,o.Lk)("input",{id:"freeGranola","onUpdate:modelValue":t[61]||(t[61]=e=>n.selectedPackage.free_granola=e),type:"number",min:"0",step:"1",placeholder:"กรอกจำนวน Granola",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedPackage.free_granola]])])])])]),(0,o.Lk)("div",ky,[(0,o.Lk)("div",by,[(0,o.Lk)("button",{onClick:t[62]||(t[62]=e=>n.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[63]||(t[63]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[138]||(t[138]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,o.eW)("บันทึก ")]))])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",xy,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[140]||(t[140]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[64]||(t[64]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[139]||(t[139]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",fy,[(0,o.Lk)("div",wy,[t[141]||(t[141]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[65]||(t[65]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[142]||(t[142]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,o.Lk)("div",vy,[(0,o.Lk)("button",{onClick:t[66]||(t[66]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[67]||(t[67]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",_y,[(0,o.Lk)("button",{onClick:t[68]||(t[68]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[143]||(t[143]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Ly),(0,o.Lk)("div",Dy,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[69]||(t[69]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[70]||(t[70]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,Cy)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[71]||(t[71]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[72]||(t[72]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[73]||(t[73]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[144]||(t[144]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Py)])])}s(7550);var Ty={name:"PackagePage",data(){return{headers:["#","Promotion Type","Program","Package","Package Validity","Total Days","ราคา",""],headerWidths:["5%","10%","10%","15%","10%","10%","10%","15%","15%"],searchQuery:"",filteredPackage:[],selectedProgram:[],isFilterDropdownOpen:!1,selectAllProgramState:{},isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",packages:[],currentPage:1,itemsPerPage:10,isDetailModalOpen:!1,selectedPackageDetail:{},isEditModalOpen:!1,isAddModalOpen:!1,newPackage:{name:"",program_id:"",package_detail:"",package_validity:0,total_days:0,boxes_per_day:0,total_boxes:0,price:0,promotion_detail:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,start_date:null},selectedPackage:{id:"",name:"",program_id:"",package_detail:"",package_validity:0,total_days:0,boxes_per_day:0,total_boxes:0,price:0,promotion_detail:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,start_date:null},programs:[],promotion_types:[],selectedPromotionType:"",isDeleteModalOpen:!1,itemToDelete:null,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},components:{Multiselect:Rr.Ay},computed:{totalPages(){return Math.ceil(this.packages.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedProgram.length||this.selectedProgram.includes(e.program_id),a=!this.selectedMonthYear||new Date(e.start_date).toISOString().slice(0,7)===this.selectedMonthYear;return t&&s&&a})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}},filteredDetail(){return{name:this.selectedPackageDetail.name,program:this.selectedPackageDetail.program.name,package_detail:this.selectedPackageDetail.package_detail,package_validity:this.selectedPackageDetail.package_validity,total_days:this.selectedPackageDetail.total_days,boxes_per_day:this.selectedPackageDetail.boxes_per_day,total_boxes:this.selectedPackageDetail.total_boxes,price:this.selectedPackageDetail.price,promotion_detail:this.selectedPackageDetail.promotion_detail}},filteredPrograms(){return this.selectedPromotionType&&this.selectedPromotionType.id?this.programs.filter((e=>e.promotion_type_id===this.selectedPromotionType.id)):[]},filteredEditPrograms(){return this.selectedPackage.program&&this.selectedPackage.program.promotionType?this.programs.filter((e=>e.promotion_type_id===this.selectedPackage.program.promotionType.id)):[]},groupedPrograms(){return this.programs.reduce(((e,t)=>{const s=t.promotionType?t.promotionType.name:"ไม่มีข้อมูล";return e[s]||(e[s]=[]),e[s].push(t),e}),{})},...(0,Fe.L8)(["packages"])},methods:{...(0,Fe.i0)(["fetchPackages","fetchPrograms","fetchPromotionTypes"]),formattedStartDate(e){if(!e)return"";const t=new Date(e),s=t.getMonth(),a=t.getFullYear(),o=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"];return`${o[s]} ${a}`},async fetchPackages(){try{const e=await re.A.get("http://127.0.0.1:3333/packages");this.filteredPackage=e.data,this.packages=e.data,this.updatePage()}catch(e){console.error("Error fetching program:",e)}},search(){const e=this.packages.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedProgram.length||this.selectedProgram.includes(e.program_id),a=!this.selectedMonthYear||new Date(e.start_date).toISOString().slice(0,7)===this.selectedMonthYear;return t&&s&&a}));this.currentPage=1,this.filteredPackage=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredPackage=this.packages.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedProgram.length||this.selectedProgram.includes(e.program_id),a=!this.selectedMonthYear||new Date(e.start_date).toISOString().slice(0,7)===this.selectedMonthYear;return t&&s&&a})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.packages.sort(((t,s)=>{const a=t[e],o=s[e];return a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.packages.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){if(this.selectedProgram.length>0?this.filteredPackage=this.packages.filter((e=>this.selectedProgram.includes(e.program_id))):this.filteredPackage=this.packages,this.selectedMonthYear){const[e,t]=this.selectedMonthYear.split("-").map(Number);this.filteredPackage=this.filteredPackage.filter((s=>{const a=new Date(s.start_date);return a.getFullYear()===e&&a.getMonth()+1===t}))}this.isFilterDropdownOpen=!1,this.currentPage=1,this.updatePage()},toggleSelectPromotionAll(e){if(this.selectAllProgramState[e])this.selectedProgram=this.selectedProgram.filter((t=>!this.groupedPrograms[e].some((e=>e.id===t))));else{const t=this.groupedPrograms[e].map((e=>e.id));this.selectedProgram=[...new Set([...this.selectedProgram,...t])]}this.selectAllProgramState[e]=!this.selectAllProgramState[e]},clearFilter(){this.selectedProgram=[],this.selectedMonthYear="",this.filteredPackage=this.packages,Object.keys(this.selectAllProgramState).forEach((e=>{this.selectAllProgramState[e]=!1})),this.updatePage(),this.applyFilter()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getProgramName(e){const t=this.programs.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},onViewDetails(e){this.selectedPackageDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedPackageDetail={}},formatLabel(e){const t={name:"ชื่อ",program:"ประเภทโปรแกรม",package_detail:"รายละเอียดแพ็คเกจ",package_validity:"จำนวน",total_days:"จำนวนวันหมดอายุ",boxes_per_day:"จำนวนกล่องต่อวัน",total_boxes:"จำนวนกล่อง",price:"ราคา",promotion_detail:"รายละเอียดโปรโมชั่น"};return t[e]||e},openEditModal(e){const t=this.programs.find((t=>t.id===e.program_id));this.selectedPackage={...e,program_id:t?{id:t.id,name:`${t.name}`}:null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedPackage.name||!this.selectedPackage.program_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=await re.A.put(`http://127.0.0.1:3333/packages/${this.selectedPackage.id}`,{name:this.selectedPackage.name,program_id:this.selectedPackage.program_id.id,package_detail:this.selectedPackage.package_detail,package_validity:this.selectedPackage.package_validity,total_days:this.selectedPackage.total_days,boxes_per_day:this.selectedPackage.boxes_per_day,total_boxes:this.selectedPackage.total_boxes,price:this.selectedPackage.price,promotion_detail:this.selectedPackage.promotion_detail,free_mad:this.selectedPackage.free_mad,free_dessert:this.selectedPackage.free_dessert,free_brittles:this.selectedPackage.free_brittles,free_energy_balls:this.selectedPackage.free_energy_balls,free_dressing:this.selectedPackage.free_dressing,free_yoghurt:this.selectedPackage.free_yoghurt,free_granola:this.selectedPackage.free_granola,start_date:this.selectedPackage.start_date}),t=this.packages.findIndex((e=>e.id===this.selectedPackage.id));-1!==t&&(this.packages[t]={...e.data,promotionType:this.promotion_types.find((t=>t.id===e.data.promotion_type_id))||{}}),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!"),this.isEditModalOpen=!1,this.updatePage()}catch(e){console.error("Error saving changes:",e),alert("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPackage={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/packages/${this.itemToDelete}`),this.packages=this.packages.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.clearAdd()},clearAdd(){this.newPackage={name:"",program_id:"",package_detail:"",package_validity:0,total_days:0,boxes_per_day:0,total_boxes:0,price:0,promotion_detail:"",free_mad:0,free_dessert:0,free_brittles:0,free_energy_balls:0,free_dressing:0,free_yoghurt:0,free_granola:0,start_date:null},this.selectedPromotionType=null},async addPackage(){if(this.newPackage.name)try{const e=await re.A.post("http://127.0.0.1:3333/packages",{name:this.newPackage.name,program_id:this.newPackage.program_id.id,package_detail:this.newPackage.package_detail,package_validity:this.newPackage.package_validity,total_days:this.newPackage.total_days,boxes_per_day:this.newPackage.boxes_per_day,total_boxes:this.newPackage.total_boxes,price:this.newPackage.price,promotion_detail:this.newPackage.promotion_detail,start_date:this.newPackage.start_date,free_mad:this.newPackage.free_mad,free_dessert:this.newPackage.free_dessert,free_brittles:this.newPackage.free_brittles,free_energy_balls:this.newPackage.free_energy_balls,free_dressing:this.newPackage.free_dressing,free_yoghurt:this.newPackage.free_yoghurt,free_granola:this.newPackage.free_granola});e.data&&e.data.promotionType&&e.data.program.promotionType&&this.packages.push(e.data),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!"),this.closeAddModal(),this.updatePage()}catch(e){console.error("Error adding program:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!")},async fetchPrograms(){try{const e=await re.A.get("http://127.0.0.1:3333/programs");this.programs=e.data}catch(e){console.error("Error fetching promotion types:",e)}},async fetchPromotionTypes(){try{const e=await re.A.get("http://127.0.0.1:3333/promotion-types");this.promotion_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredPackage=this.programs,this.sortData("id"),this.fetchPackages(),this.fetchPrograms(),this.fetchPromotionTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPackages(),this.fetchPrograms(),this.fetchPromotionTypes(),this.updatePage(),(0,oc.A)("#startMonth",{dateFormat:"Y-m",altInput:!0,altFormat:"F Y",allowInput:!0})},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const Sy=(0,ce.A)(Ty,[["render",My],["__scopeId","data-v-04aba597"]]);var Ey=Sy;const Ry={class:"flex space-x-2 items-center relative"},Ay={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Fy={class:"text-m text-custom-orange font-bold"},Oy={class:"add relative inline-block"},Xy={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},zy={class:"bg-white rounded-md shadow-lg w-1000"},Ny={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Qy={class:"flex space-x-2"},Vy={class:"bg-white rounded-lg p-6 w-[400px]"},Iy={class:"mb-4"},By={class:"flex justify-end space-x-2"},jy={class:"sort relative inline-block",ref:"sortDropdown"},Uy={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},$y={class:"list-none p-0 m-0"},Wy={key:0,class:"material-symbols-outlined text-sm"},qy={key:0,class:"material-symbols-outlined text-sm"},Jy={class:"flex w-[250px] relative"},Zy={class:"min-w-full table-fixed border-collapse mt-4"},Ky={class:"bg-custom-orange text-white"},Yy={class:"px-4 py-2 align-top"},Hy={class:"px-4 py-2 align-top font-bold text-custom-orange"},Gy={class:"px-4 py-2 align-top text-right"},ek={class:"flex justify-end space-x-2"},tk=["onClick"],sk=["onClick"],ak={key:0},ok={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},lk={class:"bg-white rounded-md shadow-lg w-1000"},rk={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},nk={class:"flex space-x-2"},ik={class:"bg-white rounded-lg shadow-lg p-6 w-96"},dk={class:"mb-4"},ck={class:"flex justify-end space-x-2"},uk={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},pk={class:"bg-white rounded-lg shadow-md w-1/3"},hk={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},gk={class:"flex justify-end space-x-2 p-4"},mk={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},yk=["disabled"],kk={class:"flex items-center space-x-1"},bk=["onClick"],xk=["disabled"];function fk(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",Ry,[(0,o.Lk)("div",Ay,[t[26]||(t[26]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภทโปรโมชันทั้งหมด: ",-1)),(0,o.Lk)("span",Fy,(0,r.v_)(n.promotion_types.length)+" รายการ",1)]),(0,o.Lk)("div",Oy,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[27]||(t[27]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มประเภทแพ็คเกจ",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",Xy,[(0,o.Lk)("div",zy,[(0,o.Lk)("div",Ny,[t[28]||(t[28]=(0,o.Lk)("div",{class:"flex-1 flex items-left"},[(0,o.Lk)("span",{class:"text-xl font-bold"},"เพิ่มประเภทแพ็คเกจ")],-1)),(0,o.Lk)("div",Qy,[(0,o.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Vy,[(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>i.addPromotionType&&i.addPromotionType(...e)),["prevent"]))},[(0,o.Lk)("div",Iy,[t[29]||(t[29]=(0,o.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อประเภทแพ็คเกจ",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>n.newPromotionType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[a.Jo,n.newPromotionType.name]])]),(0,o.Lk)("div",By,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"},"ยกเลิก"),t[30]||(t[30]=(0,o.Lk)("button",{type:"submit",class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},[(0,o.Lk)("span",{class:"material-symbols-outlined"},"save"),(0,o.eW)("บันทึก")],-1))])],32)])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",jy,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[31]||(t[31]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Uy,[(0,o.Lk)("ul",$y,[(0,o.Lk)("li",{onClick:t[6]||(t[6]=e=>i.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[32]||(t[32]=(0,o.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Wy,(0,r.v_)(1===n.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[7]||(t[7]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[33]||(t[33]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",qy,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[8]||(t[8]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[34]||(t[34]=[(0,o.Lk)("span",null,"Clear Sort",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Jy,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>n.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[10]||(t[10]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[11]||(t[11]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.Lk)("table",Zy,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",Ky,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredPackageType,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,o.Lk)("td",Yy,(0,r.v_)(e.id),1),(0,o.Lk)("td",Hy,(0,r.v_)(e.name),1),(0,o.Lk)("td",Gy,[(0,o.Lk)("div",ek,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[35]||(t[35]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,tk),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[36]||(t[36]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,sk)])])])))),128)),0===n.filteredPackageType.length?((0,o.uX)(),(0,o.CE)("tr",ak,t[37]||(t[37]=[(0,o.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",ok,[(0,o.Lk)("div",lk,[(0,o.Lk)("div",rk,[t[38]||(t[38]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไขประเภทแพ็คเกจ",-1)),(0,o.Lk)("div",nk,[(0,o.Lk)("span",{onClick:t[13]||(t[13]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",ik,[(0,o.Lk)("div",dk,[t[39]||(t[39]=(0,o.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>n.selectedPromotionType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[a.Jo,n.selectedPromotionType.name]])]),(0,o.Lk)("div",ck,[(0,o.Lk)("button",{onClick:t[15]||(t[15]=e=>n.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[40]||(t[40]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,o.eW)("บันทึก ")]))])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",uk,[(0,o.Lk)("div",pk,[(0,o.Lk)("div",hk,[t[41]||(t[41]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[42]||(t[42]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,o.Lk)("div",gk,[(0,o.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",mk,[(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[43]||(t[43]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,yk),(0,o.Lk)("div",kk,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[21]||(t[21]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[22]||(t[22]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,bk)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[23]||(t[23]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[24]||(t[24]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[25]||(t[25]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[44]||(t[44]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,xk)])])}var wk={name:"PromotionTypePage",data(){return{headers:["รหัส","ชื่อ",""],headerWidths:["10%","85%","5%"],searchQuery:"",filteredPackageType:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",promotion_types:[],currentPage:1,itemsPerPage:10,selectedPromotionType:{},isEditModalOpen:!1,isAddModalOpen:!1,newPromotionType:{name:""},isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}}},methods:{async fetchPackageTypes(){try{const e=await re.A.get("http://127.0.0.1:3333/package-types");this.filteredPackageType=e.data,console.log("Response data:",e.data),this.promotion_types=e.data,this.updatePage()}catch(e){console.error("Error fetching promotion_type:",e)}},search(){const e=this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t}));this.currentPage=1,this.filteredPackageType=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredPackageType=this.promotion_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.promotion_types.sort(((t,s)=>{const a=t[e],o=s[e];return a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.promotion_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedPromotionType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await re.A.put(`http://127.0.0.1:3333/package-types/${this.selectedPromotionType.id}`,{name:this.selectedPromotionType.name});const e=this.promotion_types.findIndex((e=>e.id===this.selectedPromotionType.id));-1!==e&&(this.promotion_types[e]={...this.selectedPromotionType},this.updatePage()),this.isEditModalOpen=!1}catch(e){console.error("Error updating promotion type:",e)}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPromotionType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/package-types/${this.itemToDelete}`),this.promotion_types=this.promotion_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0,this.newPromotionType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addPromotionType(){if(this.newPromotionType.name.trim())try{const e=await re.A.post("http://127.0.0.1:3333/package-types",this.newPromotionType);this.promotion_types.push(e.data),this.updatePage(),this.closeAddModal()}catch(e){console.error("Error adding promotion type:",e),alert("เกิดข้อผิดพลาดในการเพิ่มข้อมูล")}else alert("กรุณากรอกชื่อ")}},created(){this.filteredPackageType=this.promotion_types,this.sortData("id"),this.fetchPackageTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPackageTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const vk=(0,ce.A)(wk,[["render",fk],["__scopeId","data-v-5c61a4e8"]]);var _k=vk;const Lk={class:"flex space-x-2 items-center relative"},Dk={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},Ck={class:"text-m text-custom-orange font-bold"},Pk={class:"add relative inline-block"},Mk={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Tk={class:"bg-white rounded-md shadow-lg w-1000"},Sk={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Ek={class:"flex space-x-2"},Rk={class:"bg-white rounded-lg p-6 w-[400px]"},Ak={class:"mb-4"},Fk={class:"flex justify-end space-x-2"},Ok={class:"sort relative inline-block",ref:"sortDropdown"},Xk={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},zk={class:"list-none p-0 m-0"},Nk={key:0,class:"material-symbols-outlined text-sm"},Qk={key:0,class:"material-symbols-outlined text-sm"},Vk={class:"flex w-[250px] relative"},Ik={class:"min-w-full table-fixed border-collapse mt-4"},Bk={class:"bg-custom-orange text-white"},jk={class:"px-4 py-2 align-top"},Uk={class:"px-4 py-2 align-top font-bold text-custom-orange"},$k={class:"px-4 py-2 align-top text-right"},Wk={class:"flex justify-end space-x-2"},qk=["onClick"],Jk=["onClick"],Zk={key:0},Kk={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},Yk={class:"bg-white rounded-md shadow-lg w-1000"},Hk={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Gk={class:"flex space-x-2"},eb={class:"bg-white rounded-lg shadow-lg p-6 w-96"},tb={class:"mb-4"},sb={class:"flex justify-end space-x-2"},ab={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},ob={class:"bg-white rounded-lg shadow-md w-1/3"},lb={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},rb={class:"flex justify-end space-x-2 p-4"},nb={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},ib=["disabled"],db={class:"flex items-center space-x-1"},cb=["onClick"],ub=["disabled"];function pb(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",Lk,[(0,o.Lk)("div",Dk,[t[26]||(t[26]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภทโซนการจัดส่งทั้งหมด: ",-1)),(0,o.Lk)("span",Ck,(0,r.v_)(n.zone_types.length)+" รายการ",1)]),(0,o.Lk)("div",Pk,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[27]||(t[27]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มประเภทโซนการจัดส่ง",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",Mk,[(0,o.Lk)("div",Tk,[(0,o.Lk)("div",Sk,[t[28]||(t[28]=(0,o.Lk)("div",{class:"flex-1 flex items-left"},[(0,o.Lk)("span",{class:"text-xl font-bold"},"เพิ่มประเภทโซนการจัดส่งใหม่")],-1)),(0,o.Lk)("div",Ek,[(0,o.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Rk,[(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,a.D$)(((...e)=>i.addZoneDliveryType&&i.addZoneDliveryType(...e)),["prevent"]))},[(0,o.Lk)("div",Ak,[t[29]||(t[29]=(0,o.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อโปรโมชั่น",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>n.newZoneDeliveryType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[a.Jo,n.newZoneDeliveryType.name]])]),(0,o.Lk)("div",Fk,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"},"ยกเลิก"),t[30]||(t[30]=(0,o.Lk)("button",{type:"submit",class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},[(0,o.Lk)("span",{class:"material-symbols-outlined"},"save"),(0,o.eW)("บันทึก")],-1))])],32)])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ok,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[31]||(t[31]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Xk,[(0,o.Lk)("ul",zk,[(0,o.Lk)("li",{onClick:t[6]||(t[6]=e=>i.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[32]||(t[32]=(0,o.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Nk,(0,r.v_)(1===n.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[7]||(t[7]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[33]||(t[33]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Qk,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[8]||(t[8]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[34]||(t[34]=[(0,o.Lk)("span",null,"Clear Sort",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Vk,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>n.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[10]||(t[10]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[11]||(t[11]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.Lk)("table",Ik,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",Bk,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredZoneTypes,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,o.Lk)("td",jk,(0,r.v_)(e.id),1),(0,o.Lk)("td",Uk,(0,r.v_)(e.name),1),(0,o.Lk)("td",$k,[(0,o.Lk)("div",Wk,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[35]||(t[35]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,qk),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[36]||(t[36]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,Jk)])])])))),128)),0===n.filteredZoneTypes.length?((0,o.uX)(),(0,o.CE)("tr",Zk,t[37]||(t[37]=[(0,o.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",Kk,[(0,o.Lk)("div",Yk,[(0,o.Lk)("div",Hk,[t[38]||(t[38]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไข Promotion Type",-1)),(0,o.Lk)("div",Gk,[(0,o.Lk)("span",{onClick:t[13]||(t[13]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",eb,[(0,o.Lk)("div",tb,[t[39]||(t[39]=(0,o.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>n.selectedZoneDeliveryType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[a.Jo,n.selectedZoneDeliveryType.name]])]),(0,o.Lk)("div",sb,[(0,o.Lk)("button",{onClick:t[15]||(t[15]=e=>n.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[40]||(t[40]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,o.eW)("บันทึก ")]))])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",ab,[(0,o.Lk)("div",ob,[(0,o.Lk)("div",lb,[t[41]||(t[41]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[17]||(t[17]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[42]||(t[42]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,o.Lk)("div",rb,[(0,o.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",nb,[(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[43]||(t[43]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,ib),(0,o.Lk)("div",db,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[21]||(t[21]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[22]||(t[22]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,cb)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[23]||(t[23]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[24]||(t[24]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[25]||(t[25]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[44]||(t[44]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,ub)])])}var hb={name:"ZoneDeliveryTypePage",data(){return{headers:["รหัส","ชื่อ",""],headerWidths:["10%","85%","5%"],searchQuery:"",filteredZoneTypes:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",zone_types:[],currentPage:1,itemsPerPage:10,selectedZoneDeliveryType:{},isEditModalOpen:!1,isAddModalOpen:!1,newZoneDeliveryType:{name:""},isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.zone_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}}},methods:{async fetchPromotionTypes(){try{const e=await re.A.get("http://127.0.0.1:3333/zone-delivery-types");this.filteredZoneTypes=e.data,console.log("Response data:",e.data),this.zone_types=e.data,this.updatePage()}catch(e){console.error("Error fetching zone_delivery_type:",e)}},search(){const e=this.zone_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t}));this.currentPage=1,this.filteredZoneTypes=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredZoneTypes=this.zone_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery);return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.zone_types.sort(((t,s)=>{const a=t[e],o=s[e];return a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.zone_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedZoneDeliveryType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await re.A.put(`http://127.0.0.1:3333/zone-delivery-types/${this.selectedZoneDeliveryType.id}`,{name:this.selectedZoneDeliveryType.name});const e=this.zone_types.findIndex((e=>e.id===this.selectedZoneDeliveryType.id));-1!==e&&(this.zone_types[e]={...this.selectedZoneDeliveryType},this.updatePage()),this.isEditModalOpen=!1}catch(e){console.error("Error updating promotion type:",e)}},closeEditModal(){this.isEditModalOpen=!1,this.selectedZoneDeliveryType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/zone-delivery-types/${this.itemToDelete}`),this.zone_types=this.zone_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0,this.newZoneDeliveryType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addZoneDliveryType(){if(this.newZoneDeliveryType.name.trim())try{const e=await re.A.post("http://127.0.0.1:3333/zone-delivery-types",this.newZoneDeliveryType);this.zone_types.push(e.data),this.updatePage(),this.closeAddModal()}catch(e){console.error("Error adding promotion type:",e),alert("เกิดข้อผิดพลาดในการเพิ่มข้อมูล")}else alert("กรุณากรอกชื่อโปรโมชั่น")}},created(){this.filteredZoneTypes=this.zone_types,this.sortData("id"),this.fetchPromotionTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchPromotionTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const gb=(0,ce.A)(hb,[["render",pb],["__scopeId","data-v-4f4cb994"]]);var mb=gb;const yb={class:"flex space-x-2 items-center relative"},kb={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},bb={class:"text-m text-custom-orange font-bold"},xb={class:"add relative inline-block"},fb={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},wb={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[500px] flex flex-col"},vb={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},_b={class:"p-6 space-y-4 overflow-y-auto flex-grow"},Lb=["value"],Db={class:"mb-4"},Cb={class:"flex justify-end space-x-4 p-4 bg-gray-100 rounded-b-md"},Pb={class:"sort relative inline-block",ref:"sortDropdown"},Mb={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Tb={class:"list-none p-0 m-0"},Sb={key:0,class:"material-symbols-outlined text-sm"},Eb={key:0,class:"material-symbols-outlined text-sm"},Rb={class:"filter relative inline-block",ref:"filterDropdown"},Ab={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},Fb={class:"p-4 w-[500px] list-none"},Ob={class:"grid grid-cols-2 gap-4"},Xb=["value"],zb={class:"flex justify-between mt-4 border-t pt-2"},Nb={class:"flex space-x-2"},Qb={class:"flex w-[250px] relative"},Vb={class:"min-w-full table-fixed border-collapse mt-4"},Ib={class:"bg-custom-orange text-white"},Bb={class:"px-4 py-2 align-top"},jb={class:"px-4 py-2 align-top font-bold text-custom-orange"},Ub={class:"px-4 py-2 align-top"},$b={class:"px-4 py-2 align-top"},Wb={class:"px-4 py-2 align-top text-right"},qb={class:"flex justify-end space-x-2"},Jb=["onClick"],Zb=["onClick"],Kb={key:0},Yb={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},Hb={class:"bg-white rounded-md shadow-lg w-1000"},Gb={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},ex={class:"flex space-x-2"},tx={class:"bg-white rounded-lg shadow-lg p-6 w-96"},sx={class:"mb-4"},ax={class:"mb-4"},ox=["value"],lx={class:"mb-4"},rx={class:"flex justify-end space-x-2"},nx={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},ix={class:"bg-white rounded-lg shadow-md w-1/3"},dx={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},cx={class:"flex justify-end space-x-2 p-4"},ux={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},px=["disabled"],hx={class:"flex items-center space-x-1"},gx=["onClick"],mx=["disabled"];function yx(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",yb,[(0,o.Lk)("div",kb,[t[35]||(t[35]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนโปรแกรมทั้งหมด: ",-1)),(0,o.Lk)("span",bb,(0,r.v_)(n.zoneDeliveries.length)+" รายการ",1)]),(0,o.Lk)("div",xb,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[36]||(t[36]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มโซนการจัดส่ง",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",fb,[(0,o.Lk)("div",wb,[(0,o.Lk)("div",vb,[t[37]||(t[37]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มโซนการจัดส่ง",-1)),(0,o.Lk)("span",{onClick:t[1]||(t[1]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),(0,o.Lk)("div",_b,[(0,o.Lk)("div",null,[t[38]||(t[38]=(0,o.Lk)("label",{for:"zoneDeliveryName",class:"block font-bold text-gray-700"},"ชื่อโซนการจัดส่ง",-1)),(0,o.bo)((0,o.Lk)("input",{id:"zoneDeliveryName","onUpdate:modelValue":t[2]||(t[2]=e=>n.newZoneDelivery.name=e),type:"text",placeholder:"กรอกชื่อโซนการจัดส่ง",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newZoneDelivery.name]])]),(0,o.Lk)("div",null,[t[40]||(t[40]=(0,o.Lk)("label",{for:"zoneDeliveryType",class:"block font-bold text-gray-700"},"ประเภทโซนการจัดส่ง",-1)),(0,o.bo)((0,o.Lk)("select",{id:"zoneDeliveryType","onUpdate:modelValue":t[3]||(t[3]=e=>n.newZoneDelivery.zone_type_id=e),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},[t[39]||(t[39]=(0,o.Lk)("option",{value:"",disabled:""},"เลือกประเภทโปรโมชั่น",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.zone_delivery_types,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,Lb)))),128))],512),[[a.u1,n.newZoneDelivery.zone_type_id]])]),(0,o.Lk)("div",Db,[t[41]||(t[41]=(0,o.Lk)("label",{for:"zoneDeliveryPrice",class:"block text-gray-700 font-medium"},"ราคา",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.newZoneDelivery.price=e),id:"zoneDeliveryPrice",type:"number",step:"1",min:"0",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newZoneDelivery.price]])])]),(0,o.Lk)("div",Cb,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.addzoneDelivery&&i.addzoneDelivery(...e)),class:"px-4 py-2 rounded bg-green-500 text-white hover:bg-green-600"}," บันทึก ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Pb,[(0,o.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[42]||(t[42]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Mb,[(0,o.Lk)("ul",Tb,[(0,o.Lk)("li",{onClick:t[8]||(t[8]=e=>i.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[43]||(t[43]=(0,o.Lk)("span",null,"จัดเรียงตามรหัส",-1)),"id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Sb,(0,r.v_)(1===n.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[9]||(t[9]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[44]||(t[44]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Eb,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[10]||(t[10]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[45]||(t[45]=[(0,o.Lk)("span",null,"Clear Sort",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Rb,[(0,o.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[46]||(t[46]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Filter",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isFilterDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Ab,[(0,o.Lk)("div",Fb,[t[48]||(t[48]=(0,o.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยประเภทโปรโมชัน",-1)),(0,o.Lk)("div",Ob,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.zone_delivery_types,(e=>((0,o.uX)(),(0,o.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=e=>n.selectedZoneDeliveryTypes=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,Xb),[[a.lH,n.selectedZoneDeliveryTypes]]),(0,o.Lk)("span",null,(0,r.v_)(e.name),1)])))),128))]),(0,o.Lk)("div",zb,[(0,o.Lk)("li",{onClick:t[13]||(t[13]=(...e)=>i.clearFilter&&i.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[47]||(t[47]=[(0,o.Lk)("span",null,"Clear Filter",-1)])),(0,o.Lk)("div",Nb,[(0,o.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>i.applyFilter&&i.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง "),(0,o.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"px-4 py-2 bg-gray-400 hover:bg-gray-600 text-white rounded-md"}," ยกเลิก ")])])])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Qb,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=e=>n.searchQuery=e),placeholder:"ค้นหาชื่อและรหัส...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[17]||(t[17]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[18]||(t[18]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.Lk)("table",Vb,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",Ib,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredZoneDeliveries,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,o.Lk)("td",Bb,(0,r.v_)(e.id),1),(0,o.Lk)("td",jb,(0,r.v_)(e.name),1),(0,o.Lk)("td",Ub,(0,r.v_)(i.getZoneDeliveryTypeName(e.zone_type_id)),1),(0,o.Lk)("td",$b,(0,r.v_)(parseFloat(e.price).toLocaleString("th-TH",{minimumFractionDigits:2}))+" บาท",1),(0,o.Lk)("td",Wb,[(0,o.Lk)("div",qb,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[49]||(t[49]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,Jb),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[50]||(t[50]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,Zb)])])])))),128)),0===n.filteredZoneDeliveries.length?((0,o.uX)(),(0,o.CE)("tr",Kb,t[51]||(t[51]=[(0,o.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",Yb,[(0,o.Lk)("div",Hb,[(0,o.Lk)("div",Gb,[t[52]||(t[52]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไขโซนการจัดส่ง",-1)),(0,o.Lk)("div",ex,[(0,o.Lk)("span",{onClick:t[20]||(t[20]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",tx,[(0,o.Lk)("div",sx,[t[53]||(t[53]=(0,o.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>n.selectedZoneDelivery.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedZoneDelivery.name]])]),(0,o.Lk)("div",ax,[t[55]||(t[55]=(0,o.Lk)("label",{for:"editZoneDeliveryType",class:"block font-bold text-gray-700"},"ประเภทโซนการจัดส่ง",-1)),(0,o.bo)((0,o.Lk)("select",{id:"editZoneDeliveryType","onUpdate:modelValue":t[22]||(t[22]=e=>n.selectedZoneDelivery.zone_type_id=e),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},[t[54]||(t[54]=(0,o.Lk)("option",{value:"",disabled:""},"เลือกประเภทโซนการจัดส่ง",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.zone_delivery_types,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.id,value:e.id},(0,r.v_)(e.name),9,ox)))),128))],512),[[a.u1,n.selectedZoneDelivery.zone_type_id]])]),(0,o.Lk)("div",lx,[t[56]||(t[56]=(0,o.Lk)("label",{for:"editZoneDeliveryPrice",class:"block text-gray-700 font-medium"},"ราคา",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[23]||(t[23]=e=>n.selectedZoneDelivery.price=e),id:"editZoneDeliveryPrice",type:"number",step:"1",min:"0",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedZoneDelivery.price]])]),(0,o.Lk)("div",rx,[(0,o.Lk)("button",{onClick:t[24]||(t[24]=e=>n.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"},t[57]||(t[57]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"save",-1),(0,o.eW)("บันทึก ")]))])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",nx,[(0,o.Lk)("div",ix,[(0,o.Lk)("div",dx,[t[58]||(t[58]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[26]||(t[26]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[59]||(t[59]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,o.Lk)("div",cx,[(0,o.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ux,[(0,o.Lk)("button",{onClick:t[29]||(t[29]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[60]||(t[60]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,px),(0,o.Lk)("div",hx,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[30]||(t[30]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[31]||(t[31]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,gx)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[32]||(t[32]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[33]||(t[33]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[34]||(t[34]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[61]||(t[61]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,mx)])])}var kx={name:"zoneDeliveryPage",data(){return{headers:["รหัส","ชื่อ","ประเภทโซนการจัดส่ง","ราคา",""],headerWidths:["10%","30%","35%","20","5%"],searchQuery:"",filteredZoneDeliveries:[],selectedZoneDeliveryTypes:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",zoneDeliveries:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newZoneDelivery:{name:"",zone_type_id:"",price:""},selectedZoneDelivery:{id:"",name:"",zone_type_id:"",price:""},zone_delivery_types:[],isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.zoneDeliveries.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedZoneDeliveryTypes.length||this.selectedZoneDeliveryTypes.includes(e.zone_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}}},methods:{async fetchZoneDeliveries(){try{const e=await re.A.get("http://127.0.0.1:3333/zone-deliveries");this.filteredZoneDeliveries=e.data,console.log("Response data:",e.data),this.zoneDeliveries=e.data,this.updatePage()}catch(e){console.error("Error fetching zoneDelivery:",e)}},search(){const e=this.zoneDeliveries.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedZoneDeliveryTypes.length||this.selectedZoneDeliveryTypes.includes(e.zone_type_id);return t&&s}));this.currentPage=1,this.filteredZoneDeliveries=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredZoneDeliveries=this.zoneDeliveries.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.id.toString().includes(this.searchQuery),s=0===this.selectedZoneDeliveryTypes.length||this.selectedZoneDeliveryTypes.includes(e.zone_type_id);return t&&s})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.zoneDeliveries.sort(((t,s)=>{const a=t[e],o=s[e];return a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.zoneDeliveries.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedZoneDeliveryTypes.length>0?this.filteredZoneDeliveries=this.zoneDeliveries.filter((e=>this.selectedZoneDeliveryTypes.includes(e.zone_type_id))):this.filteredZoneDeliveries=this.zoneDeliveries,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedZoneDeliveryTypes=[],this.filteredZoneDeliveries=this.zoneDeliveries,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getZoneDeliveryTypeName(e){const t=this.zone_delivery_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){this.selectedZoneDelivery={...e},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedZoneDelivery.name||!this.selectedZoneDelivery.zone_type_id||!this.selectedZoneDelivery.price)return void alert("กรุณากรอกข้อมูลให้ครบถ้วน");const e=await re.A.put(`http://127.0.0.1:3333/zone-deliveries/${this.selectedZoneDelivery.id}`,{name:this.selectedZoneDelivery.name,zone_type_id:this.selectedZoneDelivery.zone_type_id,price:this.selectedZoneDelivery.price});console.log("zoneDelivery updated:",e.data);const t=this.zoneDeliveries.findIndex((e=>e.id===this.selectedZoneDelivery.id));-1!==t&&(this.zoneDeliveries[t]=e.data),this.closeEditModal(),this.updatePage()}catch(e){console.error("Error saving changes:",e),alert("เกิดข้อผิดพลาดในการบันทึกข้อมูล")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedZoneDelivery={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/zone-deliveries/${this.itemToDelete}`),this.zoneDeliveries=this.zoneDeliveries.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage()}catch(e){console.error("Error deleting item:",e),alert("เกิดข้อผิดพลาดในการลบข้อมูล")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewZoneDelivery()},resetNewZoneDelivery(){this.newZoneDelivery={name:"",zone_type_id:"",price:""}},async addzoneDelivery(){if(this.newZoneDelivery.name&&this.newZoneDelivery.zone_type_id)try{const e=await re.A.post("http://127.0.0.1:3333/zone-deliveries",{name:this.newZoneDelivery.name,zone_type_id:this.newZoneDelivery.zone_type_id,price:this.newZoneDelivery.price});console.log("Added zoneDelivery:",e.data),this.zoneDeliveries.push(e.data),this.closeAddModal(),this.updatePage()}catch(e){console.error("Error adding zoneDelivery:",e),alert("เกิดข้อผิดพลาดในการเพิ่มข้อมูล")}else alert("กรุณากรอกข้อมูลให้ครบถ้วน")},async fetchZoneDliveryTypes(){try{const e=await re.A.get("http://127.0.0.1:3333/zone-delivery-types");this.zone_delivery_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}}},created(){this.filteredZoneDeliveries=this.zoneDeliveries,this.sortData("id"),this.fetchZoneDeliveries(),this.fetchZoneDliveryTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchZoneDeliveries(),this.fetchZoneDliveryTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const bx=(0,ce.A)(kx,[["render",yx],["__scopeId","data-v-00db4be3"]]);var xx=bx;const fx={class:"flex space-x-2 items-center relative"},wx={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},vx={class:"text-m text-custom-orange font-bold"},_x={class:"add relative inline-block"},Lx={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},Dx={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Cx={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Px={class:"flex space-x-2"},Mx={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Tx={class:"mb-4"},Sx={class:"flex justify-end space-x-2"},Ex={class:"sort relative inline-block",ref:"sortDropdown"},Rx={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Ax={class:"list-none p-0 m-0"},Fx={key:0,class:"material-symbols-outlined text-sm"},Ox={key:0,class:"material-symbols-outlined text-sm"},Xx={class:"flex w-[250px] relative"},zx={class:"min-w-full table-fixed border-collapse mt-4"},Nx={class:"bg-custom-orange text-white"},Qx={class:"px-4 py-2 align-top"},Vx={class:"px-4 py-2 align-top font-bold text-custom-orange"},Ix={class:"px-4 py-2 align-top text-right"},Bx={class:"flex justify-end space-x-2"},jx=["onClick"],Ux=["onClick"],$x={key:0},Wx={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"},qx={class:"bg-white rounded-md shadow-lg w-1000"},Jx={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Zx={class:"flex space-x-2"},Kx={class:"bg-white rounded-lg shadow-lg p-6 w-96"},Yx={class:"mb-4"},Hx={class:"flex justify-end space-x-2"},Gx={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},ef={class:"bg-white rounded-lg shadow-md w-1/3"},tf={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},sf={class:"flex justify-end space-x-2 p-4"},af={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},of=["disabled"],lf={class:"flex items-center space-x-1"},rf=["onClick"],nf=["disabled"];function df(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[33]||(t[33]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[32]||(t[32]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[35]||(t[35]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[34]||(t[34]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",fx,[(0,o.Lk)("div",wx,[t[36]||(t[36]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนโปรแกรมเมนูทั้งหมด: ",-1)),(0,o.Lk)("span",vx,(0,r.v_)(n.menu_types.length)+" รายการ",1)]),(0,o.Lk)("div",_x,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[37]||(t[37]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มข้อมูล",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",Lx,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[39]||(t[39]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[38]||(t[38]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[41]||(t[41]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[40]||(t[40]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",Dx,[(0,o.Lk)("div",Cx,[t[42]||(t[42]=(0,o.Lk)("div",{class:"flex-1 flex items-left"},[(0,o.Lk)("span",{class:"text-xl font-bold"},"เพิ่มข้อมูลใหม่")],-1)),(0,o.Lk)("div",Px,[(0,o.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Mx,[(0,o.Lk)("form",{onSubmit:t[8]||(t[8]=(0,a.D$)(((...e)=>i.addPromotionType&&i.addPromotionType(...e)),["prevent"]))},[(0,o.Lk)("div",Tx,[t[43]||(t[43]=(0,o.Lk)("label",{for:"name",class:"block text-gray-700"},"ชื่อโปรแกรมเมนู",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>n.newMenuType.name=e),class:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:border-custom-orange"},null,512),[[a.Jo,n.newMenuType.name]])]),(0,o.Lk)("div",Sx,[(0,o.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"},"ยกเลิก"),t[44]||(t[44]=(0,o.Lk)("button",{type:"submit",class:"bg-custom-orange text-white px-2 py-2 rounded hover:bg-custom-orange-hover flex items-center space-x-30"}," บันทึก",-1))])],32)])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ex,[(0,o.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[45]||(t[45]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"Sort",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Rx,[(0,o.Lk)("ul",Ax,[(0,o.Lk)("li",{onClick:t[10]||(t[10]=e=>i.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[46]||(t[46]=(0,o.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Fx,(0,r.v_)(1===n.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[11]||(t[11]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[47]||(t[47]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Ox,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[12]||(t[12]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[48]||(t[48]=[(0,o.Lk)("span",null,"Clear Sort",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Xx,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>n.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[14]||(t[14]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[15]||(t[15]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.Lk)("table",zx,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",Nx,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredMenuType,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,o.Lk)("td",Qx,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",Vx,(0,r.v_)(e.name),1),(0,o.Lk)("td",Ix,[(0,o.Lk)("div",Bx,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[49]||(t[49]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,jx),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[50]||(t[50]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,Ux)])])])))),128)),0===n.filteredMenuType.length?((0,o.uX)(),(0,o.CE)("tr",$x,t[51]||(t[51]=[(0,o.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",Wx,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[53]||(t[53]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[17]||(t[17]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[52]||(t[52]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",qx,[(0,o.Lk)("div",Jx,[t[54]||(t[54]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไขโปรแกรมเมนู",-1)),(0,o.Lk)("div",Zx,[(0,o.Lk)("span",{onClick:t[18]||(t[18]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")])]),(0,o.Lk)("div",Kx,[(0,o.Lk)("div",Yx,[t[55]||(t[55]=(0,o.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>n.selectedPromotionType.name=e),id:"editName",type:"text",class:"border rounded px-4 py-2 w-full"},null,512),[[a.Jo,n.selectedPromotionType.name]])]),(0,o.Lk)("div",Hx,[(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>n.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[21]||(t[21]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"bg-custom-orange text-white px-2 py-1 rounded hover:bg-custom-orange-hover flex items-center space-x-30"}," บันทึก ")])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",Gx,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[57]||(t[57]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[22]||(t[22]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[56]||(t[56]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",ef,[(0,o.Lk)("div",tf,[t[58]||(t[58]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[23]||(t[23]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[59]||(t[59]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,o.Lk)("div",sf,[(0,o.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[25]||(t[25]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",af,[(0,o.Lk)("button",{onClick:t[26]||(t[26]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[60]||(t[60]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,of),(0,o.Lk)("div",lf,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[27]||(t[27]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[28]||(t[28]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,rf)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[29]||(t[29]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[30]||(t[30]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[31]||(t[31]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[61]||(t[61]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,nf)])])}var cf={name:"PromotionTypePage",data(){return{headers:["#","ชื่อ",""],headerWidths:["10%","80%","10%"],searchQuery:"",filteredMenuType:[],isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",menu_types:[],currentPage:1,itemsPerPage:10,selectedPromotionType:{},isEditModalOpen:!1,isAddModalOpen:!1,newMenuType:{name:""},toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isDeleteModalOpen:!1,itemToDelete:null}},computed:{totalPages(){return Math.ceil(this.menu_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase());return t})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}}},methods:{async fetchMenuTypes(){try{const e=await re.A.get("http://127.0.0.1:3333/menu-types");this.filteredMenuType=e.data,console.log("Response data:",e.data),this.menu_types=e.data,this.menu_types.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching menu_type:",e)}},search(){const e=this.menu_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase());return t}));this.currentPage=1,this.filteredMenuType=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredMenuType=this.menu_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase());return t})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.menu_types.sort(((t,s)=>{const a=t[e],o=s[e];return a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.menu_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1)},openEditModal(e){this.selectedPromotionType={...e},this.isEditModalOpen=!0},async saveChanges(){try{await re.A.put(`http://127.0.0.1:3333/menu-types/${this.selectedPromotionType.id}`,{name:this.selectedPromotionType.name});const e=this.menu_types.findIndex((e=>e.id===this.selectedPromotionType.id));-1!==e&&(this.menu_types[e]={...this.selectedPromotionType},this.updatePage(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")),this.isEditModalOpen=!1}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedPromotionType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/menu-types/${this.itemToDelete}`),this.menu_types=this.menu_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0,this.newMenuType={name:""}},closeAddModal(){this.isAddModalOpen=!1},async addPromotionType(){if(this.newMenuType.name.trim())try{const e=await re.A.post("http://127.0.0.1:3333/menu-types",this.newMenuType);this.menu_types.push(e.data),this.updatePage(),this.closeAddModal(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบ!")},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredMenuType=this.menu_types,this.sortData("id"),this.fetchMenuTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchMenuTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const uf=(0,ce.A)(cf,[["render",df]]);var pf=uf;const hf={class:"flex space-x-2 items-center relative"},gf={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},mf={class:"text-m text-custom-orange font-bold"},yf={class:"ml-2"},kf={class:"add relative inline-block"},bf={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},xf={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},ff={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},wf={class:"p-6 space-y-4"},vf={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},_f={class:"sort relative inline-block",ref:"sortDropdown"},Lf={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-48 z-50 border border-gray-300"},Df={class:"list-none p-0 m-0"},Cf={key:0,class:"material-symbols-outlined text-sm"},Pf={key:0,class:"material-symbols-outlined text-sm"},Mf={class:"filter relative inline-block",ref:"filterDropdown"},Tf={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},Sf={class:"p-4 w-[500px] list-none"},Ef={class:"grid grid-cols-3 gap-4"},Rf=["value"],Af={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Ff={class:"flex space-x-2"},Of={class:"flex w-[250px] relative"},Xf={class:"min-w-full table-fixed border-collapse mt-4"},zf={class:"bg-custom-orange text-white"},Nf={class:"px-4 py-2 align-top"},Qf={class:"px-4 py-2 align-top font-bold text-custom-orange"},Vf={class:"px-4 py-2 align-top"},If={class:"px-4 py-2 align-top text-right"},Bf={class:"flex justify-end space-x-2"},jf=["onClick"],Uf=["onClick"],$f={key:0},Wf={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},qf={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Jf={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},Zf={class:"flex space-x-2"},Kf={class:"p-6 space-y-4"},Yf={class:"mb-4"},Hf={class:"mb-4"},Gf={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},ew={class:"flex space-x-2"},tw={key:1,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},sw={class:"bg-white rounded-lg shadow-md w-1/3"},aw={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},ow={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},lw={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},rw=["disabled"],nw={class:"flex items-center space-x-1"},iw=["onClick"],dw=["disabled"];function cw(e,t,s,l,n,i){const d=(0,o.g2)("multiselect");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[39]||(t[39]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[38]||(t[38]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[41]||(t[41]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[40]||(t[40]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",hf,[(0,o.Lk)("div",gf,[t[42]||(t[42]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนประเภทเมนูทั้งหมด: ",-1)),(0,o.Lk)("span",mf,(0,r.v_)(n.meal_types.length)+" รายการ",1)]),n.selectedMenuType.length>0?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>i.clearFilter&&i.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[43]||(t[43]=(0,o.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,o.Lk)("span",yf,"รีเซ็ตตัวกรอง ("+(0,r.v_)(n.selectedMenuType.length)+")",1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",kf,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[44]||(t[44]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มประเภทเมนู",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",bf,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[46]||(t[46]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[45]||(t[45]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",xf,[(0,o.Lk)("div",ff,[t[47]||(t[47]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มประเภทเมนูเข้า",-1)),(0,o.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,o.Lk)("div",wf,[(0,o.Lk)("div",null,[t[48]||(t[48]=(0,o.Lk)("label",{for:"meal_typeName",class:"block font-bold text-gray-700"},"ชื่อประเภทเมนู",-1)),(0,o.bo)((0,o.Lk)("input",{id:"meal_typeName","onUpdate:modelValue":t[6]||(t[6]=e=>n.newMealType.name=e),type:"text",placeholder:"กรอกชื่อประเภทเมนู",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newMealType.name]])]),(0,o.Lk)("div",null,[t[49]||(t[49]=(0,o.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"ประเภทโปรแกรมเมนู",-1)),(0,o.bF)(d,{modelValue:n.newMealType.menu_type_id,"onUpdate:modelValue":t[7]||(t[7]=e=>n.newMealType.menu_type_id=e),options:n.menu_types,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทโปรแกรมเมนู",label:"name","track-by":"id",class:"z-50"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",vf,[(0,o.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>i.addMealType&&i.addMealType(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",_f,[(0,o.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[50]||(t[50]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Lf,[(0,o.Lk)("ul",Df,[(0,o.Lk)("li",{onClick:t[11]||(t[11]=e=>i.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[51]||(t[51]=(0,o.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Cf,(0,r.v_)(1===n.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[12]||(t[12]=e=>i.sortData("name")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[52]||(t[52]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อ",-1)),"name"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Pf,(0,r.v_)(1===n.sortDirection["name"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[13]||(t[13]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[53]||(t[53]=[(0,o.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Mf,[(0,o.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[54]||(t[54]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isFilterDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Tf,[(0,o.Lk)("div",Sf,[t[55]||(t[55]=(0,o.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยประเภทโปรแกรมเมนู",-1)),(0,o.Lk)("div",Ef,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.menu_types,(e=>((0,o.uX)(),(0,o.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>n.selectedMenuType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent"},null,8,Rf),[[a.lH,n.selectedMenuType]]),(0,o.Lk)("span",null,(0,r.v_)(e.name),1)])))),128))])]),(0,o.Lk)("div",Af,[(0,o.Lk)("li",{onClick:t[16]||(t[16]=(...e)=>i.clearFilter&&i.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[56]||(t[56]=[(0,o.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,o.Lk)("div",Ff,[(0,o.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"px-4 py-2 bg-gray-400 hover:bg-gray-600 text-white rounded-md"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>i.applyFilter&&i.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Of,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[19]||(t[19]=e=>n.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[20]||(t[20]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[21]||(t[21]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.Lk)("table",Xf,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",zf,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredMealType,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,o.Lk)("td",Nf,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",Qf,(0,r.v_)(e.name),1),(0,o.Lk)("td",Vf,(0,r.v_)(i.getMenuTypeName(e.menu_type_id)),1),(0,o.Lk)("td",If,[(0,o.Lk)("div",Bf,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[57]||(t[57]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,jf),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[58]||(t[58]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,Uf)])])])))),128)),0===n.filteredMealType.length?((0,o.uX)(),(0,o.CE)("tr",$f,t[59]||(t[59]=[(0,o.Lk)("td",{colspan:"6",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",Wf,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[61]||(t[61]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[23]||(t[23]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[60]||(t[60]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",qf,[(0,o.Lk)("div",Jf,[t[62]||(t[62]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไขประเภทเมนู",-1)),(0,o.Lk)("div",Zf,[(0,o.Lk)("span",{onClick:t[24]||(t[24]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,o.Lk)("div",Kf,[(0,o.Lk)("div",Yf,[t[63]||(t[63]=(0,o.Lk)("label",{for:"editName",class:"block text-gray-700 font-medium"},"ชื่อ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>n.selectedMealType.name=e),id:"editName",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedMealType.name]])]),(0,o.Lk)("div",Hf,[t[64]||(t[64]=(0,o.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"ประเภทโปรแกรมเมนู",-1)),(0,o.bF)(d,{modelValue:n.selectedMealType.menu_type_id,"onUpdate:modelValue":t[26]||(t[26]=e=>n.selectedMealType.menu_type_id=e),options:n.menu_types,"track-by":"id",label:"name",placeholder:"เลือกประเภทโปรแกรมเมนู"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",Gf,[(0,o.Lk)("div",ew,[(0,o.Lk)("button",{onClick:t[27]||(t[27]=e=>n.isEditModalOpen=!1),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded hover:bg-custom-orange-hover flex items-center space-x-30"}," บันทึก ")])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",tw,[(0,o.Lk)("div",sw,[(0,o.Lk)("div",aw,[t[65]||(t[65]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[29]||(t[29]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[66]||(t[66]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,o.Lk)("div",ow,[(0,o.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",lw,[(0,o.Lk)("button",{onClick:t[32]||(t[32]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[67]||(t[67]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,rw),(0,o.Lk)("div",nw,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,iw)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[37]||(t[37]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[68]||(t[68]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,dw)])])}var uw={name:"meal_typePage",data(){return{headers:["#","ชื่อ","ประเภทโปรแกรมเมนู",""],headerWidths:["10%","50%","35%","5%"],searchQuery:"",filteredMealType:[],selectedMenuType:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",meal_types:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newMealType:{name:"",menu_type_id:""},selectedMealType:{id:"",name:"",menu_type_id:""},menu_types:[],toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isDeleteModalOpen:!1,itemToDelete:null}},components:{Multiselect:Rr.Ay},computed:{totalPages(){return Math.ceil(this.meal_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMenuType.length||this.selectedMenuType.includes(e.menu_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}},...(0,Fe.L8)(["menu_types"])},methods:{...(0,Fe.i0)(["fetchMenuTypes","fetchMealTypes"]),async fetchMealTypes(){try{const e=await re.A.get("http://127.0.0.1:3333/meal-types");this.filteredMealType=e.data,console.log("Response data:",e.data),this.meal_types=e.data,this.meal_types.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching meal_type:",e)}},search(){const e=this.meal_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMenuType.length||this.selectedMenuType.includes(e.menu_type_id);return t&&s}));this.currentPage=1,this.filteredMealType=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredMealType=this.meal_types.filter((e=>{const t=e.name.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMenuType.length||this.selectedMenuType.includes(e.menu_type_id);return t&&s})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.meal_types.sort(((t,s)=>{const a=t[e],o=s[e];return a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.meal_types.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.selectedMenuType.length>0?this.filteredMealType=this.meal_types.filter((e=>this.selectedMenuType.includes(e.menu_type_id))):this.filteredMealType=this.meal_types,this.isFilterDropdownOpen=!1,this.updatePage()},clearFilter(){this.selectedMenuType=[],this.filteredMealType=this.meal_types,this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getMenuTypeName(e){const t=this.menu_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){this.selectedMealType={...e,menu_type_id:this.menu_types.find((t=>t.id===e.menu_type_id))},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedMealType.name||!this.selectedMealType.menu_type_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=await re.A.put(`http://127.0.0.1:3333/meal-types/${this.selectedMealType.id}`,{name:this.selectedMealType.name,menu_type_id:this.selectedMealType.menu_type_id.id}),t=this.meal_types.findIndex((e=>e.id===this.selectedMealType.id));-1!==t&&(this.meal_types[t]=e.data),this.isEditModalOpen=!1,this.updatePage(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedMealType={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/meal-types/${this.itemToDelete}`),this.meal_types=this.meal_types.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewMealType()},resetNewMealType(){this.newMealType={name:"",menu_type_id:""}},async addMealType(){if(this.newMealType.name&&this.newMealType.menu_type_id)try{const e=await re.A.post("http://127.0.0.1:3333/meal-types",{name:this.newMealType.name,menu_type_id:this.newMealType.menu_type_id.id});this.meal_types.push(e.data),this.closeAddModal(),this.updatePage(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบ!")},async fetchMenuTypes(){try{const e=await re.A.get("http://127.0.0.1:3333/menu-types");this.menu_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredMealType=this.meal_types,this.sortData("id"),this.fetchMealTypes(),this.fetchMenuTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchMealTypes(),this.fetchMenuTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const pw=(0,ce.A)(uw,[["render",cw],["__scopeId","data-v-724b7c5a"]]);var hw=pw;const gw={class:"flex space-x-2 items-center relative"},mw={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},yw={class:"text-m text-custom-orange font-bold"},kw={class:"ml-2"},bw={class:"add relative inline-block"},xw={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},fw={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},ww={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},vw={class:"p-6 space-y-4"},_w={class:"flex items-center space-x-4 w-full"},Lw={key:0,class:"flex-shrink-0"},Dw=["src"],Cw={class:"w-full"},Pw={class:"flex space-x-4"},Mw={class:"flex-1"},Tw={class:"flex-1"},Sw={class:"flex-1"},Ew={class:"flex-1"},Rw={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Aw={class:"flex space-x-2"},Fw={class:"sort relative inline-block",ref:"sortDropdown"},Ow={key:0,class:"absolute left-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md w-64 z-50 border border-gray-300"},Xw={class:"list-none p-0 m-0"},zw={key:0,class:"material-symbols-outlined text-sm"},Nw={key:0,class:"material-symbols-outlined text-sm"},Qw={key:0,class:"material-symbols-outlined text-sm"},Vw={class:"filter relative inline-block",ref:"filterDropdown"},Iw={key:0,class:"absolute right-0 top-full mt-1 bg-white text-black text-left shadow-lg rounded-md overflow-y-auto z-50 border border-gray-300"},Bw={class:"p-4 w-[500px] h-auto max-h-[400px] overflow-y-auto flex-grow list-none"},jw={class:"flex justify-between items-center"},Uw={class:"font-semibold mb-2 text-custom-orange"},$w=["onClick"],Ww={class:"grid grid-cols-2 gap-4"},qw=["value"],Jw={class:"break-words"},Zw={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Kw={class:"flex space-x-2"},Yw={class:"flex w-[250px] relative"},Hw={class:"min-w-full table-fixed border-collapse mt-4"},Gw={class:"bg-custom-orange text-white"},ev={class:"px-4 py-2 align-top"},tv={class:"px-4 py-2 align-top font-bold text-custom-orange"},sv={class:"px-4 py-2 align-top font-bold"},av={class:"px-4 py-2 align-top"},ov={key:0},lv={key:1},rv={class:"px-4 py-2 align-top"},nv={class:"px-4 py-2 align-top"},iv={class:"px-4 py-2 align-top"},dv={class:"px-4 py-2 align-top"},cv={class:"px-4 py-2 align-top text-right"},uv={class:"flex justify-end space-x-2"},pv=["onClick"],hv=["onClick"],gv={key:0},mv={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},yv={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},kv={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},bv={class:"flex space-x-2"},xv={class:"p-6 space-y-4"},fv={class:"mb-4"},wv={key:0,class:"mb-2 flex items-center space-x-4"},vv=["src"],_v={key:1},Lv={key:2,class:"mt-2 text-sm text-gray-500"},Dv={class:"mb-4"},Cv={class:"mb-4"},Pv={class:"mb-4"},Mv={class:"mb-4"},Tv={class:"flex space-x-4"},Sv={class:"flex-1"},Ev={class:"flex-1"},Rv={class:"flex-1"},Av={class:"flex-1"},Fv={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},Ov={class:"flex space-x-2"},Xv={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},zv={class:"bg-white rounded-lg shadow-md w-1/3"},Nv={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},Qv={class:"flex justify-end space-x-2 p-4 border-t"},Vv={class:"pagination-controls flex justify-center items-center space-x-2 bg-white px-4 py-2"},Iv=["disabled"],Bv={class:"flex items-center space-x-1"},jv=["onClick"],Uv=["disabled"];function $v(e,t,s,l,n,i){const d=(0,o.g2)("multiselect");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[57]||(t[57]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[56]||(t[56]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[59]||(t[59]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",gw,[(0,o.Lk)("div",mw,[t[60]||(t[60]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนเมนูทั้งหมด: ",-1)),(0,o.Lk)("span",yw,(0,r.v_)(n.menus.length)+" รายการ",1)]),n.selectedMealType.length>0?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[2]||(t[2]=(...e)=>i.clearFilter&&i.clearFilter(...e)),class:"px-2 py-2 rounded-md flex items-center space-x-1 text-gray-400 hover:text-custom-orange"},[t[61]||(t[61]=(0,o.Lk)("span",{class:"material-symbols-outlined"},"close",-1)),(0,o.Lk)("span",kw,"รีเซ็ตตัวกรอง ("+(0,r.v_)(n.selectedMealType.length)+")",1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",bw,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[62]||(t[62]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่มเมนู",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",xw,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[64]||(t[64]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[63]||(t[63]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",fw,[(0,o.Lk)("div",ww,[t[65]||(t[65]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มเมนู",-1)),(0,o.Lk)("span",{onClick:t[5]||(t[5]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,o.Lk)("div",vw,[(0,o.Lk)("div",null,[t[66]||(t[66]=(0,o.Lk)("label",{for:"Image",class:"block text-gray-700 font-bold"},"เลือกรูปภาพ",-1)),(0,o.Lk)("div",_w,[n.previewImage||n.newMenu.image?((0,o.uX)(),(0,o.CE)("div",Lw,[(0,o.Lk)("img",{src:n.previewImage||`http://127.0.0.1:3333/images/${n.newMenu.image}`,alt:"Menu Image",class:"max-w-48 max-h-48 object-contain rounded border"},null,8,Dw)])):(0,o.Q3)("",!0),(0,o.Lk)("div",Cw,[(0,o.Lk)("input",{id:"Image",type:"file",onChange:t[6]||(t[6]=(...e)=>i.onFileChange&&i.onFileChange(...e)),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,32)])])]),(0,o.Lk)("div",null,[t[67]||(t[67]=(0,o.Lk)("label",{for:"menuCode",class:"block font-bold text-gray-700"},"รหัสเมนู",-1)),(0,o.bo)((0,o.Lk)("input",{id:"menuCode","onUpdate:modelValue":t[7]||(t[7]=e=>n.newMenu.menu_code=e),type:"text",placeholder:"กรอกรหัสเมนู",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newMenu.menu_code]])]),(0,o.Lk)("div",null,[t[68]||(t[68]=(0,o.Lk)("label",{for:"nameEnglish",class:"block font-bold text-gray-700"},"ชื่อเมนูภาษาอังกฤษ",-1)),(0,o.bo)((0,o.Lk)("input",{id:"nameEnglish","onUpdate:modelValue":t[8]||(t[8]=e=>n.newMenu.name_english=e),type:"text",placeholder:"กรอกชื่อเมนูภาษาอังกฤษ",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newMenu.name_english]])]),(0,o.Lk)("div",null,[t[69]||(t[69]=(0,o.Lk)("label",{for:"nameThai",class:"block font-bold text-gray-700"},"ชื่อเมนูภาษาไทย",-1)),(0,o.bo)((0,o.Lk)("input",{id:"nameThai","onUpdate:modelValue":t[9]||(t[9]=e=>n.newMenu.name_thai=e),type:"text",placeholder:"กรอกชื่อเมนูภาษาไทย",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newMenu.name_thai]])]),(0,o.Lk)("div",null,[t[70]||(t[70]=(0,o.Lk)("label",{for:"promotionType",class:"block font-bold text-gray-700"},"ประเภทเมนู",-1)),(0,o.bF)(d,{modelValue:n.newMenu.meal_type_id,"onUpdate:modelValue":t[10]||(t[10]=e=>n.newMenu.meal_type_id=e),options:n.meal_types.map((e=>({id:e.id,name:`${e.name} (${e.menuType?e.menuType.name:"ไม่มีข้อมูล"})`}))),multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทเมนู",label:"name","track-by":"id",class:"z-50"},null,8,["modelValue","options"])]),(0,o.Lk)("div",Pw,[(0,o.Lk)("div",Mw,[t[71]||(t[71]=(0,o.Lk)("label",{for:"cal",class:"block font-bold text-gray-700"},"แคลอรี่",-1)),(0,o.bo)((0,o.Lk)("input",{id:"cal","onUpdate:modelValue":t[11]||(t[11]=e=>n.newMenu.cal=e),type:"number",placeholder:"กรอกแคลอรี่",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newMenu.cal]])]),(0,o.Lk)("div",Tw,[t[72]||(t[72]=(0,o.Lk)("label",{for:"protein",class:"block font-bold text-gray-700"},"โปรตีน",-1)),(0,o.bo)((0,o.Lk)("input",{id:"protein","onUpdate:modelValue":t[12]||(t[12]=e=>n.newMenu.protein=e),type:"number",placeholder:"กรอกโปรตีน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newMenu.protein]])]),(0,o.Lk)("div",Sw,[t[73]||(t[73]=(0,o.Lk)("label",{for:"fat",class:"block font-bold text-gray-700"},"ไขมัน",-1)),(0,o.bo)((0,o.Lk)("input",{id:"fat","onUpdate:modelValue":t[13]||(t[13]=e=>n.newMenu.fat=e),type:"number",placeholder:"กรอกไขมัน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newMenu.fat]])]),(0,o.Lk)("div",Ew,[t[74]||(t[74]=(0,o.Lk)("label",{for:"carb",class:"block font-bold text-gray-700"},"คาร์โบไฮเดรต",-1)),(0,o.bo)((0,o.Lk)("input",{id:"carb","onUpdate:modelValue":t[14]||(t[14]=e=>n.newMenu.carb=e),type:"number",placeholder:"กรอกคาร์โบไฮเดรต",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.newMenu.carb]])])])]),(0,o.Lk)("div",Rw,[(0,o.Lk)("li",{onClick:t[15]||(t[15]=(...e)=>i.resetNewMenu&&i.resetNewMenu(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[75]||(t[75]=[(0,o.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,o.Lk)("div",Aw,[(0,o.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>i.addMenu&&i.addMenu(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Fw,[(0,o.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>i.toggleSortDropdown&&i.toggleSortDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[76]||(t[76]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"sort",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"จัดเรียง",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isSortDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Ow,[(0,o.Lk)("ul",Xw,[(0,o.Lk)("li",{onClick:t[19]||(t[19]=e=>i.sortData("id")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[77]||(t[77]=(0,o.Lk)("span",null,"จัดเรียงตามลำดับ",-1)),"id"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",zw,(0,r.v_)(1===n.sortDirection["id"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[20]||(t[20]=e=>i.sortData("name_english")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[78]||(t[78]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อภาษาอังกฤษ",-1)),"name_english"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Nw,(0,r.v_)(1===n.sortDirection["name_english"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[21]||(t[21]=e=>i.sortData("name_thai")),class:"px-4 py-2 cursor-pointer hover:bg-gray-100 flex items-center justify-between"},[t[79]||(t[79]=(0,o.Lk)("span",null,"จัดเรียงตามชื่อภาษาไทย",-1)),"name_thai"===n.sortColumn?((0,o.uX)(),(0,o.CE)("span",Qw,(0,r.v_)(1===n.sortDirection["name_thai"]?"arrow_upward":"arrow_downward"),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("li",{onClick:t[22]||(t[22]=(...e)=>i.clearSort&&i.clearSort(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-right border-t hover:underline"},t[80]||(t[80]=[(0,o.Lk)("span",null,"รีเซ็ตจัดเรียง",-1)]))])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Vw,[(0,o.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"bg-custom-orange text-white px-2 py-2 rounded-md flex items-center space-x-1 hover:bg-custom-orange-hover"},t[81]||(t[81]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"filter_alt",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"ตัวกรอง",-1),(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none items-right ml-auto"},"arrow_drop_down",-1)])),n.isFilterDropdownOpen?((0,o.uX)(),(0,o.CE)("div",Iw,[(0,o.Lk)("div",Bw,[t[82]||(t[82]=(0,o.Lk)("h3",{class:"font-bold mb-2"},"กรองโดยประเภทเมนู",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.groupedMealTypes,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"mb-4"},[(0,o.Lk)("div",jw,[(0,o.Lk)("h4",Uw,(0,r.v_)(s),1),(0,o.Lk)("button",{onClick:e=>i.toggleSelectMenuTypeAll(s),class:"text-custom-orange hover:text-custom-orange-hover text-sm"},(0,r.v_)(n.selectAllMenuTypeState[s]?"ยกเลิกเลือกทั้งหมด":"เลือกทั้งหมด"),9,$w)]),(0,o.Lk)("div",Ww,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,(e=>((0,o.uX)(),(0,o.CE)("label",{key:e.id,class:"flex items-center space-x-2"},[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=e=>n.selectedMealType=e),value:e.id,class:"w-5 h-5 border-2 border-gray-400 rounded-full appearance-none checked:bg-custom-orange checked:border-transparent flex-shrink-0"},null,8,qw),[[a.lH,n.selectedMealType]]),(0,o.Lk)("span",Jw,(0,r.v_)(e.name),1)])))),128))])])))),128))]),(0,o.Lk)("div",Zw,[(0,o.Lk)("li",{onClick:t[25]||(t[25]=(...e)=>i.clearFilter&&i.clearFilter(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[83]||(t[83]=[(0,o.Lk)("span",null,"รีเซ็ตตัวกรอง",-1)])),(0,o.Lk)("div",Kw,[(0,o.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>i.toggleFiltterDropdown&&i.toggleFiltterDropdown(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>i.applyFilter&&i.applyFilter(...e)),class:"bg-custom-orange hover:bg-custom-orange-hover text-white px-4 py-2 rounded-md"}," ใช้ตัวกรอง ")])])])):(0,o.Q3)("",!0)],512),(0,o.Lk)("div",Yw,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[28]||(t[28]=e=>n.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[29]||(t[29]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[30]||(t[30]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[31]||(t[31]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.Lk)("table",Hw,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",Gw,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredMenu,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"customers-data bg-white relative"},[(0,o.Lk)("td",ev,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",tv,(0,r.v_)(e.name_english),1),(0,o.Lk)("td",sv,(0,r.v_)(e.name_thai),1),(0,o.Lk)("td",av,[(0,o.eW)((0,r.v_)(i.getMealTypeName(e.meal_type_id))+" ",1),e.mealType&&e.mealType.menuType?((0,o.uX)(),(0,o.CE)("span",ov," ("+(0,r.v_)(e.mealType.menuType.name)+") ",1)):((0,o.uX)(),(0,o.CE)("span",lv," (ไม่มีข้อมูล) "))]),(0,o.Lk)("td",rv,(0,r.v_)(e.cal),1),(0,o.Lk)("td",nv,(0,r.v_)(e.protein),1),(0,o.Lk)("td",iv,(0,r.v_)(e.fat),1),(0,o.Lk)("td",dv,(0,r.v_)(e.carb),1),(0,o.Lk)("td",cv,[(0,o.Lk)("div",uv,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[84]||(t[84]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,pv),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[85]||(t[85]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,hv)])])])))),128)),0===n.filteredMenu.length?((0,o.uX)(),(0,o.CE)("tr",gv,t[86]||(t[86]=[(0,o.Lk)("td",{colspan:"10",class:"py-20 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูลที่ค้นหา ",-1)]))):(0,o.Q3)("",!0)]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",mv,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[88]||(t[88]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[32]||(t[32]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[87]||(t[87]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",yv,[(0,o.Lk)("div",kv,[t[89]||(t[89]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไขเมนู",-1)),(0,o.Lk)("div",bv,[(0,o.Lk)("span",{onClick:t[33]||(t[33]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,o.Lk)("div",xv,[(0,o.Lk)("div",fv,[t[90]||(t[90]=(0,o.Lk)("label",{for:"editImage",class:"block text-gray-700 font-bold"},"เลือกรูปภาพ",-1)),n.selectedMenu.image||n.previewImage?((0,o.uX)(),(0,o.CE)("div",wv,[(0,o.Lk)("img",{src:n.previewImage||`http://127.0.0.1:3333/images/${n.selectedMenu.image}`,alt:"Menu Image",class:"max-w-48 max-h-48 object-contain rounded border"},null,8,vv),(0,o.Lk)("input",{id:"editImage",type:"file",onChange:t[34]||(t[34]=(...e)=>i.onFileChange&&i.onFileChange(...e)),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,32)])):((0,o.uX)(),(0,o.CE)("div",_v,[(0,o.Lk)("input",{id:"editImage",type:"file",onChange:t[35]||(t[35]=(...e)=>i.onFileChange&&i.onFileChange(...e)),class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,32)])),n.selectedMenu.image?((0,o.uX)(),(0,o.CE)("div",Lv," ชื่อไฟล์ปัจจุบัน: "+(0,r.v_)(n.selectedMenu.image),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Dv,[t[91]||(t[91]=(0,o.Lk)("label",{for:"editMenuCode",class:"block text-gray-700 font-bold"},"รหัสเมนู",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[36]||(t[36]=e=>n.selectedMenu.menu_code=e),id:"editMenuCode",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedMenu.menu_code]])]),(0,o.Lk)("div",Cv,[t[92]||(t[92]=(0,o.Lk)("label",{for:"editNameEnglish",class:"block text-gray-700 font-bold"},"ชื่อเมนูภาษาอังกฤษ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[37]||(t[37]=e=>n.selectedMenu.name_english=e),id:"editNameEnglish",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedMenu.name_english]])]),(0,o.Lk)("div",Pv,[t[93]||(t[93]=(0,o.Lk)("label",{for:"editNameThai",class:"block text-gray-700 font-bold"},"ชื่อเมนูภาษาไทย",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[38]||(t[38]=e=>n.selectedMenu.name_thai=e),id:"editNameThai",type:"text",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedMenu.name_thai]])]),(0,o.Lk)("div",Mv,[t[94]||(t[94]=(0,o.Lk)("label",{for:"editPromotionType",class:"block font-bold text-gray-700"},"ประเภทเมนู",-1)),(0,o.bF)(d,{modelValue:n.selectedMenu.meal_type_id,"onUpdate:modelValue":t[39]||(t[39]=e=>n.selectedMenu.meal_type_id=e),options:n.meal_types.map((e=>({id:e.id,name:`${e.name} (${e.menuType?e.menuType.name:"ไม่มีข้อมูล"})`}))),"track-by":"id",label:"name",placeholder:"เลือกประเภทเมนู",multiple:!1,searchable:!0,"close-on-select":!0,class:"z-50"},null,8,["modelValue","options"])]),(0,o.Lk)("div",Tv,[(0,o.Lk)("div",Sv,[t[95]||(t[95]=(0,o.Lk)("label",{for:"editCal",class:"block font-bold text-gray-700"},"แคลอรี่",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editCal","onUpdate:modelValue":t[40]||(t[40]=e=>n.selectedMenu.cal=e),type:"number",placeholder:"กรอกแคลอรี่",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedMenu.cal]])]),(0,o.Lk)("div",Ev,[t[96]||(t[96]=(0,o.Lk)("label",{for:"editProtein",class:"block font-bold text-gray-700"},"โปรตีน",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editProtein","onUpdate:modelValue":t[41]||(t[41]=e=>n.selectedMenu.protein=e),type:"number",placeholder:"กรอกโปรตีน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedMenu.protein]])]),(0,o.Lk)("div",Rv,[t[97]||(t[97]=(0,o.Lk)("label",{for:"editFat",class:"block font-bold text-gray-700"},"ไขมัน",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editFat","onUpdate:modelValue":t[42]||(t[42]=e=>n.selectedMenu.fat=e),type:"number",placeholder:"กรอกไขมัน",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedMenu.fat]])]),(0,o.Lk)("div",Av,[t[98]||(t[98]=(0,o.Lk)("label",{for:"editCarb",class:"block font-bold text-gray-700"},"คาร์โบไฮเดรต",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editCarb","onUpdate:modelValue":t[43]||(t[43]=e=>n.selectedMenu.carb=e),type:"number",placeholder:"กรอกคาร์โบไฮเดรต",class:"w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedMenu.carb]])])])]),(0,o.Lk)("div",Fv,[(0,o.Lk)("div",Ov,[(0,o.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[45]||(t[45]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",Xv,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[100]||(t[100]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[46]||(t[46]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[99]||(t[99]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",zv,[(0,o.Lk)("div",Nv,[t[101]||(t[101]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[47]||(t[47]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[102]||(t[102]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null,"คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้")],-1)),(0,o.Lk)("div",Qv,[(0,o.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[49]||(t[49]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Vv,[(0,o.Lk)("button",{onClick:t[50]||(t[50]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[103]||(t[103]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,Iv),(0,o.Lk)("div",Bv,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[51]||(t[51]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[52]||(t[52]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,jv)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[53]||(t[53]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[54]||(t[54]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[55]||(t[55]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[104]||(t[104]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,Uv)])])}s(4603),s(7566),s(8721);var Wv={name:"menuPage",data(){return{headers:["#","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย","ประเภทโปรแกรมเมนู","แคลอรี่","โปรตีน","ไขมัน","คาร์โบไฮเดต",""],headerWidths:["5%","25%","20%","15%","5%","5%","5%","10%","10%"],searchQuery:"",filteredMenu:[],selectedMealType:[],isFilterDropdownOpen:!1,isSortDropdownOpen:!1,sortDirection:{id:1,name:1},sortColumn:"",menus:[],currentPage:1,itemsPerPage:10,isEditModalOpen:!1,isAddModalOpen:!1,newMenu:{menu_code:"",name_english:"",name_thai:"",meal_type_id:"",cal:0,protein:0,fat:0,carb:0,image:""},selectedMenu:{id:"",menu_code:"",name_english:"",name_thai:"",meal_type_id:"",cal:0,protein:0,fat:0,carb:0,image:"",imageFile:null},previewImage:"",meal_types:[],toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",isDeleteModalOpen:!1,itemToDelete:null,selectAllMenuTypeState:{}}},components:{Multiselect:Rr.Ay},computed:{totalPages(){return Math.ceil(this.menus.filter((e=>{const t=e.name_english.toLowerCase().includes(this.searchQuery.toLowerCase())||e.name_thai.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMealType.length||this.selectedMealType.includes(e.meal_type_id);return t&&s})).length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}},groupedMealTypes(){return this.meal_types.reduce(((e,t)=>{const s=t.menuType?t.menuType.name:"ไม่มีข้อมูล";return e[s]||(e[s]=[]),e[s].push(t),e}),{})},...(0,Fe.L8)(["menus"])},methods:{...(0,Fe.i0)(["fetchMealTypes","fetchMenus"]),async fetchMenus(){try{const e=await re.A.get("http://127.0.0.1:3333/menus");this.filteredMenu=e.data,console.log("Response data:",e.data),this.menus=e.data,this.menus.sort(((e,t)=>e.id-t.id)),this.updatePage()}catch(e){console.error("Error fetching menu:",e)}},search(){const e=this.menus.filter((e=>{const t=e.name_english.toLowerCase().includes(this.searchQuery.toLowerCase())||e.name_thai.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMealType.length||this.selectedMealType.includes(e.meal_type_id);return t&&s}));this.currentPage=1,this.filteredMenu=e,this.updatePage()},clearSearch(){this.searchQuery="",this.search()},onFileChange(e){const t=e.target.files[0];t&&(this.selectedMenu.imageFile=t,this.previewImage=URL.createObjectURL(t))},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePage())},updatePage(){const e=(this.currentPage-1)*this.itemsPerPage,t=e+this.itemsPerPage;this.filteredMenu=this.menus.filter((e=>{const t=e.name_english.toLowerCase().includes(this.searchQuery.toLowerCase())||e.name_thai.toLowerCase().includes(this.searchQuery.toLowerCase()),s=0===this.selectedMealType.length||this.selectedMealType.includes(e.meal_type_id);return t&&s})).slice(e,t)},toggleSortDropdown(){this.isSortDropdownOpen=!this.isSortDropdownOpen},sortData(e){this.sortColumn===e?this.sortDirection[e]=-this.sortDirection[e]:(this.sortColumn=e,this.sortDirection[e]=1),this.menus.sort(((t,s)=>{const a=t[e],o=s[e];return a<o?-this.sortDirection[e]:a>o?this.sortDirection[e]:0})),this.currentPage=1,this.updatePage()},clearSort(){this.sortColumn="id",this.sortDirection.id=1,this.menus.sort(((e,t)=>e.id-t.id)),this.currentPage=1,this.updatePage()},toggleFiltterDropdown(){this.isFilterDropdownOpen=!this.isFilterDropdownOpen},applyFilter(){this.currentPage=1,this.selectedMealType.length>0?this.filteredMenu=this.menus.filter((e=>this.selectedMealType.includes(e.meal_type_id))):this.filteredMenu=this.menus,this.isFilterDropdownOpen=!1,this.currentPage=1,this.updatePage()},toggleSelectMenuTypeAll(e){if(this.selectAllMenuTypeState[e])this.selectedMealType=this.selectedMealType.filter((t=>!this.groupedMealTypes[e].some((e=>e.id===t))));else{const t=this.groupedMealTypes[e].map((e=>e.id));this.selectedMealType=[...new Set([...this.selectedMealType,...t])]}this.selectAllMenuTypeState[e]=!this.selectAllMenuTypeState[e]},clearFilter(){this.selectedMealType=[],this.filteredMenu=this.menus,Object.keys(this.selectAllMenuTypeState).forEach((e=>{this.selectAllMenuTypeState[e]=!1})),this.applyFilter(),this.updatePage()},handleClickOutside(e){this.$refs.sortDropdown&&!this.$refs.sortDropdown.contains(e.target)&&(this.isSortDropdownOpen=!1),this.$refs.filterDropdown&&!this.$refs.filterDropdown.contains(e.target)&&(this.isFilterDropdownOpen=!1)},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"ไม่พบข้อมูล"},openEditModal(e){const t=this.meal_types.find((t=>t.id===e.meal_type_id));this.selectedMenu={...e,meal_type_id:t?{id:t.id,name:`${t.name} (${t.menuType?t.menuType.name:"ไม่มีข้อมูล"})`}:null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedMenu.name_english||!this.selectedMenu.name_thai||!this.selectedMenu.meal_type_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");const e=new FormData;e.append("menu_code",this.selectedMenu.menu_code),e.append("name_english",this.selectedMenu.name_english),e.append("name_thai",this.selectedMenu.name_thai),e.append("meal_type_id",this.selectedMenu.meal_type_id.id),e.append("cal",this.selectedMenu.cal),e.append("protein",this.selectedMenu.protein),e.append("fat",this.selectedMenu.fat),e.append("carb",this.selectedMenu.carb),this.selectedMenu.imageFile&&e.append("image",this.selectedMenu.imageFile);const t=await re.A.put(`http://127.0.0.1:3333/menus/${this.selectedMenu.id}`,e,{headers:{"Content-Type":"multipart/form-data"}}),s=this.menus.findIndex((e=>e.id===this.selectedMenu.id));-1!==s&&(this.menus[s]={...t.data,mealType:this.meal_types.find((e=>e.id===t.data.meal_type_id))||{}}),this.isEditModalOpen=!1,this.updatePage(),await this.fetchMenus(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedMenu={},this.previewImage=null},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/menus/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),this.updatePage(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}},openAddModal(){this.isAddModalOpen=!0},closeAddModal(){this.isAddModalOpen=!1,this.resetNewMenu()},resetNewMenu(){this.newMenu={menu_code:"",name_english:"",name_thai:"",meal_type_id:"",cal:0,protein:0,fat:0,carb:0,image:"",imageFile:null},this.previewImage=null},async addMenu(){if(this.newMenu.name_english&&this.newMenu.name_thai&&this.newMenu.meal_type_id)try{const e=new FormData;e.append("menu_code",this.newMenu.menu_code),e.append("name_english",this.newMenu.name_english),e.append("name_thai",this.newMenu.name_thai),e.append("meal_type_id",this.newMenu.meal_type_id.id),e.append("cal",this.newMenu.cal),e.append("protein",this.newMenu.protein),e.append("fat",this.newMenu.fat),e.append("carb",this.newMenu.carb),this.newMenu.imageFile&&e.append("image",this.newMenu.imageFile);const t=await re.A.post("http://127.0.0.1:3333/menus",e,{headers:{"Content-Type":"multipart/form-data"}});console.log("Added menu:",t.data),t.data&&t.data.mealType&&t.data.mealType.menuType&&this.menus.push(t.data),this.closeAddModal(),this.updatePage(),this.showSuccessToastNotification("เพิ่มข้อมูลสำเร็จ!")}catch(e){console.error("Error adding menu:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเพิ่มข้อมูล!")}else this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบ!")},async fetchMealTypes(){try{const e=await re.A.get("http://127.0.0.1:3333/meal-types");this.meal_types=e.data}catch(e){console.error("Error fetching promotion types:",e)}},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:" "},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredMenu=this.menus,this.sortData("id"),this.fetchMenus(),this.fetchMealTypes(),this.updatePage()},mounted(){document.addEventListener("click",this.handleClickOutside),this.fetchMenus(),this.fetchMealTypes(),this.updatePage()},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)}};const qv=(0,ce.A)(Wv,[["render",$v]]);var Jv=qv;const Zv={class:"flex justify-end items-center space-x-2 relative"},Kv={class:"flex items-center space-x-1 mr-auto"},Yv={class:"text-2xl font-bold mb-2 ml-auto"},Hv={class:"flex items-center space-x-4"},Gv={class:"add relative inline-block"},e_={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},t_={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},s_={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},a_={class:"p-6 space-y-4 overflow-y-auto flex-grow"},o_={class:"flex items-center space-x-4"},l_={class:"text-xl font-bold text-gray-700"},r_={class:"absolute top-2 right-4"},n_=["onClick"],i_={class:"mb-4 flex justify-center"},d_={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},c_={class:"flex space-x-2"},u_={class:"flex w-[250px] relative"},p_={class:"flex items-center space-x-3 py-2"},h_={key:0,class:"mb-8"},g_={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},m_={class:"bg-custom-orange text-white"},y_={class:"px-4 py-2 align-top pb-5"},k_=["rowspan"],b_={class:"flex items-center"},x_={class:"px-4 py-2 align-top pb-5"},f_={class:"px-4 py-2 align-top pb-5"},w_={class:"px-4 py-2 align-top pb-5"},v_={class:"px-4 py-2 align-top text-right"},__={class:"flex justify-end space-x-2"},L_=["onClick"],D_=["onClick"],C_={key:0},P_={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},M_=["disabled"],T_={class:"flex items-center space-x-1"},S_=["onClick"],E_=["disabled"],R_={class:"flex items-center space-x-3 py-2"},A_={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},F_={class:"bg-custom-orange text-white"},O_={class:"px-4 py-2 align-top pb-5"},X_={class:"px-4 py-2 align-top pb-5"},z_={class:"px-4 py-2 align-top pb-5"},N_={class:"px-4 py-2 align-top pb-5"},Q_={class:"px-4 py-2 align-top text-right"},V_={class:"flex justify-end space-x-2"},I_=["onClick"],B_=["onClick"],j_={key:0},U_={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},$_=["disabled"],W_={class:"flex items-center space-x-1"},q_=["onClick"],J_=["disabled"],Z_={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},K_={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},Y_={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},H_={class:"flex space-x-2"},G_={class:"p-6 space-y-4"},eL={class:"flex items-center space-x-4"},tL={class:"mb-4"},sL={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},aL={class:"flex space-x-2"},oL={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},lL={class:"bg-white rounded-lg shadow-md w-1/3"},rL={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},nL={class:"flex justify-end space-x-2 p-4 border-t"};function iL(e,t,s,l,n,i){const d=(0,o.g2)("multiselect");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[50]||(t[50]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[52]||(t[52]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",Zv,[(0,o.Lk)("div",Kv,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>n.viewMode="week"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===n.viewMode}])},t[53]||(t[53]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>n.viewMode="day"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===n.viewMode}])},t[54]||(t[54]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,o.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,o.Lk)("h1",Yv,(0,r.v_)("week"===n.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,o.Lk)("div",Hv,[(0,o.Lk)("div",null,[t[56]||(t[56]=(0,o.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>i.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[a.Jo,i.formattedStartDate]])]),n.isDateConfirmed||n.startDate===n.initialStartDate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>i.updateStartDate&&i.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,o.Lk)("div",Gv,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",e_,[(0,o.Lk)("div",t_,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[59]||(t[59]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",s_,[t[60]||(t[60]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,o.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,o.Lk)("div",a_,[(0,o.Lk)("div",o_,[t[61]||(t[61]=(0,o.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[a.Jo,n.day_of_week]])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.formRows,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"space-y-4 relative"},[(0,o.Lk)("div",l_," ประเภทอาหาร "+(0,r.v_)(s+1),1),(0,o.Lk)("div",null,[t[62]||(t[62]=(0,o.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:i.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,o.Lk)("div",null,[t[63]||(t[63]=(0,o.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,o.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:i.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":i.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,o.Lk)("div",r_,[(0,o.Lk)("button",{type:"button",onClick:e=>i.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,o.Lk)("span",null,"× ลบเมนู",-1)]),8,n_)])])))),128)),(0,o.Lk)("div",i_,[(0,o.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>i.addRow&&i.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,o.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,o.Lk)("div",d_,[(0,o.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>i.clearForm&&i.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,o.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,o.Lk)("div",c_,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>i.addMenus&&i.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",u_,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>n.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",p_,[(0,o.Lk)("button",{onClick:t[18]||(t[18]=e=>i.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),i.weekOptions.length>0?((0,o.uX)(),(0,o.Wv)(d,{key:0,modelValue:n.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>n.selectedWeek=e),options:i.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>i.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),n.selectedWeek?((0,o.uX)(),(0,o.CE)("div",h_,[(0,o.Lk)("table",g_,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",m_,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenus,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",y_,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),0===s||e.day_of_week!==i.paginatedMenus[s-1].day_of_week?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:i.getRowSpan(i.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,o.Lk)("div",null,[t[70]||(t[70]=(0,o.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,o.eW)((0,r.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",b_,[t[69]||(t[69]=(0,o.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,o.eW)(" "+(0,r.v_)(i.formattedDate(e.date_to_show)),1)])])],8,k_)):(0,o.Q3)("",!0),(0,o.Lk)("td",x_,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",f_,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",w_,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",v_,[(0,o.Lk)("div",__,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,L_),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,D_)])])])))),128)),0===i.paginatedMenus.length?((0,o.uX)(),(0,o.CE)("tr",C_,t[74]||(t[74]=[(0,o.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",P_,[(0,o.Lk)("button",{onClick:t[21]||(t[21]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,M_),(0,o.Lk)("div",T_,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,S_)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[26]||(t[26]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,E_)])])):(0,o.Q3)("",!0)],512),[[a.aG,"week"===n.viewMode]]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",R_,[(0,o.Lk)("button",{onClick:t[27]||(t[27]=e=>i.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[29]||(t[29]=e=>i.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>i.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>i.onSelectDateChange&&i.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[a.Jo,i.formattedSelectedDate]])]),(0,o.Lk)("table",A_,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",F_,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headersByDay,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidthsByDay[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenusByDay,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",O_,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",X_,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",z_,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",N_,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",Q_,[(0,o.Lk)("div",V_,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,I_),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,B_)])])])))),128)),0===i.paginatedMenusByDay.length?((0,o.uX)(),(0,o.CE)("tr",j_,t[82]||(t[82]=[(0,o.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",U_,[(0,o.Lk)("button",{onClick:t[32]||(t[32]=e=>i.goToPageByDay(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,$_),(0,o.Lk)("div",W_,[i.totalPagesArrayByDay.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>i.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>i.goToPageByDay(i.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArrayByDay.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPageByDay(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,q_)))),128)),i.totalPagesArrayByDay.end<i.totalPagesByDay-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>i.goToPageByDay(i.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.end<i.totalPagesByDay?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>i.goToPageByDay(i.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[37]||(t[37]=e=>i.goToPageByDay(n.currentPage+1)),disabled:n.currentPage===i.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,J_)])],512),[[a.aG,"day"===n.viewMode]]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",Z_,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[86]||(t[86]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[38]||(t[38]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",K_,[(0,o.Lk)("div",Y_,[t[87]||(t[87]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,o.Lk)("div",H_,[(0,o.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,o.Lk)("div",G_,[(0,o.Lk)("div",eL,[t[88]||(t[88]=(0,o.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>n.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSetupMenu.day_of_week]])]),(0,o.Lk)("div",null,[t[89]||(t[89]=(0,o.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>n.selectedSetupMenu.meal_type_id=e),options:i.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,o.Lk)("div",tL,[t[90]||(t[90]=(0,o.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>n.selectedSetupMenu.menu_id=e),options:i.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",sL,[(0,o.Lk)("div",aL,[(0,o.Lk)("button",{onClick:t[43]||(t[43]=e=>n.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",oL,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[92]||(t[92]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[45]||(t[45]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",lL,[(0,o.Lk)("div",rL,[t[93]||(t[93]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,o.Lk)("div",nL,[(0,o.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)],64)}var dL={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:Rr.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&"PH"===e.menuType.name))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)||e.day_of_week.toString().includes(a)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-ph"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await re.A.get(`http://127.0.0.1:3333/setup-menu-ph/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-ph/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await re.A.get("http://127.0.0.1:3333/setup-menu-ph/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await re.A.post("http://127.0.0.1:3333/setup-menu-ph/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&"PH"===t.menuType.name}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.post("http://127.0.0.1:3333/setup-menu-ph",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.put(`http://127.0.0.1:3333/setup-menu-ph/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/setup-menu-ph/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,oc.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,oc.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const cL=(0,ce.A)(dL,[["render",iL],["__scopeId","data-v-b5a8c91e"]]);var uL=cL;const pL={class:"flex justify-end items-center space-x-2 relative"},hL={class:"flex items-center space-x-1 mr-auto"},gL={class:"text-2xl font-bold mb-2 ml-auto"},mL={class:"flex items-center space-x-4"},yL={class:"add relative inline-block"},kL={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},bL={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},xL={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},fL={class:"p-6 space-y-4 overflow-y-auto flex-grow"},wL={class:"flex items-center space-x-4"},vL={class:"text-xl font-bold text-gray-700"},_L={class:"absolute top-2 right-4"},LL=["onClick"],DL={class:"mb-4 flex justify-center"},CL={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},PL={class:"flex space-x-2"},ML={class:"flex w-[250px] relative"},TL={class:"flex items-center space-x-3 py-2"},SL={key:0,class:"mb-8"},EL={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},RL={class:"bg-custom-orange text-white"},AL={class:"px-4 py-2 align-top pb-5"},FL=["rowspan"],OL={class:"flex items-center"},XL={class:"px-4 py-2 align-top pb-5"},zL={class:"px-4 py-2 align-top pb-5"},NL={class:"px-4 py-2 align-top pb-5"},QL={class:"px-4 py-2 align-top text-right"},VL={class:"flex justify-end space-x-2"},IL=["onClick"],BL=["onClick"],jL={key:0},UL={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},$L=["disabled"],WL={class:"flex items-center space-x-1"},qL=["onClick"],JL=["disabled"],ZL={class:"flex items-center space-x-3 py-2"},KL={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},YL={class:"bg-custom-orange text-white"},HL={class:"px-4 py-2 align-top pb-5"},GL={class:"px-4 py-2 align-top pb-5"},eD={class:"px-4 py-2 align-top pb-5"},tD={class:"px-4 py-2 align-top pb-5"},sD={class:"px-4 py-2 align-top text-right"},aD={class:"flex justify-end space-x-2"},oD=["onClick"],lD=["onClick"],rD={key:0},nD={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},iD=["disabled"],dD={class:"flex items-center space-x-1"},cD=["onClick"],uD=["disabled"],pD={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},hD={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},gD={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},mD={class:"flex space-x-2"},yD={class:"p-6 space-y-4"},kD={class:"flex items-center space-x-4"},bD={class:"mb-4"},xD={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},fD={class:"flex space-x-2"},wD={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},vD={class:"bg-white rounded-lg shadow-md w-1/3"},_D={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},LD={class:"flex justify-end space-x-2 p-4 border-t"};function DD(e,t,s,l,n,i){const d=(0,o.g2)("multiselect");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[50]||(t[50]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[52]||(t[52]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",pL,[(0,o.Lk)("div",hL,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>n.viewMode="week"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===n.viewMode}])},t[53]||(t[53]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>n.viewMode="day"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===n.viewMode}])},t[54]||(t[54]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,o.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,o.Lk)("h1",gL,(0,r.v_)("week"===n.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,o.Lk)("div",mL,[(0,o.Lk)("div",null,[t[56]||(t[56]=(0,o.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>i.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[a.Jo,i.formattedStartDate]])]),n.isDateConfirmed||n.startDate===n.initialStartDate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>i.updateStartDate&&i.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,o.Lk)("div",yL,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",kL,[(0,o.Lk)("div",bL,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[59]||(t[59]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",xL,[t[60]||(t[60]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,o.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,o.Lk)("div",fL,[(0,o.Lk)("div",wL,[t[61]||(t[61]=(0,o.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[a.Jo,n.day_of_week]])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.formRows,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"space-y-4 relative"},[(0,o.Lk)("div",vL," ประเภทอาหาร "+(0,r.v_)(s+1),1),(0,o.Lk)("div",null,[t[62]||(t[62]=(0,o.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:i.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,o.Lk)("div",null,[t[63]||(t[63]=(0,o.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,o.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:i.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":i.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,o.Lk)("div",_L,[(0,o.Lk)("button",{type:"button",onClick:e=>i.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,o.Lk)("span",null,"× ลบเมนู",-1)]),8,LL)])])))),128)),(0,o.Lk)("div",DL,[(0,o.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>i.addRow&&i.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,o.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,o.Lk)("div",CL,[(0,o.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>i.clearForm&&i.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,o.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,o.Lk)("div",PL,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>i.addMenus&&i.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ML,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>n.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",TL,[(0,o.Lk)("button",{onClick:t[18]||(t[18]=e=>i.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),i.weekOptions.length>0?((0,o.uX)(),(0,o.Wv)(d,{key:0,modelValue:n.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>n.selectedWeek=e),options:i.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>i.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),n.selectedWeek?((0,o.uX)(),(0,o.CE)("div",SL,[(0,o.Lk)("table",EL,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",RL,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenus,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",AL,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),0===s||e.day_of_week!==i.paginatedMenus[s-1].day_of_week?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:i.getRowSpan(i.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,o.Lk)("div",null,[t[70]||(t[70]=(0,o.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,o.eW)((0,r.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",OL,[t[69]||(t[69]=(0,o.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,o.eW)(" "+(0,r.v_)(i.formattedDate(e.date_to_show)),1)])])],8,FL)):(0,o.Q3)("",!0),(0,o.Lk)("td",XL,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",zL,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",NL,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",QL,[(0,o.Lk)("div",VL,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,IL),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,BL)])])])))),128)),0===i.paginatedMenus.length?((0,o.uX)(),(0,o.CE)("tr",jL,t[74]||(t[74]=[(0,o.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",UL,[(0,o.Lk)("button",{onClick:t[21]||(t[21]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,$L),(0,o.Lk)("div",WL,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,qL)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[26]||(t[26]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,JL)])])):(0,o.Q3)("",!0)],512),[[a.aG,"week"===n.viewMode]]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",ZL,[(0,o.Lk)("button",{onClick:t[27]||(t[27]=e=>i.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[29]||(t[29]=e=>i.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>i.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>i.onSelectDateChange&&i.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[a.Jo,i.formattedSelectedDate]])]),(0,o.Lk)("table",KL,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",YL,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headersByDay,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidthsByDay[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenusByDay,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",HL,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",GL,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",eD,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",tD,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",sD,[(0,o.Lk)("div",aD,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,oD),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,lD)])])])))),128)),0===i.paginatedMenusByDay.length?((0,o.uX)(),(0,o.CE)("tr",rD,t[82]||(t[82]=[(0,o.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",nD,[(0,o.Lk)("button",{onClick:t[32]||(t[32]=e=>i.goToPageByDay(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,iD),(0,o.Lk)("div",dD,[i.totalPagesArrayByDay.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>i.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>i.goToPageByDay(i.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArrayByDay.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPageByDay(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,cD)))),128)),i.totalPagesArrayByDay.end<i.totalPagesByDay-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>i.goToPageByDay(i.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.end<i.totalPagesByDay?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>i.goToPageByDay(i.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[37]||(t[37]=e=>i.goToPageByDay(n.currentPage+1)),disabled:n.currentPage===i.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,uD)])],512),[[a.aG,"day"===n.viewMode]]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",pD,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[86]||(t[86]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[38]||(t[38]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",hD,[(0,o.Lk)("div",gD,[t[87]||(t[87]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,o.Lk)("div",mD,[(0,o.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,o.Lk)("div",yD,[(0,o.Lk)("div",kD,[t[88]||(t[88]=(0,o.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>n.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSetupMenu.day_of_week]])]),(0,o.Lk)("div",null,[t[89]||(t[89]=(0,o.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>n.selectedSetupMenu.meal_type_id=e),options:i.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,o.Lk)("div",bD,[t[90]||(t[90]=(0,o.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>n.selectedSetupMenu.menu_id=e),options:i.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",xD,[(0,o.Lk)("div",fD,[(0,o.Lk)("button",{onClick:t[43]||(t[43]=e=>n.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",wD,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[92]||(t[92]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[45]||(t[45]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",vD,[(0,o.Lk)("div",_D,[t[93]||(t[93]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,o.Lk)("div",LD,[(0,o.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)],64)}var CD={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:Rr.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&"HHB"===e.menuType.name))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)||e.day_of_week.toString().includes(a)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-hhb"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await re.A.get(`http://127.0.0.1:3333/setup-menu-hhb/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-hhb/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await re.A.get("http://127.0.0.1:3333/setup-menu-hhb/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await re.A.post("http://127.0.0.1:3333/setup-menu-hhb/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&"HHB"===t.menuType.name}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.post("http://127.0.0.1:3333/setup-menu-hhb",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.put(`http://127.0.0.1:3333/setup-menu-hhb/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/setup-menu-hhb/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,oc.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,oc.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const PD=(0,ce.A)(CD,[["render",DD],["__scopeId","data-v-00fe4dd1"]]);var MD=PD;const TD={class:"flex justify-end items-center space-x-2 relative"},SD={class:"flex items-center space-x-1 mr-auto"},ED={class:"text-2xl font-bold mb-2 ml-auto"},RD={class:"flex items-center space-x-4"},AD={class:"add relative inline-block"},FD={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},OD={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},XD={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},zD={class:"p-6 space-y-4 overflow-y-auto flex-grow"},ND={class:"flex items-center space-x-4"},QD={class:"text-xl font-bold text-gray-700"},VD={class:"absolute top-2 right-4"},ID=["onClick"],BD={class:"mb-4 flex justify-center"},jD={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},UD={class:"flex space-x-2"},$D={class:"flex w-[250px] relative"},WD={class:"flex items-center space-x-3 py-2"},qD={key:0,class:"mb-8"},JD={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},ZD={class:"bg-custom-orange text-white"},KD={class:"px-4 py-2 align-top pb-5"},YD=["rowspan"],HD={class:"flex items-center"},GD={class:"px-4 py-2 align-top pb-5"},eC={class:"px-4 py-2 align-top pb-5"},tC={class:"px-4 py-2 align-top pb-5"},sC={class:"px-4 py-2 align-top text-right"},aC={class:"flex justify-end space-x-2"},oC=["onClick"],lC=["onClick"],rC={key:0},nC={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},iC=["disabled"],dC={class:"flex items-center space-x-1"},cC=["onClick"],uC=["disabled"],pC={class:"flex items-center space-x-3 py-2"},hC={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},gC={class:"bg-custom-orange text-white"},mC={class:"px-4 py-2 align-top pb-5"},yC={class:"px-4 py-2 align-top pb-5"},kC={class:"px-4 py-2 align-top pb-5"},bC={class:"px-4 py-2 align-top pb-5"},xC={class:"px-4 py-2 align-top text-right"},fC={class:"flex justify-end space-x-2"},wC=["onClick"],vC=["onClick"],_C={key:0},LC={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},DC=["disabled"],CC={class:"flex items-center space-x-1"},PC=["onClick"],MC=["disabled"],TC={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},SC={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},EC={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},RC={class:"flex space-x-2"},AC={class:"p-6 space-y-4"},FC={class:"flex items-center space-x-4"},OC={class:"mb-4"},XC={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},zC={class:"flex space-x-2"},NC={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},QC={class:"bg-white rounded-lg shadow-md w-1/3"},VC={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},IC={class:"flex justify-end space-x-2 p-4 border-t"};function BC(e,t,s,l,n,i){const d=(0,o.g2)("multiselect");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[50]||(t[50]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[52]||(t[52]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",TD,[(0,o.Lk)("div",SD,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>n.viewMode="week"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===n.viewMode}])},t[53]||(t[53]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>n.viewMode="day"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===n.viewMode}])},t[54]||(t[54]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,o.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,o.Lk)("h1",ED,(0,r.v_)("week"===n.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,o.Lk)("div",RD,[(0,o.Lk)("div",null,[t[56]||(t[56]=(0,o.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>i.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[a.Jo,i.formattedStartDate]])]),n.isDateConfirmed||n.startDate===n.initialStartDate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>i.updateStartDate&&i.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,o.Lk)("div",AD,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",FD,[(0,o.Lk)("div",OD,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[59]||(t[59]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",XD,[t[60]||(t[60]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,o.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,o.Lk)("div",zD,[(0,o.Lk)("div",ND,[t[61]||(t[61]=(0,o.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[a.Jo,n.day_of_week]])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.formRows,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"space-y-4 relative"},[(0,o.Lk)("div",QD," ประเภทอาหาร "+(0,r.v_)(s+1),1),(0,o.Lk)("div",null,[t[62]||(t[62]=(0,o.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:i.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,o.Lk)("div",null,[t[63]||(t[63]=(0,o.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,o.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:i.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":i.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,o.Lk)("div",VD,[(0,o.Lk)("button",{type:"button",onClick:e=>i.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,o.Lk)("span",null,"× ลบเมนู",-1)]),8,ID)])])))),128)),(0,o.Lk)("div",BD,[(0,o.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>i.addRow&&i.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,o.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,o.Lk)("div",jD,[(0,o.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>i.clearForm&&i.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,o.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,o.Lk)("div",UD,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>i.addMenus&&i.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",$D,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>n.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",WD,[(0,o.Lk)("button",{onClick:t[18]||(t[18]=e=>i.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),i.weekOptions.length>0?((0,o.uX)(),(0,o.Wv)(d,{key:0,modelValue:n.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>n.selectedWeek=e),options:i.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>i.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),n.selectedWeek?((0,o.uX)(),(0,o.CE)("div",qD,[(0,o.Lk)("table",JD,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",ZD,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenus,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",KD,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),0===s||e.day_of_week!==i.paginatedMenus[s-1].day_of_week?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:i.getRowSpan(i.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,o.Lk)("div",null,[t[70]||(t[70]=(0,o.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,o.eW)((0,r.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",HD,[t[69]||(t[69]=(0,o.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,o.eW)(" "+(0,r.v_)(i.formattedDate(e.date_to_show)),1)])])],8,YD)):(0,o.Q3)("",!0),(0,o.Lk)("td",GD,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",eC,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",tC,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",sC,[(0,o.Lk)("div",aC,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,oC),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,lC)])])])))),128)),0===i.paginatedMenus.length?((0,o.uX)(),(0,o.CE)("tr",rC,t[74]||(t[74]=[(0,o.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",nC,[(0,o.Lk)("button",{onClick:t[21]||(t[21]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,iC),(0,o.Lk)("div",dC,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,cC)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[26]||(t[26]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,uC)])])):(0,o.Q3)("",!0)],512),[[a.aG,"week"===n.viewMode]]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",pC,[(0,o.Lk)("button",{onClick:t[27]||(t[27]=e=>i.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[29]||(t[29]=e=>i.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>i.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>i.onSelectDateChange&&i.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[a.Jo,i.formattedSelectedDate]])]),(0,o.Lk)("table",hC,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",gC,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headersByDay,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidthsByDay[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenusByDay,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",mC,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",yC,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",kC,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",bC,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",xC,[(0,o.Lk)("div",fC,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,wC),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,vC)])])])))),128)),0===i.paginatedMenusByDay.length?((0,o.uX)(),(0,o.CE)("tr",_C,t[82]||(t[82]=[(0,o.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",LC,[(0,o.Lk)("button",{onClick:t[32]||(t[32]=e=>i.goToPageByDay(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,DC),(0,o.Lk)("div",CC,[i.totalPagesArrayByDay.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>i.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>i.goToPageByDay(i.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArrayByDay.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPageByDay(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,PC)))),128)),i.totalPagesArrayByDay.end<i.totalPagesByDay-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>i.goToPageByDay(i.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.end<i.totalPagesByDay?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>i.goToPageByDay(i.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[37]||(t[37]=e=>i.goToPageByDay(n.currentPage+1)),disabled:n.currentPage===i.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,MC)])],512),[[a.aG,"day"===n.viewMode]]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",TC,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[86]||(t[86]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[38]||(t[38]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",SC,[(0,o.Lk)("div",EC,[t[87]||(t[87]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,o.Lk)("div",RC,[(0,o.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,o.Lk)("div",AC,[(0,o.Lk)("div",FC,[t[88]||(t[88]=(0,o.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>n.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSetupMenu.day_of_week]])]),(0,o.Lk)("div",null,[t[89]||(t[89]=(0,o.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>n.selectedSetupMenu.meal_type_id=e),options:i.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,o.Lk)("div",OC,[t[90]||(t[90]=(0,o.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>n.selectedSetupMenu.menu_id=e),options:i.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",XC,[(0,o.Lk)("div",zC,[(0,o.Lk)("button",{onClick:t[43]||(t[43]=e=>n.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",NC,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[92]||(t[92]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[45]||(t[45]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",QC,[(0,o.Lk)("div",VC,[t[93]||(t[93]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,o.Lk)("div",IC,[(0,o.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)],64)}var jC={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:Rr.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&14===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)||e.day_of_week.toString().includes(a)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-lc"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await re.A.get(`http://127.0.0.1:3333/setup-menu-lc/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-lc/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await re.A.get("http://127.0.0.1:3333/setup-menu-lc/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await re.A.post("http://127.0.0.1:3333/setup-menu-lc/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&14===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.post("http://127.0.0.1:3333/setup-menu-lc",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.put(`http://127.0.0.1:3333/setup-menu-lc/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/setup-menu-lc/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,oc.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,oc.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const UC=(0,ce.A)(jC,[["render",BC],["__scopeId","data-v-5a88fe05"]]);var $C=UC;const WC={class:"flex justify-end items-center space-x-2 relative"},qC={class:"flex items-center space-x-1 mr-auto"},JC={class:"text-2xl font-bold mb-2 ml-auto"},ZC={class:"flex items-center space-x-4"},KC={class:"add relative inline-block"},YC={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},HC={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},GC={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},eP={class:"p-6 space-y-4 overflow-y-auto flex-grow"},tP={class:"flex items-center space-x-4"},sP={class:"text-xl font-bold text-gray-700"},aP={class:"absolute top-2 right-4"},oP=["onClick"],lP={class:"mb-4 flex justify-center"},rP={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},nP={class:"flex space-x-2"},iP={class:"flex w-[250px] relative"},dP={class:"flex items-center space-x-3 py-2"},cP={key:0,class:"mb-8"},uP={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},pP={class:"bg-custom-orange text-white"},hP={class:"px-4 py-2 align-top pb-5"},gP=["rowspan"],mP={class:"flex items-center"},yP={class:"px-4 py-2 align-top pb-5"},kP={class:"px-4 py-2 align-top pb-5"},bP={class:"px-4 py-2 align-top pb-5"},xP={class:"px-4 py-2 align-top text-right"},fP={class:"flex justify-end space-x-2"},wP=["onClick"],vP=["onClick"],_P={key:0},LP={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},DP=["disabled"],CP={class:"flex items-center space-x-1"},PP=["onClick"],MP=["disabled"],TP={class:"flex items-center space-x-3 py-2"},SP={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},EP={class:"bg-custom-orange text-white"},RP={class:"px-4 py-2 align-top pb-5"},AP={class:"px-4 py-2 align-top pb-5"},FP={class:"px-4 py-2 align-top pb-5"},OP={class:"px-4 py-2 align-top pb-5"},XP={class:"px-4 py-2 align-top text-right"},zP={class:"flex justify-end space-x-2"},NP=["onClick"],QP=["onClick"],VP={key:0},IP={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},BP=["disabled"],jP={class:"flex items-center space-x-1"},UP=["onClick"],$P=["disabled"],WP={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},qP={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},JP={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},ZP={class:"flex space-x-2"},KP={class:"p-6 space-y-4"},YP={class:"flex items-center space-x-4"},HP={class:"mb-4"},GP={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},eM={class:"flex space-x-2"},tM={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},sM={class:"bg-white rounded-lg shadow-md w-1/3"},aM={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},oM={class:"flex justify-end space-x-2 p-4 border-t"};function lM(e,t,s,l,n,i){const d=(0,o.g2)("multiselect");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[50]||(t[50]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[52]||(t[52]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",WC,[(0,o.Lk)("div",qC,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>n.viewMode="week"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===n.viewMode}])},t[53]||(t[53]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>n.viewMode="day"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===n.viewMode}])},t[54]||(t[54]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,o.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,o.Lk)("h1",JC,(0,r.v_)("week"===n.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,o.Lk)("div",ZC,[(0,o.Lk)("div",null,[t[56]||(t[56]=(0,o.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>i.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[a.Jo,i.formattedStartDate]])]),n.isDateConfirmed||n.startDate===n.initialStartDate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>i.updateStartDate&&i.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,o.Lk)("div",KC,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",YC,[(0,o.Lk)("div",HC,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[59]||(t[59]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",GC,[t[60]||(t[60]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,o.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,o.Lk)("div",eP,[(0,o.Lk)("div",tP,[t[61]||(t[61]=(0,o.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[a.Jo,n.day_of_week]])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.formRows,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"space-y-4 relative"},[(0,o.Lk)("div",sP," ประเภทอาหาร "+(0,r.v_)(s+1),1),(0,o.Lk)("div",null,[t[62]||(t[62]=(0,o.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:i.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,o.Lk)("div",null,[t[63]||(t[63]=(0,o.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,o.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:i.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":i.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,o.Lk)("div",aP,[(0,o.Lk)("button",{type:"button",onClick:e=>i.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,o.Lk)("span",null,"× ลบเมนู",-1)]),8,oP)])])))),128)),(0,o.Lk)("div",lP,[(0,o.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>i.addRow&&i.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,o.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,o.Lk)("div",rP,[(0,o.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>i.clearForm&&i.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,o.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,o.Lk)("div",nP,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>i.addMenus&&i.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",iP,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>n.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",dP,[(0,o.Lk)("button",{onClick:t[18]||(t[18]=e=>i.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),i.weekOptions.length>0?((0,o.uX)(),(0,o.Wv)(d,{key:0,modelValue:n.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>n.selectedWeek=e),options:i.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>i.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),n.selectedWeek?((0,o.uX)(),(0,o.CE)("div",cP,[(0,o.Lk)("table",uP,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",pP,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenus,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",hP,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),0===s||e.day_of_week!==i.paginatedMenus[s-1].day_of_week?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:i.getRowSpan(i.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,o.Lk)("div",null,[t[70]||(t[70]=(0,o.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,o.eW)((0,r.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",mP,[t[69]||(t[69]=(0,o.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,o.eW)(" "+(0,r.v_)(i.formattedDate(e.date_to_show)),1)])])],8,gP)):(0,o.Q3)("",!0),(0,o.Lk)("td",yP,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",kP,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",bP,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",xP,[(0,o.Lk)("div",fP,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,wP),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,vP)])])])))),128)),0===i.paginatedMenus.length?((0,o.uX)(),(0,o.CE)("tr",_P,t[74]||(t[74]=[(0,o.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",LP,[(0,o.Lk)("button",{onClick:t[21]||(t[21]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,DP),(0,o.Lk)("div",CP,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,PP)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[26]||(t[26]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,MP)])])):(0,o.Q3)("",!0)],512),[[a.aG,"week"===n.viewMode]]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",TP,[(0,o.Lk)("button",{onClick:t[27]||(t[27]=e=>i.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[29]||(t[29]=e=>i.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>i.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>i.onSelectDateChange&&i.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[a.Jo,i.formattedSelectedDate]])]),(0,o.Lk)("table",SP,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",EP,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headersByDay,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidthsByDay[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenusByDay,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",RP,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",AP,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",FP,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",OP,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",XP,[(0,o.Lk)("div",zP,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,NP),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,QP)])])])))),128)),0===i.paginatedMenusByDay.length?((0,o.uX)(),(0,o.CE)("tr",VP,t[82]||(t[82]=[(0,o.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",IP,[(0,o.Lk)("button",{onClick:t[32]||(t[32]=e=>i.goToPageByDay(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,BP),(0,o.Lk)("div",jP,[i.totalPagesArrayByDay.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>i.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>i.goToPageByDay(i.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArrayByDay.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPageByDay(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,UP)))),128)),i.totalPagesArrayByDay.end<i.totalPagesByDay-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>i.goToPageByDay(i.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.end<i.totalPagesByDay?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>i.goToPageByDay(i.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[37]||(t[37]=e=>i.goToPageByDay(n.currentPage+1)),disabled:n.currentPage===i.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,$P)])],512),[[a.aG,"day"===n.viewMode]]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",WP,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[86]||(t[86]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[38]||(t[38]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",qP,[(0,o.Lk)("div",JP,[t[87]||(t[87]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,o.Lk)("div",ZP,[(0,o.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,o.Lk)("div",KP,[(0,o.Lk)("div",YP,[t[88]||(t[88]=(0,o.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>n.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSetupMenu.day_of_week]])]),(0,o.Lk)("div",null,[t[89]||(t[89]=(0,o.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>n.selectedSetupMenu.meal_type_id=e),options:i.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,o.Lk)("div",HP,[t[90]||(t[90]=(0,o.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>n.selectedSetupMenu.menu_id=e),options:i.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",GP,[(0,o.Lk)("div",eM,[(0,o.Lk)("button",{onClick:t[43]||(t[43]=e=>n.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",tM,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[92]||(t[92]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[45]||(t[45]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",sM,[(0,o.Lk)("div",aM,[t[93]||(t[93]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,o.Lk)("div",oM,[(0,o.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)],64)}var rM={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:Rr.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&13===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)||e.day_of_week.toString().includes(a)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-fl"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await re.A.get(`http://127.0.0.1:3333/setup-menu-fl/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-fl/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await re.A.get("http://127.0.0.1:3333/setup-menu-fl/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await re.A.post("http://127.0.0.1:3333/setup-menu-fl/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&13===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.post("http://127.0.0.1:3333/setup-menu-fl",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.put(`http://127.0.0.1:3333/setup-menu-fl/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/setup-menu-fl/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,oc.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,oc.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const nM=(0,ce.A)(rM,[["render",lM],["__scopeId","data-v-5f3cf267"]]);var iM=nM;const dM={class:"flex justify-end items-center space-x-2 relative"},cM={class:"flex items-center space-x-1 mr-auto"},uM={class:"text-2xl font-bold mb-2 ml-auto"},pM={class:"flex items-center space-x-4"},hM={class:"add relative inline-block"},gM={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},mM={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},yM={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},kM={class:"p-6 space-y-4 overflow-y-auto flex-grow"},bM={class:"flex items-center space-x-4"},xM={class:"text-xl font-bold text-gray-700"},fM={class:"absolute top-2 right-4"},wM=["onClick"],vM={class:"mb-4 flex justify-center"},_M={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},LM={class:"flex space-x-2"},DM={class:"flex w-[250px] relative"},CM={class:"flex items-center space-x-3 py-2"},PM={key:0,class:"mb-8"},MM={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},TM={class:"bg-custom-orange text-white"},SM={class:"px-4 py-2 align-top pb-5"},EM=["rowspan"],RM={class:"flex items-center"},AM={class:"px-4 py-2 align-top pb-5"},FM={class:"px-4 py-2 align-top pb-5"},OM={class:"px-4 py-2 align-top pb-5"},XM={class:"px-4 py-2 align-top text-right"},zM={class:"flex justify-end space-x-2"},NM=["onClick"],QM=["onClick"],VM={key:0},IM={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},BM=["disabled"],jM={class:"flex items-center space-x-1"},UM=["onClick"],$M=["disabled"],WM={class:"flex items-center space-x-3 py-2"},qM={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},JM={class:"bg-custom-orange text-white"},ZM={class:"px-4 py-2 align-top pb-5"},KM={class:"px-4 py-2 align-top pb-5"},YM={class:"px-4 py-2 align-top pb-5"},HM={class:"px-4 py-2 align-top pb-5"},GM={class:"px-4 py-2 align-top text-right"},eT={class:"flex justify-end space-x-2"},tT=["onClick"],sT=["onClick"],aT={key:0},oT={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},lT=["disabled"],rT={class:"flex items-center space-x-1"},nT=["onClick"],iT=["disabled"],dT={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},cT={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},uT={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},pT={class:"flex space-x-2"},hT={class:"p-6 space-y-4"},gT={class:"flex items-center space-x-4"},mT={class:"mb-4"},yT={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},kT={class:"flex space-x-2"},bT={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},xT={class:"bg-white rounded-lg shadow-md w-1/3"},fT={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},wT={class:"flex justify-end space-x-2 p-4 border-t"};function vT(e,t,s,l,n,i){const d=(0,o.g2)("multiselect");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[50]||(t[50]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[52]||(t[52]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",dM,[(0,o.Lk)("div",cM,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>n.viewMode="week"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===n.viewMode}])},t[53]||(t[53]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>n.viewMode="day"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===n.viewMode}])},t[54]||(t[54]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,o.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,o.Lk)("h1",uM,(0,r.v_)("week"===n.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,o.Lk)("div",pM,[(0,o.Lk)("div",null,[t[56]||(t[56]=(0,o.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>i.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[a.Jo,i.formattedStartDate]])]),n.isDateConfirmed||n.startDate===n.initialStartDate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>i.updateStartDate&&i.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,o.Lk)("div",hM,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",gM,[(0,o.Lk)("div",mM,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[59]||(t[59]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",yM,[t[60]||(t[60]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,o.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,o.Lk)("div",kM,[(0,o.Lk)("div",bM,[t[61]||(t[61]=(0,o.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[a.Jo,n.day_of_week]])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.formRows,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"space-y-4 relative"},[(0,o.Lk)("div",xM," ประเภทอาหาร "+(0,r.v_)(s+1),1),(0,o.Lk)("div",null,[t[62]||(t[62]=(0,o.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:i.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,o.Lk)("div",null,[t[63]||(t[63]=(0,o.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,o.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:i.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":i.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,o.Lk)("div",fM,[(0,o.Lk)("button",{type:"button",onClick:e=>i.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,o.Lk)("span",null,"× ลบเมนู",-1)]),8,wM)])])))),128)),(0,o.Lk)("div",vM,[(0,o.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>i.addRow&&i.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,o.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,o.Lk)("div",_M,[(0,o.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>i.clearForm&&i.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,o.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,o.Lk)("div",LM,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>i.addMenus&&i.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",DM,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>n.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",CM,[(0,o.Lk)("button",{onClick:t[18]||(t[18]=e=>i.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),i.weekOptions.length>0?((0,o.uX)(),(0,o.Wv)(d,{key:0,modelValue:n.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>n.selectedWeek=e),options:i.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>i.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),n.selectedWeek?((0,o.uX)(),(0,o.CE)("div",PM,[(0,o.Lk)("table",MM,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",TM,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenus,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",SM,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),0===s||e.day_of_week!==i.paginatedMenus[s-1].day_of_week?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:i.getRowSpan(i.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,o.Lk)("div",null,[t[70]||(t[70]=(0,o.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,o.eW)((0,r.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",RM,[t[69]||(t[69]=(0,o.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,o.eW)(" "+(0,r.v_)(i.formattedDate(e.date_to_show)),1)])])],8,EM)):(0,o.Q3)("",!0),(0,o.Lk)("td",AM,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",FM,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",OM,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",XM,[(0,o.Lk)("div",zM,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,NM),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,QM)])])])))),128)),0===i.paginatedMenus.length?((0,o.uX)(),(0,o.CE)("tr",VM,t[74]||(t[74]=[(0,o.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",IM,[(0,o.Lk)("button",{onClick:t[21]||(t[21]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,BM),(0,o.Lk)("div",jM,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,UM)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[26]||(t[26]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,$M)])])):(0,o.Q3)("",!0)],512),[[a.aG,"week"===n.viewMode]]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",WM,[(0,o.Lk)("button",{onClick:t[27]||(t[27]=e=>i.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[29]||(t[29]=e=>i.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>i.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>i.onSelectDateChange&&i.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[a.Jo,i.formattedSelectedDate]])]),(0,o.Lk)("table",qM,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",JM,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headersByDay,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidthsByDay[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenusByDay,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",ZM,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",KM,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",YM,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",HM,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",GM,[(0,o.Lk)("div",eT,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,tT),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,sT)])])])))),128)),0===i.paginatedMenusByDay.length?((0,o.uX)(),(0,o.CE)("tr",aT,t[82]||(t[82]=[(0,o.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",oT,[(0,o.Lk)("button",{onClick:t[32]||(t[32]=e=>i.goToPageByDay(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,lT),(0,o.Lk)("div",rT,[i.totalPagesArrayByDay.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>i.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>i.goToPageByDay(i.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArrayByDay.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPageByDay(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,nT)))),128)),i.totalPagesArrayByDay.end<i.totalPagesByDay-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>i.goToPageByDay(i.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.end<i.totalPagesByDay?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>i.goToPageByDay(i.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[37]||(t[37]=e=>i.goToPageByDay(n.currentPage+1)),disabled:n.currentPage===i.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,iT)])],512),[[a.aG,"day"===n.viewMode]]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",dT,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[86]||(t[86]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[38]||(t[38]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",cT,[(0,o.Lk)("div",uT,[t[87]||(t[87]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,o.Lk)("div",pT,[(0,o.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,o.Lk)("div",hT,[(0,o.Lk)("div",gT,[t[88]||(t[88]=(0,o.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>n.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSetupMenu.day_of_week]])]),(0,o.Lk)("div",null,[t[89]||(t[89]=(0,o.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>n.selectedSetupMenu.meal_type_id=e),options:i.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,o.Lk)("div",mT,[t[90]||(t[90]=(0,o.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>n.selectedSetupMenu.menu_id=e),options:i.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",yT,[(0,o.Lk)("div",kT,[(0,o.Lk)("button",{onClick:t[43]||(t[43]=e=>n.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",bT,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[92]||(t[92]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[45]||(t[45]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",xT,[(0,o.Lk)("div",fT,[t[93]||(t[93]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,o.Lk)("div",wT,[(0,o.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)],64)}var _T={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:Rr.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&15===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)||e.day_of_week.toString().includes(a)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-bpd"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await re.A.get(`http://127.0.0.1:3333/setup-menu-bpd/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-bpd/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await re.A.get("http://127.0.0.1:3333/setup-menu-bpd/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await re.A.post("http://127.0.0.1:3333/setup-menu-bpd/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&15===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.post("http://127.0.0.1:3333/setup-menu-bpd",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.put(`http://127.0.0.1:3333/setup-menu-bpd/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/setup-menu-bpd/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,oc.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,oc.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const LT=(0,ce.A)(_T,[["render",vT],["__scopeId","data-v-a23ac46e"]]);var DT=LT;const CT={class:"flex justify-end items-center space-x-2 relative"},PT={class:"flex items-center space-x-1 mr-auto"},MT={class:"text-2xl font-bold mb-2 ml-auto"},TT={class:"flex items-center space-x-4"},ST={class:"add relative inline-block"},ET={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},RT={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},AT={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},FT={class:"p-6 space-y-4 overflow-y-auto flex-grow"},OT={class:"flex items-center space-x-4"},XT={class:"text-xl font-bold text-gray-700"},zT={class:"absolute top-2 right-4"},NT=["onClick"],QT={class:"mb-4 flex justify-center"},VT={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},IT={class:"flex space-x-2"},BT={class:"flex w-[250px] relative"},jT={class:"flex items-center space-x-3 py-2"},UT={key:0,class:"mb-8"},$T={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},WT={class:"bg-custom-orange text-white"},qT={class:"px-4 py-2 align-top pb-5"},JT=["rowspan"],ZT={class:"flex items-center"},KT={class:"px-4 py-2 align-top pb-5"},YT={class:"px-4 py-2 align-top pb-5"},HT={class:"px-4 py-2 align-top pb-5"},GT={class:"px-4 py-2 align-top text-right"},eS={class:"flex justify-end space-x-2"},tS=["onClick"],sS=["onClick"],aS={key:0},oS={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},lS=["disabled"],rS={class:"flex items-center space-x-1"},nS=["onClick"],iS=["disabled"],dS={class:"flex items-center space-x-3 py-2"},cS={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},uS={class:"bg-custom-orange text-white"},pS={class:"px-4 py-2 align-top pb-5"},hS={class:"px-4 py-2 align-top pb-5"},gS={class:"px-4 py-2 align-top pb-5"},mS={class:"px-4 py-2 align-top pb-5"},yS={class:"px-4 py-2 align-top text-right"},kS={class:"flex justify-end space-x-2"},bS=["onClick"],xS=["onClick"],fS={key:0},wS={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},vS=["disabled"],_S={class:"flex items-center space-x-1"},LS=["onClick"],DS=["disabled"],CS={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},PS={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},MS={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},TS={class:"flex space-x-2"},SS={class:"p-6 space-y-4"},ES={class:"flex items-center space-x-4"},RS={class:"mb-4"},AS={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},FS={class:"flex space-x-2"},OS={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},XS={class:"bg-white rounded-lg shadow-md w-1/3"},zS={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},NS={class:"flex justify-end space-x-2 p-4 border-t"};function QS(e,t,s,l,n,i){const d=(0,o.g2)("multiselect");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[50]||(t[50]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[52]||(t[52]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",CT,[(0,o.Lk)("div",PT,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>n.viewMode="week"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===n.viewMode}])},t[53]||(t[53]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>n.viewMode="day"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===n.viewMode}])},t[54]||(t[54]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,o.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,o.Lk)("h1",MT,(0,r.v_)("week"===n.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,o.Lk)("div",TT,[(0,o.Lk)("div",null,[t[56]||(t[56]=(0,o.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>i.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[a.Jo,i.formattedStartDate]])]),n.isDateConfirmed||n.startDate===n.initialStartDate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>i.updateStartDate&&i.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,o.Lk)("div",ST,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",ET,[(0,o.Lk)("div",RT,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[59]||(t[59]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",AT,[t[60]||(t[60]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,o.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,o.Lk)("div",FT,[(0,o.Lk)("div",OT,[t[61]||(t[61]=(0,o.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[a.Jo,n.day_of_week]])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.formRows,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"space-y-4 relative"},[(0,o.Lk)("div",XT," ประเภทอาหาร "+(0,r.v_)(s+1),1),(0,o.Lk)("div",null,[t[62]||(t[62]=(0,o.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:i.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,o.Lk)("div",null,[t[63]||(t[63]=(0,o.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,o.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:i.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":i.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,o.Lk)("div",zT,[(0,o.Lk)("button",{type:"button",onClick:e=>i.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,o.Lk)("span",null,"× ลบเมนู",-1)]),8,NT)])])))),128)),(0,o.Lk)("div",QT,[(0,o.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>i.addRow&&i.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,o.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,o.Lk)("div",VT,[(0,o.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>i.clearForm&&i.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,o.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,o.Lk)("div",IT,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>i.addMenus&&i.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",BT,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>n.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",jT,[(0,o.Lk)("button",{onClick:t[18]||(t[18]=e=>i.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),i.weekOptions.length>0?((0,o.uX)(),(0,o.Wv)(d,{key:0,modelValue:n.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>n.selectedWeek=e),options:i.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>i.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),n.selectedWeek?((0,o.uX)(),(0,o.CE)("div",UT,[(0,o.Lk)("table",$T,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",WT,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenus,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",qT,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),0===s||e.day_of_week!==i.paginatedMenus[s-1].day_of_week?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:i.getRowSpan(i.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,o.Lk)("div",null,[t[70]||(t[70]=(0,o.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,o.eW)((0,r.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",ZT,[t[69]||(t[69]=(0,o.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,o.eW)(" "+(0,r.v_)(i.formattedDate(e.date_to_show)),1)])])],8,JT)):(0,o.Q3)("",!0),(0,o.Lk)("td",KT,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",YT,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",HT,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",GT,[(0,o.Lk)("div",eS,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,tS),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,sS)])])])))),128)),0===i.paginatedMenus.length?((0,o.uX)(),(0,o.CE)("tr",aS,t[74]||(t[74]=[(0,o.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",oS,[(0,o.Lk)("button",{onClick:t[21]||(t[21]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,lS),(0,o.Lk)("div",rS,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,nS)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[26]||(t[26]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,iS)])])):(0,o.Q3)("",!0)],512),[[a.aG,"week"===n.viewMode]]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",dS,[(0,o.Lk)("button",{onClick:t[27]||(t[27]=e=>i.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[29]||(t[29]=e=>i.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>i.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>i.onSelectDateChange&&i.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[a.Jo,i.formattedSelectedDate]])]),(0,o.Lk)("table",cS,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",uS,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headersByDay,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidthsByDay[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenusByDay,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",pS,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",hS,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",gS,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",mS,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",yS,[(0,o.Lk)("div",kS,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,bS),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,xS)])])])))),128)),0===i.paginatedMenusByDay.length?((0,o.uX)(),(0,o.CE)("tr",fS,t[82]||(t[82]=[(0,o.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",wS,[(0,o.Lk)("button",{onClick:t[32]||(t[32]=e=>i.goToPageByDay(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,vS),(0,o.Lk)("div",_S,[i.totalPagesArrayByDay.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>i.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>i.goToPageByDay(i.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArrayByDay.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPageByDay(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,LS)))),128)),i.totalPagesArrayByDay.end<i.totalPagesByDay-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>i.goToPageByDay(i.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.end<i.totalPagesByDay?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>i.goToPageByDay(i.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[37]||(t[37]=e=>i.goToPageByDay(n.currentPage+1)),disabled:n.currentPage===i.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,DS)])],512),[[a.aG,"day"===n.viewMode]]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",CS,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[86]||(t[86]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[38]||(t[38]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",PS,[(0,o.Lk)("div",MS,[t[87]||(t[87]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,o.Lk)("div",TS,[(0,o.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,o.Lk)("div",SS,[(0,o.Lk)("div",ES,[t[88]||(t[88]=(0,o.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>n.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSetupMenu.day_of_week]])]),(0,o.Lk)("div",null,[t[89]||(t[89]=(0,o.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>n.selectedSetupMenu.meal_type_id=e),options:i.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,o.Lk)("div",RS,[t[90]||(t[90]=(0,o.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>n.selectedSetupMenu.menu_id=e),options:i.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",AS,[(0,o.Lk)("div",FS,[(0,o.Lk)("button",{onClick:t[43]||(t[43]=e=>n.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",OS,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[92]||(t[92]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[45]||(t[45]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",XS,[(0,o.Lk)("div",zS,[t[93]||(t[93]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,o.Lk)("div",NS,[(0,o.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)],64)}var VS={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:Rr.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&17===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)||e.day_of_week.toString().includes(a)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-fat-disease"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await re.A.get(`http://127.0.0.1:3333/setup-menu-fat-disease/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-fat-disease/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await re.A.get("http://127.0.0.1:3333/setup-menu-fat-disease/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await re.A.post("http://127.0.0.1:3333/setup-menu-fat-disease/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&17===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.post("http://127.0.0.1:3333/setup-menu-fat-disease",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.put(`http://127.0.0.1:3333/setup-menu-fat-disease/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/setup-menu-fat-disease/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,oc.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,oc.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const IS=(0,ce.A)(VS,[["render",QS],["__scopeId","data-v-46de674c"]]);var BS=IS;const jS={class:"flex justify-end items-center space-x-2 relative"},US={class:"flex items-center space-x-1 mr-auto"},$S={class:"text-2xl font-bold mb-2 ml-auto"},WS={class:"flex items-center space-x-4"},qS={class:"add relative inline-block"},JS={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},ZS={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},KS={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},YS={class:"p-6 space-y-4 overflow-y-auto flex-grow"},HS={class:"flex items-center space-x-4"},GS={class:"text-xl font-bold text-gray-700"},eE={class:"absolute top-2 right-4"},tE=["onClick"],sE={class:"mb-4 flex justify-center"},aE={class:"flex justify-between space-x-4 p-4 bg-white border-t rounded-b-md list-none"},oE={class:"flex space-x-2"},lE={class:"flex w-[250px] relative"},rE={class:"flex items-center space-x-3 py-2"},nE={key:0,class:"mb-8"},iE={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},dE={class:"bg-custom-orange text-white"},cE={class:"px-4 py-2 align-top pb-5"},uE=["rowspan"],pE={class:"flex items-center"},hE={class:"px-4 py-2 align-top pb-5"},gE={class:"px-4 py-2 align-top pb-5"},mE={class:"px-4 py-2 align-top pb-5"},yE={class:"px-4 py-2 align-top text-right"},kE={class:"flex justify-end space-x-2"},bE=["onClick"],xE=["onClick"],fE={key:0},wE={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},vE=["disabled"],_E={class:"flex items-center space-x-1"},LE=["onClick"],DE=["disabled"],CE={class:"flex items-center space-x-3 py-2"},PE={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},ME={class:"bg-custom-orange text-white"},TE={class:"px-4 py-2 align-top pb-5"},SE={class:"px-4 py-2 align-top pb-5"},EE={class:"px-4 py-2 align-top pb-5"},RE={class:"px-4 py-2 align-top pb-5"},AE={class:"px-4 py-2 align-top text-right"},FE={class:"flex justify-end space-x-2"},OE=["onClick"],XE=["onClick"],zE={key:0},NE={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},QE=["disabled"],VE={class:"flex items-center space-x-1"},IE=["onClick"],BE=["disabled"],jE={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},UE={class:"bg-white rounded-md shadow-lg w-1/2 max-w-3xl h-auto max-h-[800px] flex flex-col"},$E={class:"flex justify-between items-center bg-custom-orange text-white px-4 py-2 rounded-t-md"},WE={class:"flex space-x-2"},qE={class:"p-6 space-y-4"},JE={class:"flex items-center space-x-4"},ZE={class:"mb-4"},KE={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md list-none"},YE={class:"flex space-x-2"},HE={key:1,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50"},GE={class:"bg-white rounded-lg shadow-md w-1/3"},eR={class:"flex justify-between items-center bg-red-500 text-white px-4 py-2 rounded-t"},tR={class:"flex justify-end space-x-2 p-4 border-t"};function sR(e,t,s,l,n,i){const d=(0,o.g2)("multiselect");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[50]||(t[50]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[49]||(t[49]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[52]||(t[52]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[51]||(t[51]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",jS,[(0,o.Lk)("div",US,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>n.viewMode="week"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"week"===n.viewMode}])},t[53]||(t[53]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_week",-1)]),2),(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>n.viewMode="day"),class:(0,r.C4)(["px-2 py-1 rounded-lg  hover:bg-gray-50",{" text-custom-orange":"day"===n.viewMode}])},t[54]||(t[54]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl"},"calendar_view_day",-1)]),2),t[55]||(t[55]=(0,o.Lk)("p",{class:"text-4xl mb-2"},"|",-1)),(0,o.Lk)("h1",$S,(0,r.v_)("week"===n.viewMode?"ดูตามสัปดาห์":"ดูตามวัน"),1)]),(0,o.Lk)("div",WS,[(0,o.Lk)("div",null,[t[56]||(t[56]=(0,o.Lk)("label",{for:"startDate",class:"font-bold mr-2 text-gray-700"},"วันเริ่มต้น:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"startDate",ref:"startDate","onUpdate:modelValue":t[4]||(t[4]=e=>i.formattedStartDate=e),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,512),[[a.Jo,i.formattedStartDate]])]),n.isDateConfirmed||n.startDate===n.initialStartDate?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>i.updateStartDate&&i.updateStartDate(...e)),class:"bg-green-500 text-white px-2 py-1 rounded flex items-center space-x-1 hover:bg-green-700"}," ยืนยัน "))]),(0,o.Lk)("div",qS,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.openAddModal&&i.openAddModal(...e)),class:"bg-custom-orange text-white px-4 py-2 rounded flex items-center space-x-1 hover:bg-custom-orange-hover"},t[57]||(t[57]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-white text-xl leading-none"},"add",-1),(0,o.Lk)("span",{class:"text-white text-base leading-none"},"เพิ่ม Setup Menu",-1)])),n.isAddModalOpen?((0,o.uX)(),(0,o.CE)("div",JS,[(0,o.Lk)("div",ZS,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[59]||(t[59]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[7]||(t[7]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[58]||(t[58]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",KS,[t[60]||(t[60]=(0,o.Lk)("h2",{class:"text-xl font-bold"},"เพิ่มข้อมูล",-1)),(0,o.Lk)("span",{onClick:t[8]||(t[8]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")]),(0,o.Lk)("div",YS,[(0,o.Lk)("div",HS,[t[61]||(t[61]=(0,o.Lk)("label",{for:"day_of_week",class:"font-bold text-gray-700"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>n.day_of_week=e),type:"number",placeholder:"กรองลำดับวัน",class:"p-2 border border-gray-300 rounded",required:""},null,512),[[a.Jo,n.day_of_week]])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.formRows,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"space-y-4 relative"},[(0,o.Lk)("div",GS," ประเภทอาหาร "+(0,r.v_)(s+1),1),(0,o.Lk)("div",null,[t[62]||(t[62]=(0,o.Lk)("label",{for:"mealType",class:"font-bold text-gray-700"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:e.selectedMealType,"onUpdate:modelValue":t=>e.selectedMealType=t,options:i.filteredMealTypes,multiple:!1,searchable:!0,"close-on-select":!0,placeholder:"เลือกประเภทอาหาร",label:"name","track-by":"id"},null,8,["modelValue","onUpdate:modelValue","options"])]),(0,o.Lk)("div",null,[t[63]||(t[63]=(0,o.Lk)("label",{for:"menus",class:"block font-bold text-gray-700"},"เมนู",-1)),(0,o.bF)(d,{modelValue:e.selectedMenus,"onUpdate:modelValue":t=>e.selectedMenus=t,options:i.getFilteredMenus(e.selectedMealType),multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"track-by":"id","custom-label":i.menuLabel},null,8,["modelValue","onUpdate:modelValue","options","custom-label"])]),(0,o.Lk)("div",eE,[(0,o.Lk)("button",{type:"button",onClick:e=>i.removeRow(s),class:"text-red-500 hover:text-red-600 flex items-center"},t[64]||(t[64]=[(0,o.Lk)("span",null,"× ลบเมนู",-1)]),8,tE)])])))),128)),(0,o.Lk)("div",sE,[(0,o.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>i.addRow&&i.addRow(...e)),class:"text-green-500 hover:text-green-600 flex items-center"},t[65]||(t[65]=[(0,o.Lk)("span",null,"+ เพิ่มแถว",-1)]))])]),(0,o.Lk)("div",aE,[(0,o.Lk)("li",{onClick:t[11]||(t[11]=(...e)=>i.clearForm&&i.clearForm(...e)),class:"px-4 py-2 cursor-pointer font-bold text-custom-orange text-left hover:underline"},t[66]||(t[66]=[(0,o.Lk)("span",null,"รีเซ็ตข้อมูล",-1)])),(0,o.Lk)("div",oE,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>i.closeAddModal&&i.closeAddModal(...e)),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>i.addMenus&&i.addMenus(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",lE,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=e=>n.searchQuery=e),placeholder:"ค้นหา...",class:"border border-gray-300 rounded-l px-4 py-2 w-full",onKeyup:t[15]||(t[15]=(0,a.jR)(((...e)=>i.search&&i.search(...e)),["enter"]))},null,544),[[a.Jo,n.searchQuery]]),n.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[16]||(t[16]=(...e)=>i.clearSearch&&i.clearSearch(...e)),class:"material-symbols-outlined absolute right-[55px] top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"}," close ")):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>i.search&&i.search(...e)),class:"bg-custom-orange material-symbols-outlined text-white text-xl px-4 py-2 rounded-r hover:bg-custom-orange-hover"}," search ")])]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",rE,[(0,o.Lk)("button",{onClick:t[18]||(t[18]=e=>i.changeWeek(-1)),class:"flex items-center"},t[67]||(t[67]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),i.weekOptions.length>0?((0,o.uX)(),(0,o.Wv)(d,{key:0,modelValue:n.selectedWeek,"onUpdate:modelValue":t[19]||(t[19]=e=>n.selectedWeek=e),options:i.weekOptions,placeholder:"เลือกสัปดาห์",multiple:!1,taggable:!0,"close-on-select":!0,"allow-empty":!0,class:"w-60"},null,8,["modelValue","options"])):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[20]||(t[20]=e=>i.changeWeek(1)),class:"flex items-center"},t[68]||(t[68]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)]))]),n.selectedWeek?((0,o.uX)(),(0,o.CE)("div",nE,[(0,o.Lk)("table",iE,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",dE,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidths[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenus,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",cE,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),0===s||e.day_of_week!==i.paginatedMenus[s-1].day_of_week?((0,o.uX)(),(0,o.CE)("td",{key:0,rowspan:i.getRowSpan(i.paginatedMenus,e.day_of_week),class:"px-4 py-2 align-top pb-5 border-l border-r"},[(0,o.Lk)("div",null,[t[70]||(t[70]=(0,o.Lk)("strong",null,"ลำดับวันที่: ",-1)),(0,o.eW)((0,r.v_)(e.day_of_week)+" ",1),t[71]||(t[71]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("div",pE,[t[69]||(t[69]=(0,o.Lk)("span",{class:"material-symbols-outlined text-xl mr-2"},"calendar_today",-1)),(0,o.eW)(" "+(0,r.v_)(i.formattedDate(e.date_to_show)),1)])])],8,uE)):(0,o.Q3)("",!0),(0,o.Lk)("td",hE,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",gE,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",mE,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",yE,[(0,o.Lk)("div",kE,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[72]||(t[72]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,bE),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[73]||(t[73]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,xE)])])])))),128)),0===i.paginatedMenus.length?((0,o.uX)(),(0,o.CE)("tr",fE,t[74]||(t[74]=[(0,o.Lk)("td",{colspan:"6",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",wE,[(0,o.Lk)("button",{onClick:t[21]||(t[21]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[75]||(t[75]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,vE),(0,o.Lk)("div",_E,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[22]||(t[22]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[23]||(t[23]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,LE)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[24]||(t[24]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[26]||(t[26]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[76]||(t[76]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,DE)])])):(0,o.Q3)("",!0)],512),[[a.aG,"week"===n.viewMode]]),(0,o.bo)((0,o.Lk)("div",null,[(0,o.Lk)("div",CE,[(0,o.Lk)("button",{onClick:t[27]||(t[27]=e=>i.changeDate(-1)),class:"flex items-center"},t[77]||(t[77]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[78]||(t[78]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[29]||(t[29]=e=>i.changeDate(1)),class:"flex items-center"},t[79]||(t[79]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{ref:"selectedDatePicker",type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>i.formattedSelectedDate=e),onInput:t[31]||(t[31]=(...e)=>i.onSelectDateChange&&i.onSelectDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange w-[150px]",placeholder:"เลือกวันที่"},null,544),[[a.Jo,i.formattedSelectedDate]])]),(0,o.Lk)("table",PE,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",ME,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headersByDay,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)(["px-4 py-2 text-left font-bold"]),style:(0,r.Tr)({width:n.headerWidthsByDay[t]})},(0,r.v_)(e),5)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.paginatedMenusByDay,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",TE,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),(0,o.Lk)("td",SE,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("td",EE,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("td",RE,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("td",AE,[(0,o.Lk)("div",FE,[(0,o.Lk)("button",{onClick:t=>i.openEditModal(e),class:"bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center space-x-1"},t[80]||(t[80]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"edit_square",-1),(0,o.Lk)("span",null,"แก้ไข",-1)]),8,OE),(0,o.Lk)("button",{onClick:t=>i.confirmDelete(e.id),class:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 flex items-center space-x-1"},t[81]||(t[81]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"delete",-1),(0,o.Lk)("span",null,"ลบ",-1)]),8,XE)])])])))),128)),0===i.paginatedMenusByDay.length?((0,o.uX)(),(0,o.CE)("tr",zE,t[82]||(t[82]=[(0,o.Lk)("td",{colspan:"5",class:"py-10 bg-white text-center text-gray-500 font-bold"}," ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",NE,[(0,o.Lk)("button",{onClick:t[32]||(t[32]=e=>i.goToPageByDay(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[83]||(t[83]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,QE),(0,o.Lk)("div",VE,[i.totalPagesArrayByDay.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[33]||(t[33]=e=>i.goToPageByDay(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[34]||(t[34]=e=>i.goToPageByDay(i.totalPagesArrayByDay.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArrayByDay.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPageByDay(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,IE)))),128)),i.totalPagesArrayByDay.end<i.totalPagesByDay-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[35]||(t[35]=e=>i.goToPageByDay(i.totalPagesArrayByDay.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArrayByDay.end<i.totalPagesByDay?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[36]||(t[36]=e=>i.goToPageByDay(i.totalPagesByDay)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[37]||(t[37]=e=>i.goToPageByDay(n.currentPage+1)),disabled:n.currentPage===i.totalPagesByDay,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[84]||(t[84]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,BE)])],512),[[a.aG,"day"===n.viewMode]]),n.isEditModalOpen?((0,o.uX)(),(0,o.CE)("div",jE,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[86]||(t[86]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[38]||(t[38]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[85]||(t[85]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",UE,[(0,o.Lk)("div",$E,[t[87]||(t[87]=(0,o.Lk)("span",{class:"font-bold"},"แก้ไข",-1)),(0,o.Lk)("div",WE,[(0,o.Lk)("span",{onClick:t[39]||(t[39]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"},"close")])]),(0,o.Lk)("div",qE,[(0,o.Lk)("div",JE,[t[88]||(t[88]=(0,o.Lk)("label",{for:"editDayofWeek",class:"block text-gray-700 font-bold"},"ลำดับวัน:",-1)),(0,o.bo)((0,o.Lk)("input",{id:"editDayofWeek","onUpdate:modelValue":t[40]||(t[40]=e=>n.selectedSetupMenu.day_of_week=e),type:"number",placeholder:"กรอกลำดับวันที่",class:"p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-custom-orange"},null,512),[[a.Jo,n.selectedSetupMenu.day_of_week]])]),(0,o.Lk)("div",null,[t[89]||(t[89]=(0,o.Lk)("label",{for:"editMealType",class:"block text-gray-700 font-bold"},"ประเภทอาหาร",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.meal_type_id,"onUpdate:modelValue":t[41]||(t[41]=e=>n.selectedSetupMenu.meal_type_id=e),options:i.filteredMealTypes,"track-by":"id",label:"name",placeholder:"เลือกประเภทอาหาร"},null,8,["modelValue","options"])]),(0,o.Lk)("div",ZE,[t[90]||(t[90]=(0,o.Lk)("label",{for:"editMenuID",class:"block text-gray-700 font-bold"},"เมนู",-1)),(0,o.bF)(d,{modelValue:n.selectedSetupMenu.menu_id,"onUpdate:modelValue":t[42]||(t[42]=e=>n.selectedSetupMenu.menu_id=e),options:i.filteredEditMenus,"track-by":"id",label:"name_thai",placeholder:"เลือกเมนู"},null,8,["modelValue","options"])])]),(0,o.Lk)("div",KE,[(0,o.Lk)("div",YE,[(0,o.Lk)("button",{onClick:t[43]||(t[43]=e=>n.isEditModalOpen=!1),class:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-700"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[44]||(t[44]=(...e)=>i.saveChanges&&i.saveChanges(...e)),class:"px-4 py-2 rounded bg-custom-orange text-white hover:bg-custom-orange-hover"}," บันทึก ")])])])])):(0,o.Q3)("",!0),n.isDeleteModalOpen?((0,o.uX)(),(0,o.CE)("div",HE,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[92]||(t[92]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[45]||(t[45]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[91]||(t[91]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",GE,[(0,o.Lk)("div",eR,[t[93]||(t[93]=(0,o.Lk)("h2",{class:"text-lg font-bold"},"ยืนยันการลบ",-1)),(0,o.Lk)("span",{onClick:t[46]||(t[46]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"material-symbols-outlined cursor-pointer hover:text-gray-200"}," close ")]),t[94]||(t[94]=(0,o.Lk)("div",{class:"p-4"},[(0,o.Lk)("p",null," คุณแน่ใจหรือไม่ว่าต้องการลบข้อมูลนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ ")],-1)),(0,o.Lk)("div",tR,[(0,o.Lk)("button",{onClick:t[47]||(t[47]=(...e)=>i.closeDeleteModal&&i.closeDeleteModal(...e)),class:"bg-gray-300 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[48]||(t[48]=(...e)=>i.deleteConfirmed&&i.deleteConfirmed(...e)),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}," ยืนยัน ")])])])):(0,o.Q3)("",!0)],64)}var aR={data(){return{headers:["#","วัน","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidths:["5%","10%","25%","30%","30%","10%"],headersByDay:["#","ประเภทอาหาร","ชื่อเมนูภาษาอังกฤษ","ชื่อเมนูภาษาไทย",""],headerWidthsByDay:["5%","25%","30%","30%","10%"],formRows:[{selectedMealType:null,selectedMenus:[]}],selectedSetupMenu:{id:"",day_of_week:"",menu_id:""},filteredMenu:[],filteredMenuByDay:[],setupMenus:[],day_of_week:"",selectedMenus:[],menus:[],todayMenus:[],setUpMenusByDate:[],selectedDate:"",meal_types:[],selectedMealType:"",isAddModalOpen:!1,searchQuery:"",currentPage:1,itemsPerPage:10,selectedWeek:null,filteredSetupMenu:[],viewMode:"week",isDeleteModalOpen:!1,itemToDelete:null,isEditModalOpen:!1,toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:"",startDate:"",initialStartDate:"",isDateConfirmed:!1}},components:{Multiselect:Rr.Ay},computed:{filteredMealTypes(){return this.meal_types.filter((e=>e.menuType&&16===e.menuType.id))},groupedMenus(){return Object.entries(this.setupMenus).map((([e,t])=>({week:e,menus:t})))},filteredMenus(){if(!this.selectedWeek||!this.setupMenus[this.selectedWeek])return[];const e=this.setupMenus[this.selectedWeek];return e.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)||e.day_of_week.toString().includes(a)}))},filteredMenusByDay(){return this.setUpMenusByDate.filter((e=>{const t=this.getMenuEnglishName(e.menu_id)?this.getMenuEnglishName(e.menu_id).toLowerCase():"",s=this.getMenuThaiName(e.menu_id)?this.getMenuThaiName(e.menu_id).toLowerCase():"",a=this.searchQuery.toLowerCase();return t.includes(a)||s.includes(a)}))},weekOptions(){return Object.keys(this.setupMenus)},paginatedMenus(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenus.slice(e,e+this.itemsPerPage)},totalPages(){return Math.ceil(this.filteredMenus.length/this.itemsPerPage)},totalPagesArray(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPages,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},paginatedMenusByDay(){const e=(this.currentPage-1)*this.itemsPerPage;return this.filteredMenusByDay.slice(e,e+this.itemsPerPage)},totalPagesByDay(){return Math.ceil(this.filteredMenusByDay.length/this.itemsPerPage)},totalPagesArrayByDay(){const e=Math.max(1,this.currentPage-2),t=Math.min(this.totalPagesByDay,this.currentPage+2);return{start:e,end:t,range:Array.from({length:t-e+1},((t,s)=>e+s))}},filteredEditMenus(){return this.selectedSetupMenu.meal_type_id?this.menus.filter((e=>e.meal_type_id===this.selectedSetupMenu.meal_type_id.id)):this.menus},menuLabel(){return e=>`${e.name_thai} (${e.name_english||null})`},formattedSelectedDate(){return this.selectedDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.selectedDate)):""},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""}},methods:{async fetchSetupMenus(){try{const e=await fetch("http://127.0.0.1:3333/setup-menu-diabete"),t=await e.json();for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&t[s].sort(((e,t)=>e.day_of_week-t.day_of_week));this.setupMenus=t,!this.selectedWeek&&Object.keys(t).length>0&&(this.selectedWeek="Week 1")}catch(e){console.error("Error fetching menus:",e)}},getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},async fetchSetupMenusForToday(){try{const e=this.getTodayDate();console.log("Today:",e);const t=await re.A.get(`http://127.0.0.1:3333/setup-menu-diabete/menus-by-day/${e}`);console.log("API Response:",t.data),this.todayMenus=t.data.menus||[]}catch(e){console.error("Error fetching menus for today:",e)}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},async fetchMenusByDay(){if(this.selectedDate)try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-diabete/menus-by-day/${this.selectedDate}`);this.setUpMenusByDate=e.data.menus}catch(e){console.error("Error fetching menus:",e),this.setUpMenusByDate=[]}},async fetchStartDate(){try{const e=await re.A.get("http://127.0.0.1:3333/setup-menu-diabete/get-start-date");this.initialStartDate=e.data.startDate,this.startDate=this.initialStartDate}catch(e){this.errorMessage="ไม่สามารถดึงข้อมูลวันที่เริ่มต้นได้"}},async updateStartDate(){try{if(!this.startDate)return void(this.errorMessage="กรุณากรอกวันที่เริ่มต้น");const e=await re.A.post("http://127.0.0.1:3333/setup-menu-diabete/set-start-date",{startDate:this.startDate});this.initialStartDate=this.startDate,this.isDateConfirmed=!0,this.successMessage=e.data.message,this.errorMessage="",await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("อัปเดตวันที่เริ่มต้นสำเร็จ!")}catch(e){e.response&&e.response.data?this.errorMessage=e.response.data.message:this.errorMessage="เกิดข้อผิดพลาดในการอัปเดตวันที่เริ่มต้น",this.successMessage=""}},formattedDate(e){if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"numeric",month:"short",year:"numeric"}).format(t)},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusByDay()},setToday(){const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay()},onSelectDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.selectedDate=t.toISOString())},getFilteredMenus(e){return e?this.menus.filter((t=>t.meal_type_id===e.id)):this.menus.filter((e=>{const t=this.meal_types.find((t=>t.id===e.meal_type_id));return t&&16===t.menuType.id}))},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},changeViewMode(e){this.viewMode=e,this.currentPage=1},changeWeek(e){const t=this.weekOptions.indexOf(this.selectedWeek),s=t+e;s>=0&&s<this.weekOptions.length&&(this.selectedWeek=this.weekOptions[s],this.currentPage=1)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},goToPageByDay(e){e>=1&&e<=this.totalPagesByDay&&(this.currentPage=e)},getRowSpan(e,t){return e.filter((e=>e.day_of_week===t)).length},selectWeek(e){this.selectedWeek=e,this.currentPage=1},search(){this.currentPage=1},clearSearch(){this.searchQuery=""},openAddModal(){this.isAddModalOpen=!0},async addMenus(){try{const e=this.formRows.map((e=>e.selectedMenus.map((e=>({menu_id:e.id}))))).flat();if(!this.day_of_week&&0===e.length)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(0===e.length)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.post("http://127.0.0.1:3333/setup-menu-diabete",{day_of_week:this.day_of_week,menus:e}),this.clearForm(),this.closeAddModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("บันทึกข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการบันทึกข้อมูล!")}},addRow(){this.formRows.push({selectedMealType:null,selectedMenus:[]})},removeRow(e){this.formRows.splice(e,1)},clearForm(){this.formRows=[{selectedMealType:null,selectedMenus:[]}]},closeAddModal(){this.isAddModalOpen=!1,this.clearForm()},openEditModal(e){const t=this.menus.find((t=>t.id===e.menu_id))||{};this.selectedSetupMenu={...e,menu_id:t?{id:t.id,name_thai:t.name_thai}:null,meal_type_id:this.meal_types.find((e=>e.id===t.meal_type_id))||null},this.isEditModalOpen=!0},async saveChanges(){try{if(!this.selectedSetupMenu.day_of_week&&!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณากรอกข้อมูลให้ครบถ้วน!");if(!this.selectedSetupMenu.day_of_week)return void this.showErrorToastNotification("กรุณากรอกลำดับวัน!");if(!this.selectedSetupMenu.menu_id)return void this.showErrorToastNotification("กรุณาเลือกเมนู!");await re.A.put(`http://127.0.0.1:3333/setup-menu-diabete/${this.selectedSetupMenu.id}`,{day_of_week:this.selectedSetupMenu.day_of_week,menu_id:this.selectedSetupMenu.menu_id.id}),this.isEditModalOpen=!1,await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showSuccessToastNotification("แก้ไขข้อมูลสำเร็จ!")}catch(e){this.showErrorToastNotification("เกิดข้อผิดพลาดในการแก้ไขข้อมูล!")}},closeEditModal(){this.isEditModalOpen=!1,this.selectedSetupMenu={}},confirmDelete(e){this.itemToDelete=e,this.isDeleteModalOpen=!0},closeDeleteModal(){this.isDeleteModalOpen=!1,this.itemToDelete=null},async deleteConfirmed(){try{await re.A.delete(`http://127.0.0.1:3333/setup-menu-diabete/${this.itemToDelete}`),this.menus=this.menus.filter((e=>e.id!==this.itemToDelete)),this.closeDeleteModal(),await this.fetchSetupMenus(),await this.fetchMenusByDay(),this.showFailToastNotification("ลบข้อมูลสำเร็จ!")}catch(e){console.error("Error deleting item:",e),this.showErrorToastNotification("เกิดข้อผิดพลาดในการลบข้อมูล!")}}},created(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate(),this.fetchMenusByDay()},mounted(){this.fetchSetupMenus(),this.fetchLookupData(),this.fetchSetupMenusForToday(),this.fetchStartDate();const e=new Date;this.selectedDate=e.toISOString().split("T")[0],this.fetchMenusByDay(),this.$nextTick((()=>{(0,oc.A)(this.$refs.startDate,{dateFormat:"Y-m-d",defaultDate:this.initialStartDate,onChange:(e,t)=>{this.startDate=t}}),(0,oc.A)(this.$refs.selectedDatePicker,{dateFormat:"Y-m-d",defaultDate:e,onChange:(e,t)=>{this.selectedDate=t,this.fetchMenusByDay()}})}))},watch:{selectedWeek(){this.currentPage=1},selectedDate(){this.currentPage=1},viewMode(){this.currentPage=1},startDate(e){e!==this.initialStartDate&&(this.isDateConfirmed=!1)}}};const oR=(0,ce.A)(aR,[["render",sR],["__scopeId","data-v-fa19eb16"]]);var lR=oR;const rR={class:"flex items-center space-x-3 py-2"},nR={class:"flex justify-end items-center space-x-2 relative"},iR={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},dR={class:"text-m text-custom-orange font-bold"},cR={class:"mt-4 px-4 flex justify-end space-x-1"},uR=["disabled"],pR=["disabled"],hR={class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},gR={class:"bg-custom-orange text-white"},mR={class:"px-4 py-2 text-left align-center"},yR=["checked"],kR=["onClick"],bR={key:0,class:"ml-2 items-center"},xR={class:"material-symbols-outlined text-sm"},fR={class:"px-4 py-2 align-top pb-5"},wR=["value"],vR={class:"px-4 py-2 align-top pb-5"},_R=["rowspan"],LR={class:"px-4 py-2 align-top pb-5"},DR={class:"px-4 py-2 align-top pb-5"},CR={class:"px-4 py-2 align-top pb-5"},PR={class:"px-4 py-2 align-top pb-5"},MR={class:"px-4 py-2 align-top font-bold pb-5"},TR=["onClick"],SR={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-10 z-50"},ER={class:"bg-white rounded-md w-1/3 max-w-lg"},RR={class:"font-bold"},AR={class:"p-6 space-y-4"},FR={class:"text-gray-700"},OR={class:"flex justify-end space-x-4 p-4 bg-white border-t rounded-b-md"},XR={key:0},zR={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},NR=["disabled"],QR={class:"flex items-center space-x-1"},VR=["onClick"],IR=["disabled"];function BR(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[24]||(t[24]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[23]||(t[23]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[26]||(t[26]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[25]||(t[25]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",rR,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>i.changeDate(-1)),class:"flex items-center"},t[27]||(t[27]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[28]||(t[28]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>i.changeDate(1)),class:"flex items-center"},t[29]||(t[29]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[30]||(t[30]=(0,o.Lk)("strong",{class:"text-gray-700"},"Start Date:",-1)),(0,o.bo)((0,o.Lk)("input",{ref:"startDatepicker",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>i.formattedStartDate=e),onInput:t[6]||(t[6]=(...e)=>i.onStartDateChange&&i.onStartDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่เริ่มต้น"},null,544),[[a.Jo,i.formattedStartDate]]),t[31]||(t[31]=(0,o.Lk)("strong",{class:"text-gray-700"},"End Date:",-1)),(0,o.bo)((0,o.Lk)("input",{ref:"endDatepicker",type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>i.formattedEndDate=e),onInput:t[8]||(t[8]=(...e)=>i.onEndDateChange&&i.onEndDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่สิ้นสุด"},null,544),[[a.Jo,i.formattedEndDate]])]),(0,o.Lk)("div",nR,[(0,o.Lk)("div",iR,[t[32]||(t[32]=(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"calendar_month",-1)),t[33]||(t[33]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการยอดขายประจำวันทั้งหมด: ",-1)),(0,o.Lk)("span",dR,(0,r.v_)(n.orders.length)+" รายการ",1)]),(0,o.Lk)("div",cR,[n.selectedOrders.some((e=>"pending"===e.status))&&!n.selectedOrders.some((e=>"confirm"===e.status))?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[9]||(t[9]=(...e)=>i.confirmMultipleOrders&&i.confirmMultipleOrders(...e)),class:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded mt-4",disabled:0===n.selectedOrders.length}," ยืนยันการสั่งซื้อที่เลือก ("+(0,r.v_)(n.selectedOrders.length)+") ",9,uR)):(0,o.Q3)("",!0),n.selectedOrders.some((e=>"confirm"===e.status))&&!n.selectedOrders.some((e=>"pending"===e.status))?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[10]||(t[10]=(...e)=>i.pendingMultipleOrders&&i.pendingMultipleOrders(...e)),class:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded mt-4",disabled:0===n.selectedOrders.length}," ยกเลิกยืนยันการสั่งซื้อที่เลือก ("+(0,r.v_)(n.selectedOrders.length)+") ",9,pR)):(0,o.Q3)("",!0)])]),(0,o.Lk)("table",hR,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",gR,[(0,o.Lk)("th",mR,[(0,o.Lk)("input",{type:"checkbox",onChange:t[11]||(t[11]=(...e)=>i.toggleSelectAll&&i.toggleSelectAll(...e)),checked:n.isAllSelected,class:"w-4 h-4 accent-black focus:ring-0"},null,40,yR)]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)([["px-4 py-2 text-left font-bold"],"items-center hover:text-gray-200"]),style:(0,r.Tr)({width:n.headerWidths[t],cursor:"pointer"}),onClick:t=>i.sortColumn(e)},[(0,o.Lk)("span",null,(0,r.v_)(e),1),"Transaction Date"===e?((0,o.uX)(),(0,o.CE)("span",bR,[(0,o.Lk)("span",xR,(0,r.v_)(n.sortIcon),1)])):(0,o.Q3)("",!0)],12,kR)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredOrders,((e,s)=>((0,o.uX)(),(0,o.CE)("tr",{key:s,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",fR,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=e=>n.selectedOrders=e),value:e,class:"w-4 h-4 accent-custom-orange focus:ring-0"},null,8,wR),[[a.lH,n.selectedOrders]])]),(0,o.Lk)("td",vR,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+s+1),1),i.shouldDisplayUserName(s,e.user_id)?((0,o.uX)(),(0,o.CE)("td",{key:0,class:"px-4 py-2 align-top font-bold border-l border-r text-custom-orange pb-5",rowspan:i.getRowspan(e.user_id,s)},(0,r.v_)(i.getCustomerName(e.user_id)),9,_R)):(0,o.Q3)("",!0),(0,o.Lk)("td",LR,(0,r.v_)(i.formatDate(e.order_date)),1),(0,o.Lk)("td",DR,(0,r.v_)(i.getMenuTypeName(e.menu_type_id)),1),(0,o.Lk)("td",CR,[(0,o.Lk)("div",null,(0,r.v_)(i.getMenuEngName(e.menu_id)),1),(0,o.Lk)("div",null,"("+(0,r.v_)(i.getMenuName(e.menu_id))+")",1)]),(0,o.Lk)("td",PR,(0,r.v_)(e.quantity),1),(0,o.Lk)("td",MR,[(0,o.Lk)("button",{onClick:t=>i.openConfirmSatatusModal(e),class:(0,r.C4)(["px-4 py-1 rounded-full font-bold focus:outline-none hover:text-gray-200",i.getStatusClass(e.status)])},(0,r.v_)(i.getStatusText(e.status)),11,TR),n.isConfirmStatusModalOpen?((0,o.uX)(),(0,o.CE)("div",SR,[(0,o.Lk)("div",{class:(0,r.C4)(["absolute top-8 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg transition-opacity duration-300 z-60",{"opacity-100":n.showErrorToast,"opacity-0":!n.showErrorToast}])},[t[35]||(t[35]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"error",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastErrorMessage),1),(0,o.Lk)("button",{onClick:t[13]||(t[13]=e=>n.showErrorToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[34]||(t[34]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",ER,[(0,o.Lk)("div",{class:(0,r.C4)([{"bg-green-500":"pending"===n.selectedOrder.status,"bg-red-500":"confirm"===n.selectedOrder.status},"flex justify-between items-center text-white px-4 py-2 rounded-t-md"])},[(0,o.Lk)("span",RR,(0,r.v_)("paid"===n.selectedOrder.status?"เปลี่ยนสถานะเป็นยังไม่ได้ยืนยันการสั่งซื้อ":"ยืนยันการสั่งซื้อ"),1),(0,o.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>i.closeConfirmStatusModal&&i.closeConfirmStatusModal(...e)),class:"text-white hover:text-gray-200"},t[36]||(t[36]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"close",-1)]))],2),(0,o.Lk)("div",AR,[(0,o.Lk)("p",FR,(0,r.v_)("confirm"===n.selectedOrder.status?'คุณต้องการเปลี่ยนสถานะเป็น "ยังไม่ได้ยืนยันการสั่งซื้อ" หรือไม่?':"ยืนยันการสั่งซื้อ?"),1)]),(0,o.Lk)("div",OR,[(0,o.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>i.closeConfirmStatusModal&&i.closeConfirmStatusModal(...e)),class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>i.confirmStatus&&i.confirmStatus(...e)),class:(0,r.C4)([{"bg-green-500 hover:bg-green-600":"pending"===n.selectedOrder.status,"bg-red-500 hover:bg-red-600":"confirm"===n.selectedOrder.status},"text-white px-4 py-2 rounded"])}," ยืนยัน ",2)])])])):(0,o.Q3)("",!0)])])))),128)),0===i.filteredOrders.length?((0,o.uX)(),(0,o.CE)("tr",XR,t[37]||(t[37]=[(0,o.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",zR,[(0,o.Lk)("button",{onClick:t[17]||(t[17]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[38]||(t[38]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,NR),(0,o.Lk)("div",QR,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[18]||(t[18]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[19]||(t[19]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,VR)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[20]||(t[20]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[21]||(t[21]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[22]||(t[22]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[39]||(t[39]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,IR)])])}var jR={data(){return{headers:["#","Customer's Name","วันที่สั่งซื้อ","Packge Type","รายการอาหาร","จำนวน","สถานะ"],headerWidths:["5%","20%","15%","15%","20%","10%","15%"],sortDirection:"asc",sortIcon:"arrow_downward",orders:[],selectedDate:"",customers:[],menus:[],menu_types:[],selectedOrder:{id:"",menu_id:"",quantity:0,order_date:"",user_id:"",menu_type_id:"",status:""},selectedOrders:[],isConfirmStatusModalOpen:!1,isAllSelected:!1,currentPage:1,itemsPerPage:10,startDate:"",endDate:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},computed:{filteredOrders(){const e=(this.currentPage-1)*this.itemsPerPage,t=this.currentPage*this.itemsPerPage;return this.orders.slice(e,t)},totalPages(){return Math.ceil(this.orders.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""}},methods:{goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),a=s.getDate(),o=t[s.getMonth()],l=s.getFullYear();return`${a} ${o} ${l}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString())},onEndDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.endDate=t.toISOString())},sortColumn(e){"Transaction Date"===e&&(this.sortDirection="asc"===this.sortDirection?"desc":"asc",this.sortIcon="asc"===this.sortDirection?"arrow_downward":"arrow_upward",this.filteredOrders.sort(((e,t)=>{const s=new Date(e.paid_date),a=new Date(t.paid_date);return"asc"===this.sortDirection?s-a:a-s})))},async fetchOrders(e,t){try{const s=await re.A.get("http://127.0.0.1:3333/orders/date-range",{params:{start_date:e,end_date:t}});this.orders=s.data.orders,this.filteredOrders=this.orders,console.log("Data",this.orders),this.orders.sort(((e,t)=>{const s=new Date(e.order_date),a=new Date(t.order_date);return s-a}))}catch(s){console.error("Error fetching orders data:",s)}},async fetchLookupData(){try{const[e,t,s]=await Promise.all([re.A.get("http://127.0.0.1:3333/customers"),re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/menu-types")]);this.customers=e.data,this.menus=t.data,this.menu_types=s.data}catch(e){console.error("Error fetching lookup data:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.user_id===e));return t?t.name:null},getMenuName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMenuEngName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuTypeName(e){const t=this.menu_types.find((t=>t.id===e));return t?t.name:null},getStatusText(e){return"confirm"===e?"ยืนยันการสั่งซื้อแล้ว":"ยังไม่ได้ยืนยันการสั่งซื้อ"},getStatusClass(e){return"confirm"===e?"text-white bg-green-500":"text-white bg-red-500"},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchOrdersData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchOrdersData()},fetchOrdersData(){this.startDate&&this.endDate&&this.fetchOrders(this.startDate,this.endDate)},shouldDisplayUserName(e,t){return 0===e||this.orders[e-1].user_id!==t},getRowspan(e,t){let s=0;for(let a=t;a<this.orders.length;a++){if(this.orders[a].user_id!==e)break;s++}return s},shouldDisplayOrderDate(e,t){return 0===e||this.orders[e-1].order_date!==t},getOrderDateRowspan(e,t){let s=0;for(let a=t;a<this.orders.length;a++){if(this.orders[a].order_date!==e)break;s++}return s},onViewDetails(e){this.selectedDailySaleDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedDailySaleDetail={}},formatLabel(e){const t={paid_date:"Transaction Date",customer_id:"Customer's Name",package_type_id:"Package Type",package_id:"Package/Purchase Details",promotion_type_id:"Sales Category",package_price:"Package Price",package_detail:"Details",discount:"Additional Discount",extra_charge:"% Extra Charge",extra_charge_price:"Extra Charge Value",total_package_price:"Purchase Value",total_delivery_price:"ค่าจัดส่งรวม",total_price:"ยอดขายรวม",payment_type_id:"วิธีการชำระเงิน",seller_name_id:"Sales Rep"};return t[e]||e},openConfirmSatatusModal(e){this.selectedOrder=e,this.isConfirmStatusModalOpen=!0},closeConfirmStatusModal(){this.isConfirmStatusModalOpen=!1,this.selectedPaidDate=""},async confirmStatus(){try{const e="confirm"===this.selectedOrder.status?"pending":"confirm",t={status:e},s=await re.A.put(`http://127.0.0.1:3333/order/${this.selectedOrder.id}/status`,t);if(await this.fetchOrders(),200!==s.status)throw new Error("Unexpected response status");{const e=s.data.data,t=this.orders.findIndex((t=>t.id===e.id));-1!==t&&(this.orders[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error updating payment status:",e),console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmStatusModal()},async confirmMultipleOrders(){if(0===this.selectedOrders.length)return;const e=this.selectedOrders.map((e=>e.id));console.log("Selected Orders:",this.selectedOrders);try{const t=await fetch("http://127.0.0.1:3333/order/update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_ids:e,status:"confirm"})});await t.json(),t.ok?(this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!"),this.selectedOrders=[],await this.fetchOrders(this.startDate,this.endDate)):this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}catch(t){console.error("Error:",t),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเชื่อมต่อ!")}},async pendingMultipleOrders(){if(0===this.selectedOrders.length)return;const e=this.selectedOrders.map((e=>e.id));try{const t=await fetch("http://127.0.0.1:3333/order/update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_ids:e,status:"pending"})});await t.json(),t.ok?(this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!"),this.selectedOrders=[],await this.fetchOrders(this.startDate,this.endDate)):this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}catch(t){console.error("Error:",t),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเชื่อมต่อ!")}},selectOrder(e){this.selectedOrders.includes(e)?this.selectedOrders=this.selectedOrders.filter((t=>t.id!==e.id)):this.selectedOrders.push(e)},toggleSelectAll(e){e.target.checked?this.selectedOrders=[...this.filteredOrders]:this.selectedOrders=[],this.isAllSelected=e.target.checked},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)}},created(){this.filteredOrders=this.orders,this.fetchLookupData(),this.fetchOrders(this.selectedDate)},mounted(){this.fetchLookupData(),this.fetchOrders(this.selectedDate),this.setToday(),this.$nextTick((()=>{(0,oc.A)(this.$refs.startDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.fetchOrdersData()}}),(0,oc.A)(this.$refs.endDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.endDate=t,this.fetchOrdersData()}})}))},watch:{selectedOrders(){this.isAllSelected=this.selectedOrders.length===this.filteredOrders.length}}};const UR=(0,ce.A)(jR,[["render",BR],["__scopeId","data-v-00b22fd8"]]);var $R=UR;const WR={class:"flex items-center space-x-3 py-2"},qR={class:"flex justify-end items-center space-x-2 relative"},JR={class:"mt-4 px-4 flex items-center space-x-1 mr-auto"},ZR={class:"text-m text-custom-orange font-bold"},KR={class:"mt-4 px-4 flex justify-end space-x-1"},YR=["disabled"],HR=["disabled"],GR={ref:"printContent",class:"min-w-full table-auto rounded-t-2xl overflow-hidden mt-4"},eA={class:"bg-custom-orange text-white"},tA=["onClick"],sA={key:0,class:"ml-2 items-center"},aA={class:"material-symbols-outlined text-sm"},oA={class:"px-4 py-2 align-top pb-5"},lA={class:"px-4 py-2 align-top pb-5"},rA={class:"px-4 py-2 align-top pb-5"},nA={class:"px-4 py-2 align-top pb-5"},iA={class:"px-4 py-2 align-top pb-5"},dA={key:0},cA={class:"rounded-b-2xl flex justify-center items-center space-x-2 bg-white px-2 py-1"},uA=["disabled"],pA={class:"flex items-center space-x-1"},hA=["onClick"],gA=["disabled"];function mA(e,t,s,l,n,i){const d=(0,o.g2)("vue-to-print");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-green-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showSuccessToast,"opacity-0":!n.showSuccessToast}])},[t[18]||(t[18]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"check_circle",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastSuccessMessage),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>n.showSuccessToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[17]||(t[17]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",{class:(0,r.C4)(["fixed top-4 right-8 bg-red-500 text-white px-8 py-4 flex items-center space-x-4 rounded-lg shadow-lg transition-opacity duration-300 z-50",{"opacity-100":n.showFailToast,"opacity-0":!n.showFailToast}])},[t[20]||(t[20]=(0,o.Lk)("span",{class:"material-symbols-outlined text-white"},"cancel",-1)),(0,o.Lk)("span",null,(0,r.v_)(n.toastFailMessage),1),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>n.showFailToast=!1),class:"text-white hover:text-gray-200 focus:outline-none"},t[19]||(t[19]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-xl"},"close",-1)]))],2),(0,o.Lk)("div",WR,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>i.changeDate(-1)),class:"flex items-center"},t[21]||(t[21]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[22]||(t[22]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>i.changeDate(1)),class:"flex items-center"},t[23]||(t[23]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),t[24]||(t[24]=(0,o.Lk)("strong",{class:"text-gray-700"},"Start Date:",-1)),(0,o.bo)((0,o.Lk)("input",{ref:"startDatepicker",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>i.formattedStartDate=e),onInput:t[6]||(t[6]=(...e)=>i.onStartDateChange&&i.onStartDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่เริ่มต้น"},null,544),[[a.Jo,i.formattedStartDate]]),t[25]||(t[25]=(0,o.Lk)("strong",{class:"text-gray-700"},"End Date:",-1)),(0,o.bo)((0,o.Lk)("input",{ref:"endDatepicker",type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>i.formattedEndDate=e),onInput:t[8]||(t[8]=(...e)=>i.onEndDateChange&&i.onEndDateChange(...e)),class:"text-center bg-white rounded-md font-bold border border-gray-200 focus:outline-none focus:ring-2 focus:ring-custom-orange hover:ring-2 hover:ring-custom-orange text-custom-orange hover:text-custom-orange-hover w-[150px]",placeholder:"เลือกวันที่สิ้นสุด"},null,544),[[a.Jo,i.formattedEndDate]])]),(0,o.Lk)("div",qR,[(0,o.Lk)("div",JR,[t[26]||(t[26]=(0,o.Lk)("span",{class:"material-symbols-outlined text-2xl text-gray-700"},"calendar_month",-1)),t[27]||(t[27]=(0,o.Lk)("span",{class:"text-m text-gray-700"},"จำนวนการยอดขายประจำวันทั้งหมด: ",-1)),(0,o.Lk)("span",ZR,(0,r.v_)(n.orders.length)+" รายการ",1)]),(0,o.Lk)("div",KR,[n.selectedOrders.some((e=>"pending"===e.status))&&!n.selectedOrders.some((e=>"confirm"===e.status))?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[9]||(t[9]=(...e)=>i.confirmMultipleOrders&&i.confirmMultipleOrders(...e)),class:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded mt-4",disabled:0===n.selectedOrders.length}," ยืนยันการสั่งซื้อที่เลือก ("+(0,r.v_)(n.selectedOrders.length)+") ",9,YR)):(0,o.Q3)("",!0),n.selectedOrders.some((e=>"confirm"===e.status))&&!n.selectedOrders.some((e=>"pending"===e.status))?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[10]||(t[10]=(...e)=>i.pendingMultipleOrders&&i.pendingMultipleOrders(...e)),class:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded mt-4",disabled:0===n.selectedOrders.length}," ยกเลิกยืนยันการสั่งซื้อที่เลือก ("+(0,r.v_)(n.selectedOrders.length)+") ",9,HR)):(0,o.Q3)("",!0)])]),n.isPrintVisible?((0,o.uX)(),(0,o.Wv)(d,{key:0,content:i.printContent},{default:(0,o.k6)((()=>t[28]||(t[28]=[(0,o.Lk)("button",{class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"}," พิมพ์ตาราง ",-1)]))),_:1},8,["content"])):(0,o.Q3)("",!0),(0,o.Lk)("table",GR,[(0,o.Lk)("thead",null,[(0,o.Lk)("tr",eA,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.headers,((e,t)=>((0,o.uX)(),(0,o.CE)("th",{key:t,class:(0,r.C4)([["px-4 py-2 text-left font-bold"],"items-center hover:text-gray-200"]),style:(0,r.Tr)({width:n.headerWidths[t],cursor:"pointer"}),onClick:t=>i.sortColumn(e)},[(0,o.Lk)("span",null,(0,r.v_)(e),1),"Transaction Date"===e?((0,o.uX)(),(0,o.CE)("span",sA,[(0,o.Lk)("span",aA,(0,r.v_)(n.sortIcon),1)])):(0,o.Q3)("",!0)],12,tA)))),128))])]),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.groupedOrders,((e,t)=>((0,o.uX)(),(0,o.CE)("tr",{key:t,class:"border-b border-b-gray-200 bg-white relative"},[(0,o.Lk)("td",oA,(0,r.v_)((n.currentPage-1)*n.itemsPerPage+t+1),1),(0,o.Lk)("td",lA,(0,r.v_)(i.formatDate(e.order_date)),1),(0,o.Lk)("td",rA,(0,r.v_)(i.getMenuTypeName(e.menu_type_id)),1),(0,o.Lk)("td",nA,[(0,o.Lk)("div",null,(0,r.v_)(e.menu_eng_name),1),(0,o.Lk)("div",null,"("+(0,r.v_)(e.menu_name)+")",1)]),(0,o.Lk)("td",iA,(0,r.v_)(e.quantity),1)])))),128)),0===i.groupedOrders.length?((0,o.uX)(),(0,o.CE)("tr",dA,t[29]||(t[29]=[(0,o.Lk)("td",{colspan:"10",class:"py-10 bg-white text-center text-gray-500 font-bold"},"ไม่พบข้อมูล ",-1)]))):(0,o.Q3)("",!0)])],512),(0,o.Lk)("div",cA,[(0,o.Lk)("button",{onClick:t[11]||(t[11]=e=>i.goToPage(n.currentPage-1)),disabled:1===n.currentPage,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[30]||(t[30]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_left",-1)]),8,uA),(0,o.Lk)("div",pA,[i.totalPagesArray.start>1?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[12]||(t[12]=e=>i.goToPage(1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," 1 ")):(0,o.Q3)("",!0),i.totalPagesArray.start>2?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[13]||(t[13]=e=>i.goToPage(i.totalPagesArray.start-1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.totalPagesArray.range,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,onClick:t=>i.goToPage(e),class:(0,r.C4)([["px-3 py-2 rounded-md",{"bg-custom-orange text-white":n.currentPage===e,"bg-white":n.currentPage!==e}],"cursor-pointer hover:bg-custom-orange hover:text-white"])},(0,r.v_)(e),11,hA)))),128)),i.totalPagesArray.end<i.totalPages-1?((0,o.uX)(),(0,o.CE)("button",{key:2,onClick:t[14]||(t[14]=e=>i.goToPage(i.totalPagesArray.end+1)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"}," ... ")):(0,o.Q3)("",!0),i.totalPagesArray.end<i.totalPages?((0,o.uX)(),(0,o.CE)("button",{key:3,onClick:t[15]||(t[15]=e=>i.goToPage(i.totalPages)),class:"px-3 py-2 rounded-md bg-white hover:bg-custom-orange hover:text-white"},(0,r.v_)(i.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{onClick:t[16]||(t[16]=e=>i.goToPage(n.currentPage+1)),disabled:n.currentPage===i.totalPages,class:"px-3 py-2 rounded-md hover:bg-gray-100 text-custom-orange disabled:opacity-50"},t[31]||(t[31]=[(0,o.Lk)("span",{class:"material-symbols-outlined"},"chevron_right",-1)]),8,gA)])])}var yA={data(){return{headers:["#","วันที่สั่งซื้อ","Packge Type","รายการอาหาร","จำนวน"],headerWidths:["5%","15%","15%","20%","10%"],sortDirection:"asc",sortIcon:"arrow_downward",isPrintVisible:!0,orders:[],selectedDate:"",customers:[],menus:[],menu_types:[],selectedOrder:{id:"",menu_id:"",quantity:0,order_date:"",user_id:"",menu_type_id:"",status:""},selectedOrders:[],isConfirmStatusModalOpen:!1,isAllSelected:!1,currentPage:1,itemsPerPage:10,startDate:"",endDate:"",toastSuccessMessage:"",showSuccessToast:!1,toastFailMessage:"",showFailToast:!1,showErrorToast:!1,toastErrorMessage:""}},components:{VueToPrint:uu.Ay},computed:{totalPages(){return Math.ceil(this.groupedOrders.length/this.itemsPerPage)},totalPagesArray(){const e=5,t=Math.floor(e/2);let s=this.currentPage-t,a=this.currentPage+t;return s<1&&(s=1,a=Math.min(e,this.totalPages)),a>this.totalPages&&(a=this.totalPages,s=Math.max(1,this.totalPages-e+1)),{start:s,end:a,range:Array.from({length:a-s+1},((e,t)=>s+t))}},formattedStartDate(){return this.startDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.startDate)):""},formattedEndDate(){return this.endDate?new Intl.DateTimeFormat("en-UK",{day:"numeric",month:"short",year:"numeric"}).format(new Date(this.endDate)):""},groupedOrders(){const e=this.orders.reduce(((e,t)=>{const s=e.find((e=>e.menu_id===t.menu_id));return s?s.quantity+=t.quantity:e.push({menu_id:t.menu_id,quantity:t.quantity,menu_name:this.getMenuName(t.menu_id),menu_eng_name:this.getMenuEngName(t.menu_id),order_date:t.order_date,menu_type_id:t.menu_type_id}),e}),[]);return e},printContent(){return this.$refs.printTable}},methods:{goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},formatDate(e){if(!e)return"";const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(e),a=s.getDate(),o=t[s.getMonth()],l=s.getFullYear();return`${a} ${o} ${l}`},formatPrice(e){return"฿"+new Intl.NumberFormat("th-TH",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},formatPercent(e){return new Intl.NumberFormat("th-TH").format(e)+"%"},onStartDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.startDate=t.toISOString())},onEndDateChange(e){const t=new Date(e.target.value);isNaN(t)||(this.endDate=t.toISOString())},sortColumn(e){"Transaction Date"===e&&(this.sortDirection="asc"===this.sortDirection?"desc":"asc",this.sortIcon="asc"===this.sortDirection?"arrow_downward":"arrow_upward",this.filteredOrders.sort(((e,t)=>{const s=new Date(e.paid_date),a=new Date(t.paid_date);return"asc"===this.sortDirection?s-a:a-s})))},async fetchOrders(e,t){try{const s=await re.A.get("http://127.0.0.1:3333/orders/date-range",{params:{start_date:e,end_date:t}});this.orders=s.data.orders,this.filteredOrders=this.orders,console.log("Data",this.orders),this.orders.sort(((e,t)=>{const s=new Date(e.order_date),a=new Date(t.order_date);return s-a}))}catch(s){console.error("Error fetching orders data:",s)}},async fetchLookupData(){try{const[e,t,s]=await Promise.all([re.A.get("http://127.0.0.1:3333/customers"),re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/menu-types")]);this.customers=e.data,this.menus=t.data,this.menu_types=s.data}catch(e){console.error("Error fetching lookup data:",e)}},getCustomerName(e){const t=this.customers.find((t=>t.user_id===e));return t?t.name:null},getMenuName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMenuEngName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuTypeName(e){const t=this.menu_types.find((t=>t.id===e));return t?t.name:null},getStatusText(e){return"confirm"===e?"ยืนยันการสั่งซื้อแล้ว":"ยังไม่ได้ยืนยันการสั่งซื้อ"},getStatusClass(e){return"confirm"===e?"text-white bg-green-500":"text-white bg-red-500"},changeDate(e){const t=new Date(this.startDate);t.setDate(t.getDate()+e),this.startDate=t.toISOString().split("T")[0];const s=new Date(this.endDate);s.setDate(s.getDate()+e),this.endDate=s.toISOString().split("T")[0],this.fetchOrdersData()},setToday(){const e=(new Date).toISOString().split("T")[0];this.startDate=e,this.endDate=e,this.fetchOrdersData()},fetchOrdersData(){this.startDate&&this.endDate&&this.fetchOrders(this.startDate,this.endDate)},shouldDisplayOrderDate(e,t){return 0===e||this.orders[e-1].order_date!==t},getOrderDateRowspan(e,t){let s=0;for(let a=t;a<this.orders.length;a++){if(this.orders[a].order_date!==e)break;s++}return s},onViewDetails(e){this.selectedDailySaleDetail={...e},this.isDetailModalOpen=!0},closeDetailModal(){this.isDetailModalOpen=!1,this.selectedDailySaleDetail={}},formatLabel(e){const t={paid_date:"Transaction Date",customer_id:"Customer's Name",package_type_id:"Package Type",package_id:"Package/Purchase Details",promotion_type_id:"Sales Category",package_price:"Package Price",package_detail:"Details",discount:"Additional Discount",extra_charge:"% Extra Charge",extra_charge_price:"Extra Charge Value",total_package_price:"Purchase Value",total_delivery_price:"ค่าจัดส่งรวม",total_price:"ยอดขายรวม",payment_type_id:"วิธีการชำระเงิน",seller_name_id:"Sales Rep"};return t[e]||e},openConfirmSatatusModal(e){this.selectedOrder=e,this.isConfirmStatusModalOpen=!0},closeConfirmStatusModal(){this.isConfirmStatusModalOpen=!1,this.selectedPaidDate=""},async confirmStatus(){try{const e="confirm"===this.selectedOrder.status?"pending":"confirm",t={status:e},s=await re.A.put(`http://127.0.0.1:3333/order/${this.selectedOrder.id}/status`,t);if(await this.fetchOrders(),200!==s.status)throw new Error("Unexpected response status");{const e=s.data.data,t=this.orders.findIndex((t=>t.id===e.id));-1!==t&&(this.orders[t]=e),this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!")}}catch(e){console.error("Error updating payment status:",e),console.error("Error response data:",e.response?.data||"No additional data"),this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}this.closeConfirmStatusModal()},async confirmMultipleOrders(){if(0===this.selectedOrders.length)return;const e=this.selectedOrders.map((e=>e.id));console.log("Selected Orders:",this.selectedOrders);try{const t=await fetch("http://127.0.0.1:3333/order/update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_ids:e,status:"confirm"})});await t.json(),t.ok?(this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!"),this.selectedOrders=[],await this.fetchOrders(this.startDate,this.endDate)):this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}catch(t){console.error("Error:",t),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเชื่อมต่อ!")}},async pendingMultipleOrders(){if(0===this.selectedOrders.length)return;const e=this.selectedOrders.map((e=>e.id));try{const t=await fetch("http://127.0.0.1:3333/order/update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_ids:e,status:"pending"})});await t.json(),t.ok?(this.showSuccessToastNotification("อัปเดตสถานะสำเร็จ!"),this.selectedOrders=[],await this.fetchOrders(this.startDate,this.endDate)):this.showErrorToastNotification("เกิดข้อผิดพลาดในการอัปเดตสถานะ!")}catch(t){console.error("Error:",t),this.showErrorToastNotification("เกิดข้อผิดพลาดในการเชื่อมต่อ!")}},selectOrder(e){this.selectedOrders.includes(e)?this.selectedOrders=this.selectedOrders.filter((t=>t.id!==e.id)):this.selectedOrders.push(e)},toggleSelectAll(e){e.target.checked?this.selectedOrders=[...this.filteredOrders]:this.selectedOrders=[],this.isAllSelected=e.target.checked},showSuccessToastNotification(e){this.toastSuccessMessage=e,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1}),3e3)},showFailToastNotification(e){this.toastFailMessage=e,this.showFailToast=!0,setTimeout((()=>{this.showFailToast=!1}),3e3)},showErrorToastNotification(e){this.toastErrorMessage=e,this.showErrorToast=!0,setTimeout((()=>{this.showErrorToast=!1}),3e3)},handlePrint(){this.$refs.printTable.print()}},created(){this.filteredOrders=this.orders,this.fetchLookupData(),this.fetchOrders(this.selectedDate)},mounted(){this.fetchLookupData(),this.fetchOrders(this.selectedDate),this.setToday(),this.$nextTick((()=>{(0,oc.A)(this.$refs.startDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.startDate=t,this.fetchOrdersData()}}),(0,oc.A)(this.$refs.endDatepicker,{dateFormat:"Y-m-d",todayButton:!0,defaultDate:new Date,onChange:(e,t)=>{this.endDate=t,this.fetchOrdersData()}})})),console.log("VueToPrint loaded"),console.log(this.$refs.printContent)},watch:{selectedOrders(){this.isAllSelected=this.selectedOrders.length===this.filteredOrders.length}}};const kA=(0,ce.A)(yA,[["render",mA],["__scopeId","data-v-e64a41cc"]]);var bA=kA;const xA={class:"mt-4 flex"},fA={class:"w-1/5"},wA={class:"mb-4"},vA={class:"flex items-center space-x-3 py-2"},_A={class:"mb-4 space-y-2"},LA=["onClick"],DA={class:"w-4/5 p-4"},CA={class:"font-bold text-xl mb-4"},PA={key:0,class:"text-center text-gray-600"},MA={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3"},TA={class:"mb-4"},SA=["src"],EA={key:1,class:"bg-gray-100 w-full h-48 rounded-md flex items-center justify-center"},RA={class:"text-lg font-semibold block"},AA={class:"block"},FA={class:"block text-custom-orange font-bold"},OA={class:"text-gray-700 text-sm"},XA={class:"mr-2"},zA={class:"mr-2"},NA={class:"mr-2"},QA={class:"mr-2"},VA={class:"mt-auto flex w-full space-x-2"},IA={class:"flex items-center justify-center w-1/2 space-x-2 p-2"},BA=["onClick"],jA=["onUpdate:modelValue"],UA=["onClick"],$A={class:"w-1/2 p-2 flex justify-end"},WA=["onClick"];function qA(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[19]||(t[19]=(0,o.Lk)("h1",{class:"mt-4 font-bold text-custom-orange text-2xl mb-4 text-center"},"Premium Health",-1)),(0,o.Lk)("div",xA,[(0,o.Lk)("div",fA,[(0,o.Lk)("div",wA,[(0,o.Lk)("div",vA,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>i.changeDate(-1)),class:"flex items-center"},t[6]||(t[6]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[7]||(t[7]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>i.changeDate(1)),class:"flex items-center"},t[8]||(t[8]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{type:"date",id:"menuDate","onUpdate:modelValue":t[3]||(t[3]=e=>n.selectedDate=e),class:"p-2 border rounded-md w-auto",onChange:t[4]||(t[4]=(...e)=>i.fetchMenusForSelectedDate&&i.fetchMenusForSelectedDate(...e))},null,544),[[a.Jo,n.selectedDate]])])]),t[9]||(t[9]=(0,o.Lk)("h1",{class:"font-bold text-xl mb-4"},"ฟิลเตอร์เมนู",-1)),(0,o.Lk)("div",_A,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>n.selectedMealType=""),class:(0,r.C4)(["w-full text-left py-2 hover:text-custom-orange",""===n.selectedMealType?"text-custom-orange font-bold":"text-gray-600"])}," ทุกประเภท ",2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredMealTypes,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e.id,onClick:t=>n.selectedMealType=e.id,class:(0,r.C4)(["w-full py-2 text-left hover:text-custom-orange",n.selectedMealType===e.id?"text-custom-orange font-bold":"text-gray-600"])},(0,r.v_)(e.name),11,LA)))),128))])]),(0,o.Lk)("div",DA,[(0,o.Lk)("h1",CA,"รายการอาหารประจำวันที่ "+(0,r.v_)(i.formatDate(n.selectedDate))+" ("+(0,r.v_)(i.formatDateEng(n.selectedDate))+")",1),0===n.todayMenus.length?((0,o.uX)(),(0,o.CE)("div",PA,t[10]||(t[10]=[(0,o.Lk)("strong",{class:"text-2xl"},"ไม่มีเมนู",-1)]))):(0,o.Q3)("",!0),(0,o.Lk)("div",MA,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredMenus,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"p-4 border rounded-lg shadow-md bg-white flex flex-col h-full mb-6"},[(0,o.Lk)("div",TA,[i.getMenuImage(e.menu_id)?((0,o.uX)(),(0,o.CE)("img",{key:0,src:`http://127.0.0.1:3333/images/${i.getMenuImage(e.menu_id)}`,alt:"Menu Image",class:"min-h-48 max-h-48 w-full object-cover rounded"},null,8,SA)):((0,o.uX)(),(0,o.CE)("div",EA,t[11]||(t[11]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-4xl text-gray-500"}," hide_image ",-1)])))]),(0,o.Lk)("span",RA,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("span",AA,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("span",FA,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("div",OA,[(0,o.Lk)("span",XA,(0,r.v_)(i.getMenuCal(e.menu_id))+" Cal",1),(0,o.Lk)("span",zA,[t[12]||(t[12]=(0,o.eW)("|")),t[13]||(t[13]=(0,o.Lk)("strong",null," Protein: ",-1)),(0,o.eW)(" "+(0,r.v_)(i.getMenuProtein(e.menu_id))+" g",1)]),(0,o.Lk)("span",NA,[t[14]||(t[14]=(0,o.eW)("|")),t[15]||(t[15]=(0,o.Lk)("strong",null," Carbohydrate: ",-1)),(0,o.eW)((0,r.v_)(i.getMenuCarb(e.menu_id))+" g",1)]),(0,o.Lk)("span",QA,[t[16]||(t[16]=(0,o.eW)("|")),t[17]||(t[17]=(0,o.Lk)("strong",null," Fat: ",-1)),(0,o.eW)((0,r.v_)(i.getMenuFat(e.menu_id))+" g",1)])]),(0,o.Lk)("div",VA,[(0,o.Lk)("div",IA,[(0,o.Lk)("button",{onClick:t=>i.adjustQuantity(e,-1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"-",8,BA),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,min:"0",placeholder:"จำนวน",class:"p-2 border rounded-md w-16 text-center input-no-spinner"},null,8,jA),[[a.Jo,e.quantity,void 0,{number:!0}]]),(0,o.Lk)("button",{onClick:t=>i.adjustQuantity(e,1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"+",8,UA)]),(0,o.Lk)("div",$A,[(0,o.Lk)("button",{onClick:t=>i.orderMenu(e),class:"px-4 py-2 w-full bg-custom-orange text-white rounded-md hover:bg-custom-orange-hover transition flex items-center space-x-2 justify-center"},t[18]||(t[18]=[(0,o.Lk)("span",{class:"material-symbols-outlined"}," shopping_cart ",-1),(0,o.Lk)("span",null,"สั่งซื้อ",-1)]),8,WA)])])])))),128))])])])],64)}var JA={data(){return{menus:[],todayMenus:[],meal_types:[],selectedDate:this.getTodayDate(),selectedMealType:""}},computed:{filteredMenus(){return 0===this.todayMenus.length?[]:this.selectedMealType?this.todayMenus.filter((e=>this.getMealTypeID(e.menu_id)===this.selectedMealType)):this.todayMenus},filteredMealTypes(){const e=new Set(this.todayMenus.map((e=>this.getMealTypeID(e.menu_id))));return this.meal_types.filter((t=>e.has(t.id)))}},methods:{getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusForSelectedDate()},setToday(){this.selectedDate=this.getTodayDate(),this.fetchMenusForSelectedDate()},async fetchMenusForSelectedDate(){try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-ph/menus-by-day/${this.selectedDate}`);console.log("API Response:",e.data),e.data.menus&&e.data.menus.length>0?(this.todayMenus=e.data.menus,this.todayMenus.forEach((e=>{e.quantity=0})),console.log("Date",this.selectedDate)):this.todayMenus=[]}catch(e){this.todayMenus=[]}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},getMenuCal(e){const t=this.menus.find((t=>t.id===e));return t?t.cal:null},getMenuProtein(e){const t=this.menus.find((t=>t.id===e));return t?t.protein:null},getMenuFat(e){const t=this.menus.find((t=>t.id===e));return t?t.fat:null},getMenuCarb(e){const t=this.menus.find((t=>t.id===e));return t?t.carb:null},getMenuImage(e){const t=this.menus.find((t=>t.id===e));return t?t.image:null},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),a=s.getDate(),o=t[s.getMonth()],l=s.getFullYear();return`${a} ${o} ${l}`},formatDateEng(e){const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e).toLocaleDateString("en-US",t);return s},orderMenu(e){if(e.quantity&&e.quantity>0){const t=e.meal_type_id;re.A.post("http://127.0.0.1:3333/order",{menu_id:e.menu_id,quantity:e.quantity,order_date:this.selectedDate,meal_type_id:t}).then((t=>{console.log("Order Success:",t.data),alert(`สั่งซื้อ ${e.quantity} ชิ้น ${this.getMenuEnglishName(e.menu_id)} สำหรับวันที่ ${this.selectedDate}`),e.quantity=0})).catch((e=>{console.error("Order Error:",e),alert("เกิดข้อผิดพลาดในการสั่งซื้อ")}))}else alert("กรุณาระบุจำนวนที่ต้องการ")},adjustQuantity(e,t){const s=e.quantity+t;s>=0&&(e.quantity=s)}},created(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},mounted(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},watch:{selectedDate(){this.fetchMenusForSelectedDate()}}};const ZA=(0,ce.A)(JA,[["render",qA],["__scopeId","data-v-20aa45c2"]]);var KA=ZA;const YA={class:"mt-4 flex"},HA={class:"w-1/5"},GA={class:"mb-4"},eF={class:"flex items-center space-x-3 py-2"},tF={class:"mb-4 space-y-2"},sF=["onClick"],aF={class:"w-4/5 p-4"},oF={class:"font-bold text-xl mb-4"},lF={key:0,class:"text-center text-gray-600"},rF={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3"},nF={class:"mb-4"},iF=["src"],dF={key:1,class:"bg-gray-100 w-full h-48 rounded-md flex items-center justify-center"},cF={class:"text-lg font-semibold block"},uF={class:"block"},pF={class:"block text-custom-orange font-bold"},hF={class:"text-gray-700 text-sm"},gF={class:"mr-2"},mF={class:"mr-2"},yF={class:"mr-2"},kF={class:"mr-2"},bF={class:"mt-auto flex w-full space-x-2"},xF={class:"flex items-center justify-center w-1/2 space-x-2 p-2"},fF=["onClick"],wF=["onUpdate:modelValue"],vF=["onClick"],_F={class:"w-1/2 p-2 flex justify-end"},LF=["onClick"];function DF(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[19]||(t[19]=(0,o.Lk)("h1",{class:"mt-4 font-bold text-custom-orange text-2xl mb-4 text-center"},"Happy Healthy Box",-1)),(0,o.Lk)("div",YA,[(0,o.Lk)("div",HA,[(0,o.Lk)("div",GA,[(0,o.Lk)("div",eF,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>i.changeDate(-1)),class:"flex items-center"},t[6]||(t[6]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[7]||(t[7]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>i.changeDate(1)),class:"flex items-center"},t[8]||(t[8]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{type:"date",id:"menuDate","onUpdate:modelValue":t[3]||(t[3]=e=>n.selectedDate=e),class:"p-2 border rounded-md w-auto",onChange:t[4]||(t[4]=(...e)=>i.fetchMenusForSelectedDate&&i.fetchMenusForSelectedDate(...e))},null,544),[[a.Jo,n.selectedDate]])])]),t[9]||(t[9]=(0,o.Lk)("h1",{class:"font-bold text-xl mb-4"},"ประเภทเมนู",-1)),(0,o.Lk)("div",tF,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>n.selectedMealType=""),class:(0,r.C4)(["w-full text-left py-2 hover:text-custom-orange",""===n.selectedMealType?"text-custom-orange font-bold":"text-gray-600"])}," ทุกประเภท ",2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredMealTypes,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e.id,onClick:t=>n.selectedMealType=e.id,class:(0,r.C4)(["w-full py-2 text-left hover:text-custom-orange",n.selectedMealType===e.id?"text-custom-orange font-bold":"text-gray-600"])},(0,r.v_)(e.name),11,sF)))),128))])]),(0,o.Lk)("div",aF,[(0,o.Lk)("h1",oF,"รายการอาหารประจำวันที่ "+(0,r.v_)(i.formatDate(n.selectedDate))+" ("+(0,r.v_)(i.formatDateEng(n.selectedDate))+")",1),0===n.todayMenus.length?((0,o.uX)(),(0,o.CE)("div",lF,t[10]||(t[10]=[(0,o.Lk)("strong",{class:"text-2xl"},"ไม่มีเมนู",-1)]))):(0,o.Q3)("",!0),(0,o.Lk)("div",rF,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredMenus,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"p-4 border rounded-lg shadow-md bg-white flex flex-col h-full mb-6"},[(0,o.Lk)("div",nF,[i.getMenuImage(e.menu_id)?((0,o.uX)(),(0,o.CE)("img",{key:0,src:`http://127.0.0.1:3333/images/${i.getMenuImage(e.menu_id)}`,alt:"Menu Image",class:"min-h-48 max-h-48 w-full object-cover rounded"},null,8,iF)):((0,o.uX)(),(0,o.CE)("div",dF,t[11]||(t[11]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-4xl text-gray-500"}," hide_image ",-1)])))]),(0,o.Lk)("span",cF,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("span",uF,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("span",pF,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("div",hF,[(0,o.Lk)("span",gF,(0,r.v_)(i.getMenuCal(e.menu_id))+" Cal",1),(0,o.Lk)("span",mF,[t[12]||(t[12]=(0,o.eW)("|")),t[13]||(t[13]=(0,o.Lk)("strong",null," Protein: ",-1)),(0,o.eW)(" "+(0,r.v_)(i.getMenuProtein(e.menu_id))+" g",1)]),(0,o.Lk)("span",yF,[t[14]||(t[14]=(0,o.eW)("|")),t[15]||(t[15]=(0,o.Lk)("strong",null," Carbohydrate: ",-1)),(0,o.eW)((0,r.v_)(i.getMenuCarb(e.menu_id))+" g",1)]),(0,o.Lk)("span",kF,[t[16]||(t[16]=(0,o.eW)("|")),t[17]||(t[17]=(0,o.Lk)("strong",null," Fat: ",-1)),(0,o.eW)((0,r.v_)(i.getMenuFat(e.menu_id))+" g",1)])]),(0,o.Lk)("div",bF,[(0,o.Lk)("div",xF,[(0,o.Lk)("button",{onClick:t=>i.adjustQuantity(e,-1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"-",8,fF),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,min:"0",placeholder:"จำนวน",class:"p-2 border rounded-md w-16 text-center input-no-spinner"},null,8,wF),[[a.Jo,e.quantity,void 0,{number:!0}]]),(0,o.Lk)("button",{onClick:t=>i.adjustQuantity(e,1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"+",8,vF)]),(0,o.Lk)("div",_F,[(0,o.Lk)("button",{onClick:t=>i.orderMenu(e),class:"px-4 py-2 w-full bg-custom-orange text-white rounded-md hover:bg-custom-orange-hover transition flex items-center space-x-2 justify-center"},t[18]||(t[18]=[(0,o.Lk)("span",{class:"material-symbols-outlined"}," shopping_cart ",-1),(0,o.Lk)("span",null,"สั่งซื้อ",-1)]),8,LF)])])])))),128))])])])],64)}var CF={data(){return{menus:[],todayMenus:[],meal_types:[],selectedDate:this.getTodayDate(),selectedMealType:""}},computed:{filteredMenus(){return 0===this.todayMenus.length?[]:this.selectedMealType?this.todayMenus.filter((e=>this.getMealTypeID(e.menu_id)===this.selectedMealType)):this.todayMenus},filteredMealTypes(){const e=new Set(this.todayMenus.map((e=>this.getMealTypeID(e.menu_id))));return this.meal_types.filter((t=>e.has(t.id)))}},methods:{getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusForSelectedDate()},setToday(){this.selectedDate=this.getTodayDate(),this.fetchMenusForSelectedDate()},async fetchMenusForSelectedDate(){try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-hhb/menus-by-day/${this.selectedDate}`);console.log("API Response:",e.data),e.data.menus&&e.data.menus.length>0?(this.todayMenus=e.data.menus,this.todayMenus.forEach((e=>{e.quantity=0})),console.log("Date",this.selectedDate)):this.todayMenus=[]}catch(e){this.todayMenus=[]}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},getMenuCal(e){const t=this.menus.find((t=>t.id===e));return t?t.cal:null},getMenuProtein(e){const t=this.menus.find((t=>t.id===e));return t?t.protein:null},getMenuFat(e){const t=this.menus.find((t=>t.id===e));return t?t.fat:null},getMenuCarb(e){const t=this.menus.find((t=>t.id===e));return t?t.carb:null},getMenuImage(e){const t=this.menus.find((t=>t.id===e));return t?t.image:null},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),a=s.getDate(),o=t[s.getMonth()],l=s.getFullYear();return`${a} ${o} ${l}`},formatDateEng(e){const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e).toLocaleDateString("en-US",t);return s},orderMenu(e){if(e.quantity&&e.quantity>0){const t=e.meal_type_id;re.A.post("http://127.0.0.1:3333/order",{menu_id:e.menu_id,quantity:e.quantity,order_date:this.selectedDate,meal_type_id:t}).then((t=>{console.log("Order Success:",t.data),alert(`สั่งซื้อ ${e.quantity} ชิ้น ${this.getMenuEnglishName(e.menu_id)} สำหรับวันที่ ${this.selectedDate}`),e.quantity=0})).catch((e=>{console.error("Order Error:",e),alert("เกิดข้อผิดพลาดในการสั่งซื้อ")}))}else alert("กรุณาระบุจำนวนที่ต้องการ")},adjustQuantity(e,t){const s=e.quantity+t;s>=0&&(e.quantity=s)}},created(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},mounted(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},watch:{selectedDate(){this.fetchMenusForSelectedDate()}}};const PF=(0,ce.A)(CF,[["render",DF],["__scopeId","data-v-6085c5c5"]]);var MF=PF;const TF={class:"mt-4 flex"},SF={class:"w-1/5"},EF={class:"mb-4"},RF={class:"flex items-center space-x-3 py-2"},AF={class:"mb-4 space-y-2"},FF=["onClick"],OF={class:"w-4/5 p-4"},XF={class:"font-bold text-xl mb-4"},zF={key:0,class:"text-center text-gray-600"},NF={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3"},QF={class:"mb-4"},VF=["src"],IF={key:1,class:"bg-gray-100 w-full h-48 rounded-md flex items-center justify-center"},BF={class:"text-lg font-semibold block"},jF={class:"block"},UF={class:"block text-custom-orange font-bold"},$F={class:"text-gray-700 text-sm"},WF={class:"mr-2"},qF={class:"mr-2"},JF={class:"mr-2"},ZF={class:"mr-2"},KF={class:"mt-auto flex w-full space-x-2"},YF={class:"flex items-center justify-center w-1/2 space-x-2 p-2"},HF=["onClick"],GF=["onUpdate:modelValue"],eO=["onClick"],tO={class:"w-1/2 p-2 flex justify-end"},sO=["onClick"];function aO(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[19]||(t[19]=(0,o.Lk)("h1",{class:"mt-4 font-bold text-custom-orange text-2xl mb-4 text-center"},"Premium Health",-1)),(0,o.Lk)("div",TF,[(0,o.Lk)("div",SF,[(0,o.Lk)("div",EF,[(0,o.Lk)("div",RF,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>i.changeDate(-1)),class:"flex items-center"},t[6]||(t[6]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[7]||(t[7]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>i.changeDate(1)),class:"flex items-center"},t[8]||(t[8]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{type:"date",id:"menuDate","onUpdate:modelValue":t[3]||(t[3]=e=>n.selectedDate=e),class:"p-2 border rounded-md w-auto",onChange:t[4]||(t[4]=(...e)=>i.fetchMenusForSelectedDate&&i.fetchMenusForSelectedDate(...e))},null,544),[[a.Jo,n.selectedDate]])])]),t[9]||(t[9]=(0,o.Lk)("h1",{class:"font-bold text-xl mb-4"},"ฟิลเตอร์เมนู",-1)),(0,o.Lk)("div",AF,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>n.selectedMealType=""),class:(0,r.C4)(["w-full text-left py-2 hover:text-custom-orange",""===n.selectedMealType?"text-custom-orange font-bold":"text-gray-600"])}," ทุกประเภท ",2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredMealTypes,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e.id,onClick:t=>n.selectedMealType=e.id,class:(0,r.C4)(["w-full py-2 text-left hover:text-custom-orange",n.selectedMealType===e.id?"text-custom-orange font-bold":"text-gray-600"])},(0,r.v_)(e.name),11,FF)))),128))])]),(0,o.Lk)("div",OF,[(0,o.Lk)("h1",XF,"รายการอาหารประจำวันที่ "+(0,r.v_)(i.formatDate(n.selectedDate))+" ("+(0,r.v_)(i.formatDateEng(n.selectedDate))+")",1),0===n.todayMenus.length?((0,o.uX)(),(0,o.CE)("div",zF,t[10]||(t[10]=[(0,o.Lk)("strong",{class:"text-2xl"},"ไม่มีเมนู",-1)]))):(0,o.Q3)("",!0),(0,o.Lk)("div",NF,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredMenus,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"p-4 border rounded-lg shadow-md bg-white flex flex-col h-full mb-6"},[(0,o.Lk)("div",QF,[i.getMenuImage(e.menu_id)?((0,o.uX)(),(0,o.CE)("img",{key:0,src:`http://127.0.0.1:3333/images/${i.getMenuImage(e.menu_id)}`,alt:"Menu Image",class:"min-h-48 max-h-48 w-full object-cover rounded"},null,8,VF)):((0,o.uX)(),(0,o.CE)("div",IF,t[11]||(t[11]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-4xl text-gray-500"}," hide_image ",-1)])))]),(0,o.Lk)("span",BF,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("span",jF,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("span",UF,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("div",$F,[(0,o.Lk)("span",WF,(0,r.v_)(i.getMenuCal(e.menu_id))+" Cal",1),(0,o.Lk)("span",qF,[t[12]||(t[12]=(0,o.eW)("|")),t[13]||(t[13]=(0,o.Lk)("strong",null," Protein: ",-1)),(0,o.eW)(" "+(0,r.v_)(i.getMenuProtein(e.menu_id))+" g",1)]),(0,o.Lk)("span",JF,[t[14]||(t[14]=(0,o.eW)("|")),t[15]||(t[15]=(0,o.Lk)("strong",null," Carbohydrate: ",-1)),(0,o.eW)((0,r.v_)(i.getMenuCarb(e.menu_id))+" g",1)]),(0,o.Lk)("span",ZF,[t[16]||(t[16]=(0,o.eW)("|")),t[17]||(t[17]=(0,o.Lk)("strong",null," Fat: ",-1)),(0,o.eW)((0,r.v_)(i.getMenuFat(e.menu_id))+" g",1)])]),(0,o.Lk)("div",KF,[(0,o.Lk)("div",YF,[(0,o.Lk)("button",{onClick:t=>i.adjustQuantity(e,-1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"-",8,HF),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,min:"0",placeholder:"จำนวน",class:"p-2 border rounded-md w-16 text-center input-no-spinner"},null,8,GF),[[a.Jo,e.quantity,void 0,{number:!0}]]),(0,o.Lk)("button",{onClick:t=>i.adjustQuantity(e,1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"+",8,eO)]),(0,o.Lk)("div",tO,[(0,o.Lk)("button",{onClick:t=>i.orderMenu(e),class:"px-4 py-2 w-full bg-custom-orange text-white rounded-md hover:bg-custom-orange-hover transition flex items-center space-x-2 justify-center"},t[18]||(t[18]=[(0,o.Lk)("span",{class:"material-symbols-outlined"}," shopping_cart ",-1),(0,o.Lk)("span",null,"สั่งซื้อ",-1)]),8,sO)])])])))),128))])])])],64)}var oO={data(){return{menus:[],todayMenus:[],meal_types:[],selectedDate:this.getTodayDate(),selectedMealType:""}},computed:{filteredMenus(){return 0===this.todayMenus.length?[]:this.selectedMealType?this.todayMenus.filter((e=>this.getMealTypeID(e.menu_id)===this.selectedMealType)):this.todayMenus},filteredMealTypes(){const e=new Set(this.todayMenus.map((e=>this.getMealTypeID(e.menu_id))));return this.meal_types.filter((t=>e.has(t.id)))}},methods:{getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusForSelectedDate()},setToday(){this.selectedDate=this.getTodayDate(),this.fetchMenusForSelectedDate()},async fetchMenusForSelectedDate(){try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-lc/menus-by-day/${this.selectedDate}`);console.log("API Response:",e.data),e.data.menus&&e.data.menus.length>0?(this.todayMenus=e.data.menus,this.todayMenus.forEach((e=>{e.quantity=0})),console.log("Date",this.selectedDate)):this.todayMenus=[]}catch(e){this.todayMenus=[]}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},getMenuCal(e){const t=this.menus.find((t=>t.id===e));return t?t.cal:null},getMenuProtein(e){const t=this.menus.find((t=>t.id===e));return t?t.protein:null},getMenuFat(e){const t=this.menus.find((t=>t.id===e));return t?t.fat:null},getMenuCarb(e){const t=this.menus.find((t=>t.id===e));return t?t.carb:null},getMenuImage(e){const t=this.menus.find((t=>t.id===e));return t?t.image:null},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),a=s.getDate(),o=t[s.getMonth()],l=s.getFullYear();return`${a} ${o} ${l}`},formatDateEng(e){const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e).toLocaleDateString("en-US",t);return s},orderMenu(e){if(e.quantity&&e.quantity>0){const t=e.meal_type_id;re.A.post("http://127.0.0.1:3333/order",{menu_id:e.menu_id,quantity:e.quantity,order_date:this.selectedDate,meal_type_id:t}).then((t=>{console.log("Order Success:",t.data),alert(`สั่งซื้อ ${e.quantity} ชิ้น ${this.getMenuEnglishName(e.menu_id)} สำหรับวันที่ ${this.selectedDate}`),e.quantity=0})).catch((e=>{console.error("Order Error:",e),alert("เกิดข้อผิดพลาดในการสั่งซื้อ")}))}else alert("กรุณาระบุจำนวนที่ต้องการ")},adjustQuantity(e,t){const s=e.quantity+t;s>=0&&(e.quantity=s)}},created(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},mounted(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},watch:{selectedDate(){this.fetchMenusForSelectedDate()}}};const lO=(0,ce.A)(oO,[["render",aO],["__scopeId","data-v-1e6ee162"]]);var rO=lO;const nO={class:"mt-4 flex"},iO={class:"w-1/5"},dO={class:"mb-4"},cO={class:"flex items-center space-x-3 py-2"},uO={class:"mb-4 space-y-2"},pO=["onClick"],hO={class:"w-4/5 p-4"},gO={class:"font-bold text-xl mb-4"},mO={key:0,class:"text-center text-gray-600"},yO={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-3"},kO={class:"mb-4"},bO=["src"],xO={key:1,class:"bg-gray-100 w-full h-48 rounded-md flex items-center justify-center"},fO={class:"text-lg font-semibold block"},wO={class:"block"},vO={class:"block text-custom-orange font-bold"},_O={class:"text-gray-700 text-sm"},LO={class:"mr-2"},DO={class:"mr-2"},CO={class:"mr-2"},PO={class:"mr-2"},MO={class:"mt-auto flex w-full space-x-2"},TO={class:"flex items-center justify-center w-1/2 space-x-2 p-2"},SO=["onClick"],EO=["onUpdate:modelValue"],RO=["onClick"],AO={class:"w-1/2 p-2 flex justify-end"},FO=["onClick"];function OO(e,t,s,l,n,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[19]||(t[19]=(0,o.Lk)("h1",{class:"mt-4 font-bold text-custom-orange text-2xl mb-4 text-center"},"Premium Health",-1)),(0,o.Lk)("div",nO,[(0,o.Lk)("div",iO,[(0,o.Lk)("div",dO,[(0,o.Lk)("div",cO,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>i.changeDate(-1)),class:"flex items-center"},t[6]||(t[6]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_backward ",-1)])),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.setToday&&i.setToday(...e)),class:"flex items-center text-custom-orange hover:underline hover:text-custom-orange"},t[7]||(t[7]=[(0,o.Lk)("span",{class:"mr-2 font-bold"},"วันนี้",-1)])),(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>i.changeDate(1)),class:"flex items-center"},t[8]||(t[8]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-3xl text-custom-orange hover:text-custom-orange-hover"}," chevron_forward ",-1)])),(0,o.bo)((0,o.Lk)("input",{type:"date",id:"menuDate","onUpdate:modelValue":t[3]||(t[3]=e=>n.selectedDate=e),class:"p-2 border rounded-md w-auto",onChange:t[4]||(t[4]=(...e)=>i.fetchMenusForSelectedDate&&i.fetchMenusForSelectedDate(...e))},null,544),[[a.Jo,n.selectedDate]])])]),t[9]||(t[9]=(0,o.Lk)("h1",{class:"font-bold text-xl mb-4"},"ฟิลเตอร์เมนู",-1)),(0,o.Lk)("div",uO,[(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>n.selectedMealType=""),class:(0,r.C4)(["w-full text-left py-2 hover:text-custom-orange",""===n.selectedMealType?"text-custom-orange font-bold":"text-gray-600"])}," ทุกประเภท ",2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredMealTypes,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e.id,onClick:t=>n.selectedMealType=e.id,class:(0,r.C4)(["w-full py-2 text-left hover:text-custom-orange",n.selectedMealType===e.id?"text-custom-orange font-bold":"text-gray-600"])},(0,r.v_)(e.name),11,pO)))),128))])]),(0,o.Lk)("div",hO,[(0,o.Lk)("h1",gO,"รายการอาหารประจำวันที่ "+(0,r.v_)(i.formatDate(n.selectedDate))+" ("+(0,r.v_)(i.formatDateEng(n.selectedDate))+")",1),0===n.todayMenus.length?((0,o.uX)(),(0,o.CE)("div",mO,t[10]||(t[10]=[(0,o.Lk)("strong",{class:"text-2xl"},"ไม่มีเมนู",-1)]))):(0,o.Q3)("",!0),(0,o.Lk)("div",yO,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.filteredMenus,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"p-4 border rounded-lg shadow-md bg-white flex flex-col h-full mb-6"},[(0,o.Lk)("div",kO,[i.getMenuImage(e.menu_id)?((0,o.uX)(),(0,o.CE)("img",{key:0,src:`http://127.0.0.1:3333/images/${i.getMenuImage(e.menu_id)}`,alt:"Menu Image",class:"min-h-48 max-h-48 w-full object-cover rounded"},null,8,bO)):((0,o.uX)(),(0,o.CE)("div",xO,t[11]||(t[11]=[(0,o.Lk)("span",{class:"material-symbols-outlined text-4xl text-gray-500"}," hide_image ",-1)])))]),(0,o.Lk)("span",fO,(0,r.v_)(i.getMenuEnglishName(e.menu_id)),1),(0,o.Lk)("span",wO,(0,r.v_)(i.getMenuThaiName(e.menu_id)),1),(0,o.Lk)("span",vO,(0,r.v_)(i.getMealTypeName(i.getMealTypeID(e.menu_id))),1),(0,o.Lk)("div",_O,[(0,o.Lk)("span",LO,(0,r.v_)(i.getMenuCal(e.menu_id))+" Cal",1),(0,o.Lk)("span",DO,[t[12]||(t[12]=(0,o.eW)("|")),t[13]||(t[13]=(0,o.Lk)("strong",null," Protein: ",-1)),(0,o.eW)(" "+(0,r.v_)(i.getMenuProtein(e.menu_id))+" g",1)]),(0,o.Lk)("span",CO,[t[14]||(t[14]=(0,o.eW)("|")),t[15]||(t[15]=(0,o.Lk)("strong",null," Carbohydrate: ",-1)),(0,o.eW)((0,r.v_)(i.getMenuCarb(e.menu_id))+" g",1)]),(0,o.Lk)("span",PO,[t[16]||(t[16]=(0,o.eW)("|")),t[17]||(t[17]=(0,o.Lk)("strong",null," Fat: ",-1)),(0,o.eW)((0,r.v_)(i.getMenuFat(e.menu_id))+" g",1)])]),(0,o.Lk)("div",MO,[(0,o.Lk)("div",TO,[(0,o.Lk)("button",{onClick:t=>i.adjustQuantity(e,-1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"-",8,SO),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t=>e.quantity=t,min:"0",placeholder:"จำนวน",class:"p-2 border rounded-md w-16 text-center input-no-spinner"},null,8,EO),[[a.Jo,e.quantity,void 0,{number:!0}]]),(0,o.Lk)("button",{onClick:t=>i.adjustQuantity(e,1),class:"px-2 py-1 w-8 rounded-md text-white bg-custom-orange hover:bg-custom-orange-hover"},"+",8,RO)]),(0,o.Lk)("div",AO,[(0,o.Lk)("button",{onClick:t=>i.orderMenu(e),class:"px-4 py-2 w-full bg-custom-orange text-white rounded-md hover:bg-custom-orange-hover transition flex items-center space-x-2 justify-center"},t[18]||(t[18]=[(0,o.Lk)("span",{class:"material-symbols-outlined"}," shopping_cart ",-1),(0,o.Lk)("span",null,"สั่งซื้อ",-1)]),8,FO)])])])))),128))])])])],64)}var XO={data(){return{menus:[],todayMenus:[],meal_types:[],selectedDate:this.getTodayDate(),selectedMealType:""}},computed:{filteredMenus(){return 0===this.todayMenus.length?[]:this.selectedMealType?this.todayMenus.filter((e=>this.getMealTypeID(e.menu_id)===this.selectedMealType)):this.todayMenus},filteredMealTypes(){const e=new Set(this.todayMenus.map((e=>this.getMealTypeID(e.menu_id))));return this.meal_types.filter((t=>e.has(t.id)))}},methods:{getTodayDate(){const e=new Date,t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0");return`${t}-${s}-${a}`},changeDate(e){const t=new Date(this.selectedDate);t.setDate(t.getDate()+e),this.selectedDate=t.toISOString().split("T")[0],this.fetchMenusForSelectedDate()},setToday(){this.selectedDate=this.getTodayDate(),this.fetchMenusForSelectedDate()},async fetchMenusForSelectedDate(){try{const e=await re.A.get(`http://127.0.0.1:3333/setup-menu-fl/menus-by-day/${this.selectedDate}`);console.log("API Response:",e.data),e.data.menus&&e.data.menus.length>0?(this.todayMenus=e.data.menus,this.todayMenus.forEach((e=>{e.quantity=0})),console.log("Date",this.selectedDate)):this.todayMenus=[]}catch(e){this.todayMenus=[]}},async fetchLookupData(){try{const[e,t]=await Promise.all([re.A.get("http://127.0.0.1:3333/menus"),re.A.get("http://127.0.0.1:3333/meal-types")]);this.menus=e.data,this.meal_types=t.data}catch(e){console.error("Error fetching lookup data:",e)}},getMenuEnglishName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_english:null},getMenuThaiName(e){const t=this.menus.find((t=>t.id===e));return t?t.name_thai:null},getMealTypeID(e){const t=this.menus.find((t=>t.id===e));return t?t.meal_type_id:null},getMealTypeName(e){const t=this.meal_types.find((t=>t.id===e));return t?t.name:"null"},getMenuCal(e){const t=this.menus.find((t=>t.id===e));return t?t.cal:null},getMenuProtein(e){const t=this.menus.find((t=>t.id===e));return t?t.protein:null},getMenuFat(e){const t=this.menus.find((t=>t.id===e));return t?t.fat:null},getMenuCarb(e){const t=this.menus.find((t=>t.id===e));return t?t.carb:null},getMenuImage(e){const t=this.menus.find((t=>t.id===e));return t?t.image:null},formatDate(e){const t=["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],s=new Date(e),a=s.getDate(),o=t[s.getMonth()],l=s.getFullYear();return`${a} ${o} ${l}`},formatDateEng(e){const t={year:"numeric",month:"long",day:"numeric"},s=new Date(e).toLocaleDateString("en-US",t);return s},orderMenu(e){if(e.quantity&&e.quantity>0){const t=e.meal_type_id;re.A.post("http://127.0.0.1:3333/order",{menu_id:e.menu_id,quantity:e.quantity,order_date:this.selectedDate,meal_type_id:t}).then((t=>{console.log("Order Success:",t.data),alert(`สั่งซื้อ ${e.quantity} ชิ้น ${this.getMenuEnglishName(e.menu_id)} สำหรับวันที่ ${this.selectedDate}`),e.quantity=0})).catch((e=>{console.error("Order Error:",e),alert("เกิดข้อผิดพลาดในการสั่งซื้อ")}))}else alert("กรุณาระบุจำนวนที่ต้องการ")},adjustQuantity(e,t){const s=e.quantity+t;s>=0&&(e.quantity=s)}},created(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},mounted(){this.fetchLookupData(),this.fetchMenusForSelectedDate()},watch:{selectedDate(){this.fetchMenusForSelectedDate()}}};const zO=(0,ce.A)(XO,[["render",OO],["__scopeId","data-v-640ca9fc"]]);var NO=zO;const QO=[{path:"/login",name:"login",component:Je,meta:{title:"เข้าสู่ระบบ - Absolute FitFood",layout:"BlankLayout"}},{path:"/register",name:"register",component:lt,meta:{title:"สมัครสมาชิก - Absolute FitFood",layout:"BlankLayout"}},{path:"/profile",name:"profile",component:Mt,meta:{title:"Profile - Absolute FitFood",layout:"SimpleLayout"}},{path:"/register-aff",name:"register-aff",component:qt,meta:{title:"สมัครสมาชิก AFF - Absolute FitFood",layout:"SimpleLayout"}},{path:"/master",name:"Home",component:is,beforeEnter:(e,t,s)=>{localStorage.getItem("token")?s():s("/login")},meta:{title:"หน้าแรก - Absolute FitFood"}},{path:"/customers",name:"ข้อมูลลูกค้า",component:iu,meta:{title:"ข้อมูลลูกค้า - Absolute FitFood",requiresAdmin:!0}},{path:"/customers-hhb",name:"ข้อมูลลูกค้าHHB",component:Op,meta:{title:"ข้อมูลลูกค้า - Absolute FitFood"}},{path:"/sale-records",name:"บันทึกการขาย",component:Or,meta:{title:"บันทึกการขาย - Absolute FitFood"}},{path:"/sale-records-additional",name:"บันทึกการขาย Additional",component:Vi,meta:{title:"บันทึกการขาย - Absolute FitFood"}},{path:"/daily-sale",name:"ยอดขายประจำวัน",component:nc,meta:{title:"ยอดขายประจำวัน - Absolute FitFood"}},{path:"/setup-menu-ph",name:"Setup Menu Premium Health",component:uL,meta:{title:"Setup Menu Premium Health - Absolute FitFood"}},{path:"/setup-menu-hhb",name:"Setup Menu Happy Healthy Box",component:MD,meta:{title:"Setup Menu Happy Healthy Box - Absolute FitFood"}},{path:"/setup-menu-lc",name:"Setup Menu Low Carb",component:$C,meta:{title:"Setup Menu Low Carb - Absolute FitFood"}},{path:"/setup-menu-fl",name:"Setup Menu Fat Loss",component:iM,meta:{title:"Setup Menu Fat Loss - Absolute FitFood",requiresAdmin:!0}},{path:"/setup-menu-bpd",name:"Setup Menu โรคความดัน",component:DT,meta:{title:"Setup Menu โรคความดัน - Absolute FitFood"}},{path:"/setup-menu-diabete",name:"Setup Menu โรคเบาหวาน",component:lR,meta:{title:"Setup Menu โรคเบาหวาน - Absolute FitFood"}},{path:"/setup-menu-fat-disease",name:"Setup Menu โรคไขมัน",component:BS,meta:{title:"Setup Menu โรคไขมัน - Absolute FitFood"}},{path:"/result-orders",name:"รายการอาหารประจำวันของลูกค้า",component:$R,meta:{title:"รายการอาหารประจำวันของลูกค้า - Absolute FitFood"}},{path:"/kitchen-orders",name:"Kitchen Orders",component:bA,meta:{title:"Kitchen Orders - Absolute FitFood"}},{path:"/test",name:"test",component:gu,meta:{title:"test - Absolute FitFood"}},{path:"/test2",name:"test2",component:Wu,meta:{title:"test2 - Absolute FitFood",layout:"SimpleLayout"}},{path:"/test3",name:"test3",component:Ku,meta:{title:"test3 - Absolute FitFood",layout:"SimpleLayout"}},{path:"/promotion-types",name:"ข้อมูลประเภทโปรโมชั่น",component:Ph,meta:{title:"Promotion Types - Absolute FitFood"}},{path:"/programs",name:"ข้อมูลโปรแกรม",component:Mg,meta:{title:"ข้อมูลโปรแกรม - Absolute FitFood"}},{path:"/packages",name:"ข้อมูลแพ็คเกจ",component:Ey,meta:{title:"ข้อมูลแพ็คเกจ - Absolute FitFood"}},{path:"/package-types",name:"ข้อมูลประเภทแพ็คเกจ",component:_k,meta:{title:"ข้อมูลประเภทแพ็คเกจ - Absolute FitFood"}},{path:"/zone-delivery-types",name:"ข้อมูลประเภทโซนการจัดส่ง",component:mb,meta:{title:"ข้อมูลประเภทโซนการจัดส่ง - Absolute FitFood"}},{path:"/zone-deliveries",name:"ข้อมูลโซนการจัดส่ง",component:xx,meta:{title:"ข้อมูลโซนการจัดส่ง - Absolute FitFood"}},{path:"/menu-types",name:"ข้อมูลโปรแกรมเมนู",component:pf,meta:{title:"ข้อมูลโปรแกรมเมนู - Absolute FitFood"}},{path:"/meal-types",name:"ข้อมูลประเภทเมนู",component:hw,meta:{title:"ข้อมูลประเภทเมนู - Absolute FitFood"}},{path:"/menus",name:"ข้อมูลเมนู",component:Jv,meta:{title:"ข้อมูลเมนู - Absolute FitFood"}},{path:"/premium-health",name:"premium health",component:KA,alias:"/",meta:{title:"premium health - Absolute FitFood",layout:"SimpleLayout"}},{path:"/happy-healthy-box",name:"happy healthy box",component:MF,meta:{title:"happy healthy box - Absolute FitFood",layout:"SimpleLayout"}},{path:"/low-carb",name:"low carb",component:rO,meta:{title:"Low Carb - Absolute FitFood",layout:"SimpleLayout"}},{path:"/fat-loss",name:"fat loss",component:NO,meta:{title:"Fat Loss - Absolute FitFood",layout:"SimpleLayout"}}],VO=(0,ze.aE)({history:(0,ze.LA)(),routes:QO});VO.beforeEach(((e,t,s)=>{e.meta.title&&(document.title=e.meta.title);const a=Xe.getters.getUserRole;if(console.log("Current user role:",a),e.meta.requiresAdmin&&"admin"!==a)return s({name:"login"});s()}));var IO=VO;const BO=(0,a.Ef)(Ae);BO.use(Xe),BO.use(IO),BO.mount("#app")}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,s),l.exports}s.m=e,function(){var e=[];s.O=function(t,a,o,l){if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],l=e[c][2];for(var n=!0,i=0;i<a.length;i++)(!1&l||r>=l)&&Object.keys(s.O).every((function(e){return s.O[e](a[i])}))?a.splice(i--,1):(n=!1,l<r&&(r=l));if(n){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[a,o,l]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,l,r=a[0],n=a[1],i=a[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(i)var c=i(s)}for(t&&t(a);d<r.length;d++)l=r[d],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(c)},a=self["webpackChunkfitfood_frontend"]=self["webpackChunkfitfood_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(914)}));a=s.O(a)})();
//# sourceMappingURL=app.9423d2b4.js.map